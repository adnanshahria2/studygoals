var xx=Object.defineProperty,Ex=Object.defineProperties;var Tx=Object.getOwnPropertyDescriptors;var rc=Object.getOwnPropertySymbols,Ix=Object.getPrototypeOf,Ng=Object.prototype.hasOwnProperty,Rg=Object.prototype.propertyIsEnumerable,Sx=Reflect.get;var Ld=(i,e,t)=>e in i?xx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ht=(i,e)=>{for(var t in e||(e={}))Ng.call(e,t)&&Ld(i,t,e[t]);if(rc)for(var t of rc(e))Rg.call(e,t)&&Ld(i,t,e[t]);return i},jn=(i,e)=>Ex(i,Tx(e));var Dg=i=>typeof i=="symbol"?i:i+"",Fd=(i,e)=>{var t={};for(var r in i)Ng.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&rc)for(var r of rc(i))e.indexOf(r)<0&&Rg.call(i,r)&&(t[r]=i[r]);return t};var bx=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Vg=(i,e,t)=>Ld(i,typeof e!="symbol"?e+"":e,t);var jg=(i,e,t)=>Sx(Ix(i),t,e);var Z=(i,e,t)=>new Promise((r,o)=>{var l=p=>{try{d(t.next(p))}catch(v){o(v)}},c=p=>{try{d(t.throw(p))}catch(v){o(v)}},d=p=>p.done?r(p.value):Promise.resolve(p.value).then(l,c);d((t=t.apply(i,e)).next())});var DS=bx(wr=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Cv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bd={exports:{}},Ya={},zd={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Ax(){if(Og)return je;Og=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,K={};function U(O,W,we){this.props=O,this.context=W,this.refs=K,this.updater=we||V}U.prototype.isReactComponent={},U.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=U.prototype;function Q(O,W,we){this.props=O,this.context=W,this.refs=K,this.updater=we||V}var H=Q.prototype=new ie;H.constructor=Q,z(H,U.prototype),H.isPureReactComponent=!0;var te=Array.isArray,me=Object.prototype.hasOwnProperty,le={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function T(O,W,we){var Pe,Re={},Oe=null,Fe=null;if(W!=null)for(Pe in W.ref!==void 0&&(Fe=W.ref),W.key!==void 0&&(Oe=""+W.key),W)me.call(W,Pe)&&!N.hasOwnProperty(Pe)&&(Re[Pe]=W[Pe]);var $e=arguments.length-2;if($e===1)Re.children=we;else if(1<$e){for(var Ye=Array($e),mt=0;mt<$e;mt++)Ye[mt]=arguments[mt+2];Re.children=Ye}if(O&&O.defaultProps)for(Pe in $e=O.defaultProps,$e)Re[Pe]===void 0&&(Re[Pe]=$e[Pe]);return{$$typeof:i,type:O,key:Oe,ref:Fe,props:Re,_owner:le.current}}function b(O,W){return{$$typeof:i,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function k(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(we){return W[we]})}var R=/\/+/g;function A(O,W){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):W.toString(36)}function fe(O,W,we,Pe,Re){var Oe=typeof O;(Oe==="undefined"||Oe==="boolean")&&(O=null);var Fe=!1;if(O===null)Fe=!0;else switch(Oe){case"string":case"number":Fe=!0;break;case"object":switch(O.$$typeof){case i:case e:Fe=!0}}if(Fe)return Fe=O,Re=Re(Fe),O=Pe===""?"."+A(Fe,0):Pe,te(Re)?(we="",O!=null&&(we=O.replace(R,"$&/")+"/"),fe(Re,W,we,"",function(mt){return mt})):Re!=null&&(C(Re)&&(Re=b(Re,we+(!Re.key||Fe&&Fe.key===Re.key?"":(""+Re.key).replace(R,"$&/")+"/")+O)),W.push(Re)),1;if(Fe=0,Pe=Pe===""?".":Pe+":",te(O))for(var $e=0;$e<O.length;$e++){Oe=O[$e];var Ye=Pe+A(Oe,$e);Fe+=fe(Oe,W,we,Ye,Re)}else if(Ye=S(O),typeof Ye=="function")for(O=Ye.call(O),$e=0;!(Oe=O.next()).done;)Oe=Oe.value,Ye=Pe+A(Oe,$e++),Fe+=fe(Oe,W,we,Ye,Re);else if(Oe==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Fe}function de(O,W,we){if(O==null)return O;var Pe=[],Re=0;return fe(O,Pe,"","",function(Oe){return W.call(we,Oe,Re++)}),Pe}function Ve(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(we){(O._status===0||O._status===-1)&&(O._status=1,O._result=we)},function(we){(O._status===0||O._status===-1)&&(O._status=2,O._result=we)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Ne={current:null},re={transition:null},xe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:re,ReactCurrentOwner:le};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:de,forEach:function(O,W,we){de(O,function(){W.apply(this,arguments)},we)},count:function(O){var W=0;return de(O,function(){W++}),W},toArray:function(O){return de(O,function(W){return W})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=U,je.Fragment=t,je.Profiler=o,je.PureComponent=Q,je.StrictMode=r,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,je.act=ae,je.cloneElement=function(O,W,we){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Pe=z({},O.props),Re=O.key,Oe=O.ref,Fe=O._owner;if(W!=null){if(W.ref!==void 0&&(Oe=W.ref,Fe=le.current),W.key!==void 0&&(Re=""+W.key),O.type&&O.type.defaultProps)var $e=O.type.defaultProps;for(Ye in W)me.call(W,Ye)&&!N.hasOwnProperty(Ye)&&(Pe[Ye]=W[Ye]===void 0&&$e!==void 0?$e[Ye]:W[Ye])}var Ye=arguments.length-2;if(Ye===1)Pe.children=we;else if(1<Ye){$e=Array(Ye);for(var mt=0;mt<Ye;mt++)$e[mt]=arguments[mt+2];Pe.children=$e}return{$$typeof:i,type:O.type,key:Re,ref:Oe,props:Pe,_owner:Fe}},je.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},je.createElement=T,je.createFactory=function(O){var W=T.bind(null,O);return W.type=O,W},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:d,render:O}},je.isValidElement=C,je.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:Ve}},je.memo=function(O,W){return{$$typeof:v,type:O,compare:W===void 0?null:W}},je.startTransition=function(O){var W=re.transition;re.transition={};try{O()}finally{re.transition=W}},je.unstable_act=ae,je.useCallback=function(O,W){return Ne.current.useCallback(O,W)},je.useContext=function(O){return Ne.current.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O){return Ne.current.useDeferredValue(O)},je.useEffect=function(O,W){return Ne.current.useEffect(O,W)},je.useId=function(){return Ne.current.useId()},je.useImperativeHandle=function(O,W,we){return Ne.current.useImperativeHandle(O,W,we)},je.useInsertionEffect=function(O,W){return Ne.current.useInsertionEffect(O,W)},je.useLayoutEffect=function(O,W){return Ne.current.useLayoutEffect(O,W)},je.useMemo=function(O,W){return Ne.current.useMemo(O,W)},je.useReducer=function(O,W,we){return Ne.current.useReducer(O,W,we)},je.useRef=function(O){return Ne.current.useRef(O)},je.useState=function(O){return Ne.current.useState(O)},je.useSyncExternalStore=function(O,W,we){return Ne.current.useSyncExternalStore(O,W,we)},je.useTransition=function(){return Ne.current.useTransition()},je.version="18.3.1",je}var Mg;function Rf(){return Mg||(Mg=1,zd.exports=Ax()),zd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function Cx(){if(Lg)return Ya;Lg=1;var i=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,v){var x,E={},S=null,V=null;v!==void 0&&(S=""+v),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(V=p.ref);for(x in p)r.call(p,x)&&!l.hasOwnProperty(x)&&(E[x]=p[x]);if(d&&d.defaultProps)for(x in p=d.defaultProps,p)E[x]===void 0&&(E[x]=p[x]);return{$$typeof:e,type:d,key:S,ref:V,props:E,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=c,Ya.jsxs=c,Ya}var Fg;function kx(){return Fg||(Fg=1,Bd.exports=Cx()),Bd.exports}var y=kx(),X=Rf();const Px=Cv(X);var sc={},Ud={exports:{}},hn={},$d={exports:{}},qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function Nx(){return Bg||(Bg=1,(function(i){function e(re,xe){var ae=re.length;re.push(xe);e:for(;0<ae;){var O=ae-1>>>1,W=re[O];if(0<o(W,xe))re[O]=xe,re[ae]=W,ae=O;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var xe=re[0],ae=re.pop();if(ae!==xe){re[0]=ae;e:for(var O=0,W=re.length,we=W>>>1;O<we;){var Pe=2*(O+1)-1,Re=re[Pe],Oe=Pe+1,Fe=re[Oe];if(0>o(Re,ae))Oe<W&&0>o(Fe,Re)?(re[O]=Fe,re[Oe]=ae,O=Oe):(re[O]=Re,re[Pe]=ae,O=Pe);else if(Oe<W&&0>o(Fe,ae))re[O]=Fe,re[Oe]=ae,O=Oe;else break e}}return xe}function o(re,xe){var ae=re.sortIndex-xe.sortIndex;return ae!==0?ae:re.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],x=1,E=null,S=3,V=!1,z=!1,K=!1,U=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(re){for(var xe=t(v);xe!==null;){if(xe.callback===null)r(v);else if(xe.startTime<=re)r(v),xe.sortIndex=xe.expirationTime,e(p,xe);else break;xe=t(v)}}function te(re){if(K=!1,H(re),!z)if(t(p)!==null)z=!0,Ve(me);else{var xe=t(v);xe!==null&&Ne(te,xe.startTime-re)}}function me(re,xe){z=!1,K&&(K=!1,ie(T),T=-1),V=!0;var ae=S;try{for(H(xe),E=t(p);E!==null&&(!(E.expirationTime>xe)||re&&!k());){var O=E.callback;if(typeof O=="function"){E.callback=null,S=E.priorityLevel;var W=O(E.expirationTime<=xe);xe=i.unstable_now(),typeof W=="function"?E.callback=W:E===t(p)&&r(p),H(xe)}else r(p);E=t(p)}if(E!==null)var we=!0;else{var Pe=t(v);Pe!==null&&Ne(te,Pe.startTime-xe),we=!1}return we}finally{E=null,S=ae,V=!1}}var le=!1,N=null,T=-1,b=5,C=-1;function k(){return!(i.unstable_now()-C<b)}function R(){if(N!==null){var re=i.unstable_now();C=re;var xe=!0;try{xe=N(!0,re)}finally{xe?A():(le=!1,N=null)}}else le=!1}var A;if(typeof Q=="function")A=function(){Q(R)};else if(typeof MessageChannel!="undefined"){var fe=new MessageChannel,de=fe.port2;fe.port1.onmessage=R,A=function(){de.postMessage(null)}}else A=function(){U(R,0)};function Ve(re){N=re,le||(le=!0,A())}function Ne(re,xe){T=U(function(){re(i.unstable_now())},xe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(re){re.callback=null},i.unstable_continueExecution=function(){z||V||(z=!0,Ve(me))},i.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<re?Math.floor(1e3/re):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(re){switch(S){case 1:case 2:case 3:var xe=3;break;default:xe=S}var ae=S;S=xe;try{return re()}finally{S=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(re,xe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=S;S=re;try{return xe()}finally{S=ae}},i.unstable_scheduleCallback=function(re,xe,ae){var O=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?O+ae:O):ae=O,re){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,re={id:x++,callback:xe,priorityLevel:re,startTime:ae,expirationTime:W,sortIndex:-1},ae>O?(re.sortIndex=ae,e(v,re),t(p)===null&&re===t(v)&&(K?(ie(T),T=-1):K=!0,Ne(te,ae-O))):(re.sortIndex=W,e(p,re),z||V||(z=!0,Ve(me))),re},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(re){var xe=S;return function(){var ae=S;S=xe;try{return re.apply(this,arguments)}finally{S=ae}}}})(qd)),qd}var zg;function Rx(){return zg||(zg=1,$d.exports=Nx()),$d.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Dx(){if(Ug)return hn;Ug=1;var i=Rf(),e=Rx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},E={};function S(n){return p.call(E,n)?!0:p.call(x,n)?!1:v.test(n)?E[n]=!0:(x[n]=!0,!1)}function V(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function z(n,s,a,h){if(s===null||typeof s=="undefined"||V(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function Q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ie,Q);U[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ie,Q);U[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ie,Q);U[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,s,a,h){var f=U.hasOwnProperty(s)?U[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,f,h)&&(a=null),h||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var te=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),le=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),re=Symbol.iterator;function xe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,O;function W(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var we=!1;function Pe(n,s){if(!n||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){h=$}n.call(s.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,P=g.length-1;1<=w&&0<=P&&f[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==g[P]){var D=`
`+f[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=P);break}}}finally{we=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function Re(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case le:return"Portal";case b:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case C:return(n._context.displayName||"Context")+".Provider";case R:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return s=n.displayName||null,s!==null?s:Oe(n.type)||"Memo";case Ve:s=n._payload,n=n._init;try{return Oe(n(s))}catch(a){}}return null}function Fe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ye(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mt(n){var s=Ye(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Te(n){n._valueTracker||(n._valueTracker=mt(n))}function We(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Ye(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function He(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(s){return n.body}}function Xt(n,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:n._wrapperState.initialChecked})}function Ut(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=$e(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function In(n,s){s=s.checked,s!=null&&H(n,"checked",s,!1)}function xr(n,s){In(n,s);var a=$e(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ni(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ni(n,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Pi(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ni(n,s,a){(s!=="number"||He(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Er=Array.isArray;function Tr(n,s,a,h){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+$e(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ia(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ri(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Er(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:$e(a)}}function Di(n,s){var a=$e(s.value),h=$e(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function oa(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Tt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Tt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ir,aa=(function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ir.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Wr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rs=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(n){Rs.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Ns[s]=Ns[n]})});function la(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ns.hasOwnProperty(n)&&Ns[n]?(""+s).trim():s+"px"}function ua(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=la(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var ca=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(n,s){if(s){if(ca[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=null;function Vi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ji=null,Sn=null,nr=null;function Oi(n){if(n=Oa(n)){if(typeof ji!="function")throw Error(t(280));var s=n.stateNode;s&&(s=vu(s),ji(n.stateNode,n.type,s))}}function rr(n){Sn?nr?nr.push(n):nr=[n]:Sn=n}function fa(){if(Sn){var n=Sn,s=nr;if(nr=Sn=null,Oi(n),s)for(n=0;n<s.length;n++)Oi(s[n])}}function Vs(n,s){return n(s)}function pa(){}var Sr=!1;function ma(n,s,a){if(Sr)return n(s,a);Sr=!0;try{return Vs(n,s,a)}finally{Sr=!1,(Sn!==null||nr!==null)&&(pa(),fa())}}function gt(n,s){var a=n.stateNode;if(a===null)return null;var h=vu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Mi=!1;if(d)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch(n){Mi=!1}function js(n,s,a,h,f,g,w,P,D){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(J){this.onError(J)}}var Os=!1,Li=null,zn=!1,ga=null,dh={onError:function(n){Os=!0,Li=n}};function Fi(n,s,a,h,f,g,w,P,D){Os=!1,Li=null,js.apply(dh,arguments)}function $l(n,s,a,h,f,g,w,P,D){if(Fi.apply(this,arguments),Os){if(Os){var $=Li;Os=!1,Li=null}else throw Error(t(198));zn||(zn=!0,ga=$)}}function Un(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ms(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function $n(n){if(Un(n)!==n)throw Error(t(188))}function ql(n){var s=n.alternate;if(!s){if(s=Un(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return $n(f),n;if(g===h)return $n(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,h=g;break}if(P===h){w=!0,h=f,a=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===a){w=!0,a=g,h=f;break}if(P===h){w=!0,h=g,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ya(n){return n=ql(n),n!==null?Bi(n):null}function Bi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Bi(n);if(s!==null)return s;n=n.sibling}return null}var zi=e.unstable_scheduleCallback,va=e.unstable_cancelCallback,Kl=e.unstable_shouldYield,fh=e.unstable_requestPaint,tt=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,Ls=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,_a=e.unstable_LowPriority,Hl=e.unstable_IdlePriority,Fs=null,fn=null;function Gl(n){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Fs,n,void 0,(n.current.flags&128)===128)}catch(s){}}var Yt=Math.clz32?Math.clz32:Xl,wa=Math.log,Ql=Math.LN2;function Xl(n){return n>>>=0,n===0?32:31-(wa(n)/Ql|0)|0}var Ui=64,$i=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bs(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?h=Gr(P):(g&=w,g!==0&&(h=Gr(g)))}else w=a&~f,w!==0?h=Gr(w):g!==0&&(h=Gr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-Yt(s),f=1<<a,h|=n[a],s&=~f;return h}function ph(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-Yt(g),P=1<<w,D=f[w];D===-1?((P&a)===0||(P&h)!==0)&&(f[w]=ph(P,s)):D<=s&&(n.expiredLanes|=P),g&=~P}}function pn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zs(){var n=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),n}function Qr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Xr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Yt(s),n[s]=a}function et(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Yt(a),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,a&=~g}}function Yr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-Yt(a),f=1<<h;f&s|n[h]&s&&(n[h]|=s),a&=~f}}var Me=0;function Jr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Yl,qi,Jl,Zl,eu,xa=!1,sr=[],jt=null,qn=null,Kn=null,Zr=new Map,An=new Map,ir=[],mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tu(n,s){switch(n){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Zr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":An.delete(s.pointerId)}}function rn(n,s,a,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Oa(s),s!==null&&qi(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function gh(n,s,a,h,f){switch(s){case"focusin":return jt=rn(jt,n,s,a,h,f),!0;case"dragenter":return qn=rn(qn,n,s,a,h,f),!0;case"mouseover":return Kn=rn(Kn,n,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Zr.set(g,rn(Zr.get(g)||null,n,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,An.set(g,rn(An.get(g)||null,n,s,a,h,f)),!0}return!1}function nu(n){var s=Ws(n.target);if(s!==null){var a=Un(s);if(a!==null){if(s=a.tag,s===13){if(s=Ms(a),s!==null){n.blockedOn=s,eu(n.priority,function(){Jl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ar(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ki(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Ds=h,a.target.dispatchEvent(h),Ds=null}else return s=Oa(a),s!==null&&qi(s),n.blockedOn=a,!1;s.shift()}return!0}function Us(n,s,a){Ar(n)&&a.delete(s)}function ru(){xa=!1,jt!==null&&Ar(jt)&&(jt=null),qn!==null&&Ar(qn)&&(qn=null),Kn!==null&&Ar(Kn)&&(Kn=null),Zr.forEach(Us),An.forEach(Us)}function Wn(n,s){n.blockedOn===s&&(n.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ru)))}function Hn(n){function s(f){return Wn(f,n)}if(0<sr.length){Wn(sr[0],n);for(var a=1;a<sr.length;a++){var h=sr[a];h.blockedOn===n&&(h.blockedOn=null)}}for(jt!==null&&Wn(jt,n),qn!==null&&Wn(qn,n),Kn!==null&&Wn(Kn,n),Zr.forEach(s),An.forEach(s),a=0;a<ir.length;a++)h=ir[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)nu(a),a.blockedOn===null&&ir.shift()}var Cr=te.ReactCurrentBatchConfig,es=!0;function it(n,s,a,h){var f=Me,g=Cr.transition;Cr.transition=null;try{Me=1,Ea(n,s,a,h)}finally{Me=f,Cr.transition=g}}function yh(n,s,a,h){var f=Me,g=Cr.transition;Cr.transition=null;try{Me=4,Ea(n,s,a,h)}finally{Me=f,Cr.transition=g}}function Ea(n,s,a,h){if(es){var f=Ki(n,s,a,h);if(f===null)Ch(n,s,h,$s,a),tu(n,h);else if(gh(f,n,s,a,h))h.stopPropagation();else if(tu(n,h),s&4&&-1<mh.indexOf(n)){for(;f!==null;){var g=Oa(f);if(g!==null&&Yl(g),g=Ki(n,s,a,h),g===null&&Ch(n,s,h,$s,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Ch(n,s,h,null,a)}}var $s=null;function Ki(n,s,a,h){if($s=null,n=Vi(h),n=Ws(n),n!==null)if(s=Un(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ms(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return $s=n,null}function Ta(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Ls:return 1;case Hr:return 4;case bn:case _a:return 16;case Hl:return 536870912;default:return 16}default:return 16}}var mn=null,Wi=null,sn=null;function Ia(){if(sn)return sn;var n,s=Wi,a=s.length,h,f="value"in mn?mn.value:mn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return sn=f.slice(n,1<h?1-h:void 0)}function Hi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function or(){return!0}function Sa(){return!1}function Ot(n){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?or:Sa,this.isPropagationStopped=Sa,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),s}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Ot(Gn),ar=ae({},Gn,{view:0,detail:0}),vh=Ot(ar),Qi,kr,ts,qs=ae({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ts&&(ts&&n.type==="mousemove"?(Qi=n.screenX-ts.screenX,kr=n.screenY-ts.screenY):kr=Qi=0,ts=n),Qi)},movementY:function(n){return"movementY"in n?n.movementY:kr}}),Xi=Ot(qs),ba=ae({},qs,{dataTransfer:0}),su=Ot(ba),Yi=ae({},ar,{relatedTarget:0}),Ji=Ot(Yi),iu=ae({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Pr=Ot(iu),ou=ae({},Gn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),au=Ot(ou),lu=ae({},Gn,{data:0}),Aa=Ot(lu),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=uu[n])?!!s[n]:!1}function lr(){return cu}var u=ae({},ar,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ot(u),_=ae({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ot(_),M=ae({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),q=Ot(M),oe=ae({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Ot(oe),St=ae({},qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Ot(St),Pt=[9,13,27,32],vt=d&&"CompositionEvent"in window,Cn=null;d&&"documentMode"in document&&(Cn=document.documentMode);var gn=d&&"TextEvent"in window&&!Cn,Ks=d&&(!vt||Cn&&8<Cn&&11>=Cn),eo=" ",Sp=!1;function bp(n,s){switch(n){case"keyup":return Pt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function vw(n,s){switch(n){case"compositionend":return Ap(s);case"keypress":return s.which!==32?null:(Sp=!0,eo);case"textInput":return n=s.data,n===eo&&Sp?null:n;default:return null}}function _w(n,s){if(to)return n==="compositionend"||!vt&&bp(n,s)?(n=Ia(),sn=Wi=mn=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ks&&s.locale!=="ko"?null:s.data;default:return null}}var ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ww[n.type]:s==="textarea"}function kp(n,s,a,h){rr(h),s=mu(s,"onChange"),0<s.length&&(a=new Gi("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Ca=null,ka=null;function xw(n){Hp(n,0)}function hu(n){var s=oo(n);if(We(s))return n}function Ew(n,s){if(n==="change")return s}var Pp=!1;if(d){var _h;if(d){var wh="oninput"in document;if(!wh){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),wh=typeof Np.oninput=="function"}_h=wh}else _h=!1;Pp=_h&&(!document.documentMode||9<document.documentMode)}function Rp(){Ca&&(Ca.detachEvent("onpropertychange",Dp),ka=Ca=null)}function Dp(n){if(n.propertyName==="value"&&hu(ka)){var s=[];kp(s,ka,n,Vi(n)),ma(xw,s)}}function Tw(n,s,a){n==="focusin"?(Rp(),Ca=s,ka=a,Ca.attachEvent("onpropertychange",Dp)):n==="focusout"&&Rp()}function Iw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hu(ka)}function Sw(n,s){if(n==="click")return hu(s)}function bw(n,s){if(n==="input"||n==="change")return hu(s)}function Aw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Qn=typeof Object.is=="function"?Object.is:Aw;function Pa(n,s){if(Qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Qn(n[f],s[f]))return!1}return!0}function Vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Vp(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vp(a)}}function Op(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Op(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Mp(){for(var n=window,s=He();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch(h){a=!1}if(a)n=s.contentWindow;else break;s=He(n.document)}return s}function xh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Cw(n){var s=Mp(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Op(a.ownerDocument.documentElement,a)){if(h!==null&&xh(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=jp(a,g);var w=jp(a,h);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kw=d&&"documentMode"in document&&11>=document.documentMode,no=null,Eh=null,Na=null,Th=!1;function Lp(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Th||no==null||no!==He(h)||(h=no,"selectionStart"in h&&xh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Na&&Pa(Na,h)||(Na=h,h=mu(Eh,"onSelect"),0<h.length&&(s=new Gi("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=no)))}function du(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ro={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Ih={},Fp={};d&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function fu(n){if(Ih[n])return Ih[n];if(!ro[n])return n;var s=ro[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Fp)return Ih[n]=s[a];return n}var Bp=fu("animationend"),zp=fu("animationiteration"),Up=fu("animationstart"),$p=fu("transitionend"),qp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(n,s){qp.set(n,s),l(s,[n])}for(var Sh=0;Sh<Kp.length;Sh++){var bh=Kp[Sh],Pw=bh.toLowerCase(),Nw=bh[0].toUpperCase()+bh.slice(1);ns(Pw,"on"+Nw)}ns(Bp,"onAnimationEnd"),ns(zp,"onAnimationIteration"),ns(Up,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns($p,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function Wp(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,$l(h,s,void 0,n),n.currentTarget=null}function Hp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var P=h[w],D=P.instance,$=P.currentTarget;if(P=P.listener,D!==g&&f.isPropagationStopped())break e;Wp(f,P,$),g=D}else for(w=0;w<h.length;w++){if(P=h[w],D=P.instance,$=P.currentTarget,P=P.listener,D!==g&&f.isPropagationStopped())break e;Wp(f,P,$),g=D}}}if(zn)throw n=ga,zn=!1,ga=null,n}function rt(n,s){var a=s[Vh];a===void 0&&(a=s[Vh]=new Set);var h=n+"__bubble";a.has(h)||(Gp(s,n,2,!1),a.add(h))}function Ah(n,s,a){var h=0;s&&(h|=4),Gp(a,n,h,s)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Da(n){if(!n[pu]){n[pu]=!0,r.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||Ah(a,!1,n),Ah(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[pu]||(s[pu]=!0,Ah("selectionchange",!1,s))}}function Gp(n,s,a,h){switch(Ta(s)){case 1:var f=it;break;case 4:f=yh;break;default:f=Ea}a=f.bind(null,s,a,n),f=void 0,!Mi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Ch(n,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;P!==null;){if(w=Ws(P),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}P=P.parentNode}}h=h.return}ma(function(){var $=g,J=Vi(a),ee=[];e:{var Y=qp.get(n);if(Y!==void 0){var ce=Gi,ge=n;switch(n){case"keypress":if(Hi(a)===0)break e;case"keydown":case"keyup":ce=m;break;case"focusin":ge="focus",ce=Ji;break;case"focusout":ge="blur",ce=Ji;break;case"beforeblur":case"afterblur":ce=Ji;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=q;break;case Bp:case zp:case Up:ce=Pr;break;case $p:ce=Ge;break;case"scroll":ce=vh;break;case"wheel":ce=Be;break;case"copy":case"cut":case"paste":ce=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=I}var ve=(s&4)!==0,yt=!ve&&n==="scroll",F=ve?Y!==null?Y+"Capture":null:Y;ve=[];for(var j=$,B;j!==null;){B=j;var se=B.stateNode;if(B.tag===5&&se!==null&&(B=se,F!==null&&(se=gt(j,F),se!=null&&ve.push(Va(j,se,B)))),yt)break;j=j.return}0<ve.length&&(Y=new ce(Y,ge,null,a,J),ee.push({event:Y,listeners:ve}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",Y&&a!==Ds&&(ge=a.relatedTarget||a.fromElement)&&(Ws(ge)||ge[Nr]))break e;if((ce||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,ce?(ge=a.relatedTarget||a.toElement,ce=$,ge=ge?Ws(ge):null,ge!==null&&(yt=Un(ge),ge!==yt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=$),ce!==ge)){if(ve=Xi,se="onMouseLeave",F="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(ve=I,se="onPointerLeave",F="onPointerEnter",j="pointer"),yt=ce==null?Y:oo(ce),B=ge==null?Y:oo(ge),Y=new ve(se,j+"leave",ce,a,J),Y.target=yt,Y.relatedTarget=B,se=null,Ws(J)===$&&(ve=new ve(F,j+"enter",ge,a,J),ve.target=B,ve.relatedTarget=yt,se=ve),yt=se,ce&&ge)t:{for(ve=ce,F=ge,j=0,B=ve;B;B=so(B))j++;for(B=0,se=F;se;se=so(se))B++;for(;0<j-B;)ve=so(ve),j--;for(;0<B-j;)F=so(F),B--;for(;j--;){if(ve===F||F!==null&&ve===F.alternate)break t;ve=so(ve),F=so(F)}ve=null}else ve=null;ce!==null&&Qp(ee,Y,ce,ve,!1),ge!==null&&yt!==null&&Qp(ee,yt,ge,ve,!0)}}e:{if(Y=$?oo($):window,ce=Y.nodeName&&Y.nodeName.toLowerCase(),ce==="select"||ce==="input"&&Y.type==="file")var _e=Ew;else if(Cp(Y))if(Pp)_e=bw;else{_e=Iw;var Se=Tw}else(ce=Y.nodeName)&&ce.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(_e=Sw);if(_e&&(_e=_e(n,$))){kp(ee,_e,a,J);break e}Se&&Se(n,Y,$),n==="focusout"&&(Se=Y._wrapperState)&&Se.controlled&&Y.type==="number"&&Ni(Y,"number",Y.value)}switch(Se=$?oo($):window,n){case"focusin":(Cp(Se)||Se.contentEditable==="true")&&(no=Se,Eh=$,Na=null);break;case"focusout":Na=Eh=no=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,Lp(ee,a,J);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Lp(ee,a,J)}var be;if(vt)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else to?bp(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ks&&a.locale!=="ko"&&(to||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&to&&(be=Ia()):(mn=J,Wi="value"in mn?mn.value:mn.textContent,to=!0)),Se=mu($,Ce),0<Se.length&&(Ce=new Aa(Ce,n,null,a,J),ee.push({event:Ce,listeners:Se}),be?Ce.data=be:(be=Ap(a),be!==null&&(Ce.data=be)))),(be=gn?vw(n,a):_w(n,a))&&($=mu($,"onBeforeInput"),0<$.length&&(J=new Aa("onBeforeInput","beforeinput",null,a,J),ee.push({event:J,listeners:$}),J.data=be))}Hp(ee,s)})}function Va(n,s,a){return{instance:n,listener:s,currentTarget:a}}function mu(n,s){for(var a=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=gt(n,a),g!=null&&h.unshift(Va(n,g,f)),g=gt(n,s),g!=null&&h.push(Va(n,g,f))),n=n.return}return h}function so(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Qp(n,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var P=a,D=P.alternate,$=P.stateNode;if(D!==null&&D===h)break;P.tag===5&&$!==null&&(P=$,f?(D=gt(a,g),D!=null&&w.unshift(Va(a,D,P))):f||(D=gt(a,g),D!=null&&w.push(Va(a,D,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Dw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function Xp(n){return(typeof n=="string"?n:""+n).replace(Dw,`
`).replace(Vw,"")}function gu(n,s,a){if(s=Xp(s),Xp(n)!==s&&a)throw Error(t(425))}function yu(){}var kh=null,Ph=null;function Nh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,Yp=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof Yp!="undefined"?function(n){return Yp.resolve(null).then(n).catch(Mw)}:Rh;function Mw(n){setTimeout(function(){throw n})}function Dh(n,s){var a=s,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),Hn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Hn(s)}function rs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Jp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var io=Math.random().toString(36).slice(2),ur="__reactFiber$"+io,ja="__reactProps$"+io,Nr="__reactContainer$"+io,Vh="__reactEvents$"+io,Lw="__reactListeners$"+io,Fw="__reactHandles$"+io;function Ws(n){var s=n[ur];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Nr]||a[ur]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Jp(n);n!==null;){if(a=n[ur])return a;n=Jp(n)}return s}n=a,a=n.parentNode}return null}function Oa(n){return n=n[ur]||n[Nr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function vu(n){return n[ja]||null}var jh=[],ao=-1;function ss(n){return{current:n}}function st(n){0>ao||(n.current=jh[ao],jh[ao]=null,ao--)}function nt(n,s){ao++,jh[ao]=n.current,n.current=s}var is={},$t=ss(is),on=ss(!1),Hs=is;function lo(n,s){var a=n.type.contextTypes;if(!a)return is;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function an(n){return n=n.childContextTypes,n!=null}function _u(){st(on),st($t)}function Zp(n,s,a){if($t.current!==is)throw Error(t(168));nt($t,s),nt(on,a)}function em(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Fe(n)||"Unknown",f));return ae({},a,h)}function wu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||is,Hs=$t.current,nt($t,n),nt(on,on.current),!0}function tm(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=em(n,s,Hs),h.__reactInternalMemoizedMergedChildContext=n,st(on),st($t),nt($t,n)):st(on),nt(on,a)}var Rr=null,xu=!1,Oh=!1;function nm(n){Rr===null?Rr=[n]:Rr.push(n)}function Bw(n){xu=!0,nm(n)}function os(){if(!Oh&&Rr!==null){Oh=!0;var n=0,s=Me;try{var a=Rr;for(Me=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Rr=null,xu=!1}catch(f){throw Rr!==null&&(Rr=Rr.slice(n+1)),zi(Ls,os),f}finally{Me=s,Oh=!1}}return null}var uo=[],co=0,Eu=null,Tu=0,kn=[],Pn=0,Gs=null,Dr=1,Vr="";function Qs(n,s){uo[co++]=Tu,uo[co++]=Eu,Eu=n,Tu=s}function rm(n,s,a){kn[Pn++]=Dr,kn[Pn++]=Vr,kn[Pn++]=Gs,Gs=n;var h=Dr;n=Vr;var f=32-Yt(h)-1;h&=~(1<<f),a+=1;var g=32-Yt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Dr=1<<32-Yt(s)+f|a<<f|h,Vr=g+n}else Dr=1<<g|a<<f|h,Vr=n}function Mh(n){n.return!==null&&(Qs(n,1),rm(n,1,0))}function Lh(n){for(;n===Eu;)Eu=uo[--co],uo[co]=null,Tu=uo[--co],uo[co]=null;for(;n===Gs;)Gs=kn[--Pn],kn[Pn]=null,Vr=kn[--Pn],kn[Pn]=null,Dr=kn[--Pn],kn[Pn]=null}var yn=null,vn=null,ot=!1,Xn=null;function sm(n,s){var a=Vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function im(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,yn=n,vn=rs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,yn=n,vn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Gs!==null?{id:Dr,overflow:Vr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,yn=n,vn=null,!0):!1;default:return!1}}function Fh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Bh(n){if(ot){var s=vn;if(s){var a=s;if(!im(n,s)){if(Fh(n))throw Error(t(418));s=rs(a.nextSibling);var h=yn;s&&im(n,s)?sm(h,a):(n.flags=n.flags&-4097|2,ot=!1,yn=n)}}else{if(Fh(n))throw Error(t(418));n.flags=n.flags&-4097|2,ot=!1,yn=n}}}function om(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yn=n}function Iu(n){if(n!==yn)return!1;if(!ot)return om(n),ot=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Nh(n.type,n.memoizedProps)),s&&(s=vn)){if(Fh(n))throw am(),Error(t(418));for(;s;)sm(n,s),s=rs(s.nextSibling)}if(om(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){vn=rs(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}vn=null}}else vn=yn?rs(n.stateNode.nextSibling):null;return!0}function am(){for(var n=vn;n;)n=rs(n.nextSibling)}function ho(){vn=yn=null,ot=!1}function zh(n){Xn===null?Xn=[n]:Xn.push(n)}var zw=te.ReactCurrentBatchConfig;function Ma(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=f.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Su(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function lm(n){var s=n._init;return s(n._payload)}function um(n){function s(F,j){if(n){var B=F.deletions;B===null?(F.deletions=[j],F.flags|=16):B.push(j)}}function a(F,j){if(!n)return null;for(;j!==null;)s(F,j),j=j.sibling;return null}function h(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function f(F,j){return F=ps(F,j),F.index=0,F.sibling=null,F}function g(F,j,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<j?(F.flags|=2,j):B):(F.flags|=2,j)):(F.flags|=1048576,j)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function P(F,j,B,se){return j===null||j.tag!==6?(j=Rd(B,F.mode,se),j.return=F,j):(j=f(j,B),j.return=F,j)}function D(F,j,B,se){var _e=B.type;return _e===N?J(F,j,B.props.children,se,B.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ve&&lm(_e)===j.type)?(se=f(j,B.props),se.ref=Ma(F,j,B),se.return=F,se):(se=Qu(B.type,B.key,B.props,null,F.mode,se),se.ref=Ma(F,j,B),se.return=F,se)}function $(F,j,B,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==B.containerInfo||j.stateNode.implementation!==B.implementation?(j=Dd(B,F.mode,se),j.return=F,j):(j=f(j,B.children||[]),j.return=F,j)}function J(F,j,B,se,_e){return j===null||j.tag!==7?(j=ri(B,F.mode,se,_e),j.return=F,j):(j=f(j,B),j.return=F,j)}function ee(F,j,B){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Rd(""+j,F.mode,B),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case me:return B=Qu(j.type,j.key,j.props,null,F.mode,B),B.ref=Ma(F,null,j),B.return=F,B;case le:return j=Dd(j,F.mode,B),j.return=F,j;case Ve:var se=j._init;return ee(F,se(j._payload),B)}if(Er(j)||xe(j))return j=ri(j,F.mode,B,null),j.return=F,j;Su(F,j)}return null}function Y(F,j,B,se){var _e=j!==null?j.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return _e!==null?null:P(F,j,""+B,se);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case me:return B.key===_e?D(F,j,B,se):null;case le:return B.key===_e?$(F,j,B,se):null;case Ve:return _e=B._init,Y(F,j,_e(B._payload),se)}if(Er(B)||xe(B))return _e!==null?null:J(F,j,B,se,null);Su(F,B)}return null}function ce(F,j,B,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number")return F=F.get(B)||null,P(j,F,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case me:return F=F.get(se.key===null?B:se.key)||null,D(j,F,se,_e);case le:return F=F.get(se.key===null?B:se.key)||null,$(j,F,se,_e);case Ve:var Se=se._init;return ce(F,j,B,Se(se._payload),_e)}if(Er(se)||xe(se))return F=F.get(B)||null,J(j,F,se,_e,null);Su(j,se)}return null}function ge(F,j,B,se){for(var _e=null,Se=null,be=j,Ce=j=0,Dt=null;be!==null&&Ce<B.length;Ce++){be.index>Ce?(Dt=be,be=null):Dt=be.sibling;var Ke=Y(F,be,B[Ce],se);if(Ke===null){be===null&&(be=Dt);break}n&&be&&Ke.alternate===null&&s(F,be),j=g(Ke,j,Ce),Se===null?_e=Ke:Se.sibling=Ke,Se=Ke,be=Dt}if(Ce===B.length)return a(F,be),ot&&Qs(F,Ce),_e;if(be===null){for(;Ce<B.length;Ce++)be=ee(F,B[Ce],se),be!==null&&(j=g(be,j,Ce),Se===null?_e=be:Se.sibling=be,Se=be);return ot&&Qs(F,Ce),_e}for(be=h(F,be);Ce<B.length;Ce++)Dt=ce(be,F,Ce,B[Ce],se),Dt!==null&&(n&&Dt.alternate!==null&&be.delete(Dt.key===null?Ce:Dt.key),j=g(Dt,j,Ce),Se===null?_e=Dt:Se.sibling=Dt,Se=Dt);return n&&be.forEach(function(ms){return s(F,ms)}),ot&&Qs(F,Ce),_e}function ve(F,j,B,se){var _e=xe(B);if(typeof _e!="function")throw Error(t(150));if(B=_e.call(B),B==null)throw Error(t(151));for(var Se=_e=null,be=j,Ce=j=0,Dt=null,Ke=B.next();be!==null&&!Ke.done;Ce++,Ke=B.next()){be.index>Ce?(Dt=be,be=null):Dt=be.sibling;var ms=Y(F,be,Ke.value,se);if(ms===null){be===null&&(be=Dt);break}n&&be&&ms.alternate===null&&s(F,be),j=g(ms,j,Ce),Se===null?_e=ms:Se.sibling=ms,Se=ms,be=Dt}if(Ke.done)return a(F,be),ot&&Qs(F,Ce),_e;if(be===null){for(;!Ke.done;Ce++,Ke=B.next())Ke=ee(F,Ke.value,se),Ke!==null&&(j=g(Ke,j,Ce),Se===null?_e=Ke:Se.sibling=Ke,Se=Ke);return ot&&Qs(F,Ce),_e}for(be=h(F,be);!Ke.done;Ce++,Ke=B.next())Ke=ce(be,F,Ce,Ke.value,se),Ke!==null&&(n&&Ke.alternate!==null&&be.delete(Ke.key===null?Ce:Ke.key),j=g(Ke,j,Ce),Se===null?_e=Ke:Se.sibling=Ke,Se=Ke);return n&&be.forEach(function(wx){return s(F,wx)}),ot&&Qs(F,Ce),_e}function yt(F,j,B,se){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case me:e:{for(var _e=B.key,Se=j;Se!==null;){if(Se.key===_e){if(_e=B.type,_e===N){if(Se.tag===7){a(F,Se.sibling),j=f(Se,B.props.children),j.return=F,F=j;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ve&&lm(_e)===Se.type){a(F,Se.sibling),j=f(Se,B.props),j.ref=Ma(F,Se,B),j.return=F,F=j;break e}a(F,Se);break}else s(F,Se);Se=Se.sibling}B.type===N?(j=ri(B.props.children,F.mode,se,B.key),j.return=F,F=j):(se=Qu(B.type,B.key,B.props,null,F.mode,se),se.ref=Ma(F,j,B),se.return=F,F=se)}return w(F);case le:e:{for(Se=B.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===B.containerInfo&&j.stateNode.implementation===B.implementation){a(F,j.sibling),j=f(j,B.children||[]),j.return=F,F=j;break e}else{a(F,j);break}else s(F,j);j=j.sibling}j=Dd(B,F.mode,se),j.return=F,F=j}return w(F);case Ve:return Se=B._init,yt(F,j,Se(B._payload),se)}if(Er(B))return ge(F,j,B,se);if(xe(B))return ve(F,j,B,se);Su(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,j!==null&&j.tag===6?(a(F,j.sibling),j=f(j,B),j.return=F,F=j):(a(F,j),j=Rd(B,F.mode,se),j.return=F,F=j),w(F)):a(F,j)}return yt}var fo=um(!0),cm=um(!1),bu=ss(null),Au=null,po=null,Uh=null;function $h(){Uh=po=Au=null}function qh(n){var s=bu.current;st(bu),n._currentValue=s}function Kh(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function mo(n,s){Au=n,Uh=po=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(ln=!0),n.firstContext=null)}function Nn(n){var s=n._currentValue;if(Uh!==n)if(n={context:n,memoizedValue:s,next:null},po===null){if(Au===null)throw Error(t(308));po=n,Au.dependencies={lanes:0,firstContext:n}}else po=po.next=n;return s}var Xs=null;function Wh(n){Xs===null?Xs=[n]:Xs.push(n)}function hm(n,s,a,h){var f=s.interleaved;return f===null?(a.next=a,Wh(s)):(a.next=f.next,f.next=a),s.interleaved=a,jr(n,h)}function jr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var as=!1;function Hh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Or(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(qe&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,jr(n,a)}return f=h.interleaved,f===null?(s.next=s,Wh(h)):(s.next=f.next,f.next=s),h.interleaved=s,jr(n,a)}function Cu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Yr(n,a)}}function fm(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function ku(n,s,a,h){var f=n.updateQueue;as=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var D=P,$=D.next;D.next=null,w===null?g=$:w.next=$,w=D;var J=n.alternate;J!==null&&(J=J.updateQueue,P=J.lastBaseUpdate,P!==w&&(P===null?J.firstBaseUpdate=$:P.next=$,J.lastBaseUpdate=D))}if(g!==null){var ee=f.baseState;w=0,J=$=D=null,P=g;do{var Y=P.lane,ce=P.eventTime;if((h&Y)===Y){J!==null&&(J=J.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=n,ve=P;switch(Y=s,ce=a,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){ee=ge.call(ce,ee,Y);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,Y=typeof ge=="function"?ge.call(ce,ee,Y):ge,Y==null)break e;ee=ae({},ee,Y);break e;case 2:as=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[P]:Y.push(P))}else ce={eventTime:ce,lane:Y,tag:P.tag,payload:P.payload,callback:P.callback,next:null},J===null?($=J=ce,D=ee):J=J.next=ce,w|=Y;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;Y=P,P=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(J===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=$,f.lastBaseUpdate=J,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Zs|=w,n.lanes=w,n.memoizedState=ee}}function pm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var La={},cr=ss(La),Fa=ss(La),Ba=ss(La);function Ys(n){if(n===La)throw Error(t(174));return n}function Gh(n,s){switch(nt(Ba,s),nt(Fa,n),nt(cr,La),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:It(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=It(s,n)}st(cr),nt(cr,s)}function go(){st(cr),st(Fa),st(Ba)}function mm(n){Ys(Ba.current);var s=Ys(cr.current),a=It(s,n.type);s!==a&&(nt(Fa,n),nt(cr,a))}function Qh(n){Fa.current===n&&(st(cr),st(Fa))}var ut=ss(0);function Pu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xh=[];function Yh(){for(var n=0;n<Xh.length;n++)Xh[n]._workInProgressVersionPrimary=null;Xh.length=0}var Nu=te.ReactCurrentDispatcher,Jh=te.ReactCurrentBatchConfig,Js=0,ct=null,bt=null,Nt=null,Ru=!1,za=!1,Ua=0,Uw=0;function qt(){throw Error(t(321))}function Zh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Qn(n[a],s[a]))return!1;return!0}function ed(n,s,a,h,f,g){if(Js=g,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Nu.current=n===null||n.memoizedState===null?Ww:Hw,n=a(h,f),za){g=0;do{if(za=!1,Ua=0,25<=g)throw Error(t(301));g+=1,Nt=bt=null,s.updateQueue=null,Nu.current=Gw,n=a(h,f)}while(za)}if(Nu.current=ju,s=bt!==null&&bt.next!==null,Js=0,Nt=bt=ct=null,Ru=!1,s)throw Error(t(300));return n}function td(){var n=Ua!==0;return Ua=0,n}function hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ct.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Rn(){if(bt===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=Nt===null?ct.memoizedState:Nt.next;if(s!==null)Nt=s,bt=n;else{if(n===null)throw Error(t(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Nt===null?ct.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function $a(n,s){return typeof s=="function"?s(n):s}function nd(n){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=bt,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var P=w=null,D=null,$=g;do{var J=$.lane;if((Js&J)===J)D!==null&&(D=D.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var ee={lane:J,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};D===null?(P=D=ee,w=h):D=D.next=ee,ct.lanes|=J,Zs|=J}$=$.next}while($!==null&&$!==g);D===null?w=h:D.next=P,Qn(h,s.memoizedState)||(ln=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do g=f.lane,ct.lanes|=g,Zs|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function rd(n){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);Qn(g,s.memoizedState)||(ln=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function gm(){}function ym(n,s){var a=ct,h=Rn(),f=s(),g=!Qn(h.memoizedState,f);if(g&&(h.memoizedState=f,ln=!0),h=h.queue,sd(wm.bind(null,a,h,n),[n]),h.getSnapshot!==s||g||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,qa(9,_m.bind(null,a,h,f,s),void 0,null),Rt===null)throw Error(t(349));(Js&30)!==0||vm(a,s,f)}return f}function vm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function _m(n,s,a,h){s.value=a,s.getSnapshot=h,xm(s)&&Em(n)}function wm(n,s,a){return a(function(){xm(s)&&Em(n)})}function xm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Qn(n,a)}catch(h){return!0}}function Em(n){var s=jr(n,1);s!==null&&er(s,n,1,-1)}function Tm(n){var s=hr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:n},s.queue=n,n=n.dispatch=Kw.bind(null,ct,n),[s.memoizedState,n]}function qa(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function Im(){return Rn().memoizedState}function Du(n,s,a,h){var f=hr();ct.flags|=n,f.memoizedState=qa(1|s,a,void 0,h===void 0?null:h)}function Vu(n,s,a,h){var f=Rn();h=h===void 0?null:h;var g=void 0;if(bt!==null){var w=bt.memoizedState;if(g=w.destroy,h!==null&&Zh(h,w.deps)){f.memoizedState=qa(s,a,g,h);return}}ct.flags|=n,f.memoizedState=qa(1|s,a,g,h)}function Sm(n,s){return Du(8390656,8,n,s)}function sd(n,s){return Vu(2048,8,n,s)}function bm(n,s){return Vu(4,2,n,s)}function Am(n,s){return Vu(4,4,n,s)}function Cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function km(n,s,a){return a=a!=null?a.concat([n]):null,Vu(4,4,Cm.bind(null,s,n),a)}function id(){}function Pm(n,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Zh(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function Nm(n,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Zh(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Rm(n,s,a){return(Js&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):(Qn(a,s)||(a=zs(),ct.lanes|=a,Zs|=a,n.baseState=!0),s)}function $w(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var h=Jh.transition;Jh.transition={};try{n(!1),s()}finally{Me=a,Jh.transition=h}}function Dm(){return Rn().memoizedState}function qw(n,s,a){var h=ds(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Vm(n))jm(s,a);else if(a=hm(n,s,a,h),a!==null){var f=en();er(a,n,h,f),Om(a,s,h)}}function Kw(n,s,a){var h=ds(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vm(n))jm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,a);if(f.hasEagerState=!0,f.eagerState=P,Qn(P,w)){var D=s.interleaved;D===null?(f.next=f,Wh(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch($){}finally{}a=hm(n,s,f,h),a!==null&&(f=en(),er(a,n,h,f),Om(a,s,h))}}function Vm(n){var s=n.alternate;return n===ct||s!==null&&s===ct}function jm(n,s){za=Ru=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Om(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Yr(n,a)}}var ju={readContext:Nn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Ww={readContext:Nn,useCallback:function(n,s){return hr().memoizedState=[n,s===void 0?null:s],n},useContext:Nn,useEffect:Sm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Du(4194308,4,Cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Du(4194308,4,n,s)},useInsertionEffect:function(n,s){return Du(4,2,n,s)},useMemo:function(n,s){var a=hr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=hr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=qw.bind(null,ct,n),[h.memoizedState,n]},useRef:function(n){var s=hr();return n={current:n},s.memoizedState=n},useState:Tm,useDebugValue:id,useDeferredValue:function(n){return hr().memoizedState=n},useTransition:function(){var n=Tm(!1),s=n[0];return n=$w.bind(null,n[1]),hr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=ct,f=hr();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Rt===null)throw Error(t(349));(Js&30)!==0||vm(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Sm(wm.bind(null,h,g,n),[n]),h.flags|=2048,qa(9,_m.bind(null,h,g,a,s),void 0,null),a},useId:function(){var n=hr(),s=Rt.identifierPrefix;if(ot){var a=Vr,h=Dr;a=(h&~(1<<32-Yt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Uw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Hw={readContext:Nn,useCallback:Pm,useContext:Nn,useEffect:sd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Nm,useReducer:nd,useRef:Im,useState:function(){return nd($a)},useDebugValue:id,useDeferredValue:function(n){var s=Rn();return Rm(s,bt.memoizedState,n)},useTransition:function(){var n=nd($a)[0],s=Rn().memoizedState;return[n,s]},useMutableSource:gm,useSyncExternalStore:ym,useId:Dm,unstable_isNewReconciler:!1},Gw={readContext:Nn,useCallback:Pm,useContext:Nn,useEffect:sd,useImperativeHandle:km,useInsertionEffect:bm,useLayoutEffect:Am,useMemo:Nm,useReducer:rd,useRef:Im,useState:function(){return rd($a)},useDebugValue:id,useDeferredValue:function(n){var s=Rn();return bt===null?s.memoizedState=n:Rm(s,bt.memoizedState,n)},useTransition:function(){var n=rd($a)[0],s=Rn().memoizedState;return[n,s]},useMutableSource:gm,useSyncExternalStore:ym,useId:Dm,unstable_isNewReconciler:!1};function Yn(n,s){if(n&&n.defaultProps){s=ae({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function od(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:ae({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ou={isMounted:function(n){return(n=n._reactInternals)?Un(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=en(),f=ds(n),g=Or(h,f);g.payload=s,a!=null&&(g.callback=a),s=ls(n,g,f),s!==null&&(er(s,n,f,h),Cu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=en(),f=ds(n),g=Or(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ls(n,g,f),s!==null&&(er(s,n,f,h),Cu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=en(),h=ds(n),f=Or(a,h);f.tag=2,s!=null&&(f.callback=s),s=ls(n,f,h),s!==null&&(er(s,n,h,a),Cu(s,n,h))}};function Mm(n,s,a,h,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,h)||!Pa(f,g):!0}function Lm(n,s,a){var h=!1,f=is,g=s.contextType;return typeof g=="object"&&g!==null?g=Nn(g):(f=an(s)?Hs:$t.current,h=s.contextTypes,g=(h=h!=null)?lo(n,f):is),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ou,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Fm(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Ou.enqueueReplaceState(s,s.state,null)}function ad(n,s,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Hh(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Nn(g):(g=an(s)?Hs:$t.current,f.context=lo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(od(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ou.enqueueReplaceState(f,f.state,null),ku(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function yo(n,s){try{var a="",h=s;do a+=Re(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function ld(n,s,a){return{value:n,source:null,stack:a!=null?a:null,digest:s!=null?s:null}}function ud(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function Bm(n,s,a){a=Or(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){$u||($u=!0,Id=h),ud(n,s)},a}function zm(n,s,a){a=Or(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){ud(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){ud(n,s),typeof h!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Um(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Qw;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),n=ux.bind(null,n,s,a),s.then(n,n))}function $m(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function qm(n,s,a,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Or(-1,1),s.tag=2,ls(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Xw=te.ReactCurrentOwner,ln=!1;function Zt(n,s,a,h){s.child=n===null?cm(s,null,a,h):fo(s,n.child,a,h)}function Km(n,s,a,h,f){a=a.render;var g=s.ref;return mo(s,f),h=ed(n,s,a,h,g,f),a=td(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Mr(n,s,f)):(ot&&a&&Mh(s),s.flags|=1,Zt(n,s,h,f),s.child)}function Wm(n,s,a,h,f){if(n===null){var g=a.type;return typeof g=="function"&&!Nd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Hm(n,s,g,h,f)):(n=Qu(a.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(w,h)&&n.ref===s.ref)return Mr(n,s,f)}return s.flags|=1,n=ps(g,h),n.ref=s.ref,n.return=s,s.child=n}function Hm(n,s,a,h,f){if(n!==null){var g=n.memoizedProps;if(Pa(g,h)&&n.ref===s.ref)if(ln=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(ln=!0);else return s.lanes=n.lanes,Mr(n,s,f)}return cd(n,s,a,h,f)}function Gm(n,s,a){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(_o,_n),_n|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,nt(_o,_n),_n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,nt(_o,_n),_n|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,nt(_o,_n),_n|=h;return Zt(n,s,f,a),s.child}function Qm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function cd(n,s,a,h,f){var g=an(a)?Hs:$t.current;return g=lo(s,g),mo(s,f),a=ed(n,s,a,h,g,f),h=td(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Mr(n,s,f)):(ot&&h&&Mh(s),s.flags|=1,Zt(n,s,a,f),s.child)}function Xm(n,s,a,h,f){if(an(a)){var g=!0;wu(s)}else g=!1;if(mo(s,f),s.stateNode===null)Lu(n,s),Lm(s,a,h),ad(s,a,h,f),h=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var D=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=Nn($):($=an(a)?Hs:$t.current,$=lo(s,$));var J=a.getDerivedStateFromProps,ee=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||D!==$)&&Fm(s,w,h,$),as=!1;var Y=s.memoizedState;w.state=Y,ku(s,h,w,f),D=s.memoizedState,P!==h||Y!==D||on.current||as?(typeof J=="function"&&(od(s,a,J,h),D=s.memoizedState),(P=as||Mm(s,a,P,h,Y,D,$))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=$,h=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,dm(n,s),P=s.memoizedProps,$=s.type===s.elementType?P:Yn(s.type,P),w.props=$,ee=s.pendingProps,Y=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=Nn(D):(D=an(a)?Hs:$t.current,D=lo(s,D));var ce=a.getDerivedStateFromProps;(J=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==ee||Y!==D)&&Fm(s,w,h,D),as=!1,Y=s.memoizedState,w.state=Y,ku(s,h,w,f);var ge=s.memoizedState;P!==ee||Y!==ge||on.current||as?(typeof ce=="function"&&(od(s,a,ce,h),ge=s.memoizedState),($=as||Mm(s,a,$,h,Y,ge,D)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ge,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ge,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ge),w.props=h,w.state=ge,w.context=D,h=$):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),h=!1)}return hd(n,s,a,h,g,f)}function hd(n,s,a,h,f,g){Qm(n,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&tm(s,a,!1),Mr(n,s,g);h=s.stateNode,Xw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&w?(s.child=fo(s,n.child,null,g),s.child=fo(s,null,P,g)):Zt(n,s,P,g),s.memoizedState=h.state,f&&tm(s,a,!0),s.child}function Ym(n){var s=n.stateNode;s.pendingContext?Zp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Zp(n,s.context,!1),Gh(n,s.containerInfo)}function Jm(n,s,a,h,f){return ho(),zh(f),s.flags|=256,Zt(n,s,a,h),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function fd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Zm(n,s,a){var h=s.pendingProps,f=ut.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),nt(ut,f&1),n===null)return Bh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,n=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Xu(w,h,0,null),n=ri(n,h,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=fd(a),s.memoizedState=dd,n):pd(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return Yw(n,s,w,h,P,f,a);if(g){g=h.fallback,w=s.mode,f=n.child,P=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=ps(f,D),h.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=ps(P,g):(g=ri(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=n.child.memoizedState,w=w===null?fd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=dd,h}return g=n.child,n=g.sibling,h=ps(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function pd(n,s){return s=Xu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Mu(n,s,a,h){return h!==null&&zh(h),fo(s,n.child,null,a),n=pd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Yw(n,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=ld(Error(t(422))),Mu(n,s,w,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Xu({mode:"visible",children:h.children},f,0,null),g=ri(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&fo(s,n.child,null,w),s.child.memoizedState=fd(w),s.memoizedState=dd,g);if((s.mode&1)===0)return Mu(n,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var P=h.dgst;return h=P,g=Error(t(419)),h=ld(g,h,void 0),Mu(n,s,w,h)}if(P=(w&n.childLanes)!==0,ln||P){if(h=Rt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,jr(n,f),er(h,n,f,-1))}return Pd(),h=ld(Error(t(421))),Mu(n,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=cx.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,vn=rs(f.nextSibling),yn=s,ot=!0,Xn=null,n!==null&&(kn[Pn++]=Dr,kn[Pn++]=Vr,kn[Pn++]=Gs,Dr=n.id,Vr=n.overflow,Gs=s),s=pd(s,h.children),s.flags|=4096,s)}function eg(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Kh(n.return,s,a)}function md(n,s,a,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function tg(n,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Zt(n,s,h.children,a),h=ut.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&eg(n,a,s);else if(n.tag===19)eg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(nt(ut,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Pu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),md(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Pu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}md(s,!0,a,null,g);break;case"together":md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Lu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Mr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Zs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ps(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ps(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Jw(n,s,a){switch(s.tag){case 3:Ym(s),ho();break;case 5:mm(s);break;case 1:an(s.type)&&wu(s);break;case 4:Gh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;nt(bu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(nt(ut,ut.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Zm(n,s,a):(nt(ut,ut.current&1),n=Mr(n,s,a),n!==null?n.sibling:null);nt(ut,ut.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return tg(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),nt(ut,ut.current),h)break;return null;case 22:case 23:return s.lanes=0,Gm(n,s,a)}return Mr(n,s,a)}var ng,gd,rg,sg;ng=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gd=function(){},rg=function(n,s,a,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,Ys(cr.current);var g=null;switch(a){case"input":f=Xt(n,f),h=Xt(n,h),g=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),g=[];break;case"textarea":f=ia(n,f),h=ia(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=yu)}ha(a,h);var w;a=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var P=f[$];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var D=h[$];if(P=f!=null?f[$]:void 0,h.hasOwnProperty($)&&D!==P&&(D!=null||P!=null))if($==="style")if(P){for(w in P)!P.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&P[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push($,a)),a=D;else $==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(g=g||[]).push($,D)):$==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push($,""+D):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(D!=null&&$==="onScroll"&&rt("scroll",n),g||P===D||(g=[])):(g=g||[]).push($,D))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},sg=function(n,s,a,h){a!==h&&(s.flags|=4)};function Ka(n,s){if(!ot)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function Zw(n,s,a){var h=s.pendingProps;switch(Lh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return an(s.type)&&_u(),Kt(s),null;case 3:return h=s.stateNode,go(),st(on),st($t),Yh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Iu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xn!==null&&(Ad(Xn),Xn=null))),gd(n,s),Kt(s),null;case 5:Qh(s);var f=Ys(Ba.current);if(a=s.type,n!==null&&s.stateNode!=null)rg(n,s,a,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(n=Ys(cr.current),Iu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[ur]=s,h[ja]=g,n=(s.mode&1)!==0,a){case"dialog":rt("cancel",h),rt("close",h);break;case"iframe":case"object":case"embed":rt("load",h);break;case"video":case"audio":for(f=0;f<Ra.length;f++)rt(Ra[f],h);break;case"source":rt("error",h);break;case"img":case"image":case"link":rt("error",h),rt("load",h);break;case"details":rt("toggle",h);break;case"input":Ut(h,g),rt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},rt("invalid",h);break;case"textarea":Ri(h,g),rt("invalid",h)}ha(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?h.textContent!==P&&(g.suppressHydrationWarning!==!0&&gu(h.textContent,P,n),f=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&gu(h.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&rt("scroll",h)}switch(a){case"input":Te(h),Pi(h,g,!0);break;case"textarea":Te(h),oa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=yu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Tt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(a,{is:h.is}):(n=w.createElement(a),a==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,a),n[ur]=s,n[ja]=h,ng(n,s,!1,!1),s.stateNode=n;e:{switch(w=da(a,h),a){case"dialog":rt("cancel",n),rt("close",n),f=h;break;case"iframe":case"object":case"embed":rt("load",n),f=h;break;case"video":case"audio":for(f=0;f<Ra.length;f++)rt(Ra[f],n);f=h;break;case"source":rt("error",n),f=h;break;case"img":case"image":case"link":rt("error",n),rt("load",n),f=h;break;case"details":rt("toggle",n),f=h;break;case"input":Ut(n,h),f=Xt(n,h),rt("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),rt("invalid",n);break;case"textarea":Ri(n,h),f=ia(n,h),rt("invalid",n);break;default:f=h}ha(a,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var D=P[g];g==="style"?ua(n,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&aa(n,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Wr(n,D):typeof D=="number"&&Wr(n,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&rt("scroll",n):D!=null&&H(n,g,D,w))}switch(a){case"input":Te(n),Pi(n,h,!1);break;case"textarea":Te(n),oa(n);break;case"option":h.value!=null&&n.setAttribute("value",""+$e(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?Tr(n,!!h.multiple,g,!1):h.defaultValue!=null&&Tr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=yu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(n&&s.stateNode!=null)sg(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ys(Ba.current),Ys(cr.current),Iu(s)){if(h=s.stateNode,a=s.memoizedProps,h[ur]=s,(g=h.nodeValue!==a)&&(n=yn,n!==null))switch(n.tag){case 3:gu(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gu(h.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[ur]=s,s.stateNode=h}return Kt(s),null;case 13:if(st(ut),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ot&&vn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)am(),ho(),s.flags|=98560,g=!1;else if(g=Iu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ur]=s}else ho(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),g=!1}else Xn!==null&&(Ad(Xn),Xn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ut.current&1)!==0?At===0&&(At=3):Pd())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return go(),gd(n,s),n===null&&Da(s.stateNode.containerInfo),Kt(s),null;case 10:return qh(s.type._context),Kt(s),null;case 17:return an(s.type)&&_u(),Kt(s),null;case 19:if(st(ut),g=s.memoizedState,g===null)return Kt(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Ka(g,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Pu(n),w!==null){for(s.flags|=128,Ka(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nt(ut,ut.current&1|2),s.child}n=n.sibling}g.tail!==null&&tt()>wo&&(s.flags|=128,h=!0,Ka(g,!1),s.lanes=4194304)}else{if(!h)if(n=Pu(w),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ka(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ot)return Kt(s),null}else 2*tt()-g.renderingStartTime>wo&&a!==1073741824&&(s.flags|=128,h=!0,Ka(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=tt(),s.sibling=null,a=ut.current,nt(ut,h?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return kd(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ex(n,s){switch(Lh(s),s.tag){case 1:return an(s.type)&&_u(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return go(),st(on),st($t),Yh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Qh(s),null;case 13:if(st(ut),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ho()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return st(ut),null;case 4:return go(),null;case 10:return qh(s.type._context),null;case 22:case 23:return kd(),null;case 24:return null;default:return null}}var Fu=!1,Wt=!1,tx=typeof WeakSet=="function"?WeakSet:Set,pe=null;function vo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ft(n,s,h)}else a.current=null}function yd(n,s,a){try{a()}catch(h){ft(n,s,h)}}var ig=!1;function nx(n,s){if(kh=es,n=Mp(),xh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch(se){a=null;break e}var w=0,P=-1,D=-1,$=0,J=0,ee=n,Y=null;t:for(;;){for(var ce;ee!==a||f!==0&&ee.nodeType!==3||(P=w+f),ee!==g||h!==0&&ee.nodeType!==3||(D=w+h),ee.nodeType===3&&(w+=ee.nodeValue.length),(ce=ee.firstChild)!==null;)Y=ee,ee=ce;for(;;){if(ee===n)break t;if(Y===a&&++$===f&&(P=w),Y===g&&++J===h&&(D=w),(ce=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=ce}a=P===-1||D===-1?null:{start:P,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ph={focusedElem:n,selectionRange:a},es=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,yt=ge.memoizedState,F=s.stateNode,j=F.getSnapshotBeforeUpdate(s.elementType===s.type?ve:Yn(s.type,ve),yt);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return ge=ig,ig=!1,ge}function Wa(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&yd(s,a,g)}f=f.next}while(f!==h)}}function Bu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function vd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function og(n){var s=n.alternate;s!==null&&(n.alternate=null,og(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[ur],delete s[ja],delete s[Vh],delete s[Lw],delete s[Fw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ag(n){return n.tag===5||n.tag===3||n.tag===4}function lg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ag(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _d(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yu));else if(h!==4&&(n=n.child,n!==null))for(_d(n,s,a),n=n.sibling;n!==null;)_d(n,s,a),n=n.sibling}function wd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(wd(n,s,a),n=n.sibling;n!==null;)wd(n,s,a),n=n.sibling}var Mt=null,Jn=!1;function us(n,s,a){for(a=a.child;a!==null;)ug(n,s,a),a=a.sibling}function ug(n,s,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Fs,a)}catch(P){}switch(a.tag){case 5:Wt||vo(a,s);case 6:var h=Mt,f=Jn;Mt=null,us(n,s,a),Mt=h,Jn=f,Mt!==null&&(Jn?(n=Mt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Mt.removeChild(a.stateNode));break;case 18:Mt!==null&&(Jn?(n=Mt,a=a.stateNode,n.nodeType===8?Dh(n.parentNode,a):n.nodeType===1&&Dh(n,a),Hn(n)):Dh(Mt,a.stateNode));break;case 4:h=Mt,f=Jn,Mt=a.stateNode.containerInfo,Jn=!0,us(n,s,a),Mt=h,Jn=f;break;case 0:case 11:case 14:case 15:if(!Wt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&yd(a,s,w),f=f.next}while(f!==h)}us(n,s,a);break;case 1:if(!Wt&&(vo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){ft(a,s,P)}us(n,s,a);break;case 21:us(n,s,a);break;case 22:a.mode&1?(Wt=(h=Wt)||a.memoizedState!==null,us(n,s,a),Wt=h):us(n,s,a);break;default:us(n,s,a)}}function cg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new tx),s.forEach(function(h){var f=hx.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Zn(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:Mt=P.stateNode,Jn=!1;break e;case 3:Mt=P.stateNode.containerInfo,Jn=!0;break e;case 4:Mt=P.stateNode.containerInfo,Jn=!0;break e}P=P.return}if(Mt===null)throw Error(t(160));ug(g,w,f),Mt=null,Jn=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch($){ft(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hg(s,n),s=s.sibling}function hg(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zn(s,n),dr(n),h&4){try{Wa(3,n,n.return),Bu(3,n)}catch(ve){ft(n,n.return,ve)}try{Wa(5,n,n.return)}catch(ve){ft(n,n.return,ve)}}break;case 1:Zn(s,n),dr(n),h&512&&a!==null&&vo(a,a.return);break;case 5:if(Zn(s,n),dr(n),h&512&&a!==null&&vo(a,a.return),n.flags&32){var f=n.stateNode;try{Wr(f,"")}catch(ve){ft(n,n.return,ve)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,P=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&In(f,g),da(P,w);var $=da(P,g);for(w=0;w<D.length;w+=2){var J=D[w],ee=D[w+1];J==="style"?ua(f,ee):J==="dangerouslySetInnerHTML"?aa(f,ee):J==="children"?Wr(f,ee):H(f,J,ee,$)}switch(P){case"input":xr(f,g);break;case"textarea":Di(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ce=g.value;ce!=null?Tr(f,!!g.multiple,ce,!1):Y!==!!g.multiple&&(g.defaultValue!=null?Tr(f,!!g.multiple,g.defaultValue,!0):Tr(f,!!g.multiple,g.multiple?[]:"",!1))}f[ja]=g}catch(ve){ft(n,n.return,ve)}}break;case 6:if(Zn(s,n),dr(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ve){ft(n,n.return,ve)}}break;case 3:if(Zn(s,n),dr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Hn(s.containerInfo)}catch(ve){ft(n,n.return,ve)}break;case 4:Zn(s,n),dr(n);break;case 13:Zn(s,n),dr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Td=tt())),h&4&&cg(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(Wt=($=Wt)||J,Zn(s,n),Wt=$):Zn(s,n),dr(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!J&&(n.mode&1)!==0)for(pe=n,J=n.child;J!==null;){for(ee=pe=J;pe!==null;){switch(Y=pe,ce=Y.child,Y.tag){case 0:case 11:case 14:case 15:Wa(4,Y,Y.return);break;case 1:vo(Y,Y.return);var ge=Y.stateNode;if(typeof ge.componentWillUnmount=="function"){h=Y,a=Y.return;try{s=h,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(ve){ft(h,a,ve)}}break;case 5:vo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){pg(ee);continue}}ce!==null?(ce.return=Y,pe=ce):pg(ee)}J=J.sibling}e:for(J=null,ee=n;;){if(ee.tag===5){if(J===null){J=ee;try{f=ee.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=ee.stateNode,D=ee.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=la("display",w))}catch(ve){ft(n,n.return,ve)}}}else if(ee.tag===6){if(J===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(ve){ft(n,n.return,ve)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;J===ee&&(J=null),ee=ee.return}J===ee&&(J=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Zn(s,n),dr(n),h&4&&cg(n);break;case 21:break;default:Zn(s,n),dr(n)}}function dr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(ag(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Wr(f,""),h.flags&=-33);var g=lg(n);wd(n,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,P=lg(n);_d(n,P,w);break;default:throw Error(t(161))}}catch(D){ft(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function rx(n,s,a){pe=n,dg(n)}function dg(n,s,a){for(var h=(n.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Fu;if(!w){var P=f.alternate,D=P!==null&&P.memoizedState!==null||Wt;P=Fu;var $=Wt;if(Fu=w,(Wt=D)&&!$)for(pe=f;pe!==null;)w=pe,D=w.child,w.tag===22&&w.memoizedState!==null?mg(f):D!==null?(D.return=w,pe=D):mg(f);for(;g!==null;)pe=g,dg(g),g=g.sibling;pe=f,Fu=P,Wt=$}fg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,pe=g):fg(n)}}function fg(n){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Wt||Bu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Wt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Yn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&pm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}pm(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var J=$.memoizedState;if(J!==null){var ee=J.dehydrated;ee!==null&&Hn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||s.flags&512&&vd(s)}catch(Y){ft(s,s.return,Y)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function pg(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function mg(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Bu(4,s)}catch(D){ft(s,a,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){ft(s,f,D)}}var g=s.return;try{vd(s)}catch(D){ft(s,g,D)}break;case 5:var w=s.return;try{vd(s)}catch(D){ft(s,w,D)}}}catch(D){ft(s,s.return,D)}if(s===n){pe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,pe=P;break}pe=s.return}}var sx=Math.ceil,zu=te.ReactCurrentDispatcher,xd=te.ReactCurrentOwner,Dn=te.ReactCurrentBatchConfig,qe=0,Rt=null,_t=null,Lt=0,_n=0,_o=ss(0),At=0,Ha=null,Zs=0,Uu=0,Ed=0,Ga=null,un=null,Td=0,wo=1/0,Lr=null,$u=!1,Id=null,cs=null,qu=!1,hs=null,Ku=0,Qa=0,Sd=null,Wu=-1,Hu=0;function en(){return(qe&6)!==0?tt():Wu!==-1?Wu:Wu=tt()}function ds(n){return(n.mode&1)===0?1:(qe&2)!==0&&Lt!==0?Lt&-Lt:zw.transition!==null?(Hu===0&&(Hu=zs()),Hu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Ta(n.type)),n)}function er(n,s,a,h){if(50<Qa)throw Qa=0,Sd=null,Error(t(185));Xr(n,a,h),((qe&2)===0||n!==Rt)&&(n===Rt&&((qe&2)===0&&(Uu|=a),At===4&&fs(n,Lt)),cn(n,h),a===1&&qe===0&&(s.mode&1)===0&&(wo=tt()+500,xu&&os()))}function cn(n,s){var a=n.callbackNode;br(n,s);var h=Bs(n,n===Rt?Lt:0);if(h===0)a!==null&&va(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&va(a),s===1)n.tag===0?Bw(yg.bind(null,n)):nm(yg.bind(null,n)),Ow(function(){(qe&6)===0&&os()}),a=null;else{switch(Jr(h)){case 1:a=Ls;break;case 4:a=Hr;break;case 16:a=bn;break;case 536870912:a=Hl;break;default:a=bn}a=Sg(a,gg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function gg(n,s){if(Wu=-1,Hu=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(xo()&&n.callbackNode!==a)return null;var h=Bs(n,n===Rt?Lt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=Gu(n,h);else{s=h;var f=qe;qe|=2;var g=_g();(Rt!==n||Lt!==s)&&(Lr=null,wo=tt()+500,ti(n,s));do try{ax();break}catch(P){vg(n,P)}while(!0);$h(),zu.current=g,qe=f,_t!==null?s=0:(Rt=null,Lt=0,s=At)}if(s!==0){if(s===2&&(f=pn(n),f!==0&&(h=f,s=bd(n,f))),s===1)throw a=Ha,ti(n,0),fs(n,h),cn(n,tt()),a;if(s===6)fs(n,h);else{if(f=n.current.alternate,(h&30)===0&&!ix(f)&&(s=Gu(n,h),s===2&&(g=pn(n),g!==0&&(h=g,s=bd(n,g))),s===1))throw a=Ha,ti(n,0),fs(n,h),cn(n,tt()),a;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ni(n,un,Lr);break;case 3:if(fs(n,h),(h&130023424)===h&&(s=Td+500-tt(),10<s)){if(Bs(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){en(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Rh(ni.bind(null,n,un,Lr),s);break}ni(n,un,Lr);break;case 4:if(fs(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var w=31-Yt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=tt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*sx(h/1960))-h,10<h){n.timeoutHandle=Rh(ni.bind(null,n,un,Lr),h);break}ni(n,un,Lr);break;case 5:ni(n,un,Lr);break;default:throw Error(t(329))}}}return cn(n,tt()),n.callbackNode===a?gg.bind(null,n):null}function bd(n,s){var a=Ga;return n.current.memoizedState.isDehydrated&&(ti(n,s).flags|=256),n=Gu(n,s),n!==2&&(s=un,un=a,s!==null&&Ad(s)),n}function Ad(n){un===null?un=n:un.push.apply(un,n)}function ix(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Qn(g(),f))return!1}catch(w){return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(n,s){for(s&=~Ed,s&=~Uu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Yt(s),h=1<<a;n[a]=-1,s&=~h}}function yg(n){if((qe&6)!==0)throw Error(t(327));xo();var s=Bs(n,0);if((s&1)===0)return cn(n,tt()),null;var a=Gu(n,s);if(n.tag!==0&&a===2){var h=pn(n);h!==0&&(s=h,a=bd(n,h))}if(a===1)throw a=Ha,ti(n,0),fs(n,s),cn(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ni(n,un,Lr),cn(n,tt()),null}function Cd(n,s){var a=qe;qe|=1;try{return n(s)}finally{qe=a,qe===0&&(wo=tt()+500,xu&&os())}}function ei(n){hs!==null&&hs.tag===0&&(qe&6)===0&&xo();var s=qe;qe|=1;var a=Dn.transition,h=Me;try{if(Dn.transition=null,Me=1,n)return n()}finally{Me=h,Dn.transition=a,qe=s,(qe&6)===0&&os()}}function kd(){_n=_o.current,st(_o)}function ti(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,jw(a)),_t!==null)for(a=_t.return;a!==null;){var h=a;switch(Lh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&_u();break;case 3:go(),st(on),st($t),Yh();break;case 5:Qh(h);break;case 4:go();break;case 13:st(ut);break;case 19:st(ut);break;case 10:qh(h.type._context);break;case 22:case 23:kd()}a=a.return}if(Rt=n,_t=n=ps(n.current,null),Lt=_n=s,At=0,Ha=null,Ed=Uu=Zs=0,un=Ga=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Xs=null}return n}function vg(n,s){do{var a=_t;try{if($h(),Nu.current=ju,Ru){for(var h=ct.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Ru=!1}if(Js=0,Nt=bt=ct=null,za=!1,Ua=0,xd.current=null,a===null||a.return===null){At=1,Ha=s,_t=null;break}e:{var g=n,w=a.return,P=a,D=s;if(s=Lt,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=D,J=P,ee=J.tag;if((J.mode&1)===0&&(ee===0||ee===11||ee===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var ce=$m(w);if(ce!==null){ce.flags&=-257,qm(ce,w,P,g,s),ce.mode&1&&Um(g,$,s),s=ce,D=$;var ge=s.updateQueue;if(ge===null){var ve=new Set;ve.add(D),s.updateQueue=ve}else ge.add(D);break e}else{if((s&1)===0){Um(g,$,s),Pd();break e}D=Error(t(426))}}else if(ot&&P.mode&1){var yt=$m(w);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),qm(yt,w,P,g,s),zh(yo(D,P));break e}}g=D=yo(D,P),At!==4&&(At=2),Ga===null?Ga=[g]:Ga.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=Bm(g,D,s);fm(g,F);break e;case 1:P=D;var j=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(cs===null||!cs.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=zm(g,P,s);fm(g,se);break e}}g=g.return}while(g!==null)}xg(a)}catch(_e){s=_e,_t===a&&a!==null&&(_t=a=a.return);continue}break}while(!0)}function _g(){var n=zu.current;return zu.current=ju,n===null?ju:n}function Pd(){(At===0||At===3||At===2)&&(At=4),Rt===null||(Zs&268435455)===0&&(Uu&268435455)===0||fs(Rt,Lt)}function Gu(n,s){var a=qe;qe|=2;var h=_g();(Rt!==n||Lt!==s)&&(Lr=null,ti(n,s));do try{ox();break}catch(f){vg(n,f)}while(!0);if($h(),qe=a,zu.current=h,_t!==null)throw Error(t(261));return Rt=null,Lt=0,At}function ox(){for(;_t!==null;)wg(_t)}function ax(){for(;_t!==null&&!Kl();)wg(_t)}function wg(n){var s=Ig(n.alternate,n,_n);n.memoizedProps=n.pendingProps,s===null?xg(n):_t=s,xd.current=null}function xg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Zw(a,s,_n),a!==null){_t=a;return}}else{if(a=ex(a,s),a!==null){a.flags&=32767,_t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,_t=null;return}}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);At===0&&(At=5)}function ni(n,s,a){var h=Me,f=Dn.transition;try{Dn.transition=null,Me=1,lx(n,s,a,h)}finally{Dn.transition=f,Me=h}return null}function lx(n,s,a,h){do xo();while(hs!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(et(n,g),n===Rt&&(_t=Rt=null,Lt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||qu||(qu=!0,Sg(bn,function(){return xo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Dn.transition,Dn.transition=null;var w=Me;Me=1;var P=qe;qe|=4,xd.current=null,nx(n,a),hg(a,n),Cw(Ph),es=!!kh,Ph=kh=null,n.current=a,rx(a),fh(),qe=P,Me=w,Dn.transition=g}else n.current=a;if(qu&&(qu=!1,hs=n,Ku=f),g=n.pendingLanes,g===0&&(cs=null),Gl(a.stateNode),cn(n,tt()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if($u)throw $u=!1,n=Id,Id=null,n;return(Ku&1)!==0&&n.tag!==0&&xo(),g=n.pendingLanes,(g&1)!==0?n===Sd?Qa++:(Qa=0,Sd=n):Qa=0,os(),null}function xo(){if(hs!==null){var n=Jr(Ku),s=Dn.transition,a=Me;try{if(Dn.transition=null,Me=16>n?16:n,hs===null)var h=!1;else{if(n=hs,hs=null,Ku=0,(qe&6)!==0)throw Error(t(331));var f=qe;for(qe|=4,pe=n.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var P=g.deletions;if(P!==null){for(var D=0;D<P.length;D++){var $=P[D];for(pe=$;pe!==null;){var J=pe;switch(J.tag){case 0:case 11:case 15:Wa(8,J,g)}var ee=J.child;if(ee!==null)ee.return=J,pe=ee;else for(;pe!==null;){J=pe;var Y=J.sibling,ce=J.return;if(og(J),J===$){pe=null;break}if(Y!==null){Y.return=ce,pe=Y;break}pe=ce}}}var ge=g.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var yt=ve.sibling;ve.sibling=null,ve=yt}while(ve!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Wa(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,pe=F;break e}pe=g.return}}var j=n.current;for(pe=j;pe!==null;){w=pe;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,pe=B;else e:for(w=j;pe!==null;){if(P=pe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Bu(9,P)}}catch(_e){ft(P,P.return,_e)}if(P===w){pe=null;break e}var se=P.sibling;if(se!==null){se.return=P.return,pe=se;break e}pe=P.return}}if(qe=f,os(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Fs,n)}catch(_e){}h=!0}return h}finally{Me=a,Dn.transition=s}}return!1}function Eg(n,s,a){s=yo(a,s),s=Bm(n,s,1),n=ls(n,s,1),s=en(),n!==null&&(Xr(n,1,s),cn(n,s))}function ft(n,s,a){if(n.tag===3)Eg(n,n,a);else for(;s!==null;){if(s.tag===3){Eg(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))){n=yo(a,n),n=zm(s,n,1),s=ls(s,n,1),n=en(),s!==null&&(Xr(s,1,n),cn(s,n));break}}s=s.return}}function ux(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=en(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Lt&a)===a&&(At===4||At===3&&(Lt&130023424)===Lt&&500>tt()-Td?ti(n,0):Ed|=a),cn(n,s)}function Tg(n,s){s===0&&((n.mode&1)===0?s=1:(s=$i,$i<<=1,($i&130023424)===0&&($i=4194304)));var a=en();n=jr(n,s),n!==null&&(Xr(n,s,a),cn(n,a))}function cx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Tg(n,a)}function hx(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Tg(n,a)}var Ig;Ig=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return ln=!1,Jw(n,s,a);ln=(n.flags&131072)!==0}else ln=!1,ot&&(s.flags&1048576)!==0&&rm(s,Tu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Lu(n,s),n=s.pendingProps;var f=lo(s,$t.current);mo(s,a),f=ed(null,s,h,n,f,a);var g=td();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(h)?(g=!0,wu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Hh(s),f.updater=Ou,s.stateNode=f,f._reactInternals=s,ad(s,h,n,a),s=hd(null,s,h,!0,g,a)):(s.tag=0,ot&&g&&Mh(s),Zt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Lu(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=fx(h),n=Yn(h,n),f){case 0:s=cd(null,s,h,n,a);break e;case 1:s=Xm(null,s,h,n,a);break e;case 11:s=Km(null,s,h,n,a);break e;case 14:s=Wm(null,s,h,Yn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),cd(n,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),Xm(n,s,h,f,a);case 3:e:{if(Ym(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,dm(n,s),ku(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=yo(Error(t(423)),s),s=Jm(n,s,h,a,f);break e}else if(h!==f){f=yo(Error(t(424)),s),s=Jm(n,s,h,a,f);break e}else for(vn=rs(s.stateNode.containerInfo.firstChild),yn=s,ot=!0,Xn=null,a=cm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ho(),h===f){s=Mr(n,s,a);break e}Zt(n,s,h,a)}s=s.child}return s;case 5:return mm(s),n===null&&Bh(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,Nh(h,f)?w=null:g!==null&&Nh(h,g)&&(s.flags|=32),Qm(n,s),Zt(n,s,w,a),s.child;case 6:return n===null&&Bh(s),null;case 13:return Zm(n,s,a);case 4:return Gh(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=fo(s,null,h,a):Zt(n,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),Km(n,s,h,f,a);case 7:return Zt(n,s,s.pendingProps,a),s.child;case 8:return Zt(n,s,s.pendingProps.children,a),s.child;case 12:return Zt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,nt(bu,h._currentValue),h._currentValue=w,g!==null)if(Qn(g.value,w)){if(g.children===f.children&&!on.current){s=Mr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var D=P.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Or(-1,a&-a),D.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var J=$.pending;J===null?D.next=D:(D.next=J.next,J.next=D),$.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),Kh(g.return,a,s),P.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),Kh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Zt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,mo(s,a),f=Nn(f),h=h(f),s.flags|=1,Zt(n,s,h,a),s.child;case 14:return h=s.type,f=Yn(h,s.pendingProps),f=Yn(h.type,f),Wm(n,s,h,f,a);case 15:return Hm(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),Lu(n,s),s.tag=1,an(h)?(n=!0,wu(s)):n=!1,mo(s,a),Lm(s,h,f),ad(s,h,f,a),hd(null,s,h,!0,n,a);case 19:return tg(n,s,a);case 22:return Gm(n,s,a)}throw Error(t(156,s.tag))};function Sg(n,s){return zi(n,s)}function dx(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,a,h){return new dx(n,s,a,h)}function Nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fx(n){if(typeof n=="function")return Nd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R)return 11;if(n===de)return 14}return 2}function ps(n,s){var a=n.alternate;return a===null?(a=Vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Qu(n,s,a,h,f,g){var w=2;if(h=n,typeof n=="function")Nd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return ri(a.children,f,g,s);case T:w=8,f|=8;break;case b:return n=Vn(12,a,s,f|2),n.elementType=b,n.lanes=g,n;case A:return n=Vn(13,a,s,f),n.elementType=A,n.lanes=g,n;case fe:return n=Vn(19,a,s,f),n.elementType=fe,n.lanes=g,n;case Ne:return Xu(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:w=10;break e;case k:w=9;break e;case R:w=11;break e;case de:w=14;break e;case Ve:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Vn(w,a,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function ri(n,s,a,h){return n=Vn(7,n,h,s),n.lanes=a,n}function Xu(n,s,a,h){return n=Vn(22,n,h,s),n.elementType=Ne,n.lanes=a,n.stateNode={isHidden:!1},n}function Rd(n,s,a){return n=Vn(6,n,null,s),n.lanes=a,n}function Dd(n,s,a){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function px(n,s,a,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qr(0),this.expirationTimes=Qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Vd(n,s,a,h,f,g,w,P,D){return n=new px(n,s,a,P,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Vn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(g),n}function mx(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function bg(n){if(!n)return is;n=n._reactInternals;e:{if(Un(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return em(n,a,s)}return s}function Ag(n,s,a,h,f,g,w,P,D){return n=Vd(a,h,!0,n,f,g,w,P,D),n.context=bg(null),a=n.current,h=en(),f=ds(a),g=Or(h,f),g.callback=s!=null?s:null,ls(a,g,f),n.current.lanes=f,Xr(n,f,h),cn(n,h),n}function Yu(n,s,a,h){var f=s.current,g=en(),w=ds(f);return a=bg(a),s.context===null?s.context=a:s.pendingContext=a,s=Or(g,w),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ls(f,s,w),n!==null&&(er(n,f,w,g),Cu(n,f,w)),w}function Ju(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function jd(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function gx(){return null}var kg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Od(n){this._internalRoot=n}Zu.prototype.render=Od.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Yu(n,s,null,null)},Zu.prototype.unmount=Od.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ei(function(){Yu(null,n,null,null)}),s[Nr]=null}};function Zu(n){this._internalRoot=n}Zu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<ir.length&&s!==0&&s<ir[a].priority;a++);ir.splice(a,0,n),a===0&&nu(n)}};function Md(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ec(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function yx(n,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=Ju(w);g.call($)}}var w=Ag(s,h,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=w,n[Nr]=w.current,Da(n.nodeType===8?n.parentNode:n),ei(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var P=h;h=function(){var $=Ju(D);P.call($)}}var D=Vd(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=D,n[Nr]=D.current,Da(n.nodeType===8?n.parentNode:n),ei(function(){Yu(s,D,a,h)}),D}function tc(n,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var P=f;f=function(){var D=Ju(w);P.call(D)}}Yu(s,w,n,f)}else w=yx(a,s,n,f,h);return Ju(w)}Yl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Gr(s.pendingLanes);a!==0&&(Yr(s,a|1),cn(s,tt()),(qe&6)===0&&(wo=tt()+500,os()))}break;case 13:ei(function(){var h=jr(n,1);if(h!==null){var f=en();er(h,n,1,f)}}),jd(n,1)}},qi=function(n){if(n.tag===13){var s=jr(n,134217728);if(s!==null){var a=en();er(s,n,134217728,a)}jd(n,134217728)}},Jl=function(n){if(n.tag===13){var s=ds(n),a=jr(n,s);if(a!==null){var h=en();er(a,n,s,h)}jd(n,s)}},Zl=function(){return Me},eu=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},ji=function(n,s,a){switch(s){case"input":if(xr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var f=vu(h);if(!f)throw Error(t(90));We(h),xr(h,f)}}}break;case"textarea":Di(n,a);break;case"select":s=a.value,s!=null&&Tr(n,!!a.multiple,s,!1)}},Vs=Cd,pa=ei;var vx={usingClientEntryPoint:!1,Events:[Oa,oo,vu,rr,fa,Cd]},Xa={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_x={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ya(n),n===null?null:n.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||gx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{Fs=nc.inject(_x),fn=nc}catch(n){}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vx,hn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Md(s))throw Error(t(200));return mx(n,s,null,a)},hn.createRoot=function(n,s){if(!Md(n))throw Error(t(299));var a=!1,h="",f=kg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Vd(n,1,!1,null,null,a,!1,h,f),n[Nr]=s.current,Da(n.nodeType===8?n.parentNode:n),new Od(s)},hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ya(s),n=n===null?null:n.stateNode,n},hn.flushSync=function(n){return ei(n)},hn.hydrate=function(n,s,a){if(!ec(s))throw Error(t(200));return tc(null,n,s,!0,a)},hn.hydrateRoot=function(n,s,a){if(!Md(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=kg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Ag(s,null,n,1,a!=null?a:null,f,!1,g,w),n[Nr]=s.current,Da(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Zu(s)},hn.render=function(n,s,a){if(!ec(s))throw Error(t(200));return tc(null,n,s,!1,a)},hn.unmountComponentAtNode=function(n){if(!ec(n))throw Error(t(40));return n._reactRootContainer?(ei(function(){tc(null,null,n,!1,function(){n._reactRootContainer=null,n[Nr]=null})}),!0):!1},hn.unstable_batchedUpdates=Cd,hn.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!ec(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return tc(n,s,a,!1,h)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var $g;function kv(){if($g)return Ud.exports;$g=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ud.exports=Dx(),Ud.exports}var qg;function Vx(){if(qg)return sc;qg=1;var i=kv();return sc.createRoot=i.createRoot,sc.hydrateRoot=i.hydrateRoot,sc}var jx=Vx();const Ox=Cv(jx),Mx={primary:"bg-accent-blue hover:bg-blue-600 text-white shadow-glow-blue/30",secondary:"bg-bg-hover hover:bg-border text-white border border-border",danger:"bg-accent-red hover:bg-red-600 text-white",success:"bg-accent-green hover:bg-green-600 text-white",ghost:"bg-transparent hover:bg-bg-hover text-gray-400 hover:text-white"},Lx={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},zt=d=>{var p=d,{variant:i="primary",size:e="md",isLoading:t=!1,disabled:r,className:o="",children:l}=p,c=Fd(p,["variant","size","isLoading","disabled","className","children"]);return y.jsxs("button",jn(ht({className:`
        inline-flex items-center justify-center gap-2 rounded-lg font-semibold
        transition-all duration-200 ease-out
        disabled:opacity-50 disabled:cursor-not-allowed
        active:scale-95
        ${Mx[i]}
        ${Lx[e]}
        ${o}
      `,disabled:r||t},c),{children:[t&&y.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),l]}))},Fx=()=>{};var Kg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Bx=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Nv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,v=p?i[o+2]:0,x=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|v>>6,V=v&63;p||(V=64,c||(S=64)),r.push(t[x],t[E],t[S],t[V])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Pv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Bx(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||d==null||v==null||E==null)throw new zx;const S=l<<2|d>>4;if(r.push(S),v!==64){const V=d<<4&240|v>>2;if(r.push(V),E!==64){const z=v<<6&192|E;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ux=function(i){const e=Pv(i);return Nv.encodeByteArray(e,!0)},Ic=function(i){return Ux(i).replace(/\./g,"")},$x=function(i){try{return Nv.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=()=>Rv().__FIREBASE_DEFAULTS__,Kx=()=>{if(typeof process=="undefined"||typeof Kg=="undefined")return;const i=Kg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Wx=()=>{if(typeof document=="undefined")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=i&&$x(i[1]);return e&&JSON.parse(e)},Df=()=>{try{return Fx()||qx()||Kx()||Wx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Hx=i=>{var e,t;return(t=(e=Df())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Gx=i=>{const e=Hx(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Dv=()=>{var i;return(i=Df())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function Xx(i){return Z(this,null,function*(){return(yield fetch(i,{credentials:"include"})).ok})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ic(JSON.stringify(t)),Ic(JSON.stringify(c)),""].join(".")}const ll={};function Jx(){const i={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?i.emulator.push(e):i.prod.push(e);return i}function Zx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Wg=!1;function e1(i,e){if(typeof window=="undefined"||typeof document=="undefined"||!Vf(window.location.host)||ll[i]===e||ll[i]||Wg)return;ll[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=Jx().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Wg=!0,c()},S}function x(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=Zx(r),V=t("text"),z=document.getElementById(V)||document.createElement("span"),K=t("learnmore"),U=document.getElementById(K)||document.createElement("a"),ie=t("preprendIcon"),Q=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const H=S.element;d(H),x(U,K);const te=v();p(Q,ie),H.append(Q,z,U,te),document.body.appendChild(H)}l?(z.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vv(){var i;const e=(i=Df())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function jv(){return!Vv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ov(){return!Vv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Mv(){try{return typeof indexedDB=="object"}catch(i){return!1}}function t1(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="FirebaseError";class Jo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=n1,Object.setPrototypeOf(this,Jo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lv.prototype.create)}}class Lv{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?r1(l,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Jo(o,d,r)}}function r1(i,e){return i.replace(s1,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const s1=/\{\$([^}]+)}/g;function bc(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(Hg(l)&&Hg(c)){if(!bc(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Hg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(i){return i&&i._delegate?i._delegate:i}class vl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Qx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch(o){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a1(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch(l){}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return Z(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch(l){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(o){}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o1(i){return i===ii?void 0:i}function a1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const u1={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},c1=Ue.INFO,h1={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},d1=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=h1[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fv{constructor(e){this.name=e,this._logLevel=c1,this._logHandler=d1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const f1=(i,e)=>e.some(t=>i instanceof t);let Gg,Qg;function p1(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m1(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,tf=new WeakMap,zv=new WeakMap,Kd=new WeakMap,jf=new WeakMap;function g1(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(xs(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Bv.set(t,i)}).catch(()=>{}),jf.set(e,i),e}function y1(i){if(tf.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});tf.set(i,e)}let nf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return tf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||zv.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function v1(i){nf=i(nf)}function _1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Wd(this),e,...t);return zv.set(r,e.sort?e.sort():[e]),xs(r)}:m1().includes(i)?function(...e){return i.apply(Wd(this),e),xs(Bv.get(this))}:function(...e){return xs(i.apply(Wd(this),e))}}function w1(i){return typeof i=="function"?_1(i):(i instanceof IDBTransaction&&y1(i),f1(i,p1())?new Proxy(i,nf):i)}function xs(i){if(i instanceof IDBRequest)return g1(i);if(Kd.has(i))return Kd.get(i);const e=w1(i);return e!==i&&(Kd.set(i,e),jf.set(e,i)),e}const Wd=i=>jf.get(i);function x1(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),d=xs(c);return r&&c.addEventListener("upgradeneeded",p=>{r(xs(c.result),p.oldVersion,p.newVersion,xs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const E1=["get","getKey","getAll","getAllKeys","count"],T1=["put","add","delete","clear"],Hd=new Map;function Xg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=T1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||E1.includes(t)))return;const l=function(c,...d){return Z(this,null,function*(){const p=this.transaction(c,o?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(yield Promise.all([v[t](...d),o&&p.done]))[0]})};return Hd.set(e,l),l}v1(i=>jn(ht({},i),{get:(e,t,r)=>Xg(e,t)||i.get(e,t,r),has:(e,t)=>!!Xg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function S1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",Yg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Fv("@firebase/app"),b1="@firebase/app-compat",A1="@firebase/analytics-compat",C1="@firebase/analytics",k1="@firebase/app-check-compat",P1="@firebase/app-check",N1="@firebase/auth",R1="@firebase/auth-compat",D1="@firebase/database",V1="@firebase/data-connect",j1="@firebase/database-compat",O1="@firebase/functions",M1="@firebase/functions-compat",L1="@firebase/installations",F1="@firebase/installations-compat",B1="@firebase/messaging",z1="@firebase/messaging-compat",U1="@firebase/performance",$1="@firebase/performance-compat",q1="@firebase/remote-config",K1="@firebase/remote-config-compat",W1="@firebase/storage",H1="@firebase/storage-compat",G1="@firebase/firestore",Q1="@firebase/ai",X1="@firebase/firestore-compat",Y1="firebase",J1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",Z1={[rf]:"fire-core",[b1]:"fire-core-compat",[C1]:"fire-analytics",[A1]:"fire-analytics-compat",[P1]:"fire-app-check",[k1]:"fire-app-check-compat",[N1]:"fire-auth",[R1]:"fire-auth-compat",[D1]:"fire-rtdb",[V1]:"fire-data-connect",[j1]:"fire-rtdb-compat",[O1]:"fire-fn",[M1]:"fire-fn-compat",[L1]:"fire-iid",[F1]:"fire-iid-compat",[B1]:"fire-fcm",[z1]:"fire-fcm-compat",[U1]:"fire-perf",[$1]:"fire-perf-compat",[q1]:"fire-rc",[K1]:"fire-rc-compat",[W1]:"fire-gcs",[H1]:"fire-gcs-compat",[G1]:"fire-fst",[X1]:"fire-fst-compat",[Q1]:"fire-vertex","fire-js":"fire-js",[Y1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,eE=new Map,of=new Map;function Jg(i,e){try{i.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Cc(i){const e=i.name;if(of.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,i);for(const t of Ac.values())Jg(t,i);for(const t of eE.values())Jg(t,i);return!0}function tE(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function nE(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Lv("app","Firebase",rE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=J1;function Uv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sf,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(t||(t=Dv()),!t)throw Es.create("no-options");const l=Ac.get(o);if(l){if(bc(t,l.options)&&bc(r,l.config))return l;throw Es.create("duplicate-app",{appName:o})}const c=new l1(o);for(const p of of.values())c.addComponent(p);const d=new sE(t,r,c);return Ac.set(o,d),d}function oE(i=sf){const e=Ac.get(i);if(!e&&i===sf&&Dv())return Uv();if(!e)throw Es.create("no-app",{appName:i});return e}function jo(i,e,t){var r;let o=(r=Z1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(d.join(" "));return}Cc(new vl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firebase-heartbeat-database",lE=1,_l="firebase-heartbeat-store";let Gd=null;function $v(){return Gd||(Gd=x1(aE,lE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(i=>{throw Es.create("idb-open",{originalErrorMessage:i.message})})),Gd}function uE(i){return Z(this,null,function*(){try{const t=(yield $v()).transaction(_l),r=yield t.objectStore(_l).get(qv(i));return yield t.done,r}catch(e){if(e instanceof Jo)Ur.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}})}function Zg(i,e){return Z(this,null,function*(){try{const r=(yield $v()).transaction(_l,"readwrite");yield r.objectStore(_l).put(e,qv(i)),yield r.done}catch(t){if(t instanceof Jo)Ur.warn(t.message);else{const r=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(r.message)}}})}function qv(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=1024,hE=30;class dE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return Z(this,null,function*(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ey();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>hE){const c=mE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}})}getHeartbeatsHeader(){return Z(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ey(),{heartbeatsToSend:r,unsentEntries:o}=fE(this._heartbeatsCache.heartbeats),l=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}})}}function ey(){return new Date().toISOString().substring(0,10)}function fE(i,e=cE){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ty(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ty(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class pE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Z(this,null,function*(){return Mv()?t1().then(()=>!0).catch(()=>!1):!1})}read(){return Z(this,null,function*(){if(yield this._canUseIndexedDBPromise){const t=yield uE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return Z(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return Z(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return Zg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return})}}function ty(i){return Ic(JSON.stringify({version:2,heartbeats:i})).length}function mE(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(i){Cc(new vl("platform-logger",e=>new I1(e),"PRIVATE")),Cc(new vl("heartbeat",e=>new dE(e),"PRIVATE")),jo(rf,Yg,i),jo(rf,Yg,"esm2017"),jo("fire-js","")}gE("");var ny=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,Kv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function b(){}b.prototype=T.prototype,N.D=T.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(C,k,R){for(var A=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)A[fe-2]=arguments[fe];return T.prototype[k].apply(C,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,T,b){b||(b=0);var C=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)C[k]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(k=0;16>k;++k)C[k]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=N.g[0],b=N.g[1],k=N.g[2];var R=N.g[3],A=T+(R^b&(k^R))+C[0]+3614090360&4294967295;T=b+(A<<7&4294967295|A>>>25),A=R+(k^T&(b^k))+C[1]+3905402710&4294967295,R=T+(A<<12&4294967295|A>>>20),A=k+(b^R&(T^b))+C[2]+606105819&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(T^k&(R^T))+C[3]+3250441966&4294967295,b=k+(A<<22&4294967295|A>>>10),A=T+(R^b&(k^R))+C[4]+4118548399&4294967295,T=b+(A<<7&4294967295|A>>>25),A=R+(k^T&(b^k))+C[5]+1200080426&4294967295,R=T+(A<<12&4294967295|A>>>20),A=k+(b^R&(T^b))+C[6]+2821735955&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(T^k&(R^T))+C[7]+4249261313&4294967295,b=k+(A<<22&4294967295|A>>>10),A=T+(R^b&(k^R))+C[8]+1770035416&4294967295,T=b+(A<<7&4294967295|A>>>25),A=R+(k^T&(b^k))+C[9]+2336552879&4294967295,R=T+(A<<12&4294967295|A>>>20),A=k+(b^R&(T^b))+C[10]+4294925233&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(T^k&(R^T))+C[11]+2304563134&4294967295,b=k+(A<<22&4294967295|A>>>10),A=T+(R^b&(k^R))+C[12]+1804603682&4294967295,T=b+(A<<7&4294967295|A>>>25),A=R+(k^T&(b^k))+C[13]+4254626195&4294967295,R=T+(A<<12&4294967295|A>>>20),A=k+(b^R&(T^b))+C[14]+2792965006&4294967295,k=R+(A<<17&4294967295|A>>>15),A=b+(T^k&(R^T))+C[15]+1236535329&4294967295,b=k+(A<<22&4294967295|A>>>10),A=T+(k^R&(b^k))+C[1]+4129170786&4294967295,T=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(T^b))+C[6]+3225465664&4294967295,R=T+(A<<9&4294967295|A>>>23),A=k+(T^b&(R^T))+C[11]+643717713&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^T&(k^R))+C[0]+3921069994&4294967295,b=k+(A<<20&4294967295|A>>>12),A=T+(k^R&(b^k))+C[5]+3593408605&4294967295,T=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(T^b))+C[10]+38016083&4294967295,R=T+(A<<9&4294967295|A>>>23),A=k+(T^b&(R^T))+C[15]+3634488961&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^T&(k^R))+C[4]+3889429448&4294967295,b=k+(A<<20&4294967295|A>>>12),A=T+(k^R&(b^k))+C[9]+568446438&4294967295,T=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(T^b))+C[14]+3275163606&4294967295,R=T+(A<<9&4294967295|A>>>23),A=k+(T^b&(R^T))+C[3]+4107603335&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^T&(k^R))+C[8]+1163531501&4294967295,b=k+(A<<20&4294967295|A>>>12),A=T+(k^R&(b^k))+C[13]+2850285829&4294967295,T=b+(A<<5&4294967295|A>>>27),A=R+(b^k&(T^b))+C[2]+4243563512&4294967295,R=T+(A<<9&4294967295|A>>>23),A=k+(T^b&(R^T))+C[7]+1735328473&4294967295,k=R+(A<<14&4294967295|A>>>18),A=b+(R^T&(k^R))+C[12]+2368359562&4294967295,b=k+(A<<20&4294967295|A>>>12),A=T+(b^k^R)+C[5]+4294588738&4294967295,T=b+(A<<4&4294967295|A>>>28),A=R+(T^b^k)+C[8]+2272392833&4294967295,R=T+(A<<11&4294967295|A>>>21),A=k+(R^T^b)+C[11]+1839030562&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^T)+C[14]+4259657740&4294967295,b=k+(A<<23&4294967295|A>>>9),A=T+(b^k^R)+C[1]+2763975236&4294967295,T=b+(A<<4&4294967295|A>>>28),A=R+(T^b^k)+C[4]+1272893353&4294967295,R=T+(A<<11&4294967295|A>>>21),A=k+(R^T^b)+C[7]+4139469664&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^T)+C[10]+3200236656&4294967295,b=k+(A<<23&4294967295|A>>>9),A=T+(b^k^R)+C[13]+681279174&4294967295,T=b+(A<<4&4294967295|A>>>28),A=R+(T^b^k)+C[0]+3936430074&4294967295,R=T+(A<<11&4294967295|A>>>21),A=k+(R^T^b)+C[3]+3572445317&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^T)+C[6]+76029189&4294967295,b=k+(A<<23&4294967295|A>>>9),A=T+(b^k^R)+C[9]+3654602809&4294967295,T=b+(A<<4&4294967295|A>>>28),A=R+(T^b^k)+C[12]+3873151461&4294967295,R=T+(A<<11&4294967295|A>>>21),A=k+(R^T^b)+C[15]+530742520&4294967295,k=R+(A<<16&4294967295|A>>>16),A=b+(k^R^T)+C[2]+3299628645&4294967295,b=k+(A<<23&4294967295|A>>>9),A=T+(k^(b|~R))+C[0]+4096336452&4294967295,T=b+(A<<6&4294967295|A>>>26),A=R+(b^(T|~k))+C[7]+1126891415&4294967295,R=T+(A<<10&4294967295|A>>>22),A=k+(T^(R|~b))+C[14]+2878612391&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~T))+C[5]+4237533241&4294967295,b=k+(A<<21&4294967295|A>>>11),A=T+(k^(b|~R))+C[12]+1700485571&4294967295,T=b+(A<<6&4294967295|A>>>26),A=R+(b^(T|~k))+C[3]+2399980690&4294967295,R=T+(A<<10&4294967295|A>>>22),A=k+(T^(R|~b))+C[10]+4293915773&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~T))+C[1]+2240044497&4294967295,b=k+(A<<21&4294967295|A>>>11),A=T+(k^(b|~R))+C[8]+1873313359&4294967295,T=b+(A<<6&4294967295|A>>>26),A=R+(b^(T|~k))+C[15]+4264355552&4294967295,R=T+(A<<10&4294967295|A>>>22),A=k+(T^(R|~b))+C[6]+2734768916&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~T))+C[13]+1309151649&4294967295,b=k+(A<<21&4294967295|A>>>11),A=T+(k^(b|~R))+C[4]+4149444226&4294967295,T=b+(A<<6&4294967295|A>>>26),A=R+(b^(T|~k))+C[11]+3174756917&4294967295,R=T+(A<<10&4294967295|A>>>22),A=k+(T^(R|~b))+C[2]+718787259&4294967295,k=R+(A<<15&4294967295|A>>>17),A=b+(R^(k|~T))+C[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+R&4294967295}r.prototype.u=function(N,T){T===void 0&&(T=N.length);for(var b=T-this.blockSize,C=this.B,k=this.h,R=0;R<T;){if(k==0)for(;R<=b;)o(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<T;)if(C[k++]=N.charCodeAt(R++),k==this.blockSize){o(this,C),k=0;break}}else for(;R<T;)if(C[k++]=N[R++],k==this.blockSize){o(this,C),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;var b=8*this.o;for(T=N.length-8;T<N.length;++T)N[T]=b&255,b/=256;for(this.u(N),N=Array(16),T=b=0;4>T;++T)for(var C=0;32>C;C+=8)N[b++]=this.g[T]>>>C&255;return N};function l(N,T){var b=d;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=T(N)}function c(N,T){this.h=T;for(var b=[],C=!0,k=N.length-1;0<=k;k--){var R=N[k]|0;C&&R==T||(b[k]=R,C=!1)}this.g=b}var d={};function p(N){return-128<=N&&128>N?l(N,function(T){return new c([T|0],0>T?-1:0)}):new c([N|0],0>N?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return U(v(-N));for(var T=[],b=1,C=0;N>=b;C++)T[C]=N/b|0,b*=4294967296;return new c(T,0)}function x(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return U(x(N.substring(1),T));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=v(Math.pow(T,8)),C=E,k=0;k<N.length;k+=8){var R=Math.min(8,N.length-k),A=parseInt(N.substring(k,k+R),T);8>R?(R=v(Math.pow(T,R)),C=C.j(R).add(v(A))):(C=C.j(b),C=C.add(v(A)))}return C}var E=p(0),S=p(1),V=p(16777216);i=c.prototype,i.m=function(){if(K(this))return-U(this).m();for(var N=0,T=1,b=0;b<this.g.length;b++){var C=this.i(b);N+=(0<=C?C:4294967296+C)*T,T*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(z(this))return"0";if(K(this))return"-"+U(this).toString(N);for(var T=v(Math.pow(N,6)),b=this,C="";;){var k=te(b,T).g;b=ie(b,k.j(T));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=k,z(b))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function z(N){if(N.h!=0)return!1;for(var T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function K(N){return N.h==-1}i.l=function(N){return N=ie(this,N),K(N)?-1:z(N)?0:1};function U(N){for(var T=N.g.length,b=[],C=0;C<T;C++)b[C]=~N.g[C];return new c(b,~N.h).add(S)}i.abs=function(){return K(this)?U(this):this},i.add=function(N){for(var T=Math.max(this.g.length,N.g.length),b=[],C=0,k=0;k<=T;k++){var R=C+(this.i(k)&65535)+(N.i(k)&65535),A=(R>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);C=A>>>16,R&=65535,A&=65535,b[k]=A<<16|R}return new c(b,b[b.length-1]&-2147483648?-1:0)};function ie(N,T){return N.add(U(T))}i.j=function(N){if(z(this)||z(N))return E;if(K(this))return K(N)?U(this).j(U(N)):U(U(this).j(N));if(K(N))return U(this.j(U(N)));if(0>this.l(V)&&0>N.l(V))return v(this.m()*N.m());for(var T=this.g.length+N.g.length,b=[],C=0;C<2*T;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<N.g.length;k++){var R=this.i(C)>>>16,A=this.i(C)&65535,fe=N.i(k)>>>16,de=N.i(k)&65535;b[2*C+2*k]+=A*de,Q(b,2*C+2*k),b[2*C+2*k+1]+=R*de,Q(b,2*C+2*k+1),b[2*C+2*k+1]+=A*fe,Q(b,2*C+2*k+1),b[2*C+2*k+2]+=R*fe,Q(b,2*C+2*k+2)}for(C=0;C<T;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=T;C<2*T;C++)b[C]=0;return new c(b,0)};function Q(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function H(N,T){this.g=N,this.h=T}function te(N,T){if(z(T))throw Error("division by zero");if(z(N))return new H(E,E);if(K(N))return T=te(U(N),T),new H(U(T.g),U(T.h));if(K(T))return T=te(N,U(T)),new H(U(T.g),T.h);if(30<N.g.length){if(K(N)||K(T))throw Error("slowDivide_ only works with positive integers.");for(var b=S,C=T;0>=C.l(N);)b=me(b),C=me(C);var k=le(b,1),R=le(C,1);for(C=le(C,2),b=le(b,2);!z(C);){var A=R.add(C);0>=A.l(N)&&(k=k.add(b),R=A),C=le(C,1),b=le(b,1)}return T=ie(N,k.j(T)),new H(k,T)}for(k=E;0<=N.l(T);){for(b=Math.max(1,Math.floor(N.m()/T.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=v(b),A=R.j(T);K(A)||0<A.l(N);)b-=C,R=v(b),A=R.j(T);z(R)&&(R=S),k=k.add(R),N=ie(N,A)}return new H(k,N)}i.A=function(N){return te(this,N).h},i.and=function(N){for(var T=Math.max(this.g.length,N.g.length),b=[],C=0;C<T;C++)b[C]=this.i(C)&N.i(C);return new c(b,this.h&N.h)},i.or=function(N){for(var T=Math.max(this.g.length,N.g.length),b=[],C=0;C<T;C++)b[C]=this.i(C)|N.i(C);return new c(b,this.h|N.h)},i.xor=function(N){for(var T=Math.max(this.g.length,N.g.length),b=[],C=0;C<T;C++)b[C]=this.i(C)^N.i(C);return new c(b,this.h^N.h)};function me(N){for(var T=N.g.length+1,b=[],C=0;C<T;C++)b[C]=N.i(C)<<1|N.i(C-1)>>>31;return new c(b,N.h)}function le(N,T){var b=T>>5;T%=32;for(var C=N.g.length-b,k=[],R=0;R<C;R++)k[R]=0<T?N.i(R+b)>>>T|N.i(R+b+1)<<32-T:N.i(R+b);return new c(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kv=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=x,Ts=c}).apply(typeof ny!="undefined"?ny:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wv,rl,Hv,dc,af,Gv,Qv,Xv;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in _))break e;_=_[M]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,I=!1,M={next:function(){if(!I&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function x(u,m,_){return u.call.apply(u.bind,arguments)}function E(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:E,S.apply(null,arguments)}function V(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function z(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,M,q){for(var oe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)oe[Ge-2]=arguments[Ge];return m.prototype[M].apply(I,oe)}}function K(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const M=u.length||0,q=I.length||0;u.length=M+q;for(let oe=0;oe<q;oe++)u[M+oe]=I[oe]}else u.push(I)}}class ie{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Q(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var me=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function le(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function T(u){const m={};for(const _ in u)m[_]=u[_];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,m){let _,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(_ in I)u[_]=I[_];for(let q=0;q<b.length;q++)_=b[q],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function k(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function R(u){d.setTimeout(()=>{throw u},0)}function A(){var u=xe;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class fe{constructor(){this.h=this.g=null}add(m,_){const I=de.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var de=new ie(()=>new Ve,u=>u.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,re=!1,xe=new fe,ae=()=>{const u=d.Promise.resolve(void 0);Ne=()=>{u.then(O)}};var O=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){R(_)}var m=de;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}re=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch(_){}return u})();function Re(u,m){if(we.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(me){e:{try{te(m.nodeName);var M=!0;break e}catch(q){}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}z(Re,we);var Oe={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ye(u,m,_,I,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=M,this.key=++$e,this.da=this.fa=!1}function mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,_,I,M){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var oe=He(u,m,I,M);return-1<oe?(m=u[oe],_||(m.fa=!1)):(m=new Ye(m,this.src,q,!!I,M),m.fa=_,u.push(m)),m};function We(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],M=Array.prototype.indexOf.call(I,m,void 0),q;(q=0<=M)&&Array.prototype.splice.call(I,M,1),q&&(mt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function He(u,m,_,I){for(var M=0;M<u.length;++M){var q=u[M];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==I)return M}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),Ut={};function In(u,m,_,I,M){if(Array.isArray(m)){for(var q=0;q<m.length;q++)In(u,m[q],_,I,M);return null}return _=oa(_),u&&u[Fe]?u.K(m,_,v(I)?!!I.capture:!1,M):xr(u,m,_,!1,I,M)}function xr(u,m,_,I,M,q){if(!m)throw Error("Invalid event type");var oe=v(M)?!!M.capture:!!M,Ge=Ri(u);if(Ge||(u[Xt]=Ge=new Te(u)),_=Ge.add(m,_,I,oe,q),_.proxy)return _;if(I=Pi(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)Pe||(M=oe),M===void 0&&(M=!1),u.addEventListener(m.toString(),I,M);else if(u.attachEvent)u.attachEvent(Tr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Pi(){function u(_){return m.call(u.src,u.listener,_)}const m=ia;return u}function Ni(u,m,_,I,M){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ni(u,m[q],_,I,M);else I=v(I)?!!I.capture:!!I,_=oa(_),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=He(q,_,I,M),-1<_&&(mt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ri(u))&&(m=u.g[m.toString()],u=-1,m&&(u=He(m,_,I,M)),(_=-1<u?m[u]:null)&&Er(_))}function Er(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])We(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(Tr(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Ri(m))?(We(_,u),_.h==0&&(_.src=null,m[Xt]=null)):mt(u)}}}function Tr(u){return u in Ut?Ut[u]:Ut[u]="on"+u}function ia(u,m){if(u.da)u=!0;else{m=new Re(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&Er(u),u=_.call(I,m)}return u}function Ri(u){return u=u[Xt],u instanceof Te?u:null}var Di="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(u){return typeof u=="function"?u:(u[Di]||(u[Di]=function(m){return u.handleEvent(m)}),u[Di])}function Tt(){W.call(this),this.i=new Te(this),this.M=this,this.F=null}z(Tt,W),Tt.prototype[Fe]=!0,Tt.prototype.removeEventListener=function(u,m,_,I){Ni(this,u,m,_,I)};function It(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new we(m,u);else if(m instanceof we)m.target=m.target||u;else{var M=m;m=new we(I,u),C(m,M)}if(M=!0,_)for(var q=_.length-1;0<=q;q--){var oe=m.g=_[q];M=Ir(oe,I,!0,m)&&M}if(oe=m.g=u,M=Ir(oe,I,!0,m)&&M,M=Ir(oe,I,!1,m)&&M,_)for(q=0;q<_.length;q++)oe=m.g=_[q],M=Ir(oe,I,!1,m)&&M}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)mt(_[I]);delete u.g[m],u.h--}}this.F=null},Tt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},Tt.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function Ir(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,q=0;q<m.length;++q){var oe=m[q];if(oe&&!oe.da&&oe.capture==_){var Ge=oe.listener,St=oe.ha||oe.src;oe.fa&&We(u.i,oe),M=Ge.call(St,I)!==!1&&M}}return M&&!I.defaultPrevented}function aa(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Wr(u){u.g=aa(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ns extends W{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(u){W.call(this),this.h=u,this.g={}}z(Rs,W);var la=[];function ua(u){le(u.g,function(m,_){this.g.hasOwnProperty(_)&&Er(m)},u),u.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),ua(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ds(){}Ds.prototype.h=null;function Vi(u){return u.h||(u.h=u.i())}function ji(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){we.call(this,"d")}z(nr,we);function Oi(){we.call(this,"c")}z(Oi,we);var rr={},fa=null;function Vs(){return fa=fa||new Tt}rr.La="serverreachability";function pa(u){we.call(this,rr.La,u)}z(pa,we);function Sr(u){const m=Vs();It(m,new pa(m))}rr.STAT_EVENT="statevent";function ma(u,m){we.call(this,rr.STAT_EVENT,u),this.stat=m}z(ma,we);function gt(u){const m=Vs();It(m,new ma(m,u))}rr.Ma="timingevent";function Mi(u,m){we.call(this,rr.Ma,u),this.size=m}z(Mi,we);function Bn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function Os(u,m,_,I,M,q){u.info(function(){if(u.g)if(q)for(var oe="",Ge=q.split("&"),St=0;St<Ge.length;St++){var Be=Ge[St].split("=");if(1<Be.length){var Pt=Be[0];Be=Be[1];var vt=Pt.split("_");oe=2<=vt.length&&vt[1]=="type"?oe+(Pt+"="+Be+"&"):oe+(Pt+"=redacted&")}}else oe=null;else oe=q;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+m+`
`+_+`
`+oe})}function Li(u,m,_,I,M,q,oe){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+m+`
`+_+`
`+q+" "+oe})}function zn(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+dh(u,_)+(I?" "+I:"")})}function ga(u,m){u.info(function(){return"TIMEOUT: "+m})}js.prototype.info=function(){};function dh(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(var oe=1;oe<M.length;oe++)M[oe]=""}}}}return ca(_)}catch(Ge){return m}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$l={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Un;function Ms(){}z(Ms,Ds),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Un=new Ms;function $n(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ql}function ql(){this.i=null,this.g="",this.h=!1}var ya={},Bi={};function zi(u,m,_){u.L=1,u.v=Yr(pn(m)),u.m=_,u.P=!0,va(u,null)}function va(u,m){u.F=Date.now(),tt(u),u.A=pn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Zr(_.i,"t",I),u.C=0,_=u.j.J,u.h=new ql,u.g=lu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Ns(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(la[0]=M.toString()),M=la);for(var q=0;q<M.length;q++){var oe=In(_,M[q],I||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Sr(),Os(u.i,u.u,u.A,u.l,u.R,u.m)}$n.prototype.ca=function(u){u=u.target;const m=this.M;m&&sn(u)==3?m.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const vt=sn(this.g);var m=this.g.Ba();const Cn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Ia(this.g)))){this.J||vt!=4||m==7||(m==8||0>=Cn?Sr(3):Sr(2)),Ls(this);var _=this.g.Z();this.X=_;t:if(Kl(this)){var I=Ia(this.g);u="";var M=I.length,q=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){bn(this),Hr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(q&&m==M-1)});I.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,Li(this.i,this.u,this.A,this.l,this.R,vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,St=this.g;if((Ge=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ge)){var Be=Ge;break t}}Be=null}if(_=Be)zn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,_);else{this.o=!1,this.s=3,gt(12),bn(this),Hr(this);break e}}if(this.P){_=!0;let gn;for(;!this.J&&this.C<oe.length;)if(gn=fh(this,oe),gn==Bi){vt==4&&(this.s=4,gt(14),_=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==ya){this.s=4,gt(15),zn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else zn(this.i,this.l,gn,null),_a(this,gn);if(Kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||oe.length!=0||this.h.h||(this.s=1,gt(16),_=!1),this.o=this.o&&_,!_)zn(this.i,this.l,oe,"[Invalid Chunked Response]"),bn(this),Hr(this);else if(0<oe.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ba(Pt),Pt.M=!0,gt(11))}}else zn(this.i,this.l,oe,null),_a(this,oe);vt==4&&bn(this),this.o&&!this.J&&(vt==4?Ji(this.j,this):(this.o=!1,tt(this)))}else Hi(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),bn(this),Hr(this)}}}catch(vt){}finally{}};function Kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fh(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Bi:(_=Number(m.substring(_,I)),isNaN(_)?ya:(I+=1,I+_>m.length?Bi:(m=m.slice(I,I+_),u.C=I+_,m)))}$n.prototype.cancel=function(){this.J=!0,bn(this)};function tt(u){u.S=Date.now()+u.I,Wl(u,u.I)}function Wl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bn(S(u.ba,u),m)}function Ls(u){u.B&&(d.clearTimeout(u.B),u.B=null)}$n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ga(this.i,this.A),this.L!=2&&(Sr(),gt(17)),bn(this),this.s=2,Hr(this)):Wl(this,this.S-u)};function Hr(u){u.j.G==0||u.J||Ji(u.j,u)}function bn(u){Ls(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ua(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function _a(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Yt(_.h,u))){if(!u.K&&Yt(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch(Be){I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Yi(_),Gn(_);else break e;Xi(_),gt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Bn(S(_.Za,_),6e3));if(1>=Gl(_.h)&&_.ca){try{_.ca()}catch(Be){}_.ca=void 0}}else Pr(_,11)}else if((u.K||_.g==u)&&Yi(_),!Q(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Be=M[m];if(_.T=Be[0],Be=Be[1],_.G==2)if(Be[0]=="c"){_.K=Be[1],_.ia=Be[2];const Pt=Be[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const vt=Be[4];vt!=null&&(_.Aa=vt,_.j.info("SVER="+_.Aa));const Cn=Be[5];Cn!=null&&typeof Cn=="number"&&0<Cn&&(I=1.5*Cn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const gn=u.g;if(gn){const Ks=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var q=I.h;q.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(wa(q,q.h),q.h=null))}if(I.D){const eo=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(I.ya=eo,et(I.I,I.D,eo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var oe=u;if(I.qa=au(I,I.J?I.ia:null,I.W),oe.K){Ql(I.h,oe);var Ge=oe,St=I.L;St&&(Ge.I=St),Ge.B&&(Ls(Ge),tt(Ge)),I.g=oe}else qs(I);0<_.i.length&&ar(_)}else Be[0]!="stop"&&Be[0]!="close"||Pr(_,7);else _.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Pr(_,7):Ot(_):Be[0]!="noop"&&_.l&&_.l.ta(Be),_.v=0)}}Sr(4)}catch(Be){}}var Hl=class{constructor(u,m){this.g=u,this.map=m}};function Fs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gl(u){return u.h?1:u.g?u.g.size:0}function Yt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wa(u,m){u.g?u.g.add(m):u.h=m}function Ql(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Fs.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return K(u.i)}function Ui(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map!="undefined"&&u instanceof Map||typeof Set!="undefined"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function $i(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map!="undefined"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set!="undefined"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function Gr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=$i(u),I=Ui(u),M=I.length,q=0;q<M;q++)m.call(void 0,I[q],_&&_[q],u)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ph(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),M=null;if(0<=I){var q=u[_].substring(0,I);M=u[_].substring(I+1)}else q=u[_];m(q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,zs(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var m=u.i,_=new sr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Xr(this,_),this.m=u.m}else u&&(m=String(u).match(Bs))?(this.h=!1,zs(this,m[1]||"",!0),this.o=Me(m[2]||""),this.g=Me(m[3]||"",!0),Qr(this,m[4]),this.l=Me(m[5]||"",!0),Xr(this,m[6]||"",!0),this.m=Me(m[7]||"")):(this.h=!1,this.i=new sr(null,this.h))}br.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Jr(m,qi,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Jr(m,qi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Jr(_,_.charAt(0)=="/"?Zl:Jl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Jr(_,xa)),u.join("")};function pn(u){return new br(u)}function zs(u,m,_){u.j=_?Me(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xr(u,m,_){m instanceof sr?(u.i=m,ir(u.i,u.h)):(_||(m=Jr(m,eu)),u.i=new sr(m,u.h))}function et(u,m,_){u.i.set(m,_)}function Yr(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Me(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Yl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Yl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qi=/[#\/\?@]/g,Jl=/[#\?:]/g,Zl=/[#\?]/g,eu=/[#\?@]/g,xa=/#/g;function sr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function jt(u){u.g||(u.g=new Map,u.h=0,u.i&&ph(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=sr.prototype,i.add=function(u,m){jt(this),this.i=null,u=An(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function qn(u,m){jt(u),m=An(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Kn(u,m){return jt(u),m=An(u,m),u.g.has(m)}i.forEach=function(u,m){jt(this),this.g.forEach(function(_,I){_.forEach(function(M){u.call(m,M,I,this)},this)},this)},i.na=function(){jt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const M=u[I];for(let q=0;q<M.length;q++)_.push(m[I])}return _},i.V=function(u){jt(this);let m=[];if(typeof u=="string")Kn(this,u)&&(m=m.concat(this.g.get(An(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},i.set=function(u,m){return jt(this),this.i=null,u=An(this,u),Kn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Zr(u,m,_){qn(u,m),0<_.length&&(u.i=null,u.g.set(An(u,m),K(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const q=encodeURIComponent(String(I)),oe=this.V(I);for(I=0;I<oe.length;I++){var M=q;oe[I]!==""&&(M+="="+encodeURIComponent(String(oe[I]))),u.push(M)}}return this.i=u.join("&")};function An(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ir(u,m){m&&!u.j&&(jt(u),u.i=null,u.g.forEach(function(_,I){var M=I.toLowerCase();I!=M&&(qn(this,I),Zr(this,M,_))},u)),u.j=m}function mh(u,m){const _=new js;if(d.Image){const I=new Image;I.onload=V(rn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=V(rn,_,"TestLoadImage: error",!1,m,I),I.onabort=V(rn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=V(rn,_,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function tu(u,m){const _=new js,I=new AbortController,M=setTimeout(()=>{I.abort(),rn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(M),q.ok?rn(_,"TestPingServer: ok",!0,m):rn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),rn(_,"TestPingServer: error",!1,m)})}function rn(u,m,_,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(_)}catch(q){}}function gh(){this.g=new da}function nu(u,m,_){const I=_||"";try{Gr(u,function(M,q){let oe=M;v(M)&&(oe=ca(M)),m.push(I+q+"="+encodeURIComponent(oe))})}catch(M){throw m.push(I+"type="+encodeURIComponent("_badmap")),M}}function Ar(u){this.l=u.Ub||null,this.j=u.eb||!1}z(Ar,Ds),Ar.prototype.g=function(){return new Us(this.l,this.j)},Ar.prototype.i=(function(u){return function(){return u}})({});function Us(u,m){Tt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Us,Tt),i=Us.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Hn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ru(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ru(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):Hn(this),this.readyState==3&&ru(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},i.Qa=function(u){this.g&&(this.response=u,Wn(this))},i.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Hn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cr(u){let m="";return le(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function es(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Cr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):et(u,m,_))}function it(u){Tt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(it,Tt);var yh=/^https?$/i,Ea=["POST","PUT"];i=it.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Un.g(),this.v=this.o?Vi(this.o):Vi(Un),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){$s(this,q);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)_.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),M=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ea,m,void 0))||I||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,oe]of _)this.g.setRequestHeader(q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){$s(this,q)}};function $s(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ki(u),mn(u)}function Ki(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),mn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mn(this,!0)),it.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},i.bb=function(){Ta(this)};function Ta(u){if(u.h&&typeof c!="undefined"&&(!u.v[1]||sn(u)!=4||u.Z()!=2)){if(u.u&&sn(u)==4)aa(u.Ea,0,u);else if(It(u,"readystatechange"),sn(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=oe===0){var M=String(u.D).match(Bs)[1]||null;!M&&d.self&&d.self.location&&(M=d.self.location.protocol.slice(0,-1)),I=!yh.test(M?M.toLowerCase():"")}_=I}if(_)It(u,"complete"),It(u,"success");else{u.m=6;try{var q=2<sn(u)?u.g.statusText:""}catch(Ge){q=""}u.l=q+" ["+u.Z()+"]",Ki(u)}}finally{mn(u)}}}}function mn(u,m){if(u.g){Wi(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||It(u,"ready");try{_.onreadystatechange=I}catch(M){}}}function Wi(u){u.I&&(d.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function sn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch(u){return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ha(m)}};function Ia(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(m){return null}}function Hi(u){const m={};u=(u.g&&2<=sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(Q(u[I]))continue;var _=k(u[I]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[M]||[];m[M]=q,q.push(_)}N(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Sa(u){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=or("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=or("baseRetryDelayMs",5e3,u),this.cb=or("retryDelaySeedMs",1e4,u),this.Wa=or("forwardChannelMaxRetries",2,u),this.wa=or("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fs(u&&u.concurrentRequestLimit),this.Da=new gh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Sa.prototype,i.la=8,i.G=1,i.connect=function(u,m,_,I){gt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=au(this,null,this.W),ar(this)};function Ot(u){if(Gi(u),u.G==3){var m=u.U++,_=pn(u.I);if(et(_,"SID",u.K),et(_,"RID",m),et(_,"TYPE","terminate"),kr(u,_),m=new $n(u,u.j,m),m.L=2,m.v=Yr(pn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch(I){}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),tt(m)}ou(u)}function Gn(u){u.g&&(ba(u),u.g.cancel(),u.g=null)}function Gi(u){Gn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Yi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function ar(u){if(!fn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ne||ae(),re||(Ne(),re=!0),xe.add(m,u),u.B=0}}function vh(u,m){return Gl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bn(S(u.Ga,u,m),iu(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new $n(this,this.j,u);let q=this.o;if(this.S&&(q?(q=T(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(M.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ts(this,M,m),_=pn(this.I),et(_,"RID",u),et(_,"CVER",22),this.D&&et(_,"X-HTTP-Session-Id",this.D),kr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Cr(q)))+"&"+m:this.m&&es(_,this.m,q)),wa(this.h,M),this.Ua&&et(_,"TYPE","init"),this.P?(et(_,"$req",m),et(_,"SID","null"),M.T=!0,zi(M,_,null)):zi(M,_,m),this.G=2}}else this.G==3&&(u?Qi(this,u):this.i.length==0||fn(this.h)||Qi(this))};function Qi(u,m){var _;m?_=m.l:_=u.U++;const I=pn(u.I);et(I,"SID",u.K),et(I,"RID",_),et(I,"AID",u.T),kr(u,I),u.m&&u.o&&es(I,u.m,u.o),_=new $n(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ts(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wa(u.h,_),zi(_,I,m)}function kr(u,m){u.H&&le(u.H,function(_,I){et(m,I,_)}),u.l&&Gr({},function(_,I){et(m,I,_)})}function ts(u,m,_){_=Math.min(u.i.length,_);var I=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let q=-1;for(;;){const oe=["count="+_];q==-1?0<_?(q=M[0].g,oe.push("ofs="+q)):q=0:oe.push("ofs="+q);let Ge=!0;for(let St=0;St<_;St++){let Be=M[St].g;const Pt=M[St].map;if(Be-=q,0>Be)q=Math.max(0,M[St].g-100),Ge=!1;else try{nu(Pt,oe,"req"+Be+"_")}catch(vt){I&&I(Pt)}}if(Ge){I=oe.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function qs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ne||ae(),re||(Ne(),re=!0),xe.add(m,u),u.v=0}}function Xi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bn(S(u.Fa,u),iu(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bn(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Gn(this),su(this))};function ba(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function su(u){u.g=new $n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=pn(u.qa);et(m,"RID","rpc"),et(m,"SID",u.K),et(m,"AID",u.T),et(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(m,"TO",u.ja),et(m,"TYPE","xmlhttp"),kr(u,m),u.m&&u.o&&es(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Yr(pn(m)),_.m=null,_.P=!0,va(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Gn(this),Xi(this),gt(19))};function Yi(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ji(u,m){var _=null;if(u.g==m){Yi(u),ba(u),u.g=null;var I=2}else if(Yt(u.h,m))_=m.D,Ql(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;I=Vs(),It(I,new Mi(I,_)),ar(u)}else qs(u);else if(M=m.s,M==3||M==0&&0<m.X||!(I==1&&vh(u,m)||I==2&&Xi(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function iu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Pr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),I=u.Xa;const M=!I;I=new br(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zs(I,"https"),Yr(I),M?mh(I.toString(),_):tu(I.toString(),_)}else gt(2);u.G=0,u.l&&u.l.sa(m),ou(u),Gi(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ou(u){if(u.G=0,u.ka=[],u.l){const m=Xl(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function au(u,m,_){var I=_ instanceof br?pn(_):new br(_);if(I.g!="")m&&(I.g=m+"."+I.g),Qr(I,I.s);else{var M=d.location;I=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var q=new br(null);I&&zs(q,I),m&&(q.g=m),M&&Qr(q,M),_&&(q.l=_),I=q}return _=u.D,m=u.ya,_&&m&&et(I,_,m),et(I,"VER",u.la),kr(u,I),I}function lu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new it(new Ar({eb:_})):new it(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Aa(){}i=Aa.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Zi(){}Zi.prototype.g=function(u,m){return new Jt(u,m)};function Jt(u,m){Tt.call(this),this.g=new Sa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Q(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Q(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new lr(this)}z(Jt,Tt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ot(this.g)},Jt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ca(u),u=_);m.i.push(new Hl(m.Ya++,u)),m.G==3&&ar(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Jt.aa.N.call(this)};function uu(u){nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}z(uu,nr);function cu(){Oi.call(this),this.status=1}z(cu,Oi);function lr(u){this.g=u}z(lr,Aa),lr.prototype.ua=function(){It(this.g,"a")},lr.prototype.ta=function(u){It(this.g,new uu(u))},lr.prototype.sa=function(u){It(this.g,new cu)},lr.prototype.ra=function(){It(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Xv=function(){return new Zi},Qv=function(){return Vs()},Gv=rr,af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,dc=Fi,$l.COMPLETE="complete",Hv=$l,ji.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,rl=ji,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Wv=it}).apply(typeof ic!="undefined"?ic:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const ry="@firebase/firestore",sy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Fv("@firebase/firestore");function Co(){return vi.logLevel}function ne(i,...e){if(vi.logLevel<=Ue.DEBUG){const t=e.map(Of);vi.debug(`Firestore (${Zo}): ${i}`,...t)}}function tn(i,...e){if(vi.logLevel<=Ue.ERROR){const t=e.map(Of);vi.error(`Firestore (${Zo}): ${i}`,...t)}}function vr(i,...e){if(vi.logLevel<=Ue.WARN){const t=e.map(Of);vi.warn(`Firestore (${Zo}): ${i}`,...t)}}function Of(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch(e){return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Yv(i,r,t)}function Yv(i,e,t){let r=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch(o){r+=" CONTEXT: "+t}throw tn(r),new Error(r)}function Ee(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||Yv(e,o,r)}function ke(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Jo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class vE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _E{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((()=>Z(this,null,function*(){yield p.promise,yield o(this.currentUser)})))},d=p=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Jv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class wE{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xE{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const r=l=>{l.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(i){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=TE(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Ae(i,e){return i<e?-1:i>e?1:0}function lf(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ae(r,o);{const l=Zv(),c=IE(l.encode(oy(i,t)),l.encode(oy(e,t)));return c!==0?c:Ae(r,o)}}t+=r>65535?2:1}return Ae(i.length,e.length)}function oy(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function IE(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ae(i[t],e[t]);return Ae(i.length,e.length)}function Lo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}function e0(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="__name__";class fr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=fr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ae(e.length,t.length)}static compareSegments(e,t){const r=fr.isNumericId(e),o=fr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?fr.extractNumericId(e).compare(fr.extractNumericId(t)):lf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class Je extends fr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const SE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends fr{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return SE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ay}static keyField(){return new dt([ay])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new he(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(l(),o++)}if(l(),c)throw new he(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Je.fromString(e))}static fromName(e){return new ue(Je.fromString(e).popFirst(5))}static empty(){return new ue(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(i,e,t){if(!t)throw new he(G.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function AE(i,e,t,r){if(e===!0&&r===!0)throw new he(G.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ly(i){if(!ue.isDocumentKey(i))throw new he(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function t0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Lf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ye(12329,{type:typeof i})}function zr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lf(i);throw new he(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Dl(i,e){if(!t0(i))throw new he(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=-62135596800,cy=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cy);return new Qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uy)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cy}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:xt("string",Qe._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Qe(0,0))}static max(){return new Ie(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;class kc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function uf(i){return i.fields.find((e=>e.kind===2))}function oi(i){return i.fields.filter((e=>e.kind!==2))}kc.UNKNOWN_ID=-1;class fc{constructor(e,t){this.fieldPath=e,this.kind=t}}class xl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xl(0,Tn.min())}}function CE(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Tn(o,ue.empty(),e)}function n0(i){return new Tn(i.readTime,i.key,wl)}class Tn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tn(Ie.min(),ue.empty(),wl)}static max(){return new Tn(Ie.max(),ue.empty(),wl)}}function Ff(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(i.documentKey,e.documentKey),t!==0?t:Ae(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(i){return Z(this,null,function*(){if(i.code!==G.FAILED_PRECONDITION||i.message!==r0)throw i;ne("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>r(p)))})),c=!0,l===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((x=>{c[v]=x,++d,d===l&&r(c)}),(x=>o(x)))}}))}static doWhile(e,t){return new L(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="SimpleDb";class Gc{static open(e,t,r,o){try{return new Gc(t,e.transaction(o,r))}catch(l){throw new ul(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Br,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ul(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Bf(r.target.error);this.S.reject(new ul(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PE(t)}}class Is{static delete(e){return ne(wn,"Removing database:",e),li(Rv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Mv())return!1;if(Is.F())return!0;const e=Sc(),t=Is.M(e),r=0<t&&t<10,o=i0(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Is.M(Sc())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return Z(this,null,function*(){return this.db||(ne(wn,"Opening database:",this.name),this.db=yield new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const c=l.target.result;t(c)},o.onblocked=()=>{r(new ul(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new he(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new he(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ul(e,c))},o.onupgradeneeded=l=>{ne(wn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,l.oldVersion,this.version).next((()=>{ne(wn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(vr('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,o){return Z(this,null,function*(){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=yield this.k(e);const d=Gc.open(this.db,e,l?"readonly":"readwrite",r),p=o(d).next((v=>(d.v(),v))).catch((v=>(d.abort(v),L.reject(v)))).toPromise();return p.catch((()=>{})),yield d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(ne(wn,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}})}close(){this.db&&this.db.close(),this.db=void 0}}function i0(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class kE{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return li(this.$.delete())}}class ul extends he{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ks(i){return i.name==="IndexedDbTransactionError"}class PE{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(wn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(wn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),li(r)}add(e){return ne(wn,"ADD",this.store.name,e,e),li(this.store.add(e))}get(e){return li(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(wn,"GET",this.store.name,e,t),t)))}delete(e){return ne(wn,"DELETE",this.store.name,e),li(this.store.delete(e))}count(){return ne(wn,"COUNT",this.store.name),li(this.store.count())}j(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(r.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Y(e,t){ne(wn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.J(o,((l,c,d)=>d.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.J(o,t)}ee(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=l=>{const c=Bf(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new L(((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new kE(d),v=t(d.primaryKey,d.value,p);if(v instanceof L){const x=v.catch((E=>(p.done(),L.reject(E))));r.push(x)}p.isDone?o():p.W===null?d.continue():d.continue(p.W)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function li(i){return new L(((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Bf(r.target.error);t(o)}}))}let hy=!1;function Bf(i){const e=Is.M(Sc());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hy||(hy=!0,setTimeout((()=>{throw r}),0)),r}}return i}const cl="IndexBackfiller";class NE{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ne(cl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(()=>Z(this,null,function*(){this.task=null;try{const t=yield this.te.re();ne(cl,`Documents written: ${t}`)}catch(t){ks(t)?ne(cl,"Ignoring IndexedDB error during index backfill: ",t):yield Si(t)}yield this.ne(6e4)})))}}class RE{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return Z(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))})}ie(e,t){const r=new Set;let o=t,l=!0;return L.doWhile((()=>l===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ne(cl,`Processing collection: ${c}`),this.se(e,c,o).next((d=>{o-=d,r.add(c)}));l=!1})))).next((()=>t-o))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this.oe(o,l))).next((d=>(ne(cl,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((o,l)=>{const c=n0(l);Ff(c,r)>0&&(r=c)})),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=-1;function Qc(i){return i==null}function El(i){return i===0&&1/i==-1/0}function DE(i){return typeof i=="number"&&Number.isInteger(i)&&!El(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="";function Qt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=dy(e)),e=VE(i.get(t),e);return dy(e)}function VE(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case Pc:t+="";break;default:t+=l}}return t}function dy(i){return i+Pc+""}function pr(i){const e=i.length;if(Ee(e>=2,64408,{path:i}),e===2)return Ee(i.charAt(0)===Pc&&i.charAt(1)==="",56145,{path:i}),Je.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=i.indexOf(Pc,l);switch((c<0||c>t)&&ye(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(l,c),o+="\0";break;case"":o+=i.substring(l,c+1);break;default:ye(61167,{path:i})}l=c+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="remoteDocuments",Vl="owner",Eo="owner",Tl="mutationQueues",jE="userId",tr="mutations",fy="batchId",di="userMutationsIndex",py=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(i,e){return[i,Qt(e)]}function o0(i,e,t){return[i,Qt(e),t]}const OE={},Fo="documentMutations",Nc="remoteDocumentsV14",ME=["prefixPath","collectionGroup","readTime","documentId"],mc="documentKeyIndex",LE=["prefixPath","collectionGroup","documentId"],a0="collectionGroupIndex",FE=["collectionGroup","readTime","prefixPath","documentId"],Il="remoteDocumentGlobal",cf="remoteDocumentGlobalKey",Bo="targets",l0="queryTargetsIndex",BE=["canonicalId","targetId"],zo="targetDocuments",zE=["targetId","path"],zf="documentTargetsIndex",UE=["path","targetId"],Rc="targetGlobalKey",mi="targetGlobal",Sl="collectionParents",$E=["collectionId","parent"],Uo="clientMetadata",qE="clientId",Xc="bundles",KE="bundleId",Yc="namedQueries",WE="name",Uf="indexConfiguration",HE="indexId",hf="collectionGroupIndex",GE="collectionGroup",hl="indexState",QE=["indexId","uid"],u0="sequenceNumberIndex",XE=["uid","sequenceNumber"],dl="indexEntries",YE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c0="documentKeyIndex",JE=["indexId","uid","orderedDocumentKey"],Jc="documentOverlays",ZE=["userId","collectionPath","documentId"],df="collectionPathOverlayIndex",eT=["userId","collectionPath","largestBatchId"],h0="collectionGroupOverlayIndex",tT=["userId","collectionGroup","largestBatchId"],$f="globals",nT="name",d0=[Tl,tr,Fo,ai,Bo,Vl,mi,zo,Uo,Il,Sl,Xc,Yc],rT=[...d0,Jc],f0=[Tl,tr,Fo,Nc,Bo,Vl,mi,zo,Uo,Il,Sl,Xc,Yc,Jc],p0=f0,qf=[...p0,Uf,hl,dl],sT=qf,m0=[...qf,$f],iT=m0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends s0{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function kt(i,e){const t=ke(i);return Is.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function bi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function g0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r!=null?r:Bt.RED,this.left=o!=null?o:Bt.EMPTY,this.right=l!=null?l:Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Bt(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,o!=null?o:this.left,l!=null?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Xe(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException!="undefined"&&l instanceof DOMException?new y0("Invalid base64 string: "+l):l}})(e);return new Et(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Et(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const oT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(i){if(Ee(!!i,39018),typeof i=="string"){let e=0;const t=oT.exec(i);if(Ee(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(i.seconds),nanos:at(i.nanos)}}function at(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qr(i){return typeof i=="string"?Et.fromBase64String(i):Et.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="server_timestamp",_0="__type__",w0="__previous_value__",x0="__local_write_time__";function Kf(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[_0])===null||t===void 0?void 0:t.stringValue)===v0}function Zc(i){const e=i.mapValue.fields[w0];return Kf(e)?Zc(e):e}function bl(i){const e=$r(i.mapValue.fields[x0].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,r,o,l,c,d,p,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=x}}const Dc="(default)";class _i{constructor(e,t){this.projectId=e,this.database=t||Dc}static empty(){return new _i("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof _i&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="__type__",E0="__max__",ws={mapValue:{fields:{__type__:{stringValue:E0}}}},Hf="__vector__",$o="value",gc={nullValue:"NULL_VALUE"};function Ss(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Kf(i)?4:T0(i)?9007199254740991:eh(i)?10:11:ye(28295,{value:i})}function _r(i,e){if(i===e)return!0;const t=Ss(i);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return bl(i).isEqual(bl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=$r(o.timestampValue),d=$r(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return qr(o.bytesValue).isEqual(qr(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=at(o.doubleValue),d=at(l.doubleValue);return c===d?El(c)===El(d):isNaN(c)&&isNaN(d)}return!1})(i,e);case 9:return Lo(i.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(my(c)!==my(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!_r(c[p],d[p])))return!1;return!0})(i,e);default:return ye(52216,{left:i})}}function Al(i,e){return(i.values||[]).find((t=>_r(t,e)))!==void 0}function bs(i,e){if(i===e)return 0;const t=Ss(i),r=Ss(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=at(l.integerValue||l.doubleValue),p=at(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(i,e);case 3:return yy(i.timestampValue,e.timestampValue);case 4:return yy(bl(i),bl(e));case 5:return lf(i.stringValue,e.stringValue);case 6:return(function(l,c){const d=qr(l),p=qr(c);return d.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const x=Ae(d[v],p[v]);if(x!==0)return x}return Ae(d.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ae(at(l.latitude),at(c.latitude));return d!==0?d:Ae(at(l.longitude),at(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return vy(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,v,x;const E=l.fields||{},S=c.fields||{},V=(d=E[$o])===null||d===void 0?void 0:d.arrayValue,z=(p=S[$o])===null||p===void 0?void 0:p.arrayValue,K=Ae(((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0,((x=z==null?void 0:z.values)===null||x===void 0?void 0:x.length)||0);return K!==0?K:vy(V,z)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ws.mapValue&&c===ws.mapValue)return 0;if(l===ws.mapValue)return 1;if(c===ws.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),v=c.fields||{},x=Object.keys(v);p.sort(),x.sort();for(let E=0;E<p.length&&E<x.length;++E){const S=lf(p[E],x[E]);if(S!==0)return S;const V=bs(d[p[E]],v[x[E]]);if(V!==0)return V}return Ae(p.length,x.length)})(i.mapValue,e.mapValue);default:throw ye(23264,{le:t})}}function yy(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ae(i,e);const t=$r(i),r=$r(e),o=Ae(t.seconds,r.seconds);return o!==0?o:Ae(t.nanos,r.nanos)}function vy(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=bs(t[o],r[o]);if(l)return l}return Ae(t.length,r.length)}function qo(i){return pf(i)}function pf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=$r(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return qr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ue.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=pf(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${pf(t.fields[c])}`;return o+"}"})(i.mapValue):ye(61005,{value:i})}function yc(i){switch(Ss(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zc(i);return e?16+yc(e):16;case 5:return 2*i.stringValue.length;case 6:return qr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+yc(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return bi(r.fields,((l,c)=>{o+=l.length+yc(c)})),o})(i.mapValue);default:throw ye(13486,{value:i})}}function Gf(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function mf(i){return!!i&&"integerValue"in i}function Cl(i){return!!i&&"arrayValue"in i}function _y(i){return!!i&&"nullValue"in i}function wy(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vc(i){return!!i&&"mapValue"in i}function eh(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wf])===null||t===void 0?void 0:t.stringValue)===Hf}function fl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return bi(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fl(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function T0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===E0}const I0={mapValue:{fields:{[Wf]:{stringValue:Hf},[$o]:{arrayValue:{}}}}};function lT(i){return"nullValue"in i?gc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Gf(_i.empty(),ue.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?eh(i)?I0:{mapValue:{}}:ye(35942,{value:i})}function uT(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Gf(_i.empty(),ue.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?I0:"mapValue"in i?eh(i)?{mapValue:{}}:ws:ye(61959,{value:i})}function xy(i,e){const t=bs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ey(i,e){const t=bs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=dt.emptyPath(),r={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=fl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];vc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){bi(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new dn(fl(this.value))}}function S0(i){const e=[];return bi(i.fields,((t,r)=>{const o=new dt([t]);if(vc(r)){const l=S0(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t,r,o,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new pt(e,0,Ie.min(),Ie.min(),Ie.min(),dn.empty(),0)}static newFoundDocument(e,t,r,o){return new pt(e,1,t,Ie.min(),r,o,0)}static newNoDocument(e,t){return new pt(e,2,t,Ie.min(),Ie.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,Ie.min(),Ie.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.position=e,this.inclusive=t}}function Ty(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=ue.comparator(ue.fromName(c.referenceValue),t.key):r=bs(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iy(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!_r(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function cT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{}class Le extends b0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hT(e,t,r):t==="array-contains"?new pT(e,r):t==="in"?new R0(e,r):t==="not-in"?new mT(e,r):t==="array-contains-any"?new gT(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dT(e,r):new fT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bs(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(bs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends b0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ze(e,t)}matches(e){return Wo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Wo(i){return i.op==="and"}function gf(i){return i.op==="or"}function Qf(i){return A0(i)&&Wo(i)}function A0(i){for(const e of i.filters)if(e instanceof Ze)return!1;return!0}function yf(i){if(i instanceof Le)return i.field.canonicalString()+i.op.toString()+qo(i.value);if(Qf(i))return i.filters.map((e=>yf(e))).join(",");{const e=i.filters.map((t=>yf(t))).join(",");return`${i.op}(${e})`}}function C0(i,e){return i instanceof Le?(function(r,o){return o instanceof Le&&r.op===o.op&&r.field.isEqual(o.field)&&_r(r.value,o.value)})(i,e):i instanceof Ze?(function(r,o){return o instanceof Ze&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,d)=>l&&C0(c,o.filters[d])),!0):!1})(i,e):void ye(19439)}function k0(i,e){const t=i.filters.concat(e);return Ze.create(t,i.op)}function P0(i){return i instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(i):i instanceof Ze?(function(t){return t.op.toString()+" {"+t.getFilters().map(P0).join(" ,")+"}"})(i):"Filter"}class hT extends Le{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class dT extends Le{constructor(e,t){super(e,"in",t),this.keys=N0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fT extends Le{constructor(e,t){super(e,"not-in",t),this.keys=N0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function N0(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ue.fromName(r.referenceValue)))}class pT extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cl(t)&&Al(t.arrayValue,this.value)}}class R0 extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}}class mT extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}}class gT extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Al(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t=null,r=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function vf(i,e=null,t=[],r=[],o=null,l=null,c=null){return new yT(i,e,t,r,o,l,c)}function wi(i){const e=ke(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>yf(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>qo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>qo(r))).join(",")),e.Pe=t}return e.Pe}function jl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!cT(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!C0(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Iy(i.startAt,e.startAt)&&Iy(i.endAt,e.endAt)}function jc(i){return ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Oc(i,e){return i.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function Sy(i,e,t){let r=gc,o=!0;for(const l of Oc(i,e)){let c=gc,d=!0;switch(l.op){case"<":case"<=":c=lT(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=gc}xy({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];xy({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function by(i,e,t){let r=ws,o=!0;for(const l of Oc(i,e)){let c=ws,d=!0;switch(l.op){case">=":case">":c=uT(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ws}Ey({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];Ey({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t=null,r=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function vT(i,e,t,r,o,l,c,d){return new th(i,e,t,r,o,l,c,d)}function Ol(i){return new th(i)}function Ay(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function _T(i){return i.collectionGroup!==null}function pl(i){const e=ke(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(dt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(d=d.add(v.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Vc(l,r))})),t.has(dt.keyField().canonicalString())||e.Te.push(new Vc(dt.keyField(),r))}return e.Te}function Fn(i){const e=ke(i);return e.Ie||(e.Ie=wT(e,pl(i))),e.Ie}function wT(i,e){if(i.limitType==="F")return vf(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Vc(o.field,l)}));const t=i.endAt?new Ko(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ko(i.startAt.position,i.startAt.inclusive):null;return vf(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function _f(i,e,t){return new th(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function nh(i,e){return jl(Fn(i),Fn(e))&&i.limitType===e.limitType}function D0(i){return`${wi(Fn(i))}|lt:${i.limitType}`}function ko(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>P0(o))).join(", ")}]`),Qc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${r})`})(Fn(i))}; limitType=${i.limitType})`}function Ml(i,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ue.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,o){for(const l of pl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(c,d,p){const v=Ty(c,d,p);return c.inclusive?v<=0:v<0})(r.startAt,pl(r),o)||r.endAt&&!(function(c,d,p){const v=Ty(c,d,p);return c.inclusive?v>=0:v>0})(r.endAt,pl(r),o))})(i,e)}function xT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function V0(i){return(e,t)=>{let r=!1;for(const o of pl(i)){const l=ET(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function ET(i,e,t){const r=i.field.isKeyField()?ue.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),v=d.data.field(l);return p!==null&&v!==null?bs(p,v):ye(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return g0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new lt(ue.comparator);function xn(){return TT}const j0=new lt(ue.comparator);function sl(...i){let e=j0;for(const t of i)e=e.insert(t.key,t);return e}function O0(i){let e=j0;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function mr(){return ml()}function M0(){return ml()}function ml(){return new Kr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const IT=new lt(ue.comparator),ST=new Xe(ue.comparator);function De(...i){let e=ST;for(const t of i)e=e.add(t);return e}const bT=new Xe(Ae);function AT(){return bT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function L0(i){return{integerValue:""+i}}function CT(i,e){return DE(e)?L0(e):Xf(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function kT(i,e,t){return i instanceof kl?(function(o,l){const c={fields:{[_0]:{stringValue:v0},[x0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Kf(l)&&(l=Zc(l)),l&&(c.fields[w0]=l),{mapValue:c}})(t,e):i instanceof Ho?B0(i,e):i instanceof Go?z0(i,e):(function(o,l){const c=F0(o,l),d=Cy(c)+Cy(o.Ee);return mf(c)&&mf(o.Ee)?L0(d):Xf(o.serializer,d)})(i,e)}function PT(i,e,t){return i instanceof Ho?B0(i,e):i instanceof Go?z0(i,e):t}function F0(i,e){return i instanceof Pl?(function(r){return mf(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class kl extends rh{}class Ho extends rh{constructor(e){super(),this.elements=e}}function B0(i,e){const t=U0(e);for(const r of i.elements)t.some((o=>_r(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Go extends rh{constructor(e){super(),this.elements=e}}function z0(i,e){let t=U0(e);for(const r of i.elements)t=t.filter((o=>!_r(o,r)));return{arrayValue:{values:t}}}class Pl extends rh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Cy(i){return at(i.integerValue||i.doubleValue)}function U0(i){return Cl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t){this.field=e,this.transform=t}}function RT(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Ho&&o instanceof Ho||r instanceof Go&&o instanceof Go?Lo(r.elements,o.elements,_r):r instanceof Pl&&o instanceof Pl?_r(r.Ee,o.Ee):r instanceof kl&&o instanceof kl})(i.transform,e.transform)}class DT{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sh{}function $0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Yf(i.key,En.none()):new ea(i.key,i.data,En.none());{const t=i.data,r=dn.empty();let o=new Xe(dt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new Ps(i.key,r,new Ln(o.toArray()),En.none())}}function VT(i,e,t){i instanceof ea?(function(o,l,c){const d=o.value.clone(),p=Py(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(i,e,t):i instanceof Ps?(function(o,l,c){if(!_c(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Py(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(q0(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function gl(i,e,t,r){return i instanceof ea?(function(l,c,d,p){if(!_c(l.precondition,c))return d;const v=l.value.clone(),x=Ny(l.fieldTransforms,p,c);return v.setAll(x),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null})(i,e,t,r):i instanceof Ps?(function(l,c,d,p){if(!_c(l.precondition,c))return d;const v=Ny(l.fieldTransforms,p,c),x=c.data;return x.setAll(q0(l)),x.setAll(v),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,d){return _c(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(i,e,t)}function jT(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=F0(r.transform,o||null);l!=null&&(t===null&&(t=dn.empty()),t.set(r.field,l))}return t||null}function ky(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,((l,c)=>RT(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ea extends sh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends sh{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function q0(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Py(i,e,t){const r=new Map;Ee(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,d=e.data.field(l.field);r.set(l.field,PT(c,d,t[o]))}return r}function Ny(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,kT(l,c,e))}return r}class Yf extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K0 extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&VT(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=M0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=$0(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,r)=>ky(t,r)))&&Lo(this.baseMutations,e.baseMutations,((t,r)=>ky(t,r)))}}class Zf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return IT})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new Zf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,ze;function MT(i){switch(i){case G.OK:return ye(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ye(15467,{code:i})}}function W0(i){if(i===void 0)return tn("GRPC error has no .code"),G.UNKNOWN;switch(i){case wt.OK:return G.OK;case wt.CANCELLED:return G.CANCELLED;case wt.UNKNOWN:return G.UNKNOWN;case wt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case wt.INTERNAL:return G.INTERNAL;case wt.UNAVAILABLE:return G.UNAVAILABLE;case wt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case wt.NOT_FOUND:return G.NOT_FOUND;case wt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case wt.ABORTED:return G.ABORTED;case wt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case wt.DATA_LOSS:return G.DATA_LOSS;default:return ye(39323,{code:i})}}(ze=wt||(wt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Ts([4294967295,4294967295],0);function Ry(i){const e=Zv().encode(i),t=new Kv;return t.update(e),new Uint8Array(t.digest())}function Dy(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,r],0),new Ts([o,l],0)]}class tp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new il(`Invalid padding: ${t}`);if(r<0)throw new il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new il(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ts.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(Ts.fromNumber(r)));return o.compare(LT)===1&&(o=new Ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ry(e),[r,o]=Dy(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new tp(l,o,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=Ry(e),[r,o]=Dy(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ih(Ie.min(),o,new lt(Ae),xn(),De())}}class Ll{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ll(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class H0{constructor(e,t){this.targetId=e,this.De=t}}class G0{constructor(e,t,r=Et.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Vy{constructor(){this.ve=0,this.Ce=jy(),this.Fe=Et.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),r=De();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ye(38017,{changeType:l})}})),new Ll(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=jy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class FT{constructor(e){this.We=e,this.Ge=new Map,this.ze=xn(),this.je=ac(),this.Je=ac(),this.He=new lt(Ae)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const l=o.target;if(jc(l))if(r===0){const c=new ue(l.path);this.Xe(t,c,pt.newNoDocument(c,Ie.min()))}else Ee(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=qr(r).toUint8Array()}catch(p){if(p instanceof y0)return vr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new tp(c,o,l)}catch(p){return vr(p instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&jc(d.target)){const p=new ue(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,pt.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=De();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const v=this.st(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new ih(e,t,this.He,this.ze,r);return this.ze=xn(),this.je=ac(),this.Je=ac(),this.He=new lt(Ae),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Vy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Xe(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Xe(Ae),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Vy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ac(){return new lt(ue.comparator)}function jy(){return new lt(ue.comparator)}const BT={asc:"ASCENDING",desc:"DESCENDING"},zT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UT={and:"AND",or:"OR"};class $T{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wf(i,e){return i.useProto3Json||Qc(e)?e:{value:e}}function Qo(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function qT(i,e){return Qo(i,e.toTimestamp())}function nn(i){return Ee(!!i,49232),Ie.fromTimestamp((function(t){const r=$r(t);return new Qe(r.seconds,r.nanos)})(i))}function np(i,e){return xf(i,e).canonicalString()}function xf(i,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function X0(i){const e=Je.fromString(i);return Ee(i_(e),10190,{key:e.toString()}),e}function Mc(i,e){return np(i.databaseId,e.path)}function gi(i,e){const t=X0(e);if(t.get(1)!==i.databaseId.projectId)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ue(Z0(t))}function Y0(i,e){return np(i.databaseId,e)}function J0(i){const e=X0(i);return e.length===4?Je.emptyPath():Z0(e)}function Ef(i){return new Je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Z0(i){return Ee(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Oy(i,e,t){return{name:Mc(i,e),fields:t.value.mapValue.fields}}function KT(i,e,t){const r=gi(i,e.name),o=nn(e.updateTime),l=e.createTime?nn(e.createTime):Ie.min(),c=new dn({mapValue:{fields:e.fields}}),d=pt.newFoundDocument(r,o,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function WT(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ye(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,x){return v.useProto3Json?(Ee(x===void 0||typeof x=="string",58123),Et.fromBase64String(x||"")):(Ee(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Et.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(v){const x=v.code===void 0?G.UNKNOWN:W0(v.code);return new he(x,v.message||"")})(c);t=new G0(r,o,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=gi(i,r.document.name),l=nn(r.document.updateTime),c=r.document.createTime?nn(r.document.createTime):Ie.min(),d=new dn({mapValue:{fields:r.document.fields}}),p=pt.newFoundDocument(o,l,c,d),v=r.targetIds||[],x=r.removedTargetIds||[];t=new wc(v,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=gi(i,r.document),l=r.readTime?nn(r.readTime):Ie.min(),c=pt.newNoDocument(o,l),d=r.removedTargetIds||[];t=new wc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=gi(i,r.document),l=r.removedTargetIds||[];t=new wc([],l,o,null)}else{if(!("filter"in e))return ye(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new OT(o,l),d=r.targetId;t=new H0(d,c)}}return t}function Lc(i,e){let t;if(e instanceof ea)t={update:Oy(i,e.key,e.value)};else if(e instanceof Yf)t={delete:Mc(i,e.key)};else if(e instanceof Ps)t={update:Oy(i,e.key,e.data),updateMask:JT(e.fieldMask)};else{if(!(e instanceof K0))return ye(16599,{Rt:e.type});t={verify:Mc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof kl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ho)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Go)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pl)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw ye(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:qT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(i,e.precondition)),t}function Tf(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?En.updateTime(nn(l.updateTime)):l.exists!==void 0?En.exists(l.exists):En.none()})(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,d){let p=null;if("setToServerValue"in d)Ee(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new kl;else if("appendMissingElements"in d){const x=d.appendMissingElements.values||[];p=new Ho(x)}else if("removeAllFromArray"in d){const x=d.removeAllFromArray.values||[];p=new Go(x)}else"increment"in d?p=new Pl(c,d.increment):ye(16584,{proto:d});const v=dt.fromServerFormat(d.fieldPath);return new NT(v,p)})(i,o))):[];if(e.update){e.update.name;const o=gi(i,e.update.name),l=new dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const v=p.fieldPaths||[];return new Ln(v.map((x=>dt.fromServerFormat(x))))})(e.updateMask);return new Ps(o,l,c,t,r)}return new ea(o,l,t,r)}if(e.delete){const o=gi(i,e.delete);return new Yf(o,t)}if(e.verify){const o=gi(i,e.verify);return new K0(o,t)}return ye(1463,{proto:e})}function HT(i,e){return i&&i.length>0?(Ee(e!==void 0,14353),i.map((t=>(function(o,l){let c=o.updateTime?nn(o.updateTime):nn(l);return c.isEqual(Ie.min())&&(c=nn(l)),new DT(c,o.transformResults||[])})(t,e)))):[]}function e_(i,e){return{documents:[Y0(i,e.path)]}}function t_(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Y0(i,o);const l=(function(v){if(v.length!==0)return s_(Ze.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(v){if(v.length!==0)return v.map((x=>(function(S){return{field:Po(S.field),direction:QT(S.dir)}})(x)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=wf(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function n_(i){let e=J0(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ee(r===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(E){const S=r_(E);return S instanceof Ze&&Qf(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(z){return new Vc(No(z.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Qc(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,V=E.values||[];return new Ko(V,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const S=!E.before,V=E.values||[];return new Ko(V,S)})(t.endAt)),vT(e,o,c,l,d,"F",p,v)}function GT(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r_(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=No(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Le.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Ze.create(t.compositeFilter.filters.map((r=>r_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(i):ye(30097,{filter:i})}function QT(i){return BT[i]}function XT(i){return zT[i]}function YT(i){return UT[i]}function Po(i){return{fieldPath:i.canonicalString()}}function No(i){return dt.fromServerFormat(i.fieldPath)}function s_(i){return i instanceof Le?(function(t){if(t.op==="=="){if(wy(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(_y(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wy(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(_y(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:XT(t.op),value:t.value}}})(i):i instanceof Ze?(function(t){const r=t.getFilters().map((o=>s_(o)));return r.length===1?r[0]:{compositeFilter:{op:YT(t.op),filters:r}}})(i):ye(54877,{filter:i})}function JT(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t,r,o,l=Ie.min(),c=Ie.min(),d=Et.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.gt=e}}function ZT(i,e){let t;if(e.document)t=KT(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ue.fromSegments(e.noDocument.path),o=Ei(e.noDocument.readTime);t=pt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const r=ue.fromSegments(e.unknownDocument.path),o=Ei(e.unknownDocument.version);t=pt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const l=new Qe(o[0],o[1]);return Ie.fromTimestamp(l)})(e.readTime)),t}function My(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Fc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Mc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Qo(l,c.version.toTimestamp()),createTime:Qo(l,c.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xi(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xi(e.version)}}return r}function Fc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xi(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ei(i){const e=new Qe(i.seconds,i.nanoseconds);return Ie.fromTimestamp(e)}function ui(i,e){const t=(e.baseMutations||[]).map((l=>Tf(i.gt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Tf(i.gt,l))),o=Qe.fromMillis(e.localWriteTimeMs);return new Jf(e.batchId,o,t,r)}function ol(i){const e=Ei(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ei(i.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return Ee(c===1,1966,{count:c}),Fn(Ol(J0(l.documents[0])))})(i.query):(function(l){return Fn(n_(l))})(i.query),new Fr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Et.fromBase64String(i.resumeToken))}function a_(i,e){const t=xi(e.snapshotVersion),r=xi(e.lastLimboFreeSnapshotVersion);let o;o=jc(e.target)?e_(i.gt,e.target):t_(i.gt,e.target).Vt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wi(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function l_(i){const e=n_({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?_f(e,e.limit,"L"):e}function Qd(i,e){return new ep(e.largestBatchId,Tf(i.gt,e.overlayMutation))}function Ly(i,e){const t=e.path.lastSegment();return[i,Qt(e.path.popLast()),t]}function Fy(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:xi(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{getBundleMetadata(e,t){return By(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Ei(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return By(e).put((function(o){return{bundleId:o.id,createTime:xi(nn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return zy(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:l_(l.bundledQuery),readTime:Ei(l.readTime)}})(r)}))}saveNamedQuery(e,t){return zy(e).put((function(o){return{name:o.name,readTime:xi(nn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function By(i){return kt(i,Xc)}function zy(i){return kt(i,Yc)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new oh(e,r)}getOverlay(e,t){return Ja(e).get(Ly(this.userId,t)).next((r=>r?Qd(this.serializer,r):null))}getOverlays(e,t){const r=mr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((l,c)=>{const d=new ep(t,c);o.push(this.wt(e,d))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(Qt(c.getCollectionPath()))));const l=[];return o.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Ja(e).Y(df,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,r){const o=mr(),l=Qt(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ja(e).j(df,c).next((d=>{for(const p of d){const v=Qd(this.serializer,p);o.set(v.getKey(),v)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const l=mr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ja(e).X({index:h0,range:d},((p,v,x)=>{const E=Qd(this.serializer,v);l.size()<o||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):x.done()})).next((()=>l))}wt(e,t){return Ja(e).put((function(o,l,c){const[d,p,v]=Ly(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Lc(o.gt,c.mutation)}})(this.serializer,this.userId,t))}}function Ja(i){return kt(i,Jc)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{St(e){return kt(e,$f)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(at(e.integerValue));else if("doubleValue"in e){const r=at(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),El(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=$r(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(qr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?T0(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):eh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ye(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const o of Object.keys(r))this.xt(o,t),this.Dt(r[o],t)}Lt(e,t){var r,o;const l=e.fields||{};this.Ct(t,53);const c=$o,d=((o=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Ct(t,15),t.Ft(at(d)),this.xt(c,t),this.Dt(l[c],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const o of r)this.Dt(o,t)}Bt(e,t){this.Ct(t,37),ue.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}ci.Ut=new ci;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=255;function nI(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Uy(i){const e=64-(function(r){let o=0;for(let l=0;l<8;++l){const c=nI(255&r[l]);if(o+=c,c!==8)break}return o})(i);return Math.ceil(e/8)}class rI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const o=t.codePointAt(0);this.Wt(240|o>>>18),this.Wt(128|63&o>>>12),this.Wt(128|63&o>>>6),this.Wt(128|63&o)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const o=t.codePointAt(0);this.jt(240|o>>>18),this.jt(128|63&o>>>12),this.jt(128|63&o>>>6),this.jt(128|63&o)}}this.Jt()}Zt(e){const t=this.Xt(e),r=Uy(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}tn(e){const t=this.Xt(e),r=Uy(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}nn(){this.rn(Io),this.rn(255)}sn(){this._n(Io),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===Io?(this.rn(Io),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Io?(this._n(Io),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class sI{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class iI{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Za{constructor(){this.un=new rI,this.cn=new sI(this.un),this.ln=new iI(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,r,o){this.Pn=e,this.Tn=t,this.In=r,this.dn=o}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new hi(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:xc(this.In),directionalValue:xc(this.dn),orderedDocumentKey:xc(t),documentKey:r.path.toArray()}}Rn(e,t,r){const o=this.An(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function gs(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=$y(i.In,e.In),t!==0?t:(t=$y(i.dn,e.dn),t!==0?t:ue.comparator(i.Tn,e.Tn)))}function $y(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function xc(i){return Ov()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(i):i}function qy(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(i)}class Ky{constructor(e){this.Vn=new Xe(((t,r)=>dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=uf(e);if(t!==void 0&&!this.yn(t))return!1;const r=oi(e);let o=new Set,l=0,c=0;for(;l<r.length&&this.yn(r[l]);++l)o=o.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[l];if(!this.wn(d,p)||!this.Sn(this.mn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.mn.length||!this.Sn(this.mn[c++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new Xe(dt.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fc(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fc(r.field,r.dir==="asc"?0:1)));return new kc(kc.UNKNOWN_ID,this.collectionId,t,xl.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(i){var e,t;if(Ee(i instanceof Le||i instanceof Ze,20012),i instanceof Le){if(i instanceof R0){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>Le.create(i.field,"==",l))))||[];return Ze.create(o,"or")}return i}const r=i.filters.map((o=>u_(o)));return Ze.create(r,i.op)}function oI(i){if(i.getFilters().length===0)return[];const e=bf(u_(i));return Ee(c_(e),7391),If(e)||Sf(e)?[e]:e.getFilters()}function If(i){return i instanceof Le}function Sf(i){return i instanceof Ze&&Qf(i)}function c_(i){return If(i)||Sf(i)||(function(t){if(t instanceof Ze&&gf(t)){for(const r of t.getFilters())if(!If(r)&&!Sf(r))return!1;return!0}return!1})(i)}function bf(i){if(Ee(i instanceof Le||i instanceof Ze,34018),i instanceof Le)return i;if(i.filters.length===1)return bf(i.filters[0]);const e=i.filters.map((r=>bf(r)));let t=Ze.create(e,i.op);return t=Bc(t),c_(t)?t:(Ee(t instanceof Ze,64498),Ee(Wo(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((r,o)=>rp(r,o))))}function rp(i,e){let t;return Ee(i instanceof Le||i instanceof Ze,38388),Ee(e instanceof Le||e instanceof Ze,25473),t=i instanceof Le?e instanceof Le?(function(o,l){return Ze.create([o,l],"and")})(i,e):Wy(i,e):e instanceof Le?Wy(e,i):(function(o,l){if(Ee(o.filters.length>0&&l.filters.length>0,48005),Wo(o)&&Wo(l))return k0(o,l.getFilters());const c=gf(o)?o:l,d=gf(o)?l:o,p=c.filters.map((v=>rp(v,d)));return Ze.create(p,"or")})(i,e),Bc(t)}function Wy(i,e){if(Wo(e))return k0(e,i.getFilters());{const t=e.filters.map((r=>rp(i,r)));return Ze.create(t,"or")}}function Bc(i){if(Ee(i instanceof Le||i instanceof Ze,11850),i instanceof Le)return i;const e=i.getFilters();if(e.length===1)return Bc(e[0]);if(A0(i))return i;const t=e.map((o=>Bc(o))),r=[];return t.forEach((o=>{o instanceof Le?r.push(o):o instanceof Ze&&(o.op===i.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Ze.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.Dn=new sp}addToCollectionParentIndex(e,t){return this.Dn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Tn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class sp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Xe(Je.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Xe(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="IndexedDbIndexManager",lc=new Uint8Array(0);class lI{constructor(e,t){this.databaseId=t,this.vn=new sp,this.Cn=new Kr((r=>wi(r)),((r,o)=>jl(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Qt(o)};return Gy(e).put(l)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[e0(t),""],!1,!0);return Gy(e).j(o).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(pr(c.parent))}return r}))}addFieldIndex(e,t){const r=el(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const l=r.add(o);if(t.indexState){const c=bo(e);return l.next((d=>{c.put(Fy(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=el(e),o=bo(e),l=So(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=el(e),r=So(e),o=bo(e);return t.Y().next((()=>r.Y())).next((()=>o.Y()))}createTargetIndexes(e,t){return L.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const l=new Ky(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=So(e);let o=!0;const l=new Map;return L.forEach(this.Fn(t),(c=>this.Mn(e,c).next((d=>{o&&(o=!!d),l.set(c,d)})))).next((()=>{if(o){let c=De();const d=[];return L.forEach(l,((p,v)=>{ne(Hy,`Using index ${(function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map((te=>`${te.fieldPath}:${te.kind}`)).join(",")}`})(p)} to execute ${wi(t)}`);const x=(function(H,te){const me=uf(te);if(me===void 0)return null;for(const le of Oc(H,me.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(v,p),E=(function(H,te){const me=new Map;for(const le of oi(te))for(const N of Oc(H,le.fieldPath))switch(N.op){case"==":case"in":me.set(le.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return me.set(le.fieldPath.canonicalString(),N.value),Array.from(me.values())}return null})(v,p),S=(function(H,te){const me=[];let le=!0;for(const N of oi(te)){const T=N.kind===0?Sy(H,N.fieldPath,H.startAt):by(H,N.fieldPath,H.startAt);me.push(T.value),le&&(le=T.inclusive)}return new Ko(me,le)})(v,p),V=(function(H,te){const me=[];let le=!0;for(const N of oi(te)){const T=N.kind===0?by(H,N.fieldPath,H.endAt):Sy(H,N.fieldPath,H.endAt);me.push(T.value),le&&(le=T.inclusive)}return new Ko(me,le)})(v,p),z=this.xn(p,v,S),K=this.xn(p,v,V),U=this.On(p,v,E),ie=this.Nn(p.indexId,x,z,S.inclusive,K,V.inclusive,U);return L.forEach(ie,(Q=>r.H(Q,t.limit).next((H=>{H.forEach((te=>{const me=ue.fromSegments(te.documentKey);c.has(me)||(c=c.add(me),d.push(me))}))}))))})).next((()=>d))}return L.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=oI(Ze.create(e.filters,"and")).map((r=>vf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,o,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),v=p/(t!=null?t.length:1),x=[];for(let E=0;E<p;++E){const S=t?this.Bn(t[E/v]):lc,V=this.Ln(e,S,r[E%v],o),z=this.kn(e,S,l[E%v],c),K=d.map((U=>this.Ln(e,S,U,!0)));x.push(...this.createRange(V,z,K))}return x}Ln(e,t,r,o){const l=new hi(e,ue.empty(),t,r);return o?l:l.En()}kn(e,t,r,o){const l=new hi(e,ue.empty(),t,r);return o?l.En():l}Mn(e,t){const r=new Ky(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((l=>{let c=null;for(const d of l)r.pn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const o=this.Fn(t);return L.forEach(o,(l=>this.Mn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(p){let v=new Xe(dt.comparator),x=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?x=!0:v=v.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(v=v.add(E.field));return v.size+(x?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}qn(e,t){const r=new Za;for(const o of oi(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const c=r.hn(o.kind);ci.Ut.bt(l,c)}return r.an()}Bn(e){const t=new Za;return ci.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Za;return ci.Ut.bt(Gf(this.databaseId,t),r.hn((function(l){const c=oi(l);return c.length===0?0:c[c.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let o=[];o.push(new Za);let l=0;for(const c of oi(e)){const d=r[l++];for(const p of o)if(this.$n(t,c.fieldPath)&&Cl(d))o=this.Un(o,c,d);else{const v=p.hn(c.kind);ci.Ut.bt(d,v)}}return this.Kn(o)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new Za;p.seed(d.an()),ci.Ut.bt(c,p.hn(t.kind)),l.push(p)}return l}$n(e,t){return!!e.filters.find((r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=el(e),o=bo(e);return(t?r.j(hf,IDBKeyRange.bound(t,t)):r.j()).next((l=>{const c=[];return L.forEach(l,(d=>o.get([d.indexId,this.uid]).next((p=>{c.push((function(x,E){const S=E?new xl(E.sequenceNumber,new Tn(Ei(E.readTime),new ue(pr(E.documentKey)),E.largestBatchId)):xl.empty(),V=x.fields.map((([z,K])=>new fc(dt.fromServerFormat(z),K)));return new kc(x.indexId,x.collectionGroup,V,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:Ae(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=el(e),l=bo(e);return this.Wn(e).next((c=>o.j(hf,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(Fy(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,l)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(r.set(o.collectionGroup,d),L.forEach(d,(p=>this.Gn(e,o,p).next((v=>{const x=this.zn(l,p);return v.isEqual(x)?L.resolve():this.jn(e,l,p,v,x)})))))))}))}Jn(e,t,r,o){return So(e).put(o.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,o){return So(e).delete(o.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const o=So(e);let l=new Xe(gs);return o.X({index:c0,range:IDBKeyRange.only([r.indexId,this.uid,xc(this.Qn(r,t))])},((c,d)=>{l=l.add(new hi(r.indexId,t,qy(d.arrayValue),qy(d.directionalValue)))})).next((()=>l))}zn(e,t){let r=new Xe(gs);const o=this.qn(t,e);if(o==null)return r;const l=uf(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Cl(c))for(const d of c.arrayValue.values||[])r=r.add(new hi(t.indexId,e.key,this.Bn(d),o))}else r=r.add(new hi(t.indexId,e.key,lc,o));return r}jn(e,t,r,o,l){ne(Hy,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,v,x,E,S){const V=p.getIterator(),z=v.getIterator();let K=To(V),U=To(z);for(;K||U;){let ie=!1,Q=!1;if(K&&U){const H=x(K,U);H<0?Q=!0:H>0&&(ie=!0)}else K!=null?Q=!0:ie=!0;ie?(E(U),U=To(z)):Q?(S(K),K=To(V)):(K=To(V),U=To(z))}})(o,l,gs,(d=>{c.push(this.Jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),L.waitFor(c)}Wn(e){let t=1;return bo(e).X({index:u0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,l)=>{l.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>gs(c,d))).filter(((c,d,p)=>!d||gs(c,p[d-1])!==0));const o=[];o.push(e);for(const c of r){const d=gs(c,e),p=gs(c,t);if(d===0)o[0]=e.En();else if(d>0&&p<0)o.push(c),o.push(c.En());else if(p>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.Yn(o[c],o[c+1]))return[];const d=o[c].Rn(this.uid,lc,ue.empty()),p=o[c+1].Rn(this.uid,lc,ue.empty());l.push(IDBKeyRange.bound(d,p))}return l}Yn(e,t){return gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qy)}getMinOffset(e,t){return L.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((o=>o||ye(44426))))).next(Qy)}}function Gy(i){return kt(i,Sl)}function So(i){return kt(i,dl)}function el(i){return kt(i,Uf)}function bo(i){return kt(i,hl)}function Qy(i){Ee(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;Ff(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h_=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(i,e,t){const r=i.store(tr),o=i.store(Fo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.X({range:c},((x,E,S)=>(d++,S.delete())));l.push(p.next((()=>{Ee(d===1,47070,{batchId:t.batchId})})));const v=[];for(const x of t.mutations){const E=o0(e,x.key.path,t.batchId);l.push(o.delete(E)),v.push(x.key)}return L.waitFor(l).next((()=>v))}function zc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ye(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(h_,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);class ah{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Zn={}}static yt(e,t,r,o){Ee(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new ah(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).X({index:di,range:r},((o,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const l=Ro(e),c=ys(e);return c.add({}).next((d=>{Ee(typeof d=="number",49019);const p=new Jf(d,t,r,o),v=(function(V,z,K){const U=K.baseMutations.map((Q=>Lc(V.gt,Q))),ie=K.mutations.map((Q=>Lc(V.gt,Q)));return{userId:z,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:U,mutations:ie}})(this.serializer,this.userId,p),x=[];let E=new Xe(((S,V)=>Ae(S.canonicalString(),V.canonicalString())));for(const S of o){const V=o0(this.userId,S.key.path,d);E=E.add(S.key.path.popLast()),x.push(c.put(v)),x.push(l.put(V,OE))}return E.forEach((S=>{x.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),L.waitFor(x).next((()=>p))}))}lookupMutationBatch(e,t){return ys(e).get(t).next((r=>r?(Ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ui(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?L.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ys(e).X({index:di,range:o},((c,d,p)=>{d.userId===this.userId&&(Ee(d.batchId>=r,47524,{er:r}),l=ui(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=pi;return ys(e).X({index:di,range:t,reverse:!0},((o,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,pi],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).j(di,t).next((r=>r.map((o=>ui(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Ro(e).X({range:o},((c,d,p)=>{const[v,x,E]=c,S=pr(x);if(v===this.userId&&t.path.isEqual(S))return ys(e).get(E).next((V=>{if(!V)throw ye(61480,{tr:c,batchId:E});Ee(V.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:V.userId,batchId:E}),l.push(ui(this.serializer,V))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ae);const o=[];return t.forEach((l=>{const c=pc(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Ro(e).X({range:d},((v,x,E)=>{const[S,V,z]=v,K=pr(V);S===this.userId&&l.path.isEqual(K)?r=r.add(z):E.done()}));o.push(p)})),L.waitFor(o).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=pc(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Xe(Ae);return Ro(e).X({range:c},((p,v,x)=>{const[E,S,V]=p,z=pr(S);E===this.userId&&r.isPrefixOf(z)?z.length===o&&(d=d.add(V)):x.done()})).next((()=>this.nr(e,d)))}nr(e,t){const r=[],o=[];return t.forEach((l=>{o.push(ys(e).get(l).next((c=>{if(c===null)throw ye(35274,{batchId:l});Ee(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(ui(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return d_(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Ro(e).X({range:r},((l,c,d)=>{if(l[0]===this.userId){const p=pr(l[1]);o.push(p)}else d.done()})).next((()=>{Ee(o.length===0,56720,{ir:o.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return f_(e,this.userId,t)}sr(e){return p_(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:pi,lastStreamToken:""}))}}function f_(i,e,t){const r=pc(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Ro(i).X({range:l,Z:!0},((d,p,v)=>{const[x,E,S]=d;x===e&&E===o&&(c=!0),v.done()})).next((()=>c))}function ys(i){return kt(i,tr)}function Ro(i){return kt(i,Fo)}function p_(i){return kt(i,Tl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ti(0)}static ur(){return new Ti(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new Ti(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>Ie.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.lr(e,o))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ao(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(Ee(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let o=0;const l=[];return Ao(e).X(((c,d)=>{const p=ol(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>o))}forEachTarget(e,t){return Ao(e).X(((r,o)=>{const l=ol(o);t(l)}))}cr(e){return Yy(e).get(Rc).next((t=>(Ee(t!==null,2888),t)))}lr(e,t){return Yy(e).put(Rc,t)}hr(e,t){return Ao(e).put(a_(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=wi(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ao(e).X({range:o,index:l0},((c,d,p)=>{const v=ol(d);jl(t,v.target)&&(l=v,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const o=[],l=_s(e);return t.forEach((c=>{const d=Qt(c.path);o.push(l.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=_s(e);return L.forEach(t,(l=>{const c=Qt(l.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=_s(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=_s(e);let l=De();return o.X({range:r,Z:!0},((c,d,p)=>{const v=pr(c[1]),x=new ue(v);l=l.add(x)})).next((()=>l))}containsKey(e,t){const r=Qt(t.path),o=IDBKeyRange.bound([r],[e0(r)],!1,!0);let l=0;return _s(e).X({index:zf,Z:!0,range:o},(([c,d],p,v)=>{c!==0&&(l++,v.done())})).next((()=>l>0))}Et(e,t){return Ao(e).get(t).next((r=>r?ol(r):null))}}function Ao(i){return kt(i,Bo)}function Yy(i){return kt(i,mi)}function _s(i){return kt(i,zo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="LruGarbageCollector",cI=1048576;function Zy([i,e],[t,r]){const o=Ae(i,t);return o===0?Ae(e,r):o}class hI{constructor(e){this.Tr=e,this.buffer=new Xe(Zy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Zy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class m_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(Jy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(()=>Z(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ks(t)?ne(Jy,"Ignoring IndexedDB error during garbage collection: ",t):yield Si(t)}yield this.Rr(3e5)})))}}class dI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Mn.ue);const r=new hI(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Xy)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,l,c,d,p,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(v=Date.now(),Co()<=Ue.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(v-p)+`ms
Total Duration: ${v-x}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function g_(i,e){return new dI(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t){this.db=e,this.garbageCollector=g_(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,o)=>t(o)))}addReference(e,t,r){return uc(e,r)}removeReference(e,t,r){return uc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uc(e,t)}Sr(e,t){return(function(o,l){let c=!1;return p_(o).ee((d=>f_(o,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.wr(e,((c,d)=>{if(d<=t){const p=this.Sr(e,c).next((v=>{if(!v)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ie.min()),_s(e).delete((function(E){return[0,Qt(E.path)]})(c)))))}));o.push(p)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uc(e,t)}wr(e,t){const r=_s(e);let o,l=Mn.ue;return r.X({index:zf},(([c,d],{path:p,sequenceNumber:v})=>{c===0?(l!==Mn.ue&&t(new ue(pr(o)),l),l=v,o=p):l=Mn.ue})).next((()=>{l!==Mn.ue&&t(new ue(pr(o)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(i,e){return _s(i).put((function(r,o){return{targetId:0,path:Qt(r.path),sequenceNumber:o}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.changes=new Kr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return si(e).put(r)}removeEntry(e,t,r){return si(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Fc(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=pt.newInvalidDocument(t);return si(e).X({index:mc,range:IDBKeyRange.only(tl(t))},((o,l)=>{r=this.Dr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:pt.newInvalidDocument(t)};return si(e).X({index:mc,range:IDBKeyRange.only(tl(t))},((o,l)=>{r={document:this.Dr(t,l),size:zc(l)}})).next((()=>r))}getEntries(e,t){let r=xn();return this.Cr(e,t,((o,l)=>{const c=this.Dr(o,l);r=r.insert(o,c)})).next((()=>r))}Fr(e,t){let r=xn(),o=new lt(ue.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Dr(l,c);r=r.insert(l,d),o=o.insert(l,zc(c))})).next((()=>({documents:r,Mr:o})))}Cr(e,t,r){if(t.isEmpty())return L.resolve();let o=new Xe(nv);t.forEach((p=>o=o.add(p)));const l=IDBKeyRange.bound(tl(o.first()),tl(o.last())),c=o.getIterator();let d=c.getNext();return si(e).X({index:mc,range:l},((p,v,x)=>{const E=ue.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&nv(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?x.G(tl(d)):x.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Fc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return si(e).j(IDBKeyRange.bound(d,p,!0)).next((v=>{l==null||l.incrementDocumentReadCount(v.length);let x=xn();for(const E of v){const S=this.Dr(ue.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&(Ml(t,S)||o.has(S.key))&&(x=x.insert(S.key,S))}return x}))}getAllFromCollectionGroup(e,t,r,o){let l=xn();const c=tv(t,r),d=tv(t,Tn.max());return si(e).X({index:a0,range:IDBKeyRange.bound(c,d,!0)},((p,v,x)=>{const E=this.Dr(ue.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);l=l.insert(E.key,E),l.size===o&&x.done()})).next((()=>l))}newChangeBuffer(e){return new mI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return ev(e).get(cf).next((t=>(Ee(!!t,20021),t)))}br(e,t){return ev(e).put(cf,t)}Dr(e,t){if(t){const r=ZT(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return pt.newInvalidDocument(e)}}function v_(i){return new pI(i)}class mI extends y_{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Kr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Xe(((l,c)=>Ae(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Nr.get(l);if(t.push(this.Or.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=My(this.Or.serializer,c);o=o.add(l.path.popLast());const v=zc(p);r+=v-d.size,t.push(this.Or.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=My(this.Or.serializer,c.convertToNoDocument(Ie.min()));t.push(this.Or.addEntry(e,l,p))}})),o.forEach((l=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Or.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:o})=>(o.forEach(((l,c)=>{this.Nr.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function ev(i){return kt(i,Il)}function si(i){return kt(i,Nc)}function tl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tv(i,e){const t=e.documentKey.path.toArray();return[i,Fc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nv(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Ae(t[l],r[l]),o)return o;return o=Ae(t.length,r.length),o||(o=Ae(t[t.length-2],r[r.length-2]),o||Ae(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&gl(r.mutation,o,Ln.empty(),Qe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const o=mr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let c=sl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=mr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,o){let l=xn();const c=ml(),d=(function(){return ml()})();return t.forEach(((p,v)=>{const x=r.get(v.key);o.has(v.key)&&(x===void 0||x.mutation instanceof Ps)?l=l.insert(v.key,v):x!==void 0?(c.set(v.key,x.mutation.getFieldMask()),gl(x.mutation,v,x.mutation.getFieldMask(),Qe.now())):c.set(v.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,x)=>c.set(v,x))),t.forEach(((v,x)=>{var E;return d.set(v,new gI(x,(E=c.get(v))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=ml();let o=new lt(((c,d)=>c-d)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let x=r.get(p)||Ln.empty();x=d.applyToLocalView(v,x),r.set(p,x);const E=(o.get(d.batchId)||De()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,x=p.value,E=M0();x.forEach((S=>{if(!l.has(S)){const V=$0(t.get(S),r.get(S));V!==null&&E.set(S,V),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,E))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_T(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):L.resolve(mr());let d=wl,p=l;return c.next((v=>L.forEach(v,((x,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(x)?L.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{p=p.insert(x,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,De()))).next((x=>({batchId:d,changes:O0(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((r=>{let o=sl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=sl();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const v=(function(E,S){return new th(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((x=>{x.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((c=>{l.forEach(((p,v)=>{const x=v.getKey();c.get(x)===null&&(c=c.insert(x,pt.newInvalidDocument(x)))}));let d=sl();return c.forEach(((p,v)=>{const x=l.get(p);x!==void 0&&gl(x.mutation,v,Ln.empty(),Qe.now()),Ml(t,v)&&(d=d.insert(p,v))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return L.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:nn(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:l_(o.bundledQuery),readTime:nn(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new lt(ue.comparator),this.kr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.wt(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=mr(),l=t.length+1,c=new ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new lt(((v,x)=>v-x));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let x=l.get(v.largestBatchId);x===null&&(x=mr(),l=l.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const d=mr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,x)=>d.set(v,x))),!(d.size()>=o)););return L.resolve(d)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ep(t,r));let l=this.kr.get(t);l===void 0&&(l=De(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.qr=new Xe(Vt.Qr),this.$r=new Xe(Vt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new ue(new Je([])),r=new Vt(t,e),o=new Vt(t,e+1),l=[];return this.$r.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ue(new Je([])),r=new Vt(t,e),o=new Vt(t,e+1);let l=De();return this.$r.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Vt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ue.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Xe(Vt.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Jf(l,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new Vt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),l=o<0?0:o;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?pi:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ae);return t.forEach((o=>{const l=new Vt(o,0),c=new Vt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ue.isDocumentKey(l)||(l=l.child(""));const c=new Vt(new ue(l),0);let d=new Xe(Ae);return this.Yr.forEachWhile((p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(d=d.add(p.Hr)),!0)}),c),L.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ee(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(t.mutations,(o=>{const l=new Vt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Vt(t,0),o=this.Yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.ni=e,this.docs=(function(){return new lt(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=xn();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():pt.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=xn();const c=t.path,d=new ue(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:x}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Ff(n0(x),r)<=0||(o.has(x.key)||Ml(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,r,o){ye(9500)}ri(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new EI(this)}getSize(e){return L.resolve(this.size)}}class EI extends y_{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.persistence=e,this.ii=new Kr((t=>wi(t)),jl),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new ip,this.targetCount=0,this._i=Ti.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),L.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ti(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.hr(t),L.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),L.waitFor(l).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mn(0),this.ci=!1,this.ci=!0,this.li=new _I,this.referenceDelegate=e(this),this.hi=new TI(this),this.indexManager=new aI,this.remoteDocumentCache=(function(o){return new xI(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new o_(t),this.Ti=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new wI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const o=new II(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return L.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class II extends s0{constructor(e){super(),this.currentSequenceNumber=e}}class lh{constructor(e){this.persistence=e,this.Ai=new ip,this.Ri=null}static Vi(e){return new lh(e)}get mi(){if(this.Ri)return this.Ri;throw ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,(r=>{const o=ue.fromPath(r);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return L.or([()=>L.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Uc{constructor(e,t){this.persistence=e,this.gi=new Kr((r=>Qt(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=g_(this,t)}static Vi(e,t){return new Uc(e,t)}Ii(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return L.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((l=>l?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yc(e.data.value)),t}Sr(e,t,r){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.serializer=e}q(e,t,r,o){const l=new Gc("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(Vl)})(e),(function(p){p.createObjectStore(Tl,{keyPath:jE}),p.createObjectStore(tr,{keyPath:fy,autoIncrement:!0}).createIndex(di,py,{unique:!0}),p.createObjectStore(Fo)})(e),rv(e),(function(p){p.createObjectStore(ai)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(zo),p.deleteObjectStore(Bo),p.deleteObjectStore(mi)})(e),rv(e)),c=c.next((()=>(function(p){const v=p.store(mi),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return v.put(Rc,x)})(l)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(p,v){return v.store(tr).j().next((E=>{p.deleteObjectStore(tr),p.createObjectStore(tr,{keyPath:fy,autoIncrement:!0}).createIndex(di,py,{unique:!0});const S=v.store(tr),V=E.map((z=>S.put(z)));return L.waitFor(V)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Uo,{keyPath:qE})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.pi(l)))),r<6&&o>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Il)})(e),this.yi(l))))),r<7&&o>=7&&(c=c.next((()=>this.wi(l)))),r<8&&o>=8&&(c=c.next((()=>this.Si(e,l)))),r<9&&o>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.bi(l)))),r<11&&o>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Xc,{keyPath:KE})})(e),(function(p){p.createObjectStore(Yc,{keyPath:WE})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(p){const v=p.createObjectStore(Jc,{keyPath:ZE});v.createIndex(df,eT,{unique:!1}),v.createIndex(h0,tT,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(p){const v=p.createObjectStore(Nc,{keyPath:ME});v.createIndex(mc,LE),v.createIndex(a0,FE)})(e))).next((()=>this.Di(e,l))).next((()=>e.deleteObjectStore(ai)))),r<14&&o>=14&&(c=c.next((()=>this.Ci(e,l)))),r<15&&o>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Uf,{keyPath:HE,autoIncrement:!0}).createIndex(hf,GE,{unique:!1}),p.createObjectStore(hl,{keyPath:QE}).createIndex(u0,XE,{unique:!1}),p.createObjectStore(dl,{keyPath:YE}).createIndex(c0,JE,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(hl).clear()})).next((()=>{t.objectStore(dl).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(p){p.createObjectStore($f,{keyPath:nT})})(e)}))),r<18&&o>=18&&Ov()&&(c=c.next((()=>{t.objectStore(hl).clear()})).next((()=>{t.objectStore(dl).clear()}))),c}yi(e){let t=0;return e.store(ai).X(((r,o)=>{t+=zc(o)})).next((()=>{const r={byteSize:t};return e.store(Il).put(cf,r)}))}pi(e){const t=e.store(Tl),r=e.store(tr);return t.j().next((o=>L.forEach(o,(l=>{const c=IDBKeyRange.bound([l.userId,pi],[l.userId,l.lastAcknowledgedBatchId]);return r.j(di,c).next((d=>L.forEach(d,(p=>{Ee(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=ui(this.serializer,p);return d_(e,l.userId,v).next((()=>{}))}))))}))))}wi(e){const t=e.store(zo),r=e.store(ai);return e.store(mi).get(Rc).next((o=>{const l=[];return r.X(((c,d)=>{const p=new Je(c),v=(function(E){return[0,Qt(E)]})(p);l.push(t.get(v).next((x=>x?L.resolve():(E=>t.put({targetId:0,path:Qt(E),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}Si(e,t){e.createObjectStore(Sl,{keyPath:$E});const r=t.store(Sl),o=new sp,l=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:Qt(p)})}};return t.store(ai).X({Z:!0},((c,d)=>{const p=new Je(c);return l(p.popLast())})).next((()=>t.store(Fo).X({Z:!0},(([c,d,p],v)=>{const x=pr(d);return l(x.popLast())}))))}bi(e){const t=e.store(Bo);return t.X(((r,o)=>{const l=ol(o),c=a_(this.serializer,l);return t.put(c)}))}Di(e,t){const r=t.store(ai),o=[];return r.X(((l,c)=>{const d=t.store(Nc),p=(function(E){return E.document?new ue(Je.fromString(E.document.name).popFirst(5)):E.noDocument?ue.fromSegments(E.noDocument.path):E.unknownDocument?ue.fromSegments(E.unknownDocument.path):ye(36783)})(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(v))})).next((()=>L.waitFor(o)))}Ci(e,t){const r=t.store(tr),o=v_(this.serializer),l=new op(lh.Vi,this.serializer.gt);return r.j().next((c=>{const d=new Map;return c.forEach((p=>{var v;let x=(v=d.get(p.userId))!==null&&v!==void 0?v:De();ui(this.serializer,p).keys().forEach((E=>x=x.add(E))),d.set(p.userId,x)})),L.forEach(d,((p,v)=>{const x=new Ft(v),E=oh.yt(this.serializer,x),S=l.getIndexManager(x),V=ah.yt(x,this.serializer,S,l.referenceDelegate);return new __(o,V,E,S).recalculateAndSaveOverlaysForDocumentKeys(new ff(t,Mn.ue),p).next()}))}))}}function rv(i){i.createObjectStore(zo,{keyPath:zE}).createIndex(zf,UE,{unique:!0}),i.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(l0,BE,{unique:!0}),i.createObjectStore(mi)}const vs="IndexedDbPersistence",Xd=18e5,Yd=5e3,Jd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bI="main";class ap{constructor(e,t,r,o,l,c,d,p,v,x,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=l,this.window=c,this.document=d,this.Mi=v,this.xi=x,this.Oi=E,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=S=>Promise.resolve(),!ap.C())throw new he(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fI(this,o),this.Qi=t+bI,this.serializer=new o_(p),this.$i=new Is(this.Qi,this.Oi,new SI(this.serializer)),this.li=new tI,this.hi=new uI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=v_(this.serializer),this.Ti=new eI,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,x===!1&&tn(vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,Jd);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new Mn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=t=>Z(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((()=>Z(this,null,function*(){this.started&&(yield this.Ki())}))))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>cc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ks(e))return ne(vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(vs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return nl(e).get(Eo).next((t=>L.resolve(this.Xi(t))))}es(e){return cc(e).delete(this.clientId)}ts(){return Z(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,Xd)){this.ki=Date.now();const e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=kt(t,Uo);return r.j().next((o=>{const l=this.rs(o,Xd),c=o.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?L.resolve(!0):nl(e).get(Eo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Yd)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,Jd);return!1}}return!(!this.networkEnabled||!this.inForeground)||cc(e).j().next((r=>this.rs(r,Yd).find((o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(vs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}shutdown(){return Z(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Vl,Uo],(e=>{const t=new ff(e,Mn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()})}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>cc(e).j().next((t=>this.rs(t,Xd).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return ah.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lI(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return oh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){ne(vs,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?iT:p===17?m0:p===16?sT:p===15?qf:p===14?p0:p===13?f0:p===12?rT:p===11?d0:void ye(60245)})(this.Oi);let c;return this.$i.runTransaction(e,o,l,(d=>(c=new ff(d,this.ui?this.ui.next():Mn.ue),t==="readwrite-primary"?this.Ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new he(G.FAILED_PRECONDITION,r0);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ts(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ts(e){return nl(e).get(Eo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Yd)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(G.FAILED_PRECONDITION,Jd)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nl(e).put(Eo,t)}static C(){return Is.C()}Yi(e){const t=nl(e);return t.get(Eo).next((r=>this.Xi(r)?(ne(vs,"Releasing primary lease."),t.delete(Eo)):L.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;jv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ne(vs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn(vs,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nl(i){return kt(i,Vl)}function cc(i){return kt(i,Uo)}function AI(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=De(),o=De();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new lp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return jv()?8:i0(Sc())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new CI;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(Co()<=Ue.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Co()<=Ue.DEBUG&&ne("QueryEngine","Query:",ko(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Co()<=Ue.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):L.resolve())}ps(e,t){if(Ay(t))return L.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=_f(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=De(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const v=this.bs(t,d);return this.Ds(t,v,c,p.readTime)?this.ps(e,_f(t,null,"F")):this.vs(e,v,t,p)}))))})))))}ys(e,t,r,o){return Ay(t)||o.isEqual(Ie.min())?L.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,o)?L.resolve(null):(Co()<=Ue.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(t)),this.vs(e,c,t,CE(o,wl)).next((d=>d)))}))}bs(e,t){let r=new Xe(V0(e));return t.forEach(((o,l)=>{Ml(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,r){return Co()<=Ue.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ko(t)),this.gs.getDocumentsMatchingQuery(e,t,Tn.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="LocalStore",kI=3e8;class PI{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new lt(Ae),this.Ms=new Kr((l=>wi(l)),jl),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new __(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function x_(i,e,t,r){return new PI(i,e,t,r)}function E_(i,e){return Z(this,null,function*(){const t=ke(i);return yield t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=De();for(const v of o){c.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}for(const v of l){d.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(r,p).next((v=>({Bs:v,removedBatchIds:c,addedBatchIds:d})))}))}))})}function NI(i,e){const t=ke(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,v,x){const E=v.batch,S=E.keys();let V=L.resolve();return S.forEach((z=>{V=V.next((()=>x.getEntry(p,z))).next((K=>{const U=v.docVersions.get(z);Ee(U!==null,48541),K.version.compareTo(U)<0&&(E.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),x.addEntry(K)))}))})),V.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=De();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function T_(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function RI(i,e){const t=ke(i),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((x,E)=>{const S=o.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(l,x.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,x.addedDocuments,E))));let V=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken(Et.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):x.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(x.resumeToken,r)),o=o.insert(E,V),(function(K,U,ie){return K.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=kI?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(S,V,x)&&d.push(t.hi.updateTargetData(l,V))}));let p=xn(),v=De();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),d.push(DI(l,c,e.documentUpdates).next((x=>{p=x.Ls,v=x.ks}))),!r.isEqual(Ie.min())){const x=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(x)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function DI(i,e,t){let r=De(),o=De();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=xn();return t.forEach(((d,p)=>{const v=l.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ne(up,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function VI(i,e){const t=ke(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=pi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jI(i,e){const t=ke(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((l=>l?(o=l,L.resolve(o)):t.hi.allocateTargetId(r).next((c=>(o=new Fr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}function Af(i,e,t){return Z(this,null,function*(){const r=ke(i),o=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o))))}catch(c){if(!ks(c))throw c;ne(up,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)})}function sv(i,e,t){const r=ke(i);let o=Ie.min(),l=De();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,v,x){const E=ke(p),S=E.Ms.get(x);return S!==void 0?L.resolve(E.Fs.get(S)):E.hi.getTargetData(v,x)})(r,c,Fn(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:De()))).next((d=>(OI(r,xT(e),d),{documents:d,qs:l})))))}function OI(i,e,t){let r=i.xs.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}class iv{constructor(){this.activeTargetIds=AT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I_{constructor(){this.Fo=new iv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new iv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="ConnectivityMonitor";class av{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(ov,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(ov,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Cf(){return hc===null?hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="RestConnection",LI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FI{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,l){const c=Cf(),d=this.Go(e,t.toUriEncodedString());ne(Zd,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:v}=new URL(d),x=Vf(v);return this.jo(e,d,p,r,x).then((E=>(ne(Zd,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw vr(Zd,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}Jo(e,t,r,o,l,c){return this.Wo(e,t,r,o,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const r=LI[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class zI extends FI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,l){const c=Cf();return new Promise(((d,p)=>{const v=new Wv;v.setWithCredentials(!0),v.listenOnce(Hv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case dc.NO_ERROR:const E=v.getResponseJson();ne(Ht,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case dc.TIMEOUT:ne(Ht,`RPC '${e}' ${c} timed out`),p(new he(G.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const S=v.getStatus();if(ne(Ht,`RPC '${e}' ${c} failed with status:`,S,"response text:",v.getResponseText()),S>0){let V=v.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=V==null?void 0:V.error;if(z&&z.status&&z.message){const K=(function(ie){const Q=ie.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Q)>=0?Q:G.UNKNOWN})(z.status);p(new he(K,z.message))}else p(new he(G.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new he(G.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{c_:e,streamId:c,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ne(Ht,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(o);ne(Ht,`RPC '${e}' ${c} sending request:`,o),v.send(t,"POST",x,r,15)}))}P_(e,t,r){const o=Cf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Xv(),d=Qv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=l.join("");ne(Ht,`Creating RPC '${e}' stream ${o}: ${x}`,p);const E=c.createWebChannel(x,p);this.T_(E);let S=!1,V=!1;const z=new BI({Ho:U=>{V?ne(Ht,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ne(Ht,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ne(Ht,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Yo:()=>E.close()}),K=(U,ie,Q)=>{U.listen(ie,(H=>{try{Q(H)}catch(te){setTimeout((()=>{throw te}),0)}}))};return K(E,rl.EventType.OPEN,(()=>{V||(ne(Ht,`RPC '${e}' stream ${o} transport opened.`),z.s_())})),K(E,rl.EventType.CLOSE,(()=>{V||(V=!0,ne(Ht,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(E))})),K(E,rl.EventType.ERROR,(U=>{V||(V=!0,vr(Ht,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),z.__(new he(G.UNAVAILABLE,"The operation could not be completed")))})),K(E,rl.EventType.MESSAGE,(U=>{var ie;if(!V){const Q=U.data[0];Ee(!!Q,16349);const H=Q,te=(H==null?void 0:H.error)||((ie=H[0])===null||ie===void 0?void 0:ie.error);if(te){ne(Ht,`RPC '${e}' stream ${o} received error:`,te);const me=te.status;let le=(function(b){const C=wt[b];if(C!==void 0)return W0(C)})(me),N=te.message;le===void 0&&(le=G.INTERNAL,N="Unknown error status: "+me+" with message "+te.message),V=!0,z.__(new he(le,N)),E.close()}else ne(Ht,`RPC '${e}' stream ${o} received:`,Q),z.a_(Q)}})),K(d,Gv.STAT_EVENT,(U=>{U.stat===af.PROXY?ne(Ht,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===af.NOPROXY&&ne(Ht,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof window!="undefined"?window:null}function Ec(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(i){return new $T(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="PersistentStream";class b_{constructor(e,t,r,o,l,c,d,p){this.Fi=e,this.w_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new S_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return Z(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}L_(){return Z(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return Z(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new he(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((()=>Z(this,null,function*(){this.state=0,this.start()})))}G_(e){return ne(lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ne(lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $I extends b_{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=WT(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?nn(c.readTime):Ie.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Ef(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=jc(p)?{documents:e_(l,p)}:{query:t_(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Q0(l,c.resumeToken);const v=wf(l,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Qo(l,c.snapshotVersion.toTimestamp());const v=wf(l,c.expectedCount);v!==null&&(d.expectedCount=v)}return d})(this.serializer,e);const r=GT(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Ef(this.serializer),t.removeTarget=e,this.k_(t)}}class qI extends b_{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=HT(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Ef(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Lc(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{}class WI extends KI{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,xf(t,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(G.UNKNOWN,l.toString())}))}Jo(e,t,r,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,xf(t,r),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(G.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class HI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(tn(t),this._a=!1):ne("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="RemoteStore";class GI{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((()=>Z(this,null,function*(){Ai(this)&&(ne(Ii,"Restarting streams for network reachability change."),yield(function(p){return Z(this,null,function*(){const v=ke(p);v.Ia.add(4),yield Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),yield ch(v)})})(this))})))})),this.Aa=new HI(r,o)}}function ch(i){return Z(this,null,function*(){if(Ai(i))for(const e of i.da)yield e(!0)})}function Fl(i){return Z(this,null,function*(){for(const e of i.da)yield e(!1)})}function A_(i,e){const t=ke(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),fp(t)?dp(t):ta(t).x_()&&hp(t,e))}function cp(i,e){const t=ke(i),r=ta(t);t.Ta.delete(e),r.x_()&&C_(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ai(t)&&t.Aa.set("Unknown"))}function hp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(i).H_(e)}function C_(i,e){i.Ra.$e(e),ta(i).Y_(e)}function dp(i){i.Ra=new FT({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),ta(i).start(),i.Aa.aa()}function fp(i){return Ai(i)&&!ta(i).M_()&&i.Ta.size>0}function Ai(i){return ke(i).Ia.size===0}function k_(i){i.Ra=void 0}function QI(i){return Z(this,null,function*(){i.Aa.set("Online")})}function XI(i){return Z(this,null,function*(){i.Ta.forEach(((e,t)=>{hp(i,e)}))})}function YI(i,e){return Z(this,null,function*(){k_(i),fp(i)?(i.Aa.la(e),dp(i)):i.Aa.set("Unknown")})}function JI(i,e,t){return Z(this,null,function*(){if(i.Aa.set("Online"),e instanceof G0&&e.state===2&&e.cause)try{yield(function(o,l){return Z(this,null,function*(){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(yield o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})})(i,e)}catch(r){ne(Ii,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $c(i,r)}else if(e instanceof wc?i.Ra.Ye(e):e instanceof H0?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Ie.min()))try{const r=yield T_(i.localStore);t.compareTo(r)>=0&&(yield(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const x=l.Ta.get(v);x&&l.Ta.set(v,x.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,v)=>{const x=l.Ta.get(p);if(!x)return;l.Ta.set(p,x.withResumeToken(Et.EMPTY_BYTE_STRING,x.snapshotVersion)),C_(l,p);const E=new Fr(x.target,p,v,x.sequenceNumber);hp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(i,t))}catch(r){ne(Ii,"Failed to raise snapshot:",r),yield $c(i,r)}})}function $c(i,e,t){return Z(this,null,function*(){if(!ks(e))throw e;i.Ia.add(1),yield Fl(i),i.Aa.set("Offline"),t||(t=()=>T_(i.localStore)),i.asyncQueue.enqueueRetryable((()=>Z(null,null,function*(){ne(Ii,"Retrying IndexedDB access"),yield t(),i.Ia.delete(1),yield ch(i)})))})}function P_(i,e){return e().catch((t=>$c(i,t,e)))}function Bl(i){return Z(this,null,function*(){const e=ke(i),t=As(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:pi;for(;ZI(e);)try{const o=yield VI(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,e2(e,o)}catch(o){yield $c(e,o)}N_(e)&&R_(e)})}function ZI(i){return Ai(i)&&i.Pa.length<10}function e2(i,e){i.Pa.push(e);const t=As(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function N_(i){return Ai(i)&&!As(i).M_()&&i.Pa.length>0}function R_(i){As(i).start()}function t2(i){return Z(this,null,function*(){As(i).na()})}function n2(i){return Z(this,null,function*(){const e=As(i);for(const t of i.Pa)e.X_(t.mutations)})}function r2(i,e,t){return Z(this,null,function*(){const r=i.Pa.shift(),o=Zf.from(r,e,t);yield P_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),yield Bl(i)})}function s2(i,e){return Z(this,null,function*(){e&&As(i).Z_&&(yield(function(r,o){return Z(this,null,function*(){if((function(c){return MT(c)&&c!==G.ABORTED})(o.code)){const l=r.Pa.shift();As(r).N_(),yield P_(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),yield Bl(r)}})})(i,e)),N_(i)&&R_(i)})}function uv(i,e){return Z(this,null,function*(){const t=ke(i);t.asyncQueue.verifyOperationInProgress(),ne(Ii,"RemoteStore received new credentials");const r=Ai(t);t.Ia.add(3),yield Fl(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ch(t)})}function i2(i,e){return Z(this,null,function*(){const t=ke(i);e?(t.Ia.delete(2),yield ch(t)):e||(t.Ia.add(2),yield Fl(t),t.Aa.set("Unknown"))})}function ta(i){return i.Va||(i.Va=(function(t,r,o){const l=ke(t);return l.ia(),new $I(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:QI.bind(null,i),e_:XI.bind(null,i),n_:YI.bind(null,i),J_:JI.bind(null,i)}),i.da.push((e=>Z(null,null,function*(){e?(i.Va.N_(),fp(i)?dp(i):i.Aa.set("Unknown")):(yield i.Va.stop(),k_(i))})))),i.Va}function As(i){return i.ma||(i.ma=(function(t,r,o){const l=ke(t);return l.ia(),new qI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:t2.bind(null,i),n_:s2.bind(null,i),ea:n2.bind(null,i),ta:r2.bind(null,i)}),i.da.push((e=>Z(null,null,function*(){e?(i.ma.N_(),yield Bl(i)):(yield i.ma.stop(),i.Pa.length>0&&(ne(Ii,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,d=new pp(e,t,c,o,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(i,e){if(tn("AsyncQueue",`${e}: ${i}`),ks(i))return new he(G.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=sl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.fa=new lt(ue.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xo{constructor(e,t,r,o,l,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xo(e,t,Oo.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class a2{constructor(){this.queries=hv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=ke(t),l=o.queries;o.queries=hv(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(r)}))})(this,new he(G.ABORTED,"Firestore shutting down"))}}function hv(){return new Kr((i=>D0(i)),nh)}function D_(i,e){return Z(this,null,function*(){const t=ke(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(r=2):(l=new o2,r=e.ba()?0:1);try{switch(r){case 0:l.ya=yield t.onListen(o,!0);break;case 1:l.ya=yield t.onListen(o,!1);break;case 2:yield t.onFirstRemoteStoreListen(o)}}catch(c){const d=mp(c,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&gp(t)})}function V_(i,e){return Z(this,null,function*(){const t=ke(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function l2(i,e){const t=ke(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(r=!0);c.ya=o}}r&&gp(t)}function u2(i,e,t){const r=ke(i),o=r.queries.get(e);if(o)for(const l of o.wa)l.onError(t);r.queries.delete(e)}function gp(i){i.Da.forEach((e=>{e.next()}))}var kf,dv;(dv=kf||(kf={})).Fa="default",dv.Cache="cache";class j_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.key=e}}class M_{constructor(e){this.key=e}}class c2{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=V0(e),this.eu=new Oo(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new cv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,E)=>{const S=o.get(x),V=Ml(this.query,E)?E:null,z=!!S&&this.mutatedKeys.has(S.key),K=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let U=!1;S&&V?S.data.isEqual(V.data)?z!==K&&(r.track({type:3,doc:V}),U=!0):this.iu(S,V)||(r.track({type:2,doc:V}),U=!0,(p&&this.Xa(V,p)>0||v&&this.Xa(V,v)<0)&&(d=!0)):!S&&V?(r.track({type:0,doc:V}),U=!0):S&&!V&&(r.track({type:1,doc:S}),U=!0,(p||v)&&(d=!0)),U&&(V?(c=c.add(V),l=K?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{eu:c,ru:r,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((x,E)=>(function(V,z){const K=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{At:U})}};return K(V)-K(z)})(x.type,E.type)||this.Xa(x.doc,E.doc))),this.su(r),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,v=p!==this.Ya;return this.Ya=p,c.length!==0||v?{snapshot:new Xo(this.query,e.eu,l,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=De(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new M_(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new O_(r))})),t}uu(e){this.Ha=e.qs,this.Za=De();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Xo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const yp="SyncEngine";class h2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class d2{constructor(e){this.key=e,this.lu=!1}}class f2{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Kr((d=>D0(d)),nh),this.Tu=new Map,this.Iu=new Set,this.du=new lt(ue.comparator),this.Eu=new Map,this.Au=new ip,this.Ru={},this.Vu=new Map,this.mu=Ti.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}function p2(i,e,t=!0){return Z(this,null,function*(){const r=$_(i);let o;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=yield L_(r,e,t,!0),o})}function m2(i,e){return Z(this,null,function*(){const t=$_(i);yield L_(t,e,!0,!1)})}function L_(i,e,t,r){return Z(this,null,function*(){const o=yield jI(i.localStore,Fn(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=yield g2(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&A_(i.remoteStore,o),d})}function g2(i,e,t,r,o){return Z(this,null,function*(){i.gu=(E,S,V)=>(function(K,U,ie,Q){return Z(this,null,function*(){let H=U.view.nu(ie);H.Ds&&(H=yield sv(K.localStore,U.query,!1).then((({documents:N})=>U.view.nu(N,H))));const te=Q&&Q.targetChanges.get(U.targetId),me=Q&&Q.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges(H,K.isPrimaryClient,te,me);return pv(K,U.targetId,le._u),le.snapshot})})(i,E,S,V);const l=yield sv(i.localStore,e,!0),c=new c2(e,l.qs),d=c.nu(l.documents),p=Ll.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),v=c.applyChanges(d,i.isPrimaryClient,p);pv(i,t,v._u);const x=new h2(e,t,c);return i.Pu.set(e,x),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),v.snapshot})}function y2(i,e,t){return Z(this,null,function*(){const r=ke(i),o=r.Pu.get(e),l=r.Tu.get(o.targetId);if(l.length>1)return r.Tu.set(o.targetId,l.filter((c=>!nh(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Af(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&cp(r.remoteStore,o.targetId),Pf(r,o.targetId)})).catch(Si))):(Pf(r,o.targetId),yield Af(r.localStore,o.targetId,!0))})}function v2(i,e){return Z(this,null,function*(){const t=ke(i),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cp(t.remoteStore,r.targetId))})}function _2(i,e,t){return Z(this,null,function*(){const r=q_(i);try{const o=yield(function(c,d){const p=ke(c),v=Qe.now(),x=d.reduce(((V,z)=>V.add(z.key)),De());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let z=xn(),K=De();return p.Os.getEntries(V,x).next((U=>{z=U,z.forEach(((ie,Q)=>{Q.isValidDocument()||(K=K.add(ie))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,z))).next((U=>{E=U;const ie=[];for(const Q of d){const H=jT(Q,E.get(Q.key).overlayedDocument);H!=null&&ie.push(new Ps(Q.key,H,S0(H.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(V,v,ie,d)})).next((U=>{S=U;const ie=U.applyToLocalDocumentSet(E,K);return p.documentOverlayCache.saveOverlays(V,U.batchId,ie)}))})).then((()=>({batchId:S.batchId,changes:O0(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let v=c.Ru[c.currentUser.toKey()];v||(v=new lt(Ae)),v=v.insert(d,p),c.Ru[c.currentUser.toKey()]=v})(r,o.batchId,t),yield zl(r,o.changes),yield Bl(r.remoteStore)}catch(o){const l=mp(o,"Failed to persist write");t.reject(l)}})}function F_(i,e){return Z(this,null,function*(){const t=ke(i);try{const r=yield RI(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Ee(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Ee(c.lu,14607):o.removedDocuments.size>0&&(Ee(c.lu,42227),c.lu=!1))})),yield zl(t,r,e)}catch(r){yield Si(r)}})}function fv(i,e,t){const r=ke(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=ke(c);p.onlineState=d;let v=!1;p.queries.forEach(((x,E)=>{for(const S of E.wa)S.va(d)&&(v=!0)})),v&&gp(p)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function w2(i,e,t){return Z(this,null,function*(){const r=ke(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new lt(ue.comparator);c=c.insert(l,pt.newNoDocument(l,Ie.min()));const d=De().add(l),p=new ih(Ie.min(),new Map,new lt(Ae),c,d);yield F_(r,p),r.du=r.du.remove(l),r.Eu.delete(e),vp(r)}else yield Af(r.localStore,e,!1).then((()=>Pf(r,e,t))).catch(Si)})}function x2(i,e){return Z(this,null,function*(){const t=ke(i),r=e.batch.batchId;try{const o=yield NI(t.localStore,e);z_(t,r,null),B_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zl(t,o)}catch(o){yield Si(o)}})}function E2(i,e,t){return Z(this,null,function*(){const r=ke(i);try{const o=yield(function(c,d){const p=ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return p.mutationQueue.lookupMutationBatch(v,d).next((E=>(Ee(E!==null,37113),x=E.keys(),p.mutationQueue.removeMutationBatch(v,E)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,x,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>p.localDocuments.getDocuments(v,x)))}))})(r.localStore,e);z_(r,e,t),B_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zl(r,o)}catch(o){yield Si(o)}})}function B_(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function z_(i,e,t){const r=ke(i);let o=r.Ru[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Pf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||U_(i,r)}))}function U_(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(cp(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),vp(i))}function pv(i,e,t){for(const r of t)r instanceof O_?(i.Au.addReference(r.key,e),T2(i,r)):r instanceof M_?(ne(yp,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||U_(i,r.key)):ye(19791,{yu:r})}function T2(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(ne(yp,"New document in limbo: "+t),i.Iu.add(r),vp(i))}function vp(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new ue(Je.fromString(e)),r=i.mu.next();i.Eu.set(r,new d2(t)),i.du=i.du.insert(t,r),A_(i.remoteStore,new Fr(Fn(Ol(t.path)),r,"TargetPurposeLimboResolution",Mn.ue))}}function zl(i,e,t){return Z(this,null,function*(){const r=ke(i),o=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,p)=>{c.push(r.gu(p,e,t).then((v=>{var x;if((v||t)&&r.isPrimaryClient){const E=v?!v.fromCache:(x=t==null?void 0:t.targetChanges.get(p.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(v){o.push(v);const E=lp.Es(p.targetId,v);l.push(E)}})))})),yield Promise.all(c),r.hu.J_(o),yield(function(p,v){return Z(this,null,function*(){const x=ke(p);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>L.forEach(v,(S=>L.forEach(S.Is,(V=>x.persistence.referenceDelegate.addReference(E,S.targetId,V))).next((()=>L.forEach(S.ds,(V=>x.persistence.referenceDelegate.removeReference(E,S.targetId,V)))))))))}catch(E){if(!ks(E))throw E;ne(up,"Failed to update sequence numbers: "+E)}for(const E of v){const S=E.targetId;if(!E.fromCache){const V=x.Fs.get(S),z=V.snapshotVersion,K=V.withLastLimboFreeSnapshotVersion(z);x.Fs=x.Fs.insert(S,K)}}})})(r.localStore,l))})}function I2(i,e){return Z(this,null,function*(){const t=ke(i);if(!t.currentUser.isEqual(e)){ne(yp,"User change. New user:",e.toKey());const r=yield E_(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new he(G.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zl(t,r.Bs)}})}function S2(i,e){const t=ke(i),r=t.Eu.get(e);if(r&&r.lu)return De().add(r.key);{let o=De();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function $_(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=F_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w2.bind(null,e),e.hu.J_=l2.bind(null,e.eventManager),e.hu.pu=u2.bind(null,e.eventManager),e}function q_(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E2.bind(null,e),e}class Nl{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return Z(this,null,function*(){this.serializer=uh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)})}Cu(e,t){return null}Fu(e,t){return null}vu(e){return x_(this.persistence,new w_,e.initialUser,this.serializer)}Du(e){return new op(lh.Vi,this.serializer)}bu(e){return new I_}terminate(){return Z(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}Nl.provider={build:()=>new Nl};class b2 extends Nl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ee(this.persistence.referenceDelegate instanceof Uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new m_(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new op((r=>Uc.Vi(r,t)),this.serializer)}}class _p extends Nl{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return Z(this,null,function*(){yield jg(_p.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield q_(this.Mu.syncEngine),yield Bl(this.Mu.remoteStore),yield this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))})}vu(e){return x_(this.persistence,new w_,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new m_(r,e.asyncQueue,t)}Fu(e,t){const r=new RE(t,this.persistence);return new NE(e.asyncQueue,r)}Du(e){const t=AI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new ap(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UI(),Ec(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new I_}}class qc{initialize(e,t){return Z(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),yield i2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return(function(){return new a2})()}createDatastore(e){const t=uh(e.databaseInfo.databaseId),r=(function(l){return new zI(l)})(e.databaseInfo);return(function(l,c,d,p){return new WI(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,c,d){return new GI(r,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>fv(this.syncEngine,t,0)),(function(){return av.C()?new av:new MI})())}createSyncEngine(e,t){return(function(o,l,c,d,p,v,x){const E=new f2(o,l,c,d,p,v);return x&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return Z(this,null,function*(){var e,t;yield(function(o){return Z(this,null,function*(){const l=ke(o);ne(Ii,"RemoteStore shutting down."),l.Ia.add(5),yield Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}}qc.provider={build:()=>new qc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class A2{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=Mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(c=>Z(this,null,function*(){ne(Cs,"Received user=",c.uid),yield this.authCredentialListener(c),this.user=c}))),this.appCheckCredentials.start(r,(c=>(ne(Cs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((()=>Z(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=mp(t,"Failed to shutdown persistence");e.reject(r)}}))),e.promise}}function ef(i,e){return Z(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),ne(Cs,"Initializing OfflineComponentProvider");const t=i.configuration;yield e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((o=>Z(null,null,function*(){r.isEqual(o)||(yield E_(e.localStore,o),r=o)}))),e.persistence.setDatabaseDeletedListener((()=>{vr("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{vr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e})}function mv(i,e){return Z(this,null,function*(){i.asyncQueue.verifyOperationInProgress();const t=yield C2(i);ne(Cs,"Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>uv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>uv(e.remoteStore,o))),i._onlineComponents=e})}function C2(i){return Z(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne(Cs,"Using user provided OfflineComponentProvider");try{yield ef(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;vr("Error using user provided cache. Falling back to memory cache: "+t),yield ef(i,new Nl)}}else ne(Cs,"Using default OfflineComponentProvider"),yield ef(i,new b2(void 0));return i._offlineComponents})}function W_(i){return Z(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne(Cs,"Using user provided OnlineComponentProvider"),yield mv(i,i._uninitializedComponentsProvider._online)):(ne(Cs,"Using default OnlineComponentProvider"),yield mv(i,new qc))),i._onlineComponents})}function k2(i){return W_(i).then((e=>e.syncEngine))}function Nf(i){return Z(this,null,function*(){const e=yield W_(i),t=e.eventManager;return t.onListen=p2.bind(null,e.syncEngine),t.onUnlisten=y2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=m2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=v2.bind(null,e.syncEngine),t})}function P2(i,e,t={}){const r=new Br;return i.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return(function(l,c,d,p,v){const x=new K_({next:S=>{x.Ou(),c.enqueueAndForget((()=>V_(l,E)));const V=S.docs.has(d);!V&&S.fromCache?v.reject(new he(G.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?v.reject(new he(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),E=new j_(Ol(d.path),x,{includeMetadataChanges:!0,ka:!0});return D_(l,E)})(yield Nf(i),i.asyncQueue,e,t,r)}))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firestore.googleapis.com",yv=!0;class vv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G_,this.ssl=yv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cI)throw new he(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wp{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yE;switch(r.type){case"firstParty":return new xE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return Z(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=gv.get(t);r&&(ne("ComponentProvider","Removing Datastore"),gv.delete(t),r.terminate())})(this),Promise.resolve()}}function N2(i,e,t,r={}){var o;i=zr(i,wp);const l=Vf(e),c=i._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Xx(`https://${p}`),e1("Firestore",!0)),c.host!==G_&&c.host!==p&&vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:r});if(!bc(v,d)&&(i._setSettings(v),r.mockUserToken)){let x,E;if(typeof r.mockUserToken=="string")x=r.mockUserToken,E=Ft.MOCK_USER;else{x=Yx(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new he(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ft(S)}i._authCredentials=new vE(new Jv(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hh(this.firestore,e,this._query)}}class Ct{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dl(t,Ct._jsonSchema))return new Ct(e,r||null,new ue(Je.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:xt("string",Ct._jsonSchemaVersion),referencePath:xt("string")};class Rl extends hh{constructor(e,t,r){super(e,t,Ol(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ue(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function na(i,e,...t){if(i=yl(i),arguments.length===1&&(e=Mf.newId()),bE("doc","path",e),i instanceof wp){const r=Je.fromString(e,...t);return ly(r),new Ct(i,null,new ue(r))}{if(!(i instanceof Ct||i instanceof Rl))throw new he(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Je.fromString(e,...t));return ly(r),new Ct(i.firestore,i instanceof Rl?i.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="AsyncQueue";class wv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new S_(this,"async_queue_retry"),this.oc=()=>{const r=Ec();r&&ne(_v,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ec();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ec();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Br;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}cc(){return Z(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ks(e))throw e;ne(_v,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}})}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,tn("INTERNAL UNHANDLED ERROR: ",xv(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=pp.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&ye(47125,{hc:xv(this.tc)})}verifyOperationInProgress(){}Pc(){return Z(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function xv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class Yo extends wp{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new wv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}_terminate(){return Z(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wv(e),this._firestoreClient=void 0,yield e}})}}function R2(i,e){const t=typeof i=="object"?i:oE(),r=typeof i=="string"?i:Dc,o=tE(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=Gx("firestore");l&&N2(o,...l)}return o}function xp(i){if(i._terminated)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Q_(i),i._firestoreClient}function Q_(i){var e,t,r;const o=i._freezeSettings(),l=(function(d,p,v,x){return new aT(d,p,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,H_(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new A2(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(i._componentsProvider))}function D2(i,e){vr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return V2(i,qc.provider,{build:r=>new _p(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function V2(i,e,t){if((i=zr(i,Yo))._firestoreClient||i._terminated)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new he(G.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},Q_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Et.fromBase64String(e))}catch(t){throw new he(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new On(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:xt("string",On._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:xt("string",gr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new he(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:xt("string",yr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=/^__.*__$/;class O2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new ea(e,this.data,t,this.fieldTransforms)}}function Y_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ec:i})}}class Tp{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Tp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Y_(this.Ec)&&j2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class M2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uh(e)}Dc(e,t,r,o=!1){return new Tp({Ec:e,methodName:t,bc:r,path:dt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L2(i){const e=i._freezeSettings(),t=uh(i._databaseId);return new M2(i._databaseId,!!e.ignoreUndefinedProperties,t)}function F2(i,e,t,r,o,l={}){const c=i.Dc(l.merge||l.mergeFields?2:0,e,t,o);tw("Data must be an object, but it was:",c,r);const d=Z_(r,c);let p,v;if(l.merge)p=new Ln(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const E of l.mergeFields){const S=B2(e,E,t);if(!c.contains(S))throw new he(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);U2(x,S)||x.push(S)}p=new Ln(x),v=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,v=c.fieldTransforms;return new O2(new dn(d),p,v)}function J_(i,e){if(ew(i=yl(i)))return tw("Unsupported field value:",e,i),Z_(i,e);if(i instanceof X_)return(function(r,o){if(!Y_(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const d of r){let p=J_(d,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,o){if((r=yl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Qe.fromDate(r);return{timestampValue:Qo(o.serializer,l)}}if(r instanceof Qe){const l=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qo(o.serializer,l)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:Q0(o.serializer,r._byteString)};if(r instanceof Ct){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof yr)return(function(c,d){return{mapValue:{fields:{[Wf]:{stringValue:Hf},[$o]:{arrayValue:{values:c.toArray().map((v=>{if(typeof v!="number")throw d.wc("VectorValues must only contain numeric values.");return Xf(d.serializer,v)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${Lf(r)}`)})(i,e)}function Z_(i,e){const t={};return g0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(i,((r,o)=>{const l=J_(o,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function ew(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qe||i instanceof gr||i instanceof On||i instanceof Ct||i instanceof X_||i instanceof yr)}function tw(i,e,t){if(!ew(t)||!t0(t)){const r=Lf(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function B2(i,e,t){if((e=yl(e))instanceof Ep)return e._internalPath;if(typeof e=="string")return nw(i,e);throw Kc("Field path arguments must be of type string or ",i,!1,void 0,t)}const z2=new RegExp("[~\\*/\\[\\]]");function nw(i,e,t){if(e.search(z2)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ep(...e.split("."))._internalPath}catch(r){throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kc(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new he(G.INVALID_ARGUMENT,d+i+p)}function U2(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $2 extends rw{data(){return super.data()}}function sw(i,e){return typeof e=="string"?nw(i,e):e instanceof Ep?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K2{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bi(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[$o].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((c=>at(c.doubleValue)));return new yr(l)}convertGeoPoint(e){return new gr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const t=$r(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);Ee(i_(r),9688,{name:e});const o=new _i(r.get(1),r.get(3)),l=new ue(r.popFirst(5));return o.isEqual(t)||tn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends rw{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:xt("string",yi._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Tc extends yi{data(e={}){return super.data(e)}}class Mo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new al(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Tc(this._firestore,this._userDataWriter,r.key,r,new al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,x=-1;return d.type!==0&&(v=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),x=c.indexOf(d.doc.key)),{type:H2(d.type),doc:p,oldIndex:v,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(i){i=zr(i,Ct);const e=zr(i.firestore,Yo);return P2(xp(e),i._key).then((t=>lw(e,i,t)))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:xt("string",Mo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class ow extends K2{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function Ip(i,e,t){i=zr(i,Ct);const r=zr(i.firestore,Yo),o=W2(i.converter,e,t);return G2(r,[F2(L2(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,En.none())])}function aw(i,...e){var t,r,o;i=yl(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ev(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ev(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[c+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,v,x;if(i instanceof Ct)v=zr(i.firestore,Yo),x=Ol(i._key.path),p={next:E=>{e[c]&&e[c](lw(v,i,E))},error:e[c+1],complete:e[c+2]};else{const E=zr(i,hh);v=zr(E.firestore,Yo),x=E._query;const S=new ow(v);p={next:V=>{e[c]&&e[c](new Mo(v,S,E,V))},error:e[c+1],complete:e[c+2]},q2(i._query)}return(function(S,V,z,K){const U=new K_(K),ie=new j_(V,U,z);return S.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return D_(yield Nf(S),ie)}))),()=>{U.Ou(),S.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return V_(yield Nf(S),ie)})))}})(xp(v),x,d,p)}function G2(i,e){return(function(r,o){const l=new Br;return r.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return _2(yield k2(r),o,l)}))),l.promise})(xp(i),e)}function lw(i,e,t){const r=t.docs.get(e._key),o=new ow(i);return new yi(i,o,e._key,r,new al(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Zo=o})(iE),Cc(new vl("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Yo(new _E(r.getProvider("auth-internal")),new EE(c,r.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _i(v.options.projectId,x)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),jo(ry,sy,e),jo(ry,sy,"esm2017")})();var Q2="firebase",X2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo(Q2,X2,"app");const Y2={apiKey:"AIzaSyBWvyaFWIL0PV4VD33BJNQl3qP2k1IbQus",authDomain:"rutine-f2ac1.firebaseapp.com",projectId:"rutine-f2ac1",storageBucket:"rutine-f2ac1.firebasestorage.app",messagingSenderId:"161382347749",appId:"1:161382347749:web:a07ebafa5bdd35d480350c",measurementId:"G-BNC489N193"},J2=Uv(Y2),Ci=R2(J2);D2(Ci).catch(i=>{console.warn("Offline persistence failed:",i.code)});const ra=i=>i.toLowerCase().replace(/[.#$[\]]/g,"_"),uw="users",Z2=(i,e)=>Z(null,null,function*(){try{const t=ra(i),r=na(Ci,uw,t),o=yield iw(r);if(!o.exists())return{success:!1,error:"No account found with this email. Please create an account first."};const l=o.data();return l.password===e?{success:!0,user:{email:l.email,displayName:l.displayName||i.split("@")[0],createdAt:l.createdAt}}:{success:!1,error:"Incorrect password. Please try again."}}catch(t){return console.error("Sign in error:",t),{success:!1,error:"Sign in failed. Please try again."}}}),eS=(i,e)=>Z(null,null,function*(){try{const t=ra(i),r=na(Ci,uw,t);if((yield iw(r)).exists())return{success:!1,error:"An account with this email already exists. Please sign in instead."};if(e.length<6)return{success:!1,error:"Password must be at least 6 characters long."};const l={email:i.toLowerCase(),password:e,displayName:i.split("@")[0],createdAt:Date.now()};return yield Ip(r,l),{success:!0,isNewUser:!0,user:{email:l.email,displayName:l.displayName,createdAt:l.createdAt}}}catch(t){return console.error("Create account error:",t),{success:!1,error:"Account creation failed. Please try again."}}}),tS=()=>{const i=localStorage.getItem("lft_user");if(i)try{return JSON.parse(i)}catch(e){return null}return null},Tv=i=>{localStorage.setItem("lft_user",JSON.stringify(i))},nS=()=>{localStorage.removeItem("lft_user")},cw=X.createContext(void 0),rS=({children:i})=>{const[e,t]=X.useState(null),[r,o]=X.useState(!0),[l,c]=X.useState(null);X.useEffect(()=>{const x=tS();x&&t(x),o(!1)},[]);const d=(x,E)=>Z(null,null,function*(){o(!0),c(null);const S=yield Z2(x,E);return S.success&&S.user?(t(S.user),Tv(S.user),o(!1),!0):(c(S.error||"Sign in failed"),o(!1),!1)}),p=(x,E)=>Z(null,null,function*(){o(!0),c(null);const S=yield eS(x,E);return S.success&&S.user?(t(S.user),Tv(S.user),o(!1),!0):(c(S.error||"Account creation failed"),o(!1),!1)}),v=()=>{t(null),nS()};return y.jsx(cw.Provider,{value:{user:e,isLoading:r,error:l,signIn:d,createAccount:p,logout:v},children:i})},Ul=()=>{const i=X.useContext(cw);if(!i)throw new Error("useAuth must be used within AuthProvider");return i},sS=()=>{const{signIn:i,createAccount:e,isLoading:t,error:r}=Ul(),[o,l]=X.useState("signin"),[c,d]=X.useState(""),[p,v]=X.useState(""),[x,E]=X.useState(""),[S,V]=X.useState(""),z=U=>Z(null,null,function*(){if(U.preventDefault(),V(""),!c.trim()){V("Please enter your email");return}if(!c.includes("@")){V("Please enter a valid email");return}if(!p.trim()){V("Please enter your password");return}if(o==="create"){if(p.length<6){V("Password must be at least 6 characters");return}if(p!==x){V("Passwords do not match");return}yield e(c.trim(),p)}else yield i(c.trim(),p)}),K=U=>{l(U),V(""),E("")};return y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-md",children:y.jsxs("div",{className:"bg-bg-card border border-border rounded-2xl p-8 shadow-2xl",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Study",y.jsx("span",{className:"bg-gradient-to-r from-accent-green to-accent-blue bg-clip-text text-transparent",children:"Goals"})]}),y.jsx("p",{className:"text-gray-400",children:o==="signin"?"Welcome back!":"Create your account"})]}),y.jsxs("div",{className:"flex mb-6 bg-bg-hover rounded-lg p-1",children:[y.jsx("button",{type:"button",onClick:()=>K("signin"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="signin"?"bg-accent-blue text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Sign In"}),y.jsx("button",{type:"button",onClick:()=>K("create"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="create"?"bg-accent-green text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Create Account"})]}),y.jsxs("form",{onSubmit:z,className:"space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),y.jsx("input",{type:"email",value:c,onChange:U=>d(U.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"your@email.com",autoComplete:"email"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),y.jsx("input",{type:"password",value:p,onChange:U=>v(U.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"",autoComplete:o==="create"?"new-password":"current-password"})]}),o==="create"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),y.jsx("input",{type:"password",value:x,onChange:U=>E(U.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all",placeholder:"",autoComplete:"new-password"})]}),(S||r)&&y.jsx("div",{className:"p-3 bg-accent-red/10 border border-accent-red/50 rounded-lg text-accent-red text-sm",children:S||r}),y.jsx(zt,{type:"submit",className:"w-full",size:"lg",isLoading:t,children:o==="signin"?"Sign In":"Create Account"})]}),y.jsx("p",{className:"text-center text-gray-500 text-sm mt-6",children:o==="signin"?"Don't have an account? Click 'Create Account' above.":'Already have an account? Click "Sign In" above.'})]})})})};var iS=kv();const fi={table1:["Phy","Chem","Bio","GK","English"],table2:["Morning Session","Noon Session","Night Session","Exam"]},oS=[{key:"mqb",name:"MQB"},{key:"ret",name:"Retina QB"},{key:"med",name:"Meditrics"},{key:"camp",name:"Campus Exam"},{key:"week",name:"Weekly Exam"},{key:"rev",name:"Revision Class"},{key:"new",name:"Lecture"},{key:"secret",name:"Secret Files"}],Do={customStudyTypes:[...oS],countdownSettings:{title:"Countdown to Goal",targetDate:"2025-12-31",targetTime:"00:00"},subjects:fi.table1},Wc={table1:{},table2:{},targetCards:[]},Hc={mqb:"border-accent-orange text-accent-orange bg-accent-orange/10",ret:"border-accent-cyan text-accent-cyan bg-accent-cyan/10",med:"border-accent-pink text-accent-pink bg-accent-pink/10",camp:"border-accent-purple text-accent-purple bg-accent-purple/10",week:"border-accent-gold text-accent-gold bg-accent-gold/10",rev:"border-accent-green text-accent-green bg-accent-green/10",new:"border-accent-blue text-accent-blue bg-accent-blue/10",secret:"border-accent-purple text-accent-purple bg-accent-purple/20",custom:"border-border-light text-gray-400 bg-gray-500/10"},hw=i=>`data/${i}/studyProgress/data_v4`,dw=i=>`data/${i}/studyProgress/settings_v1`,aS=(i,e,t)=>{const r=ra(i),o=na(Ci,hw(r));return aw(o,l=>{if(l.exists()){const c=l.data();e({completedTopics:c.completedTopics||{},tableData:c.tableData||ht({},Wc)})}else e({completedTopics:{},tableData:ht({},Wc)})},t)},lS=(i,e,t)=>{const r=ra(i),o=na(Ci,dw(r));return aw(o,l=>{if(l.exists()){const c=l.data();e({customStudyTypes:c.customStudyTypes||Do.customStudyTypes,countdownSettings:c.countdownSettings||Do.countdownSettings,subjects:c.subjects||Do.subjects})}else e(ht({},Do))},t)},uS=(i,e,t)=>Z(null,null,function*(){const r=ra(i),o=na(Ci,hw(r));yield Ip(o,{tableData:e,completedTopics:t},{merge:!1})}),cS=(i,e)=>Z(null,null,function*(){const t=ra(i),r=na(Ci,dw(t));yield Ip(r,e,{merge:!0})}),fw=X.createContext(void 0),hS=({children:i})=>{const[e,t]=X.useState([]),r=X.useCallback((l,c)=>{const d=Date.now().toString();t(v=>[...v,{id:d,type:l,message:c}]),setTimeout(()=>{t(v=>v.filter(x=>x.id!==d))},l==="syncing"?4e3:l==="error"?3500:2500)},[]),o=X.useCallback(l=>{t(c=>c.filter(d=>d.id!==l))},[]);return y.jsx(fw.Provider,{value:{toasts:e,showToast:r,removeToast:o},children:i})},pw=()=>{const i=X.useContext(fw);if(!i)throw new Error("useToastContext must be used within ToastProvider");return i},mw=X.createContext(void 0),gw=({children:i})=>{const{user:e}=Ul(),{showToast:t}=pw(),[r,o]=X.useState(ht({},Wc)),[l,c]=X.useState({}),[d,p]=X.useState(ht({},Do)),[v,x]=X.useState(!0),E=X.useRef(null),S=X.useRef(!1);X.useEffect(()=>{if(!e){o(ht({},Wc)),c({}),p(ht({},Do)),x(!1);return}x(!0);const T=aS(e.email,C=>{S.current||(o(C.tableData),c(C.completedTopics),x(!1))},C=>{console.error("Data subscription error:",C),t("error","Failed to load data"),x(!1)}),b=lS(e.email,C=>p(C),C=>console.error("Settings error:",C));return()=>{T(),b()}},[e,t]);const V=X.useCallback((T,b)=>{e&&(S.current=!0,E.current&&clearTimeout(E.current),E.current=setTimeout(()=>Z(null,null,function*(){try{t("syncing","Syncing..."),yield uS(e.email,T,b),t("success","Synced")}catch(C){t("error","Sync failed")}finally{S.current=!1}}),1e3))},[e,t]),z=X.useCallback((T,b)=>{c(C=>{const k=jn(ht({},C),{[T]:ht(ht({},C[T]),b)});return o(R=>(V(R,k),R)),k})},[V]),K=X.useCallback((T,b,C,k,R)=>{const A=R||`topic_${Date.now().toString(36)}${Math.random().toString(36).substr(2,9)}`,fe=T;return o(de=>{const Ve=JSON.parse(JSON.stringify(de));return Ve[fe][b]||(Ve[fe][b]={}),Ve[fe][b][C]||(Ve[fe][b][C]=[]),Ve[fe][b][C].push(A),Ve}),c(de=>{const Ve=jn(ht({},de),{[A]:k});return setTimeout(()=>{o(Ne=>(V(Ne,Ve),Ne))},0),Ve}),A},[V]),U=X.useCallback(T=>{o(b=>{const C=JSON.parse(JSON.stringify(b));return["table1","table2"].forEach(k=>{Object.keys(C[k]).forEach(R=>{Object.keys(C[k][R]).forEach(A=>{C[k][R][A]=C[k][R][A].filter(fe=>fe!==T)})})}),C}),c(b=>{const R=b,{[T]:C}=R,k=Fd(R,[Dg(T)]);return setTimeout(()=>{o(A=>(V(A,k),A))},0),k})},[V]),ie=X.useCallback(T=>{o(T),c(b=>(V(T,b),b))},[V]),Q=X.useCallback(T=>Z(null,null,function*(){if(e){p(T);try{yield cS(e.email,T),t("success","Settings saved")}catch(b){t("error","Failed to save settings")}}}),[e,t]),H=X.useCallback((T,b)=>{o(C=>{if(C[T][b])return C;const k=jn(ht({},C),{[T]:jn(ht({},C[T]),{[b]:{}})});return V(k,l),k})},[l,V]),te=X.useCallback((T,b,C)=>{const k=`target_${Date.now().toString(36)}${Math.random().toString(36).substr(2,5)}`,R={id:k,title:T,startDate:b,endDate:C,data:{}};return o(A=>{const fe=jn(ht({},A),{targetCards:[...A.targetCards||[],R]});return V(fe,l),fe}),k},[l,V]),me=X.useCallback((T,b)=>{o(C=>{const k=JSON.parse(JSON.stringify(C));return k.targetCards=(k.targetCards||[]).map(R=>R.id===T?ht(ht({},R),b):R),V(k,l),k})},[l,V]),le=X.useCallback(T=>{o(b=>{const C=JSON.parse(JSON.stringify(b));return delete C.table1[T],C.targetCards=(C.targetCards||[]).filter(k=>k.id!==T),V(C,l),C})},[l,V]),N=X.useCallback((T,b)=>{const C=T;o(k=>{const R=JSON.parse(JSON.stringify(k));return delete R[C][b],V(R,l),R})},[l,V]);return y.jsx(mw.Provider,{value:{tableData:r,completedTopics:l,settings:d,isLoading:v,updateTopic:z,addTopic:K,deleteTopic:U,updateTableData:ie,updateSettings:Q,addCard:H,deleteCard:N,addTargetCard:te,updateTargetCard:me,deleteTargetCard:le},children:i})},ki=()=>{const i=X.useContext(mw);if(!i)throw new Error("useData must be used within DataProvider");return i},Iv=({tableId:i,date:e,dateData:t,completedTopics:r,onAddTopic:o,onEditTopic:l,onDeleteCard:c,onDateChange:d})=>{const{tableData:p,updateTableData:v,updateTopic:x,settings:E}=ki(),[S,V]=X.useState(!1),[z,K]=X.useState(null),U=fi[i],{totalTopics:ie,completedCount:Q,percentage:H}=X.useMemo(()=>{let b=0,C=0;return U.forEach(k=>{(t[k]||[]).forEach(A=>{const fe=r[A];fe&&(b++,fe.progress===100&&C++)})}),{totalTopics:b,completedCount:C,percentage:b>0?C/b*100:0}},[U,t,r]),te=X.useMemo(()=>{if(i!=="table2")return[];const b=[],C=new Set;return Object.values(t).forEach(k=>{k.forEach(R=>C.add(R))}),p.targetCards&&p.targetCards.forEach(k=>{const R=(k.data,k.title),fe=k.data&&Object.keys(k.data).length>0?k.data:p.table1[k.id]||{};Object.entries(fe||{}).forEach(([de,Ve])=>{Array.isArray(Ve)&&Ve.forEach(Ne=>{const re=r[Ne];re&&!C.has(Ne)&&b.push({topicId:Ne,topic:re,targetTitle:R,column:de})})})}),b},[i,p,t,r]),me=(b,C)=>{const k=JSON.parse(JSON.stringify(p));k.table2[e]||(k.table2[e]={}),k.table2[e][C]||(k.table2[e][C]=[]),k.table2[e][C].push(b),v(k),V(!1),K(null)},le=()=>H===100?"from-green-500 to-emerald-400":H>=75?"from-blue-500 to-cyan-400":H>=50?"from-yellow-500 to-amber-400":H>=25?"from-orange-500 to-red-400":"from-gray-600 to-gray-500",N=[0,20,40,60,80,100],T=(b,C,k)=>{b.stopPropagation();const A=(N.indexOf(C.progress)+1)%N.length;x(k,{progress:N[A]})};return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden animate-slideUp",children:[y.jsxs("div",{className:"px-5 py-4 border-b border-white/10",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[y.jsx("h3",{contentEditable:!0,suppressContentEditableWarning:!0,className:"text-lg font-bold text-white flex-1 truncate",onBlur:b=>{var k;const C=(k=b.currentTarget.textContent)==null?void 0:k.trim();C&&C!==e&&d(e,C)},children:e}),y.jsx("button",{onClick:()=>c(i,e),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete card",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full bg-gradient-to-r ${le()} rounded-full transition-all duration-500 ease-out`,style:{width:`${H}%`}})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:`text-sm font-bold ${H===100?"text-green-400":"text-white"}`,children:[Math.round(H),"%"]}),y.jsxs("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-0.5 rounded-full",children:[Q,"/",ie]})]})]})})]}),y.jsx("div",{className:"p-3 grid grid-cols-1 gap-3",children:U.map(b=>(t[b]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-3 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:b}),y.jsxs("div",{className:"space-y-2 md:space-y-0 md:grid md:grid-cols-2 md:gap-3",children:[(t[b]||[]).map(C=>{var R,A;const k=r[C];return k?y.jsxs("div",{onClick:fe=>T(fe,k,C),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${k.progress===100?"bg-green-500":"bg-gray-600"} ${k.progress>0&&k.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${k.progress===100?"text-gray-500 line-through":"text-white"}`,children:k.name}),k.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:k.note}),k.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",k.timedNote]}),k.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",k.estimatedTime]}),k.studyStatus&&y.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border mt-1 inline-block ${Hc[k.studyStatus]||Hc.custom}`,children:((A=(R=E.customStudyTypes)==null?void 0:R.find(fe=>fe.key===k.studyStatus))==null?void 0:A.name)||k.studyStatus})]}),y.jsxs("span",{className:`text-xs font-mono font-medium ${k.progress===100?"text-green-500":"text-gray-500"}`,children:[k.progress,"%"]}),y.jsx("button",{onClick:fe=>{fe.stopPropagation(),l(C)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},C):null}),(t[b]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},b))}),y.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[y.jsx("button",{onClick:()=>o(i,e),className:"flex-1 py-2.5 border-2 border-dashed border-white/20 rounded-xl text-gray-400 font-semibold hover:text-accent-blue hover:border-accent-blue hover:bg-accent-blue/5 transition-all",children:"+ Add New Topic"}),i==="table2"&&y.jsx("button",{onClick:()=>V(!0),className:"pull-button px-4 py-2.5 rounded-xl font-semibold bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all",children:" Pull"})]}),S&&iS.createPortal(y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:()=>{V(!1),K(null)},children:y.jsxs("div",{className:"w-full max-w-lg bg-bg-card border border-border rounded-xl shadow-2xl overflow-hidden",onClick:b=>b.stopPropagation(),children:[y.jsx("div",{className:"px-5 py-4 border-b border-border",children:y.jsx("h3",{className:"text-lg font-semibold text-white",children:" Pull from Targets"})}),y.jsxs("div",{className:"p-5 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Add to Session"}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(b=>y.jsx("button",{onClick:()=>K(b),className:`p-2.5 rounded-lg text-sm font-medium transition-all ${z===b?"bg-accent-blue text-white":"bg-bg-hover border border-border text-gray-300 hover:border-accent-blue"}`,children:b},b))})]}),z&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Available Topics (",te.length,")"]}),y.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:[te.map(({topicId:b,topic:C,targetTitle:k,column:R})=>y.jsxs("button",{onClick:()=>me(b,z),className:"w-full p-3 text-left bg-bg-hover border border-border rounded-lg hover:border-accent-purple transition-all group",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${C.progress===100?"bg-green-500":"bg-gray-500"}`}),y.jsx("span",{className:"text-white font-medium text-sm",children:C.name})]}),y.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-gray-400 group-hover:bg-accent-purple/20 group-hover:text-accent-purple",children:"+ Add"})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R,"  ",k]})]},b)),te.length===0&&y.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"All topics already added"})]})]})]}),y.jsx("div",{className:"px-5 py-4 border-t border-border bg-black/30 flex justify-end",children:y.jsx("button",{onClick:()=>{V(!1),K(null)},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Close"})})]})}),document.body)]})},Sv=({cardMeta:i,dateData:e,completedTopics:t,onAddTopic:r,onEditTopic:o,onEditCard:l,onDeleteCard:c})=>{const{updateTopic:d,settings:p}=ki(),v=p.subjects&&p.subjects.length>0?p.subjects:fi.table1,{totalTopics:x,completedCount:E,percentage:S}=X.useMemo(()=>{let ie=0,Q=0;return v.forEach(H=>{(e[H]||[]).forEach(me=>{const le=t[me];le&&(ie++,le.progress===100&&Q++)})}),{totalTopics:ie,completedCount:Q,percentage:ie>0?Q/ie*100:0}},[v,e,t]),V=X.useMemo(()=>{const ie=new Date;ie.setHours(0,0,0,0);const Q=new Date(i.startDate),H=new Date(i.endDate),te=Math.ceil((H.getTime()-Q.getTime())/(1e3*60*60*24)),me=Math.ceil((H.getTime()-ie.getTime())/(1e3*60*60*24)),le=te-me,N=te>0?Math.min(100,Math.max(0,le/te*100)):0;return{totalDays:te,daysRemaining:Math.max(0,me),timeProgress:N}},[i.startDate,i.endDate]),z=[0,20,40,60,80,100],K=(ie,Q,H)=>{ie.stopPropagation();const me=(z.indexOf(Q.progress)+1)%z.length;d(H,{progress:z[me]})},U=ie=>new Date(ie).toLocaleDateString("en-US",{month:"short",day:"numeric"});return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden",children:[y.jsxs("div",{className:"px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3",children:[y.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:flex-1 gap-2",children:[y.jsxs("h3",{className:"text-base font-bold text-white flex-1 truncate flex items-center gap-2",children:[y.jsx("span",{className:"text-accent-purple",children:""}),i.title]}),y.jsx("button",{onClick:()=>l(i),className:"p-1.5 text-gray-400 hover:text-accent-purple hover:bg-accent-purple/10 rounded-lg transition-all",title:"Edit target",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),y.jsx("button",{onClick:()=>c(i.id),className:"sm:hidden p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3 w-full sm:w-auto text-xs",children:[y.jsxs("span",{className:"text-xs font-semibold px-3 py-1.5 rounded-lg bg-accent-purple/10 text-accent-purple border border-accent-purple/20 shadow-[0_0_10px_-3px_rgba(168,85,247,0.3)] flex items-center gap-1.5",children:[y.jsx("span",{className:"text-white/70",children:U(i.startDate)}),y.jsx("span",{className:"text-accent-purple",children:""}),y.jsx("span",{className:"text-white",children:U(i.endDate)})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"font-bold px-2 py-1 rounded-lg bg-gray-500/20 text-gray-300",title:"Total days",children:[V.totalDays,"d"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${V.daysRemaining<=3?"bg-red-500/20 text-red-400":V.daysRemaining<=7?"bg-yellow-500/20 text-yellow-400":"bg-accent-blue/20 text-accent-blue"}`,title:"Days remaining",children:[V.daysRemaining,"d left"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${S===100?"bg-green-500/20 text-green-400":"bg-white/10 text-gray-300"}`,children:[E,"/",x]}),y.jsx("button",{onClick:()=>c(i.id),className:"hidden sm:block p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),y.jsx("div",{className:"px-4 pb-3",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all ${S===100?"bg-green-500":"bg-gradient-to-r from-accent-blue to-accent-purple"}`,style:{width:`${S}%`}})}),y.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(S),"%"]})]})}),y.jsx("div",{className:"px-3 pb-2 grid grid-cols-1 gap-3",children:v.map(ie=>(e[ie]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-2 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:ie}),y.jsxs("div",{className:"space-y-2 md:space-y-0 md:grid md:grid-cols-2 md:gap-3",children:[(e[ie]||[]).map(H=>{var me,le;const te=t[H];return te?y.jsxs("div",{onClick:N=>K(N,te,H),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${te.progress===100?"bg-green-500":"bg-gray-600"} ${te.progress>0&&te.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${te.progress===100?"text-gray-500 line-through":"text-white"}`,children:te.name}),te.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:te.note}),te.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",te.timedNote]}),te.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",te.estimatedTime]}),te.studyStatus&&y.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border mt-1 inline-block ${Hc[te.studyStatus]||Hc.custom}`,children:((le=(me=p.customStudyTypes)==null?void 0:me.find(N=>N.key===te.studyStatus))==null?void 0:le.name)||te.studyStatus})]}),y.jsxs("span",{className:`text-xs font-mono ${te.progress===100?"text-green-500":"text-gray-500"}`,children:[te.progress,"%"]}),y.jsx("button",{onClick:N=>{N.stopPropagation(),o(H)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},H):null}),(e[ie]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},ie))}),y.jsx("div",{className:"px-3 pb-3",children:y.jsx("button",{onClick:()=>r("table1",i.id),className:"w-full py-2 text-sm border border-dashed border-white/20 rounded-lg text-gray-400 font-medium hover:text-accent-green hover:border-accent-green hover:bg-accent-green/5 transition-all",children:"+ Add Topic"})})]})},dS=({activeTab:i,onTabChange:e})=>{const t=[{id:"dashboard",label:"Home",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"targets",label:"Targets",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"daily",label:"Daily",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"settings",label:"Settings",icon:y.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return y.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-bg-card border-t border-white/10 flex items-center justify-around shadow-[0_-5px_20px_-5px_rgba(0,0,0,0.3)] z-50 pt-2 pb-[env(safe-area-inset-bottom)] animate-slideUp",children:t.map(r=>y.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center gap-1 w-full h-auto p-1.5 rounded-xl transition-all duration-300 ${i===r.id?"text-accent-blue":"text-gray-500 hover:text-gray-300"}`,children:[y.jsx("div",{className:`p-1 rounded-xl transition-all ${i===r.id?"bg-accent-blue/10 scale-110":""}`,children:r.icon}),y.jsx("span",{className:"text-[10px] font-medium",children:r.label})]},r.id))})},yw=({onLogout:i})=>{var k,R;const{user:e,logout:t}=Ul(),{settings:r,updateSettings:o}=ki(),[l,c]=X.useState("account"),[d,p]=X.useState([]),[v,x]=X.useState([]),[E,S]=X.useState(""),[V,z]=X.useState(""),[K,U]=X.useState("");X.useEffect(()=>{p(r.customStudyTypes||[]),x(r.subjects||[]),S(r.countdownSettings.title),z(r.countdownSettings.targetDate),U(r.countdownSettings.targetTime)},[r]);const ie=()=>{const A=d.filter(fe=>fe.name.trim());o(jn(ht({},r),{customStudyTypes:A}))},Q=()=>{const A=v.filter(fe=>fe.trim());o(jn(ht({},r),{subjects:A}))},H=()=>{x([...v,""])},te=A=>{x(v.filter((fe,de)=>de!==A))},me=(A,fe)=>{const de=[...v];de[A]=fe,x(de)},le=()=>{o(jn(ht({},r),{countdownSettings:{title:E,targetDate:V,targetTime:K}}))},N=()=>{p([...d,{key:`custom_${Date.now()}`,name:""}])},T=A=>{p(d.filter(fe=>fe.key!==A))},b=()=>{i&&i(),t()},C=[{id:"account",label:"Account",icon:""},{id:"custom",label:"Custom",icon:""},{id:"countdown",label:"Ref",icon:""},{id:"dev",label:"Dev",icon:""}];return y.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden rounded-2xl bg-bg-card border border-white/10",children:[y.jsxs("div",{className:"w-full md:w-60 bg-black/20 border-b md:border-b-0 md:border-r border-white/5 p-4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible shrink-0 no-scrollbar",children:[y.jsx("h3",{className:"hidden md:block text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 px-2",children:"Settings"}),C.map(A=>y.jsxs("button",{onClick:()=>c(A.id),className:`flex items-center gap-2 md:gap-3 px-3 py-2 md:px-3 md:py-2.5 rounded-xl text-sm font-semibold transition-all whitespace-nowrap ${l===A.id?"bg-accent-blue/10 text-accent-blue border border-accent-blue/20":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx("span",{className:"text-lg",children:A.icon}),y.jsx("span",{className:"hidden md:inline",children:A.label==="Ref"?"Countdown":A.label}),y.jsx("span",{className:"md:hidden",children:A.label})]},A.id)),y.jsx("div",{className:"hidden md:block mt-auto pt-4 border-t border-white/5",children:y.jsx("div",{className:"px-2 mb-2 text-[10px] text-gray-600",children:"StudyGoals V1.0"})})]}),y.jsxs("div",{className:"flex-1 p-4 md:p-6 bg-gradient-to-br from-bg-card to-bg-card/50 overflow-y-auto custom-scrollbar",children:[l==="account"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"My Account"}),y.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10",children:[y.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-accent-purple/20",children:((R=(k=e==null?void 0:e.displayName)==null?void 0:k[0])==null?void 0:R.toUpperCase())||"U"}),y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-bold text-white",children:e==null?void 0:e.displayName}),y.jsx("div",{className:"text-xs text-gray-400",children:e==null?void 0:e.email}),y.jsxs("div",{className:"text-[10px] text-green-400 mt-1 flex items-center gap-1",children:[y.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"})," Active Session"]})]})]}),y.jsx(zt,{variant:"danger",onClick:b,className:"w-full py-2.5 rounded-xl text-sm font-semibold border border-red-500/20 hover:bg-red-500/10",children:"Sign Out"})]}),l==="custom"&&y.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Target Subjects"}),y.jsx(zt,{variant:"success",onClick:Q,className:"px-4 py-1.5 text-sm",children:"Save Subjects"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Manage the subjects for your Target cards."}),y.jsxs("div",{className:"space-y-2.5",children:[v.map((A,fe)=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsx("div",{className:"flex-1 relative",children:y.jsx("input",{type:"text",value:A,onChange:de=>me(fe,de.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all",placeholder:"Subject Name (e.g. Physics)"})}),y.jsx("button",{onClick:()=>te(fe),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},fe)),v.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No subjects defined"})]}),y.jsx(zt,{variant:"secondary",onClick:H,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-purple/50 hover:text-accent-purple",children:"+ Add New Subject"}),y.jsx("div",{className:"h-px bg-white/5 my-6"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Study Types"}),y.jsx(zt,{variant:"success",onClick:ie,className:"px-4 py-1.5 text-sm",children:"Save Changes"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Define your custom study categories (e.g., Theory, Practical)."}),y.jsxs("div",{className:"space-y-2.5",children:[d.map(A=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx("input",{type:"text",value:A.name,onChange:fe=>p(d.map(de=>de.key===A.key?jn(ht({},de),{name:fe.target.value}):de)),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-blue focus:ring-1 focus:ring-accent-blue transition-all",placeholder:"Type Name (e.g. Lab Work)"}),y.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-accent-blue/50"})]}),y.jsx("button",{onClick:()=>T(A.key),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},A.key)),d.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No custom types yet"})]}),y.jsx(zt,{variant:"secondary",onClick:N,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-blue/50 hover:text-accent-blue",children:"+ Add New Study Type"})]})]}),l==="countdown"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Countdown"}),y.jsx(zt,{variant:"success",onClick:le,className:"px-4 py-1.5 text-sm",children:"Update"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Event Title"}),y.jsx("input",{value:E,onChange:A=>S(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Target Date"}),y.jsx("input",{type:"date",value:V,onChange:A=>z(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Time (Optional)"}),y.jsx("input",{type:"time",value:K,onChange:A=>U(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]})]})]})]}),l==="dev"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Developer"}),y.jsxs("div",{className:"p-6 bg-gradient-to-br from-accent-purple/20 to-accent-blue/10 border border-accent-purple/20 rounded-2xl flex flex-col items-center text-center space-y-4",children:[y.jsx("div",{className:"w-20 h-20 bg-black/40 rounded-full flex items-center justify-center text-3xl border-2 border-accent-purple shadow-[0_0_20px_rgba(168,85,247,0.4)]",children:""}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:"Adnan Shahria"}),y.jsx("p",{className:"text-sm text-accent-cyan",children:"Full Stack Developer"})]}),y.jsxs("div",{className:"flex items-center justify-center gap-4 w-full pt-2",children:[y.jsx("a",{href:"https://t.me/adnanshahria",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-[#229ED9]/20 text-[#229ED9] hover:bg-[#229ED9] hover:text-white transition-all border border-[#229ED9]/30",title:"Telegram",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}),y.jsx("a",{href:"mailto:adnanshahria2019@gmail.com",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-red-500/20 text-red-500 hover:bg-red-500 hover:text-white transition-all border border-red-500/30",title:"Email",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),y.jsx("div",{className:"pt-4 text-[10px] text-gray-500 font-mono",children:"v1.0.1  StudyGoals Inc"})]})]})]})]})},fS={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},sa=({isOpen:i,onClose:e,title:t,children:r,footer:o,size:l="md"})=>{const c=X.useRef(null);return X.useEffect(()=>{const d=p=>{p.key==="Escape"&&e()};return i&&document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i,e]),i?y.jsx("div",{ref:c,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:d=>d.target===c.current&&e(),children:y.jsxs("div",{className:`
        w-full ${fS[l]} bg-bg-card border border-border rounded-xl
        shadow-2xl transform transition-all duration-300 scale-100
        max-h-[90vh] flex flex-col
      `,children:[t&&y.jsx("div",{className:"px-6 py-4 border-b border-border",children:y.jsx("h3",{className:"text-xl font-semibold text-white",children:t})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:r}),o&&y.jsx("div",{className:"px-6 py-4 border-t border-border bg-black/30",children:o})]})}):null},Vo=({options:i,value:e,onChange:t,placeholder:r="Select...",className:o=""})=>{const[l,c]=X.useState(!1),d=X.useRef(null),p=i.find(v=>v.value===e);return X.useEffect(()=>{const v=x=>{d.current&&!d.current.contains(x.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),y.jsxs("div",{ref:d,className:`relative ${o}`,children:[y.jsxs("button",{type:"button",onClick:()=>c(!l),className:`
          w-full flex items-center justify-between px-3 py-2
          bg-bg-hover border border-border rounded-lg
          text-white transition-all duration-200
          ${l?"border-accent-blue ring-2 ring-accent-blue/20":"hover:border-border-light"}
        `,children:[y.jsx("span",{className:p?"text-white":"text-gray-500",children:(p==null?void 0:p.label)||r}),y.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&y.jsx("div",{className:"absolute z-50 w-full mt-1 py-1 bg-bg-card border border-border-light rounded-lg shadow-xl max-h-48 overflow-y-auto",children:i.map(v=>y.jsx("button",{type:"button",onClick:()=>{t(v.value),c(!1)},className:`
                w-full px-3 py-2 text-left transition-colors
                ${v.value===e?"bg-accent-blue text-white font-semibold":"text-white hover:bg-bg-hover"}
              `,children:v.label},v.value))})]})},pS=({isOpen:i,onClose:e,tableId:t,date:r})=>{var A,fe;const{settings:o,addTopic:l,tableData:c}=ki(),d=t==="table1"?o.subjects&&o.subjects.length>0?o.subjects:fi.table1:fi[t]||fi.table2,[p,v]=X.useState(""),[x,E]=X.useState(""),[S,V]=X.useState(""),[z,K]=X.useState(d[0]||""),[U,ie]=X.useState("medium"),[Q,H]=X.useState(((fe=(A=o.customStudyTypes)==null?void 0:A[0])==null?void 0:fe.key)||"new"),[te,me]=X.useState("low");X.useEffect(()=>{i&&d.length>0&&(d.includes(z)||K(d[0]))},[i,d,z]);const le=t==="table2"?(c.targetCards||[]).find(de=>{const Ve=new Date(de.startDate),Ne=new Date(de.endDate);let re=new Date(r);if(isNaN(re.getTime())&&r.includes("/")){const[xe,ae,O]=r.split("/").map(Number);re=new Date(O,ae-1,xe)}return re>=Ve&&re<=Ne}):void 0,[N,T]=X.useState(""),b=()=>{if(!p.trim())return;const de={name:p.trim(),note:"",timedNote:x.trim(),estimatedTime:S.trim(),progress:0,priority:te,hardness:U,studyStatus:Q},Ve=l(t,r,z,de);le&&N&&l("table1",le.id,N,de,Ve),v(""),E(""),V(""),me("low"),T(""),e()},C=d.map(de=>({value:de,label:de})),k=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],R=(o.customStudyTypes||[]).map(de=>({value:de.key,label:de.name}));return y.jsx(sa,{isOpen:i,onClose:e,title:"Add New Topic",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{onClick:b,disabled:!p.trim(),children:"Save Topic"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:p,onChange:de=>v(de.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"Enter topic name",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:x,onChange:de=>E(de.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 30 min or 10:00 AM"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time (Optional)"}),y.jsx("input",{type:"text",value:S,onChange:de=>V(de.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:t==="table1"?"Subject":"Session"}),y.jsx(Vo,{options:C,value:z,onChange:K})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Vo,{options:k,value:U,onChange:ie})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Vo,{options:R,value:Q,onChange:H})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(de=>y.jsxs("button",{type:"button",onClick:()=>me(de),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${te===de?de==="high"?"border-accent-red bg-accent-red/20 text-white":de==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${de==="high"?"bg-accent-red":de==="medium"?"bg-accent-gold":"bg-gray-500"}`}),de.charAt(0).toUpperCase()+de.slice(1)]},de))})]}),le&&y.jsxs("div",{className:"pt-4 border-t border-white/10",children:[y.jsxs("label",{className:"block text-sm font-medium text-accent-purple mb-1 flex items-center gap-2",children:[y.jsx("span",{className:"animate-pulse",children:""})," Link to Target: ",le.title]}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select a subject to automatically add this task to your long-term plan."}),y.jsx(Vo,{options:[{value:"",label:"Do not link"},...(o.subjects&&o.subjects.length>0?o.subjects:fi.table1).map(de=>({value:de,label:de}))],value:N,onChange:T})]})]})})},mS=({isOpen:i,onClose:e,topicId:t,onDelete:r})=>{const{completedTopics:o,settings:l,updateTopic:c}=ki(),[d,p]=X.useState(""),[v,x]=X.useState(""),[E,S]=X.useState(""),[V,z]=X.useState(""),[K,U]=X.useState("medium"),[ie,Q]=X.useState(""),[H,te]=X.useState("low");X.useEffect(()=>{if(t&&o[t]){const T=o[t];p(T.name),x(T.timedNote||""),S(T.estimatedTime||""),z(T.note||""),U(T.hardness),Q(T.studyStatus),te(T.priority)}},[t,o]);const me=()=>{!t||!d.trim()||(c(t,{name:d.trim(),timedNote:v.trim(),estimatedTime:E.trim(),note:V.trim(),hardness:K,studyStatus:ie,priority:H}),e())},le=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],N=l.customStudyTypes.map(T=>({value:T.key,label:T.name}));return y.jsx(sa,{isOpen:i,onClose:e,title:"Edit Topic",footer:y.jsxs("div",{className:"flex justify-between",children:[y.jsx(zt,{variant:"danger",onClick:()=>t&&r(t),children:"Delete"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:"success",onClick:me,children:"Save"})]})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:d,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:v,onChange:T=>x(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time"}),y.jsx("input",{type:"text",value:E,onChange:T=>S(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),y.jsx("textarea",{value:V,onChange:T=>z(T.target.value),rows:3,className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue resize-none",placeholder:"Add your notes here..."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Vo,{options:le,value:K,onChange:U})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Vo,{options:N,value:ie,onChange:Q})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(T=>y.jsxs("button",{type:"button",onClick:()=>te(T),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${H===T?T==="high"?"border-accent-red bg-accent-red/20 text-white":T==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${T==="high"?"bg-accent-red":T==="medium"?"bg-accent-gold":"bg-gray-500"}`}),T.charAt(0).toUpperCase()+T.slice(1)]},T))})]})]})})},gS=({isOpen:i,onClose:e})=>y.jsx(sa,{isOpen:i,onClose:e,size:"xl",children:y.jsx("div",{className:"h-[550px] md:h-[480px]",children:y.jsx(yw,{onLogout:e})})}),yS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vS=["Su","Mo","Tu","We","Th","Fr","Sa"],_S=({isOpen:i,onClose:e,onSelectDate:t,existingDates:r})=>{const o=new Date,[l,c]=X.useState(o.getMonth()),[d,p]=X.useState(o.getFullYear()),v=new Date(d,l,1).getDay(),x=new Date(d,l+1,0).getDate(),E=Array.from({length:x},(Q,H)=>H+1),S=Q=>{const H=String(Q).padStart(2,"0"),te=String(l+1).padStart(2,"0");return`${H}/${te}/${d}`},V=Q=>new Date(d,l,Q)<new Date(o.getFullYear(),o.getMonth(),o.getDate()),z=Q=>d===o.getFullYear()&&l===o.getMonth()&&Q===o.getDate(),K=Q=>r.includes(S(Q)),U=()=>{l===0?(c(11),p(d-1)):c(l-1)},ie=()=>{l===11?(c(0),p(d+1)):c(l+1)};return y.jsxs(sa,{isOpen:i,onClose:e,size:"sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("button",{onClick:U,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),y.jsxs("span",{className:"text-lg font-semibold text-white",children:[yS[l]," ",d]}),y.jsx("button",{onClick:ie,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),y.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:vS.map(Q=>y.jsx("div",{className:"text-center text-xs font-semibold text-gray-500",children:Q},Q))}),y.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:v}).map((Q,H)=>y.jsx("div",{},`empty-${H}`)),E.map(Q=>y.jsxs("button",{disabled:V(Q),onClick:H=>{H.preventDefault(),H.stopPropagation(),t(S(Q)),setTimeout(e,0)},className:`
              p-2 text-center rounded-lg transition-all relative
              ${V(Q)?"text-gray-600 cursor-not-allowed":"hover:bg-bg-hover cursor-pointer"}
              ${z(Q)?"border border-accent-gold text-accent-gold font-bold":"text-white"}
              ${K(Q)?"border border-accent-blue shadow-glow-blue":""}
            `,children:[Q,K(Q)&&y.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-accent-blue rounded-full"})]},Q))]}),y.jsx(zt,{variant:"secondary",onClick:e,className:"w-full mt-4",children:"Cancel"})]})},wS=({isOpen:i,onClose:e,onConfirm:t,message:r,confirmText:o="Yes, Delete",confirmVariant:l="danger"})=>y.jsxs(sa,{isOpen:i,onClose:e,title:"Are you sure?",size:"sm",children:[y.jsx("p",{className:"text-gray-300 mb-4",children:r}),y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:l,onClick:()=>{t(),e()},children:o})]})]}),xS=({isOpen:i,onClose:e,cardMeta:t})=>{const{updateTargetCard:r}=ki(),[o,l]=X.useState(""),[c,d]=X.useState(""),[p,v]=X.useState("");X.useEffect(()=>{t&&(l(t.title),d(t.startDate),v(t.endDate))},[t]);const x=()=>{!t||!o.trim()||!c||!p||(r(t.id,{title:o.trim(),startDate:c,endDate:p}),e())};return y.jsx(sa,{isOpen:i,onClose:e,title:"Edit Target",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:"success",onClick:x,disabled:!o.trim()||!c||!p,children:"Save Changes"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-purple"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:c,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-green"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:p,onChange:E=>v(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-red"})]})]}),c&&p&&y.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:y.jsxs("div",{className:"flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Duration"}),y.jsxs("span",{className:"text-accent-blue font-mono",children:[Math.ceil((new Date(p).getTime()-new Date(c).getTime())/(1e3*60*60*24))," days"]})]})})]})})},ES=i=>{const[e,t]=X.useState({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!1}),r=X.useCallback(()=>{if(!i)return;const o=`${i.targetDate}T${i.targetTime||"00:00"}`,l=new Date(o).getTime(),c=Date.now(),d=l-c;if(d<0){t({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!0});return}const p=Math.floor(d/(1e3*60*60*24)),v=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(d%(1e3*60*60)/(1e3*60)),E=Math.floor(d%(1e3*60)/1e3);t({days:String(p).padStart(2,"0"),hours:String(v).padStart(2,"0"),minutes:String(x).padStart(2,"0"),seconds:String(E).padStart(2,"0"),isExpired:!1})},[i]);return X.useEffect(()=>{r();const o=setInterval(r,1e3);return()=>clearInterval(o)},[r]),e},TS=()=>{var mt;const{user:i,logout:e}=Ul(),{tableData:t,completedTopics:r,addCard:o,deleteCard:l,deleteTopic:c,updateTableData:d,addTargetCard:p,deleteTargetCard:v,settings:x}=ki(),{days:E}=ES(x.countdownSettings),[S,V]=X.useState(()=>{try{return localStorage.getItem("view")||"table1"}catch(Te){return"table1"}}),[z,K]=X.useState(()=>{try{return localStorage.getItem("activeMobileTab")||"dashboard"}catch(Te){return"dashboard"}});X.useEffect(()=>{try{localStorage.setItem("view",S)}catch(Te){}},[S]),X.useEffect(()=>{try{localStorage.setItem("activeMobileTab",z)}catch(Te){}},[z]);const[U,ie]=X.useState(!1),[Q,H]=X.useState(!1),[te,me]=X.useState(!1),[le,N]=X.useState(null),[T,b]=X.useState(null),[C,k]=X.useState(null),[R,A]=X.useState(null),[fe,de]=X.useState(""),[Ve,Ne]=X.useState(""),[re,xe]=X.useState(""),{totalMarksAchieved:ae,totalMarksPossible:O}=X.useMemo(()=>{let Te=0,We=0;const He=new Set;return(t.targetCards||[]).forEach(Xt=>{const Ut=t.table1[Xt.id]||{};Object.values(Ut||{}).forEach(In=>{Array.isArray(In)&&In.forEach(xr=>He.add(xr))})}),Object.values(t.table2).forEach(Xt=>{Object.values(Xt).forEach(Ut=>{Array.isArray(Ut)&&Ut.forEach(In=>He.add(In))})}),He.forEach(Xt=>{const Ut=r[Xt];Ut&&(We+=1,Ut.progress===100&&(Te+=1))}),{totalMarksAchieved:Te,totalMarksPossible:We}},[t,r]),W=X.useMemo(()=>Object.keys(t.table2).sort((Te,We)=>{const[He,Xt,Ut]=Te.split("/").map(Number),[In,xr,Pi]=We.split("/").map(Number);return new Date(Ut,Xt-1,He).getTime()-new Date(Pi,xr-1,In).getTime()}),[t.table2]),we=X.useMemo(()=>W,[W]),Pe=X.useMemo(()=>(t.targetCards||[]).filter(Te=>Te&&typeof Te.id=="string"&&typeof Te.title=="string").sort((Te,We)=>new Date(Te.endDate).getTime()-new Date(We.endDate).getTime()),[t.targetCards]),Re=X.useMemo(()=>Object.keys(t.table1).concat(Object.keys(t.table2)),[t]),Oe=Te=>{o("table2",Te)},Fe=(Te,We)=>{const He=JSON.parse(JSON.stringify(t));He[S][We]=He[S][Te],delete He[S][Te],d(He)},$e=Te=>{c(Te),b(null)},Ye=()=>{!fe.trim()||!Ve||!re||(p(fe.trim(),Ve,re),de(""),Ne(""),xe(""),me(!1))};return y.jsxs("div",{className:"min-h-screen bg-bg-dark text-white font-sans selection:bg-accent-purple/30 pb-24 md:pb-0",children:[y.jsx("div",{className:`md:hidden p-4 flex justify-between items-center sticky top-0 z-40 bg-bg-dark/80 backdrop-blur-md border-b border-white/5 ${z!=="dashboard"?"hidden":""}`,children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-xl flex items-center justify-center shadow-lg shadow-accent-purple/20",children:y.jsx("span",{className:"text-xl",children:""})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"StudyGoals"}),y.jsxs("p",{className:"text-xs text-gray-400",children:["Welcome back, ",(mt=i==null?void 0:i.displayName)==null?void 0:mt.split(" ")[0]]})]})]})}),y.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8 md:h-screen md:overflow-hidden flex flex-col",children:[y.jsxs("div",{className:"hidden md:flex flex-col h-full gap-6",children:[y.jsxs("div",{className:"flex items-center justify-between bg-bg-card border border-border rounded-2xl p-6 shadow-2xl relative overflow-hidden group",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-purple/5 to-accent-blue/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsxs("div",{className:"flex items-center gap-6 relative z-10 w-full",children:[y.jsxs("div",{className:"flex items-center gap-8 bg-bg-card/80 border border-accent-purple/30 shadow-[0_0_15px_-5px_rgba(168,85,247,0.25)] rounded-2xl p-3 pr-6 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-14 h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-2xl flex items-center justify-center text-3xl shadow-lg shadow-accent-purple/20 animate-float",children:""}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"StudyGoals"}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),y.jsx("span",{children:"Ready to focus"})]})]})]}),y.jsx("div",{className:"h-10 w-px bg-white/10"}),y.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 border border-accent-purple/30 shadow-[0_0_10px_-3px_rgba(168,85,247,0.2)]",children:[y.jsx("button",{onClick:()=>V("table1"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table1"?"bg-accent-purple text-white shadow-lg shadow-accent-purple/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Target Plan"}),y.jsx("button",{onClick:()=>V("table2"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table2"?"bg-accent-cyan text-black shadow-lg shadow-accent-cyan/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Daily Plan"})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-green/30 shadow-[0_0_15px_-3px_rgba(16,185,129,0.2)] rounded-2xl p-3 hover:border-accent-green/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-green/10 rounded-xl text-accent-green",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})})}),y.jsxs("div",{className:"flex flex-col justify-center h-full",children:[y.jsx("span",{className:"text-xs text-gray-400",children:"Tasks Done"}),y.jsxs("span",{className:"font-mono font-bold text-accent-green text-lg leading-none",children:[ae,"/",O]})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-blue/30 shadow-[0_0_20px_-5px_rgba(59,130,246,0.25)] rounded-2xl p-3 hover:border-accent-blue/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-blue/10 rounded-xl text-accent-blue",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-baseline gap-1",children:[y.jsx("span",{className:"text-2xl font-bold text-white tabular-nums",children:E}),y.jsx("span",{className:"text-sm text-gray-500",children:"days left"})]})]})]}),y.jsx("button",{onClick:()=>ie(!0),className:"p-4 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 transition-all hover:scale-105 active:scale-95 group/settings",children:y.jsxs("svg",{className:"w-6 h-6 text-gray-400 group-hover/settings:text-white group-hover/settings:rotate-90 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),y.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6 min-h-0",children:[y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table1"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-purple/20 rounded-lg text-accent-purple",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Long Term Targets"})]}),y.jsx("button",{onClick:()=>me(!0),className:"px-4 py-2 bg-accent-purple hover:bg-accent-purple/80 text-white rounded-xl text-sm font-semibold shadow-lg shadow-accent-purple/25 transition-all hover:-translate-y-0.5",children:"+ Create Target"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:Pe.length>0?Pe.map(Te=>y.jsx(Sv,{cardMeta:Te,dateData:t.table1[Te.id]||{},completedTopics:r,onAddTopic:(We,He)=>N({tableId:We,cardId:He}),onEditTopic:b,onEditCard:k,onDeleteCard:We=>A({tableId:"table1",cardId:"new",targetCardId:We})},Te.id)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[y.jsx("span",{className:"text-4xl mb-4 opacity-50",children:""}),y.jsx("p",{children:"No targets set yet"})]})})]}),y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table2"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-cyan/20 rounded-lg text-accent-cyan",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Daily Plan"})]}),y.jsx("button",{onClick:()=>H(!0),className:"px-4 py-2 bg-accent-cyan hover:bg-accent-cyan/80 text-black rounded-xl text-sm font-semibold shadow-lg shadow-accent-cyan/25 transition-all hover:-translate-y-0.5",children:"+ New Day"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:W.length>0?W.map(Te=>y.jsx(Iv,{tableId:"table2",date:Te,dateData:t.table2[Te],completedTopics:r,onAddTopic:(We,He)=>N({tableId:We,cardId:He}),onEditTopic:b,onDeleteCard:(We,He)=>A({tableId:We,cardId:He}),onDateChange:Fe},Te)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-4",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center",children:""}),y.jsx("p",{children:"No daily plans yet"}),y.jsx("button",{onClick:()=>H(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400 hover:text-accent-cyan hover:border-accent-cyan hover:bg-accent-cyan/5 transition-all",children:"+ Start Today"})]})})]})]})]}),y.jsxs("div",{className:"md:hidden space-y-4",children:[z==="dashboard"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsxs("div",{className:"bg-gradient-to-br from-gray-900/50 to-slate-900/50 border border-gray-800 rounded-2xl p-5 shadow-xl relative overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400 font-medium mb-1",children:"Total Progress"}),y.jsxs("h3",{className:"text-3xl font-bold text-white tracking-tight",children:[ae,y.jsxs("span",{className:"text-lg text-gray-500 font-normal",children:["/",O]})]})]}),y.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl text-emerald-400 border border-emerald-500/20",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),y.jsxs("div",{className:"relative pt-2",children:[y.jsx("div",{className:"h-3 bg-gray-700/30 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.3)] transition-all duration-1000 ease-out",style:{width:`${ae/O*100}%`}})}),y.jsxs("p",{className:"text-right text-xs text-emerald-400 mt-2 font-mono",children:[Math.round(ae/O*100),"% Complete"]})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-slate-900/50 to-purple-900/30 border border-blue-500/20 rounded-2xl p-5 shadow-lg relative",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-blue-400",children:y.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),y.jsx("p",{className:"text-sm text-blue-300 font-medium mb-1 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[y.jsx("span",{className:"text-5xl font-bold text-white tracking-tighter tabular-nums drop-shadow-glow",children:E}),y.jsx("span",{className:"text-lg text-blue-200/80 mb-2 font-medium",children:"days remaining"})]}),y.jsx("div",{className:"mt-4 flex gap-2",children:y.jsxs("div",{className:"flex-1 bg-black/20 rounded-lg p-2 text-center border border-white/5",children:[y.jsx("div",{className:"text-xs text-gray-400",children:"Target"}),y.jsx("div",{className:"text-sm font-mono text-blue-300",children:x.countdownSettings.targetDate})]})})]})]}),z==="targets"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Targets"}),y.jsx("button",{onClick:()=>me(!0),className:"p-2 bg-accent-purple/20 text-accent-purple rounded-lg border border-accent-purple/30",children:"+ New"})]}),Pe.length>0?Pe.map(Te=>y.jsx(Sv,{cardMeta:Te,dateData:t.table1[Te.id]||{},completedTopics:r,onAddTopic:(We,He)=>N({tableId:We,cardId:He}),onEditTopic:b,onEditCard:k,onDeleteCard:We=>A({tableId:"table1",cardId:"new",targetCardId:We})},Te.id)):y.jsx("div",{className:"text-center py-10 text-gray-500",children:"No targets yet"})]}),z==="daily"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Daily Plan"}),y.jsx("button",{onClick:()=>H(!0),className:"p-2 bg-accent-cyan/20 text-accent-cyan rounded-lg border border-accent-cyan/30",children:"+ Day"})]}),we.length>0?we.map(Te=>y.jsx(Iv,{tableId:"table2",date:Te,dateData:t.table2[Te],completedTopics:r,onAddTopic:(We,He)=>N({tableId:We,cardId:He}),onEditTopic:b,onDeleteCard:(We,He)=>A({tableId:We,cardId:He}),onDateChange:Fe},Te)):y.jsxs("div",{className:"text-center py-10",children:[y.jsx("p",{className:"text-gray-500 mb-4",children:"No days added"}),y.jsx("button",{onClick:()=>H(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400",children:"+ Start Today"})]})]}),z==="settings"&&y.jsx("div",{className:"animate-fadeIn pb-20",children:y.jsx(yw,{onLogout:e})})]})]}),y.jsx(dS,{activeTab:z,onTabChange:K}),y.jsx(gS,{isOpen:U,onClose:()=>ie(!1)}),y.jsx(_S,{isOpen:Q,onClose:()=>H(!1),onSelectDate:Oe,existingDates:Re}),le&&y.jsx(pS,{isOpen:!0,onClose:()=>N(null),tableId:le.tableId,date:le.cardId}),y.jsx(mS,{isOpen:!!T,onClose:()=>b(null),topicId:T,onDelete:$e}),y.jsx(xS,{isOpen:!!C,onClose:()=>k(null),cardMeta:C}),y.jsx(wS,{isOpen:!!R,onClose:()=>A(null),onConfirm:()=>{R&&(R.targetCardId?v(R.targetCardId):l(R.tableId,R.cardId)),A(null)},message:"This will delete the card and all its topics. Continue?"}),te&&y.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>me(!1),children:y.jsxs("div",{className:"glass-card rounded-2xl p-6 max-w-md w-full animate-slideUp",onClick:Te=>Te.stopPropagation(),children:[y.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[y.jsx("span",{className:"text-2xl",children:""})," Create New Target"]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:fe,onChange:Te=>de(Te.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:Ve,onChange:Te=>Ne(Te.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-green focus:ring-1 focus:ring-accent-green transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:re,onChange:Te=>xe(Te.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-red focus:ring-1 focus:ring-accent-red transition-all"})]})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx("button",{onClick:()=>me(!1),className:"flex-1 py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),y.jsx("button",{onClick:Ye,disabled:!fe.trim()||!Ve||!re,className:"flex-1 py-3 bg-gradient-to-r from-accent-blue to-accent-purple text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-all",children:"Create Target"})]})]})})]})},IS={success:"bg-accent-green text-white border-green-600",error:"bg-accent-red text-white border-red-600",info:"bg-bg-card text-white border-border-light",syncing:"bg-white text-gray-900 border-gray-300"},bv=()=>{const{toasts:i,removeToast:e}=pw();return i.length===0?null:y.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:i.map(t=>y.jsxs("div",{className:`
            flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg
            animate-slideUp cursor-pointer transition-transform hover:scale-105
            ${IS[t.type]}
          `,onClick:()=>e(t.id),children:[t.type==="syncing"&&y.jsx("span",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}),t.type==="success"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.type==="error"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),y.jsx("span",{className:"font-semibold",children:t.message})]},t.id))})},SS=()=>{const{user:i,isLoading:e}=Ul();return e?y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx("div",{className:"w-10 h-10 border-4 border-accent-blue border-t-transparent rounded-full animate-spin"}),y.jsx("span",{className:"text-gray-400 font-semibold",children:"Loading..."})]})}):i?y.jsxs(gw,{children:[y.jsx(TS,{}),y.jsx(bv,{})]}):y.jsxs(y.Fragment,{children:[y.jsx(sS,{}),y.jsx(bv,{})]})},bS="modulepreload",AS=function(i){return"/studygoals/"+i},Av={},CS=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let c=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(v=>{if(v=AS(v),v in Av)return;Av[v]=!0;const x=v.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${E}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":bS,x||(S.as="script"),S.crossOrigin="",S.href=v,p&&S.setAttribute("nonce",p),document.head.appendChild(S),x)return new Promise((V,z)=>{S.addEventListener("load",V),S.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function kS(i={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i;let d,p,v;const x=(S=!0)=>Z(null,null,function*(){yield p,v==null||v()});function E(){return Z(this,null,function*(){if("serviceWorker"in navigator){if(d=yield CS(()=>Z(null,null,function*(){const{Workbox:S}=yield import("./workbox-window.prod.es5-CcvICf7O.js");return{Workbox:S}}),[]).then(({Workbox:S})=>new S("/studygoals/sw.js",{scope:"/studygoals/",type:"classic"})).catch(S=>{c==null||c(S)}),!d)return;v=()=>{d==null||d.messageSkipWaiting()};{let S=!1;const V=()=>{S=!0,d==null||d.addEventListener("controlling",z=>{z.isUpdate&&window.location.reload()}),t==null||t()};d.addEventListener("installed",z=>{typeof z.isUpdate=="undefined"?typeof z.isExternal!="undefined"&&z.isExternal?V():!S&&(r==null||r()):z.isUpdate||r==null||r()}),d.addEventListener("waiting",V)}d.register({immediate:e}).then(S=>{l?l("/studygoals/sw.js",S):o==null||o(S)}).catch(S=>{c==null||c(S)})}})}return p=E(),x}function PS(i={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i,[d,p]=X.useState(!1),[v,x]=X.useState(!1),[E]=X.useState(()=>kS({immediate:e,onOfflineReady(){x(!0),r==null||r()},onNeedRefresh(){p(!0),t==null||t()},onRegistered:o,onRegisteredSW:l,onRegisterError:c}));return{needRefresh:[d,p],offlineReady:[v,x],updateServiceWorker:E}}const NS=()=>{const{offlineReady:[i,e],needRefresh:[t,r],updateServiceWorker:o}=PS({onRegistered(c){console.log("SW Registered: "+c)},onRegisterError(c){console.log("SW registration error",c)}}),l=()=>{e(!1),r(!1)};return!i&&!t?null:y.jsxs("div",{className:"fixed bottom-4 right-4 z-50 p-4 rounded-xl bg-gray-900/95 border border-white/10 shadow-2xl backdrop-blur-md max-w-[300px] animate-slide-in",children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("h3",{className:"font-semibold text-white text-sm",children:i?"App ready to work offline":"New version available!"}),y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i?"You can use this app without internet.":"Click reload to update to the latest version."})]}),y.jsxs("div",{className:"flex gap-2",children:[t&&y.jsx("button",{className:"flex-1 px-3 py-1.5 bg-accent-green text-black text-xs font-bold rounded-lg hover:bg-accent-green/90 transition-colors",onClick:()=>o(!0),children:"Reload"}),y.jsx("button",{className:"flex-1 px-3 py-1.5 border border-white/10 text-white text-xs font-medium rounded-lg hover:bg-white/5 transition-colors",onClick:l,children:"Dismiss"})]})]})};class RS extends X.Component{constructor(){super(...arguments);Vg(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){var t;return this.state.hasError?y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 text-white p-4 text-center",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"The application encountered an error."}),y.jsx("pre",{className:"bg-black/50 p-4 rounded text-xs text-left overflow-auto max-w-full mb-4 border border-white/10",children:(t=this.state.error)==null?void 0:t.toString()}),y.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Data & Reload"})]}):this.props.children}}console.log(`%c  Loaded StudyGoals Version: 1.3 
%c Contact: adnanshahria2019@gmail.com `,"background: linear-gradient(to right, #6366f1, #a855f7, #ec4899); color: white; padding: 10px; border-radius: 10px; font-weight: bold; margin-top: 20px;","color: #9ca3af; margin-top: 5px; font-style: italic;");Ox.createRoot(document.getElementById("root")).render(y.jsx(Px.StrictMode,{children:y.jsx(hS,{children:y.jsx(rS,{children:y.jsx(gw,{children:y.jsxs(RS,{children:[y.jsx(SS,{}),y.jsx(NS,{})]})})})})}))});export default DS();
//# sourceMappingURL=index-Cw38lElT.js.map
