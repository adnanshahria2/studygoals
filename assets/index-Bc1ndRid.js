var wx=Object.defineProperty,xx=Object.defineProperties;var Ex=Object.getOwnPropertyDescriptors;var rc=Object.getOwnPropertySymbols,Tx=Object.getPrototypeOf,kg=Object.prototype.hasOwnProperty,Rg=Object.prototype.propertyIsEnumerable,Ix=Reflect.get;var Md=(i,e,t)=>e in i?wx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ht=(i,e)=>{for(var t in e||(e={}))kg.call(e,t)&&Md(i,t,e[t]);if(rc)for(var t of rc(e))Rg.call(e,t)&&Md(i,t,e[t]);return i},jn=(i,e)=>xx(i,Ex(e));var Ng=i=>typeof i=="symbol"?i:i+"",Ld=(i,e)=>{var t={};for(var r in i)kg.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&rc)for(var r of rc(i))e.indexOf(r)<0&&Rg.call(i,r)&&(t[r]=i[r]);return t};var Sx=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Dg=(i,e,t)=>Md(i,typeof e!="symbol"?e+"":e,t);var Vg=(i,e,t)=>Ix(Tx(i),t,e);var Z=(i,e,t)=>new Promise((r,o)=>{var l=p=>{try{d(t.next(p))}catch(v){o(v)}},c=p=>{try{d(t.throw(p))}catch(v){o(v)}},d=p=>p.done?r(p.value):Promise.resolve(p.value).then(l,c);d((t=t.apply(i,e)).next())});var NS=Sx(wr=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Av(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fd={exports:{}},Ya={},Bd={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function bx(){if(jg)return je;jg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,K={};function $(O,W,we){this.props=O,this.context=W,this.refs=K,this.updater=we||V}$.prototype.isReactComponent={},$.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function se(){}se.prototype=$.prototype;function H(O,W,we){this.props=O,this.context=W,this.refs=K,this.updater=we||V}var Q=H.prototype=new se;Q.constructor=H,z(Q,$.prototype),Q.isPureReactComponent=!0;var ne=Array.isArray,de=Object.prototype.hasOwnProperty,ue={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function E(O,W,we){var ke,De={},Oe=null,Fe=null;if(W!=null)for(ke in W.ref!==void 0&&(Fe=W.ref),W.key!==void 0&&(Oe=""+W.key),W)de.call(W,ke)&&!R.hasOwnProperty(ke)&&(De[ke]=W[ke]);var Ke=arguments.length-2;if(Ke===1)De.children=we;else if(1<Ke){for(var Ye=Array(Ke),mt=0;mt<Ke;mt++)Ye[mt]=arguments[mt+2];De.children=Ye}if(O&&O.defaultProps)for(ke in Ke=O.defaultProps,Ke)De[ke]===void 0&&(De[ke]=Ke[ke]);return{$$typeof:i,type:O,key:Oe,ref:Fe,props:De,_owner:ue.current}}function A(O,W){return{$$typeof:i,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function k(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(we){return W[we]})}var D=/\/+/g;function b(O,W){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):W.toString(36)}function Ee(O,W,we,ke,De){var Oe=typeof O;(Oe==="undefined"||Oe==="boolean")&&(O=null);var Fe=!1;if(O===null)Fe=!0;else switch(Oe){case"string":case"number":Fe=!0;break;case"object":switch(O.$$typeof){case i:case e:Fe=!0}}if(Fe)return Fe=O,De=De(Fe),O=ke===""?"."+b(Fe,0):ke,ne(De)?(we="",O!=null&&(we=O.replace(D,"$&/")+"/"),Ee(De,W,we,"",function(mt){return mt})):De!=null&&(C(De)&&(De=A(De,we+(!De.key||Fe&&Fe.key===De.key?"":(""+De.key).replace(D,"$&/")+"/")+O)),W.push(De)),1;if(Fe=0,ke=ke===""?".":ke+":",ne(O))for(var Ke=0;Ke<O.length;Ke++){Oe=O[Ke];var Ye=ke+b(Oe,Ke);Fe+=Ee(Oe,W,we,Ye,De)}else if(Ye=S(O),typeof Ye=="function")for(O=Ye.call(O),Ke=0;!(Oe=O.next()).done;)Oe=Oe.value,Ye=ke+b(Oe,Ke++),Fe+=Ee(Oe,W,we,Ye,De);else if(Oe==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Ne(O,W,we){if(O==null)return O;var ke=[],De=0;return Ee(O,ke,"","",function(Oe){return W.call(we,Oe,De++)}),ke}function fe(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(we){(O._status===0||O._status===-1)&&(O._status=1,O._result=we)},function(we){(O._status===0||O._status===-1)&&(O._status=2,O._result=we)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Re={current:null},ie={transition:null},ve={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ue};function ae(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Ne,forEach:function(O,W,we){Ne(O,function(){W.apply(this,arguments)},we)},count:function(O){var W=0;return Ne(O,function(){W++}),W},toArray:function(O){return Ne(O,function(W){return W})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=$,je.Fragment=t,je.Profiler=o,je.PureComponent=H,je.StrictMode=r,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,je.act=ae,je.cloneElement=function(O,W,we){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ke=z({},O.props),De=O.key,Oe=O.ref,Fe=O._owner;if(W!=null){if(W.ref!==void 0&&(Oe=W.ref,Fe=ue.current),W.key!==void 0&&(De=""+W.key),O.type&&O.type.defaultProps)var Ke=O.type.defaultProps;for(Ye in W)de.call(W,Ye)&&!R.hasOwnProperty(Ye)&&(ke[Ye]=W[Ye]===void 0&&Ke!==void 0?Ke[Ye]:W[Ye])}var Ye=arguments.length-2;if(Ye===1)ke.children=we;else if(1<Ye){Ke=Array(Ye);for(var mt=0;mt<Ye;mt++)Ke[mt]=arguments[mt+2];ke.children=Ke}return{$$typeof:i,type:O.type,key:De,ref:Oe,props:ke,_owner:Fe}},je.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},je.createElement=E,je.createFactory=function(O){var W=E.bind(null,O);return W.type=O,W},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:d,render:O}},je.isValidElement=C,je.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:fe}},je.memo=function(O,W){return{$$typeof:v,type:O,compare:W===void 0?null:W}},je.startTransition=function(O){var W=ie.transition;ie.transition={};try{O()}finally{ie.transition=W}},je.unstable_act=ae,je.useCallback=function(O,W){return Re.current.useCallback(O,W)},je.useContext=function(O){return Re.current.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O){return Re.current.useDeferredValue(O)},je.useEffect=function(O,W){return Re.current.useEffect(O,W)},je.useId=function(){return Re.current.useId()},je.useImperativeHandle=function(O,W,we){return Re.current.useImperativeHandle(O,W,we)},je.useInsertionEffect=function(O,W){return Re.current.useInsertionEffect(O,W)},je.useLayoutEffect=function(O,W){return Re.current.useLayoutEffect(O,W)},je.useMemo=function(O,W){return Re.current.useMemo(O,W)},je.useReducer=function(O,W,we){return Re.current.useReducer(O,W,we)},je.useRef=function(O){return Re.current.useRef(O)},je.useState=function(O){return Re.current.useState(O)},je.useSyncExternalStore=function(O,W,we){return Re.current.useSyncExternalStore(O,W,we)},je.useTransition=function(){return Re.current.useTransition()},je.version="18.3.1",je}var Og;function Rf(){return Og||(Og=1,Bd.exports=bx()),Bd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function Ax(){if(Mg)return Ya;Mg=1;var i=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,v){var x,T={},S=null,V=null;v!==void 0&&(S=""+v),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(V=p.ref);for(x in p)r.call(p,x)&&!l.hasOwnProperty(x)&&(T[x]=p[x]);if(d&&d.defaultProps)for(x in p=d.defaultProps,p)T[x]===void 0&&(T[x]=p[x]);return{$$typeof:e,type:d,key:S,ref:V,props:T,_owner:o.current}}return Ya.Fragment=t,Ya.jsx=c,Ya.jsxs=c,Ya}var Lg;function Cx(){return Lg||(Lg=1,Fd.exports=Ax()),Fd.exports}var y=Cx(),Y=Rf();const Px=Av(Y);var sc={},zd={exports:{}},hn={},Ud={exports:{}},$d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function kx(){return Fg||(Fg=1,(function(i){function e(ie,ve){var ae=ie.length;ie.push(ve);e:for(;0<ae;){var O=ae-1>>>1,W=ie[O];if(0<o(W,ve))ie[O]=ve,ie[ae]=W,ae=O;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ve=ie[0],ae=ie.pop();if(ae!==ve){ie[0]=ae;e:for(var O=0,W=ie.length,we=W>>>1;O<we;){var ke=2*(O+1)-1,De=ie[ke],Oe=ke+1,Fe=ie[Oe];if(0>o(De,ae))Oe<W&&0>o(Fe,De)?(ie[O]=Fe,ie[Oe]=ae,O=Oe):(ie[O]=De,ie[ke]=ae,O=ke);else if(Oe<W&&0>o(Fe,ae))ie[O]=Fe,ie[Oe]=ae,O=Oe;else break e}}return ve}function o(ie,ve){var ae=ie.sortIndex-ve.sortIndex;return ae!==0?ae:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],x=1,T=null,S=3,V=!1,z=!1,K=!1,$=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(ie){for(var ve=t(v);ve!==null;){if(ve.callback===null)r(v);else if(ve.startTime<=ie)r(v),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(v)}}function ne(ie){if(K=!1,Q(ie),!z)if(t(p)!==null)z=!0,fe(de);else{var ve=t(v);ve!==null&&Re(ne,ve.startTime-ie)}}function de(ie,ve){z=!1,K&&(K=!1,se(E),E=-1),V=!0;var ae=S;try{for(Q(ve),T=t(p);T!==null&&(!(T.expirationTime>ve)||ie&&!k());){var O=T.callback;if(typeof O=="function"){T.callback=null,S=T.priorityLevel;var W=O(T.expirationTime<=ve);ve=i.unstable_now(),typeof W=="function"?T.callback=W:T===t(p)&&r(p),Q(ve)}else r(p);T=t(p)}if(T!==null)var we=!0;else{var ke=t(v);ke!==null&&Re(ne,ke.startTime-ve),we=!1}return we}finally{T=null,S=ae,V=!1}}var ue=!1,R=null,E=-1,A=5,C=-1;function k(){return!(i.unstable_now()-C<A)}function D(){if(R!==null){var ie=i.unstable_now();C=ie;var ve=!0;try{ve=R(!0,ie)}finally{ve?b():(ue=!1,R=null)}}else ue=!1}var b;if(typeof H=="function")b=function(){H(D)};else if(typeof MessageChannel!="undefined"){var Ee=new MessageChannel,Ne=Ee.port2;Ee.port1.onmessage=D,b=function(){Ne.postMessage(null)}}else b=function(){$(D,0)};function fe(ie){R=ie,ue||(ue=!0,b())}function Re(ie,ve){E=$(function(){ie(i.unstable_now())},ve)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_continueExecution=function(){z||V||(z=!0,fe(de))},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var ae=S;S=ve;try{return ie()}finally{S=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ae=S;S=ie;try{return ve()}finally{S=ae}},i.unstable_scheduleCallback=function(ie,ve,ae){var O=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?O+ae:O):ae=O,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ae+W,ie={id:x++,callback:ve,priorityLevel:ie,startTime:ae,expirationTime:W,sortIndex:-1},ae>O?(ie.sortIndex=ae,e(v,ie),t(p)===null&&ie===t(v)&&(K?(se(E),E=-1):K=!0,Re(ne,ae-O))):(ie.sortIndex=W,e(p,ie),z||V||(z=!0,fe(de))),ie},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ie){var ve=S;return function(){var ae=S;S=ve;try{return ie.apply(this,arguments)}finally{S=ae}}}})($d)),$d}var Bg;function Rx(){return Bg||(Bg=1,Ud.exports=kx()),Ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function Nx(){if(zg)return hn;zg=1;var i=Rf(),e=Rx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},T={};function S(n){return p.call(T,n)?!0:p.call(x,n)?!1:v.test(n)?T[n]=!0:(x[n]=!0,!1)}function V(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function z(n,s,a,h){if(s===null||typeof s=="undefined"||V(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];$[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function H(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(se,H);$[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(se,H);$[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(se,H);$[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,s,a,h){var f=$.hasOwnProperty(s)?$[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,a,f,h)&&(a=null),h||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var ne=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),ue=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,O;function W(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var we=!1;function ke(n,s){if(!n||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(U){var h=U}Reflect.construct(n,[],s)}else{try{s.call()}catch(U){h=U}n.call(s.prototype)}else{try{throw Error()}catch(U){h=U}n()}}catch(U){if(U&&h&&typeof U.stack=="string"){for(var f=U.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,P=g.length-1;1<=w&&0<=P&&f[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==g[P]){var N=`
`+f[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=P);break}}}finally{we=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function De(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ue:return"Portal";case A:return"Profiler";case E:return"StrictMode";case b:return"Suspense";case Ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case C:return(n._context.displayName||"Context")+".Provider";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ne:return s=n.displayName||null,s!==null?s:Oe(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return Oe(n(s))}catch(a){}}return null}function Fe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ke(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ye(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mt(n){var s=Ye(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Te(n){n._valueTracker||(n._valueTracker=mt(n))}function Be(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Ye(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function ze(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(s){return n.body}}function Xt(n,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:n._wrapperState.initialChecked})}function Ut(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Ke(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function In(n,s){s=s.checked,s!=null&&Q(n,"checked",s,!1)}function xr(n,s){In(n,s);var a=Ke(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ri(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ri(n,s.type,Ke(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ki(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ri(n,s,a){(s!=="number"||ze(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Er=Array.isArray;function Tr(n,s,a,h){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Ke(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ia(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ni(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Er(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ke(a)}}function Di(n,s){var a=Ke(s.value),h=Ke(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function oa(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Tt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Tt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ir,aa=(function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ir.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Wr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ds=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(n){Ds.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Ns[s]=Ns[n]})});function la(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ns.hasOwnProperty(n)&&Ns[n]?(""+s).trim():s+"px"}function ua(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=la(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var ca=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(n,s){if(s){if(ca[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function da(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vs=null;function Vi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ji=null,Sn=null,nr=null;function Oi(n){if(n=Oa(n)){if(typeof ji!="function")throw Error(t(280));var s=n.stateNode;s&&(s=vu(s),ji(n.stateNode,n.type,s))}}function rr(n){Sn?nr?nr.push(n):nr=[n]:Sn=n}function fa(){if(Sn){var n=Sn,s=nr;if(nr=Sn=null,Oi(n),s)for(n=0;n<s.length;n++)Oi(s[n])}}function js(n,s){return n(s)}function pa(){}var Sr=!1;function ma(n,s,a){if(Sr)return n(s,a);Sr=!0;try{return js(n,s,a)}finally{Sr=!1,(Sn!==null||nr!==null)&&(pa(),fa())}}function gt(n,s){var a=n.stateNode;if(a===null)return null;var h=vu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Mi=!1;if(d)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch(n){Mi=!1}function Os(n,s,a,h,f,g,w,P,N){var U=Array.prototype.slice.call(arguments,3);try{s.apply(a,U)}catch(J){this.onError(J)}}var Ms=!1,Li=null,zn=!1,ga=null,hh={onError:function(n){Ms=!0,Li=n}};function Fi(n,s,a,h,f,g,w,P,N){Ms=!1,Li=null,Os.apply(hh,arguments)}function $l(n,s,a,h,f,g,w,P,N){if(Fi.apply(this,arguments),Ms){if(Ms){var U=Li;Ms=!1,Li=null}else throw Error(t(198));zn||(zn=!0,ga=U)}}function Un(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ls(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function $n(n){if(Un(n)!==n)throw Error(t(188))}function ql(n){var s=n.alternate;if(!s){if(s=Un(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return $n(f),n;if(g===h)return $n(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,h=g;break}if(P===h){w=!0,h=f,a=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===a){w=!0,a=g,h=f;break}if(P===h){w=!0,h=g,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ya(n){return n=ql(n),n!==null?Bi(n):null}function Bi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Bi(n);if(s!==null)return s;n=n.sibling}return null}var zi=e.unstable_scheduleCallback,va=e.unstable_cancelCallback,Kl=e.unstable_shouldYield,dh=e.unstable_requestPaint,tt=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,_a=e.unstable_LowPriority,Hl=e.unstable_IdlePriority,Bs=null,fn=null;function Gl(n){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Bs,n,void 0,(n.current.flags&128)===128)}catch(s){}}var Yt=Math.clz32?Math.clz32:Xl,wa=Math.log,Ql=Math.LN2;function Xl(n){return n>>>=0,n===0?32:31-(wa(n)/Ql|0)|0}var Ui=64,$i=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zs(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?h=Gr(P):(g&=w,g!==0&&(h=Gr(g)))}else w=a&~f,w!==0?h=Gr(w):g!==0&&(h=Gr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-Yt(s),f=1<<a,h|=n[a],s&=~f;return h}function fh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-Yt(g),P=1<<w,N=f[w];N===-1?((P&a)===0||(P&h)!==0)&&(f[w]=fh(P,s)):N<=s&&(n.expiredLanes|=P),g&=~P}}function pn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Us(){var n=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),n}function Qr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Xr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Yt(s),n[s]=a}function et(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Yt(a),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,a&=~g}}function Yr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-Yt(a),f=1<<h;f&s|n[h]&s&&(n[h]|=s),a&=~f}}var Me=0;function Jr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Yl,qi,Jl,Zl,eu,xa=!1,sr=[],jt=null,qn=null,Kn=null,Zr=new Map,An=new Map,ir=[],ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tu(n,s){switch(n){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":Zr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":An.delete(s.pointerId)}}function rn(n,s,a,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Oa(s),s!==null&&qi(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function mh(n,s,a,h,f){switch(s){case"focusin":return jt=rn(jt,n,s,a,h,f),!0;case"dragenter":return qn=rn(qn,n,s,a,h,f),!0;case"mouseover":return Kn=rn(Kn,n,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Zr.set(g,rn(Zr.get(g)||null,n,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,An.set(g,rn(An.get(g)||null,n,s,a,h,f)),!0}return!1}function nu(n){var s=Hs(n.target);if(s!==null){var a=Un(s);if(a!==null){if(s=a.tag,s===13){if(s=Ls(a),s!==null){n.blockedOn=s,eu(n.priority,function(){Jl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ar(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ki(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Vs=h,a.target.dispatchEvent(h),Vs=null}else return s=Oa(a),s!==null&&qi(s),n.blockedOn=a,!1;s.shift()}return!0}function $s(n,s,a){Ar(n)&&a.delete(s)}function ru(){xa=!1,jt!==null&&Ar(jt)&&(jt=null),qn!==null&&Ar(qn)&&(qn=null),Kn!==null&&Ar(Kn)&&(Kn=null),Zr.forEach($s),An.forEach($s)}function Wn(n,s){n.blockedOn===s&&(n.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ru)))}function Hn(n){function s(f){return Wn(f,n)}if(0<sr.length){Wn(sr[0],n);for(var a=1;a<sr.length;a++){var h=sr[a];h.blockedOn===n&&(h.blockedOn=null)}}for(jt!==null&&Wn(jt,n),qn!==null&&Wn(qn,n),Kn!==null&&Wn(Kn,n),Zr.forEach(s),An.forEach(s),a=0;a<ir.length;a++)h=ir[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)nu(a),a.blockedOn===null&&ir.shift()}var Cr=ne.ReactCurrentBatchConfig,es=!0;function it(n,s,a,h){var f=Me,g=Cr.transition;Cr.transition=null;try{Me=1,Ea(n,s,a,h)}finally{Me=f,Cr.transition=g}}function gh(n,s,a,h){var f=Me,g=Cr.transition;Cr.transition=null;try{Me=4,Ea(n,s,a,h)}finally{Me=f,Cr.transition=g}}function Ea(n,s,a,h){if(es){var f=Ki(n,s,a,h);if(f===null)Ah(n,s,h,qs,a),tu(n,h);else if(mh(f,n,s,a,h))h.stopPropagation();else if(tu(n,h),s&4&&-1<ph.indexOf(n)){for(;f!==null;){var g=Oa(f);if(g!==null&&Yl(g),g=Ki(n,s,a,h),g===null&&Ah(n,s,h,qs,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Ah(n,s,h,null,a)}}var qs=null;function Ki(n,s,a,h){if(qs=null,n=Vi(h),n=Hs(n),n!==null)if(s=Un(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ls(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qs=n,null}function Ta(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Fs:return 1;case Hr:return 4;case bn:case _a:return 16;case Hl:return 536870912;default:return 16}default:return 16}}var mn=null,Wi=null,sn=null;function Ia(){if(sn)return sn;var n,s=Wi,a=s.length,h,f="value"in mn?mn.value:mn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return sn=f.slice(n,1<h?1-h:void 0)}function Hi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function or(){return!0}function Sa(){return!1}function Ot(n){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?or:Sa,this.isPropagationStopped=Sa,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),s}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Ot(Gn),ar=ae({},Gn,{view:0,detail:0}),yh=Ot(ar),Qi,Pr,ts,Ks=ae({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ts&&(ts&&n.type==="mousemove"?(Qi=n.screenX-ts.screenX,Pr=n.screenY-ts.screenY):Pr=Qi=0,ts=n),Qi)},movementY:function(n){return"movementY"in n?n.movementY:Pr}}),Xi=Ot(Ks),ba=ae({},Ks,{dataTransfer:0}),su=Ot(ba),Yi=ae({},ar,{relatedTarget:0}),Ji=Ot(Yi),iu=ae({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),kr=Ot(iu),ou=ae({},Gn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),au=Ot(ou),lu=ae({},Gn,{data:0}),Aa=Ot(lu),Zi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=uu[n])?!!s[n]:!1}function lr(){return cu}var u=ae({},ar,{key:function(n){if(n.key){var s=Zi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ot(u),_=ae({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ot(_),M=ae({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),q=Ot(M),oe=ae({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Ot(oe),St=ae({},Ks,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Ot(St),kt=[9,13,27,32],vt=d&&"CompositionEvent"in window,Cn=null;d&&"documentMode"in document&&(Cn=document.documentMode);var gn=d&&"TextEvent"in window&&!Cn,Ws=d&&(!vt||Cn&&8<Cn&&11>=Cn),eo=" ",Ip=!1;function Sp(n,s){switch(n){case"keyup":return kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function yw(n,s){switch(n){case"compositionend":return bp(s);case"keypress":return s.which!==32?null:(Ip=!0,eo);case"textInput":return n=s.data,n===eo&&Ip?null:n;default:return null}}function vw(n,s){if(to)return n==="compositionend"||!vt&&Sp(n,s)?(n=Ia(),sn=Wi=mn=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ws&&s.locale!=="ko"?null:s.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!_w[n.type]:s==="textarea"}function Cp(n,s,a,h){rr(h),s=mu(s,"onChange"),0<s.length&&(a=new Gi("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Ca=null,Pa=null;function ww(n){Wp(n,0)}function hu(n){var s=oo(n);if(Be(s))return n}function xw(n,s){if(n==="change")return s}var Pp=!1;if(d){var vh;if(d){var _h="oninput"in document;if(!_h){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),_h=typeof kp.oninput=="function"}vh=_h}else vh=!1;Pp=vh&&(!document.documentMode||9<document.documentMode)}function Rp(){Ca&&(Ca.detachEvent("onpropertychange",Np),Pa=Ca=null)}function Np(n){if(n.propertyName==="value"&&hu(Pa)){var s=[];Cp(s,Pa,n,Vi(n)),ma(ww,s)}}function Ew(n,s,a){n==="focusin"?(Rp(),Ca=s,Pa=a,Ca.attachEvent("onpropertychange",Np)):n==="focusout"&&Rp()}function Tw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hu(Pa)}function Iw(n,s){if(n==="click")return hu(s)}function Sw(n,s){if(n==="input"||n==="change")return hu(s)}function bw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Qn=typeof Object.is=="function"?Object.is:bw;function ka(n,s){if(Qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Qn(n[f],s[f]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vp(n,s){var a=Dp(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dp(a)}}function jp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?jp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Op(){for(var n=window,s=ze();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch(h){a=!1}if(a)n=s.contentWindow;else break;s=ze(n.document)}return s}function wh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Aw(n){var s=Op(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&jp(a.ownerDocument.documentElement,a)){if(h!==null&&wh(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=Vp(a,g);var w=Vp(a,h);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cw=d&&"documentMode"in document&&11>=document.documentMode,no=null,xh=null,Ra=null,Eh=!1;function Mp(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eh||no==null||no!==ze(h)||(h=no,"selectionStart"in h&&wh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ra&&ka(Ra,h)||(Ra=h,h=mu(xh,"onSelect"),0<h.length&&(s=new Gi("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=no)))}function du(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ro={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Th={},Lp={};d&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function fu(n){if(Th[n])return Th[n];if(!ro[n])return n;var s=ro[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lp)return Th[n]=s[a];return n}var Fp=fu("animationend"),Bp=fu("animationiteration"),zp=fu("animationstart"),Up=fu("transitionend"),$p=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(n,s){$p.set(n,s),l(s,[n])}for(var Ih=0;Ih<qp.length;Ih++){var Sh=qp[Ih],Pw=Sh.toLowerCase(),kw=Sh[0].toUpperCase()+Sh.slice(1);ns(Pw,"on"+kw)}ns(Fp,"onAnimationEnd"),ns(Bp,"onAnimationIteration"),ns(zp,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(Up,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Kp(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,$l(h,s,void 0,n),n.currentTarget=null}function Wp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var P=h[w],N=P.instance,U=P.currentTarget;if(P=P.listener,N!==g&&f.isPropagationStopped())break e;Kp(f,P,U),g=N}else for(w=0;w<h.length;w++){if(P=h[w],N=P.instance,U=P.currentTarget,P=P.listener,N!==g&&f.isPropagationStopped())break e;Kp(f,P,U),g=N}}}if(zn)throw n=ga,zn=!1,ga=null,n}function rt(n,s){var a=s[Dh];a===void 0&&(a=s[Dh]=new Set);var h=n+"__bubble";a.has(h)||(Hp(s,n,2,!1),a.add(h))}function bh(n,s,a){var h=0;s&&(h|=4),Hp(a,n,h,s)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Da(n){if(!n[pu]){n[pu]=!0,r.forEach(function(a){a!=="selectionchange"&&(Rw.has(a)||bh(a,!1,n),bh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[pu]||(s[pu]=!0,bh("selectionchange",!1,s))}}function Hp(n,s,a,h){switch(Ta(s)){case 1:var f=it;break;case 4:f=gh;break;default:f=Ea}a=f.bind(null,s,a,n),f=void 0,!Mi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Ah(n,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;P!==null;){if(w=Hs(P),w===null)return;if(N=w.tag,N===5||N===6){h=g=w;continue e}P=P.parentNode}}h=h.return}ma(function(){var U=g,J=Vi(a),ee=[];e:{var X=$p.get(n);if(X!==void 0){var ce=Gi,me=n;switch(n){case"keypress":if(Hi(a)===0)break e;case"keydown":case"keyup":ce=m;break;case"focusin":me="focus",ce=Ji;break;case"focusout":me="blur",ce=Ji;break;case"beforeblur":case"afterblur":ce=Ji;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=q;break;case Fp:case Bp:case zp:ce=kr;break;case Up:ce=Ge;break;case"scroll":ce=yh;break;case"wheel":ce=Ue;break;case"copy":case"cut":case"paste":ce=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=I}var ye=(s&4)!==0,yt=!ye&&n==="scroll",F=ye?X!==null?X+"Capture":null:X;ye=[];for(var j=U,B;j!==null;){B=j;var re=B.stateNode;if(B.tag===5&&re!==null&&(B=re,F!==null&&(re=gt(j,F),re!=null&&ye.push(Va(j,re,B)))),yt)break;j=j.return}0<ye.length&&(X=new ce(X,me,null,a,J),ee.push({event:X,listeners:ye}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",X&&a!==Vs&&(me=a.relatedTarget||a.fromElement)&&(Hs(me)||me[Rr]))break e;if((ce||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,ce?(me=a.relatedTarget||a.toElement,ce=U,me=me?Hs(me):null,me!==null&&(yt=Un(me),me!==yt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=U),ce!==me)){if(ye=Xi,re="onMouseLeave",F="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(ye=I,re="onPointerLeave",F="onPointerEnter",j="pointer"),yt=ce==null?X:oo(ce),B=me==null?X:oo(me),X=new ye(re,j+"leave",ce,a,J),X.target=yt,X.relatedTarget=B,re=null,Hs(J)===U&&(ye=new ye(F,j+"enter",me,a,J),ye.target=B,ye.relatedTarget=yt,re=ye),yt=re,ce&&me)t:{for(ye=ce,F=me,j=0,B=ye;B;B=so(B))j++;for(B=0,re=F;re;re=so(re))B++;for(;0<j-B;)ye=so(ye),j--;for(;0<B-j;)F=so(F),B--;for(;j--;){if(ye===F||F!==null&&ye===F.alternate)break t;ye=so(ye),F=so(F)}ye=null}else ye=null;ce!==null&&Gp(ee,X,ce,ye,!1),me!==null&&yt!==null&&Gp(ee,yt,me,ye,!0)}}e:{if(X=U?oo(U):window,ce=X.nodeName&&X.nodeName.toLowerCase(),ce==="select"||ce==="input"&&X.type==="file")var _e=xw;else if(Ap(X))if(Pp)_e=Sw;else{_e=Tw;var Se=Ew}else(ce=X.nodeName)&&ce.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(_e=Iw);if(_e&&(_e=_e(n,U))){Cp(ee,_e,a,J);break e}Se&&Se(n,X,U),n==="focusout"&&(Se=X._wrapperState)&&Se.controlled&&X.type==="number"&&Ri(X,"number",X.value)}switch(Se=U?oo(U):window,n){case"focusin":(Ap(Se)||Se.contentEditable==="true")&&(no=Se,xh=U,Ra=null);break;case"focusout":Ra=xh=no=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Mp(ee,a,J);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":Mp(ee,a,J)}var be;if(vt)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else to?Sp(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ws&&a.locale!=="ko"&&(to||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&to&&(be=Ia()):(mn=J,Wi="value"in mn?mn.value:mn.textContent,to=!0)),Se=mu(U,Ce),0<Se.length&&(Ce=new Aa(Ce,n,null,a,J),ee.push({event:Ce,listeners:Se}),be?Ce.data=be:(be=bp(a),be!==null&&(Ce.data=be)))),(be=gn?yw(n,a):vw(n,a))&&(U=mu(U,"onBeforeInput"),0<U.length&&(J=new Aa("onBeforeInput","beforeinput",null,a,J),ee.push({event:J,listeners:U}),J.data=be))}Wp(ee,s)})}function Va(n,s,a){return{instance:n,listener:s,currentTarget:a}}function mu(n,s){for(var a=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=gt(n,a),g!=null&&h.unshift(Va(n,g,f)),g=gt(n,s),g!=null&&h.push(Va(n,g,f))),n=n.return}return h}function so(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var P=a,N=P.alternate,U=P.stateNode;if(N!==null&&N===h)break;P.tag===5&&U!==null&&(P=U,f?(N=gt(a,g),N!=null&&w.unshift(Va(a,N,P))):f||(N=gt(a,g),N!=null&&w.push(Va(a,N,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var Nw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function Qp(n){return(typeof n=="string"?n:""+n).replace(Nw,`
`).replace(Dw,"")}function gu(n,s,a){if(s=Qp(s),Qp(n)!==s&&a)throw Error(t(425))}function yu(){}var Ch=null,Ph=null;function kh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp!="undefined"?function(n){return Xp.resolve(null).then(n).catch(Ow)}:Rh;function Ow(n){setTimeout(function(){throw n})}function Nh(n,s){var a=s,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),Hn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Hn(s)}function rs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var io=Math.random().toString(36).slice(2),ur="__reactFiber$"+io,ja="__reactProps$"+io,Rr="__reactContainer$"+io,Dh="__reactEvents$"+io,Mw="__reactListeners$"+io,Lw="__reactHandles$"+io;function Hs(n){var s=n[ur];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Rr]||a[ur]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[ur])return a;n=Yp(n)}return s}n=a,a=n.parentNode}return null}function Oa(n){return n=n[ur]||n[Rr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function vu(n){return n[ja]||null}var Vh=[],ao=-1;function ss(n){return{current:n}}function st(n){0>ao||(n.current=Vh[ao],Vh[ao]=null,ao--)}function nt(n,s){ao++,Vh[ao]=n.current,n.current=s}var is={},$t=ss(is),on=ss(!1),Gs=is;function lo(n,s){var a=n.type.contextTypes;if(!a)return is;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function an(n){return n=n.childContextTypes,n!=null}function _u(){st(on),st($t)}function Jp(n,s,a){if($t.current!==is)throw Error(t(168));nt($t,s),nt(on,a)}function Zp(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Fe(n)||"Unknown",f));return ae({},a,h)}function wu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||is,Gs=$t.current,nt($t,n),nt(on,on.current),!0}function em(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=Zp(n,s,Gs),h.__reactInternalMemoizedMergedChildContext=n,st(on),st($t),nt($t,n)):st(on),nt(on,a)}var Nr=null,xu=!1,jh=!1;function tm(n){Nr===null?Nr=[n]:Nr.push(n)}function Fw(n){xu=!0,tm(n)}function os(){if(!jh&&Nr!==null){jh=!0;var n=0,s=Me;try{var a=Nr;for(Me=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Nr=null,xu=!1}catch(f){throw Nr!==null&&(Nr=Nr.slice(n+1)),zi(Fs,os),f}finally{Me=s,jh=!1}}return null}var uo=[],co=0,Eu=null,Tu=0,Pn=[],kn=0,Qs=null,Dr=1,Vr="";function Xs(n,s){uo[co++]=Tu,uo[co++]=Eu,Eu=n,Tu=s}function nm(n,s,a){Pn[kn++]=Dr,Pn[kn++]=Vr,Pn[kn++]=Qs,Qs=n;var h=Dr;n=Vr;var f=32-Yt(h)-1;h&=~(1<<f),a+=1;var g=32-Yt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Dr=1<<32-Yt(s)+f|a<<f|h,Vr=g+n}else Dr=1<<g|a<<f|h,Vr=n}function Oh(n){n.return!==null&&(Xs(n,1),nm(n,1,0))}function Mh(n){for(;n===Eu;)Eu=uo[--co],uo[co]=null,Tu=uo[--co],uo[co]=null;for(;n===Qs;)Qs=Pn[--kn],Pn[kn]=null,Vr=Pn[--kn],Pn[kn]=null,Dr=Pn[--kn],Pn[kn]=null}var yn=null,vn=null,ot=!1,Xn=null;function rm(n,s){var a=Vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function sm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,yn=n,vn=rs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,yn=n,vn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Qs!==null?{id:Dr,overflow:Vr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,yn=n,vn=null,!0):!1;default:return!1}}function Lh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fh(n){if(ot){var s=vn;if(s){var a=s;if(!sm(n,s)){if(Lh(n))throw Error(t(418));s=rs(a.nextSibling);var h=yn;s&&sm(n,s)?rm(h,a):(n.flags=n.flags&-4097|2,ot=!1,yn=n)}}else{if(Lh(n))throw Error(t(418));n.flags=n.flags&-4097|2,ot=!1,yn=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yn=n}function Iu(n){if(n!==yn)return!1;if(!ot)return im(n),ot=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!kh(n.type,n.memoizedProps)),s&&(s=vn)){if(Lh(n))throw om(),Error(t(418));for(;s;)rm(n,s),s=rs(s.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){vn=rs(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}vn=null}}else vn=yn?rs(n.stateNode.nextSibling):null;return!0}function om(){for(var n=vn;n;)n=rs(n.nextSibling)}function ho(){vn=yn=null,ot=!1}function Bh(n){Xn===null?Xn=[n]:Xn.push(n)}var Bw=ne.ReactCurrentBatchConfig;function Ma(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=f.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Su(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function am(n){var s=n._init;return s(n._payload)}function lm(n){function s(F,j){if(n){var B=F.deletions;B===null?(F.deletions=[j],F.flags|=16):B.push(j)}}function a(F,j){if(!n)return null;for(;j!==null;)s(F,j),j=j.sibling;return null}function h(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function f(F,j){return F=ps(F,j),F.index=0,F.sibling=null,F}function g(F,j,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<j?(F.flags|=2,j):B):(F.flags|=2,j)):(F.flags|=1048576,j)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function P(F,j,B,re){return j===null||j.tag!==6?(j=Rd(B,F.mode,re),j.return=F,j):(j=f(j,B),j.return=F,j)}function N(F,j,B,re){var _e=B.type;return _e===R?J(F,j,B.props.children,re,B.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===fe&&am(_e)===j.type)?(re=f(j,B.props),re.ref=Ma(F,j,B),re.return=F,re):(re=Qu(B.type,B.key,B.props,null,F.mode,re),re.ref=Ma(F,j,B),re.return=F,re)}function U(F,j,B,re){return j===null||j.tag!==4||j.stateNode.containerInfo!==B.containerInfo||j.stateNode.implementation!==B.implementation?(j=Nd(B,F.mode,re),j.return=F,j):(j=f(j,B.children||[]),j.return=F,j)}function J(F,j,B,re,_e){return j===null||j.tag!==7?(j=si(B,F.mode,re,_e),j.return=F,j):(j=f(j,B),j.return=F,j)}function ee(F,j,B){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Rd(""+j,F.mode,B),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case de:return B=Qu(j.type,j.key,j.props,null,F.mode,B),B.ref=Ma(F,null,j),B.return=F,B;case ue:return j=Nd(j,F.mode,B),j.return=F,j;case fe:var re=j._init;return ee(F,re(j._payload),B)}if(Er(j)||ve(j))return j=si(j,F.mode,B,null),j.return=F,j;Su(F,j)}return null}function X(F,j,B,re){var _e=j!==null?j.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return _e!==null?null:P(F,j,""+B,re);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case de:return B.key===_e?N(F,j,B,re):null;case ue:return B.key===_e?U(F,j,B,re):null;case fe:return _e=B._init,X(F,j,_e(B._payload),re)}if(Er(B)||ve(B))return _e!==null?null:J(F,j,B,re,null);Su(F,B)}return null}function ce(F,j,B,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number")return F=F.get(B)||null,P(j,F,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case de:return F=F.get(re.key===null?B:re.key)||null,N(j,F,re,_e);case ue:return F=F.get(re.key===null?B:re.key)||null,U(j,F,re,_e);case fe:var Se=re._init;return ce(F,j,B,Se(re._payload),_e)}if(Er(re)||ve(re))return F=F.get(B)||null,J(j,F,re,_e,null);Su(j,re)}return null}function me(F,j,B,re){for(var _e=null,Se=null,be=j,Ce=j=0,Dt=null;be!==null&&Ce<B.length;Ce++){be.index>Ce?(Dt=be,be=null):Dt=be.sibling;var He=X(F,be,B[Ce],re);if(He===null){be===null&&(be=Dt);break}n&&be&&He.alternate===null&&s(F,be),j=g(He,j,Ce),Se===null?_e=He:Se.sibling=He,Se=He,be=Dt}if(Ce===B.length)return a(F,be),ot&&Xs(F,Ce),_e;if(be===null){for(;Ce<B.length;Ce++)be=ee(F,B[Ce],re),be!==null&&(j=g(be,j,Ce),Se===null?_e=be:Se.sibling=be,Se=be);return ot&&Xs(F,Ce),_e}for(be=h(F,be);Ce<B.length;Ce++)Dt=ce(be,F,Ce,B[Ce],re),Dt!==null&&(n&&Dt.alternate!==null&&be.delete(Dt.key===null?Ce:Dt.key),j=g(Dt,j,Ce),Se===null?_e=Dt:Se.sibling=Dt,Se=Dt);return n&&be.forEach(function(ms){return s(F,ms)}),ot&&Xs(F,Ce),_e}function ye(F,j,B,re){var _e=ve(B);if(typeof _e!="function")throw Error(t(150));if(B=_e.call(B),B==null)throw Error(t(151));for(var Se=_e=null,be=j,Ce=j=0,Dt=null,He=B.next();be!==null&&!He.done;Ce++,He=B.next()){be.index>Ce?(Dt=be,be=null):Dt=be.sibling;var ms=X(F,be,He.value,re);if(ms===null){be===null&&(be=Dt);break}n&&be&&ms.alternate===null&&s(F,be),j=g(ms,j,Ce),Se===null?_e=ms:Se.sibling=ms,Se=ms,be=Dt}if(He.done)return a(F,be),ot&&Xs(F,Ce),_e;if(be===null){for(;!He.done;Ce++,He=B.next())He=ee(F,He.value,re),He!==null&&(j=g(He,j,Ce),Se===null?_e=He:Se.sibling=He,Se=He);return ot&&Xs(F,Ce),_e}for(be=h(F,be);!He.done;Ce++,He=B.next())He=ce(be,F,Ce,He.value,re),He!==null&&(n&&He.alternate!==null&&be.delete(He.key===null?Ce:He.key),j=g(He,j,Ce),Se===null?_e=He:Se.sibling=He,Se=He);return n&&be.forEach(function(_x){return s(F,_x)}),ot&&Xs(F,Ce),_e}function yt(F,j,B,re){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case de:e:{for(var _e=B.key,Se=j;Se!==null;){if(Se.key===_e){if(_e=B.type,_e===R){if(Se.tag===7){a(F,Se.sibling),j=f(Se,B.props.children),j.return=F,F=j;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===fe&&am(_e)===Se.type){a(F,Se.sibling),j=f(Se,B.props),j.ref=Ma(F,Se,B),j.return=F,F=j;break e}a(F,Se);break}else s(F,Se);Se=Se.sibling}B.type===R?(j=si(B.props.children,F.mode,re,B.key),j.return=F,F=j):(re=Qu(B.type,B.key,B.props,null,F.mode,re),re.ref=Ma(F,j,B),re.return=F,F=re)}return w(F);case ue:e:{for(Se=B.key;j!==null;){if(j.key===Se)if(j.tag===4&&j.stateNode.containerInfo===B.containerInfo&&j.stateNode.implementation===B.implementation){a(F,j.sibling),j=f(j,B.children||[]),j.return=F,F=j;break e}else{a(F,j);break}else s(F,j);j=j.sibling}j=Nd(B,F.mode,re),j.return=F,F=j}return w(F);case fe:return Se=B._init,yt(F,j,Se(B._payload),re)}if(Er(B))return me(F,j,B,re);if(ve(B))return ye(F,j,B,re);Su(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,j!==null&&j.tag===6?(a(F,j.sibling),j=f(j,B),j.return=F,F=j):(a(F,j),j=Rd(B,F.mode,re),j.return=F,F=j),w(F)):a(F,j)}return yt}var fo=lm(!0),um=lm(!1),bu=ss(null),Au=null,po=null,zh=null;function Uh(){zh=po=Au=null}function $h(n){var s=bu.current;st(bu),n._currentValue=s}function qh(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function mo(n,s){Au=n,zh=po=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(ln=!0),n.firstContext=null)}function Rn(n){var s=n._currentValue;if(zh!==n)if(n={context:n,memoizedValue:s,next:null},po===null){if(Au===null)throw Error(t(308));po=n,Au.dependencies={lanes:0,firstContext:n}}else po=po.next=n;return s}var Ys=null;function Kh(n){Ys===null?Ys=[n]:Ys.push(n)}function cm(n,s,a,h){var f=s.interleaved;return f===null?(a.next=a,Kh(s)):(a.next=f.next,f.next=a),s.interleaved=a,jr(n,h)}function jr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var as=!1;function Wh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Or(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ls(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(We&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,jr(n,a)}return f=h.interleaved,f===null?(s.next=s,Kh(h)):(s.next=f.next,f.next=s),h.interleaved=s,jr(n,a)}function Cu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Yr(n,a)}}function dm(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Pu(n,s,a,h){var f=n.updateQueue;as=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var N=P,U=N.next;N.next=null,w===null?g=U:w.next=U,w=N;var J=n.alternate;J!==null&&(J=J.updateQueue,P=J.lastBaseUpdate,P!==w&&(P===null?J.firstBaseUpdate=U:P.next=U,J.lastBaseUpdate=N))}if(g!==null){var ee=f.baseState;w=0,J=U=N=null,P=g;do{var X=P.lane,ce=P.eventTime;if((h&X)===X){J!==null&&(J=J.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var me=n,ye=P;switch(X=s,ce=a,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){ee=me.call(ce,ee,X);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,X=typeof me=="function"?me.call(ce,ee,X):me,X==null)break e;ee=ae({},ee,X);break e;case 2:as=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,X=f.effects,X===null?f.effects=[P]:X.push(P))}else ce={eventTime:ce,lane:X,tag:P.tag,payload:P.payload,callback:P.callback,next:null},J===null?(U=J=ce,N=ee):J=J.next=ce,w|=X;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;X=P,P=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(J===null&&(N=ee),f.baseState=N,f.firstBaseUpdate=U,f.lastBaseUpdate=J,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ei|=w,n.lanes=w,n.memoizedState=ee}}function fm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var La={},cr=ss(La),Fa=ss(La),Ba=ss(La);function Js(n){if(n===La)throw Error(t(174));return n}function Hh(n,s){switch(nt(Ba,s),nt(Fa,n),nt(cr,La),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:It(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=It(s,n)}st(cr),nt(cr,s)}function go(){st(cr),st(Fa),st(Ba)}function pm(n){Js(Ba.current);var s=Js(cr.current),a=It(s,n.type);s!==a&&(nt(Fa,n),nt(cr,a))}function Gh(n){Fa.current===n&&(st(cr),st(Fa))}var ut=ss(0);function ku(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qh=[];function Xh(){for(var n=0;n<Qh.length;n++)Qh[n]._workInProgressVersionPrimary=null;Qh.length=0}var Ru=ne.ReactCurrentDispatcher,Yh=ne.ReactCurrentBatchConfig,Zs=0,ct=null,bt=null,Rt=null,Nu=!1,za=!1,Ua=0,zw=0;function qt(){throw Error(t(321))}function Jh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Qn(n[a],s[a]))return!1;return!0}function Zh(n,s,a,h,f,g){if(Zs=g,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ru.current=n===null||n.memoizedState===null?Kw:Ww,n=a(h,f),za){g=0;do{if(za=!1,Ua=0,25<=g)throw Error(t(301));g+=1,Rt=bt=null,s.updateQueue=null,Ru.current=Hw,n=a(h,f)}while(za)}if(Ru.current=ju,s=bt!==null&&bt.next!==null,Zs=0,Rt=bt=ct=null,Nu=!1,s)throw Error(t(300));return n}function ed(){var n=Ua!==0;return Ua=0,n}function hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ct.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Nn(){if(bt===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=Rt===null?ct.memoizedState:Rt.next;if(s!==null)Rt=s,bt=n;else{if(n===null)throw Error(t(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Rt===null?ct.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function $a(n,s){return typeof s=="function"?s(n):s}function td(n){var s=Nn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=bt,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var P=w=null,N=null,U=g;do{var J=U.lane;if((Zs&J)===J)N!==null&&(N=N.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),h=U.hasEagerState?U.eagerState:n(h,U.action);else{var ee={lane:J,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};N===null?(P=N=ee,w=h):N=N.next=ee,ct.lanes|=J,ei|=J}U=U.next}while(U!==null&&U!==g);N===null?w=h:N.next=P,Qn(h,s.memoizedState)||(ln=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=N,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do g=f.lane,ct.lanes|=g,ei|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function nd(n){var s=Nn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);Qn(g,s.memoizedState)||(ln=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function mm(){}function gm(n,s){var a=ct,h=Nn(),f=s(),g=!Qn(h.memoizedState,f);if(g&&(h.memoizedState=f,ln=!0),h=h.queue,rd(_m.bind(null,a,h,n),[n]),h.getSnapshot!==s||g||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,qa(9,vm.bind(null,a,h,f,s),void 0,null),Nt===null)throw Error(t(349));(Zs&30)!==0||ym(a,s,f)}return f}function ym(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function vm(n,s,a,h){s.value=a,s.getSnapshot=h,wm(s)&&xm(n)}function _m(n,s,a){return a(function(){wm(s)&&xm(n)})}function wm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Qn(n,a)}catch(h){return!0}}function xm(n){var s=jr(n,1);s!==null&&er(s,n,1,-1)}function Em(n){var s=hr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:n},s.queue=n,n=n.dispatch=qw.bind(null,ct,n),[s.memoizedState,n]}function qa(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function Tm(){return Nn().memoizedState}function Du(n,s,a,h){var f=hr();ct.flags|=n,f.memoizedState=qa(1|s,a,void 0,h===void 0?null:h)}function Vu(n,s,a,h){var f=Nn();h=h===void 0?null:h;var g=void 0;if(bt!==null){var w=bt.memoizedState;if(g=w.destroy,h!==null&&Jh(h,w.deps)){f.memoizedState=qa(s,a,g,h);return}}ct.flags|=n,f.memoizedState=qa(1|s,a,g,h)}function Im(n,s){return Du(8390656,8,n,s)}function rd(n,s){return Vu(2048,8,n,s)}function Sm(n,s){return Vu(4,2,n,s)}function bm(n,s){return Vu(4,4,n,s)}function Am(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cm(n,s,a){return a=a!=null?a.concat([n]):null,Vu(4,4,Am.bind(null,s,n),a)}function sd(){}function Pm(n,s){var a=Nn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Jh(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function km(n,s){var a=Nn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Jh(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Rm(n,s,a){return(Zs&21)===0?(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=a):(Qn(a,s)||(a=Us(),ct.lanes|=a,ei|=a,n.baseState=!0),s)}function Uw(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var h=Yh.transition;Yh.transition={};try{n(!1),s()}finally{Me=a,Yh.transition=h}}function Nm(){return Nn().memoizedState}function $w(n,s,a){var h=ds(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Dm(n))Vm(s,a);else if(a=cm(n,s,a,h),a!==null){var f=en();er(a,n,h,f),jm(a,s,h)}}function qw(n,s,a){var h=ds(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dm(n))Vm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,a);if(f.hasEagerState=!0,f.eagerState=P,Qn(P,w)){var N=s.interleaved;N===null?(f.next=f,Kh(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch(U){}finally{}a=cm(n,s,f,h),a!==null&&(f=en(),er(a,n,h,f),jm(a,s,h))}}function Dm(n){var s=n.alternate;return n===ct||s!==null&&s===ct}function Vm(n,s){za=Nu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function jm(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Yr(n,a)}}var ju={readContext:Rn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Kw={readContext:Rn,useCallback:function(n,s){return hr().memoizedState=[n,s===void 0?null:s],n},useContext:Rn,useEffect:Im,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Du(4194308,4,Am.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Du(4194308,4,n,s)},useInsertionEffect:function(n,s){return Du(4,2,n,s)},useMemo:function(n,s){var a=hr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=hr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=$w.bind(null,ct,n),[h.memoizedState,n]},useRef:function(n){var s=hr();return n={current:n},s.memoizedState=n},useState:Em,useDebugValue:sd,useDeferredValue:function(n){return hr().memoizedState=n},useTransition:function(){var n=Em(!1),s=n[0];return n=Uw.bind(null,n[1]),hr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=ct,f=hr();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Nt===null)throw Error(t(349));(Zs&30)!==0||ym(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Im(_m.bind(null,h,g,n),[n]),h.flags|=2048,qa(9,vm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var n=hr(),s=Nt.identifierPrefix;if(ot){var a=Vr,h=Dr;a=(h&~(1<<32-Yt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ua++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=zw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ww={readContext:Rn,useCallback:Pm,useContext:Rn,useEffect:rd,useImperativeHandle:Cm,useInsertionEffect:Sm,useLayoutEffect:bm,useMemo:km,useReducer:td,useRef:Tm,useState:function(){return td($a)},useDebugValue:sd,useDeferredValue:function(n){var s=Nn();return Rm(s,bt.memoizedState,n)},useTransition:function(){var n=td($a)[0],s=Nn().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Nm,unstable_isNewReconciler:!1},Hw={readContext:Rn,useCallback:Pm,useContext:Rn,useEffect:rd,useImperativeHandle:Cm,useInsertionEffect:Sm,useLayoutEffect:bm,useMemo:km,useReducer:nd,useRef:Tm,useState:function(){return nd($a)},useDebugValue:sd,useDeferredValue:function(n){var s=Nn();return bt===null?s.memoizedState=n:Rm(s,bt.memoizedState,n)},useTransition:function(){var n=nd($a)[0],s=Nn().memoizedState;return[n,s]},useMutableSource:mm,useSyncExternalStore:gm,useId:Nm,unstable_isNewReconciler:!1};function Yn(n,s){if(n&&n.defaultProps){s=ae({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function id(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:ae({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ou={isMounted:function(n){return(n=n._reactInternals)?Un(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=en(),f=ds(n),g=Or(h,f);g.payload=s,a!=null&&(g.callback=a),s=ls(n,g,f),s!==null&&(er(s,n,f,h),Cu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=en(),f=ds(n),g=Or(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ls(n,g,f),s!==null&&(er(s,n,f,h),Cu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=en(),h=ds(n),f=Or(a,h);f.tag=2,s!=null&&(f.callback=s),s=ls(n,f,h),s!==null&&(er(s,n,h,a),Cu(s,n,h))}};function Om(n,s,a,h,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!ka(a,h)||!ka(f,g):!0}function Mm(n,s,a){var h=!1,f=is,g=s.contextType;return typeof g=="object"&&g!==null?g=Rn(g):(f=an(s)?Gs:$t.current,h=s.contextTypes,g=(h=h!=null)?lo(n,f):is),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ou,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Lm(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Ou.enqueueReplaceState(s,s.state,null)}function od(n,s,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Wh(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Rn(g):(g=an(s)?Gs:$t.current,f.context=lo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(id(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ou.enqueueReplaceState(f,f.state,null),Pu(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function yo(n,s){try{var a="",h=s;do a+=De(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function ad(n,s,a){return{value:n,source:null,stack:a!=null?a:null,digest:s!=null?s:null}}function ld(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Gw=typeof WeakMap=="function"?WeakMap:Map;function Fm(n,s,a){a=Or(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){$u||($u=!0,Td=h),ld(n,s)},a}function Bm(n,s,a){a=Or(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){ld(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){ld(n,s),typeof h!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function zm(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Gw;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),n=lx.bind(null,n,s,a),s.then(n,n))}function Um(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function $m(n,s,a,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Or(-1,1),s.tag=2,ls(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Qw=ne.ReactCurrentOwner,ln=!1;function Zt(n,s,a,h){s.child=n===null?um(s,null,a,h):fo(s,n.child,a,h)}function qm(n,s,a,h,f){a=a.render;var g=s.ref;return mo(s,f),h=Zh(n,s,a,h,g,f),a=ed(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Mr(n,s,f)):(ot&&a&&Oh(s),s.flags|=1,Zt(n,s,h,f),s.child)}function Km(n,s,a,h,f){if(n===null){var g=a.type;return typeof g=="function"&&!kd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Wm(n,s,g,h,f)):(n=Qu(a.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ka,a(w,h)&&n.ref===s.ref)return Mr(n,s,f)}return s.flags|=1,n=ps(g,h),n.ref=s.ref,n.return=s,s.child=n}function Wm(n,s,a,h,f){if(n!==null){var g=n.memoizedProps;if(ka(g,h)&&n.ref===s.ref)if(ln=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(ln=!0);else return s.lanes=n.lanes,Mr(n,s,f)}return ud(n,s,a,h,f)}function Hm(n,s,a){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(_o,_n),_n|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,nt(_o,_n),_n|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,nt(_o,_n),_n|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,nt(_o,_n),_n|=h;return Zt(n,s,f,a),s.child}function Gm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function ud(n,s,a,h,f){var g=an(a)?Gs:$t.current;return g=lo(s,g),mo(s,f),a=Zh(n,s,a,h,g,f),h=ed(),n!==null&&!ln?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Mr(n,s,f)):(ot&&h&&Oh(s),s.flags|=1,Zt(n,s,a,f),s.child)}function Qm(n,s,a,h,f){if(an(a)){var g=!0;wu(s)}else g=!1;if(mo(s,f),s.stateNode===null)Lu(n,s),Mm(s,a,h),od(s,a,h,f),h=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var N=w.context,U=a.contextType;typeof U=="object"&&U!==null?U=Rn(U):(U=an(a)?Gs:$t.current,U=lo(s,U));var J=a.getDerivedStateFromProps,ee=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||N!==U)&&Lm(s,w,h,U),as=!1;var X=s.memoizedState;w.state=X,Pu(s,h,w,f),N=s.memoizedState,P!==h||X!==N||on.current||as?(typeof J=="function"&&(id(s,a,J,h),N=s.memoizedState),(P=as||Om(s,a,P,h,X,N,U))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=N),w.props=h,w.state=N,w.context=U,h=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,hm(n,s),P=s.memoizedProps,U=s.type===s.elementType?P:Yn(s.type,P),w.props=U,ee=s.pendingProps,X=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Rn(N):(N=an(a)?Gs:$t.current,N=lo(s,N));var ce=a.getDerivedStateFromProps;(J=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==ee||X!==N)&&Lm(s,w,h,N),as=!1,X=s.memoizedState,w.state=X,Pu(s,h,w,f);var me=s.memoizedState;P!==ee||X!==me||on.current||as?(typeof ce=="function"&&(id(s,a,ce,h),me=s.memoizedState),(U=as||Om(s,a,U,h,X,me,N)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,me,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,me,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=me),w.props=h,w.state=me,w.context=N,h=U):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),h=!1)}return cd(n,s,a,h,g,f)}function cd(n,s,a,h,f,g){Gm(n,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&em(s,a,!1),Mr(n,s,g);h=s.stateNode,Qw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&w?(s.child=fo(s,n.child,null,g),s.child=fo(s,null,P,g)):Zt(n,s,P,g),s.memoizedState=h.state,f&&em(s,a,!0),s.child}function Xm(n){var s=n.stateNode;s.pendingContext?Jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Jp(n,s.context,!1),Hh(n,s.containerInfo)}function Ym(n,s,a,h,f){return ho(),Bh(f),s.flags|=256,Zt(n,s,a,h),s.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function dd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,s,a){var h=s.pendingProps,f=ut.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),nt(ut,f&1),n===null)return Fh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,n=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Xu(w,h,0,null),n=si(n,h,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=dd(a),s.memoizedState=hd,n):fd(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return Xw(n,s,w,h,P,f,a);if(g){g=h.fallback,w=s.mode,f=n.child,P=f.sibling;var N={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=N,s.deletions=null):(h=ps(f,N),h.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=ps(P,g):(g=si(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=n.child.memoizedState,w=w===null?dd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=hd,h}return g=n.child,n=g.sibling,h=ps(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function fd(n,s){return s=Xu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Mu(n,s,a,h){return h!==null&&Bh(h),fo(s,n.child,null,a),n=fd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Xw(n,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=ad(Error(t(422))),Mu(n,s,w,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Xu({mode:"visible",children:h.children},f,0,null),g=si(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&fo(s,n.child,null,w),s.child.memoizedState=dd(w),s.memoizedState=hd,g);if((s.mode&1)===0)return Mu(n,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var P=h.dgst;return h=P,g=Error(t(419)),h=ad(g,h,void 0),Mu(n,s,w,h)}if(P=(w&n.childLanes)!==0,ln||P){if(h=Nt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,jr(n,f),er(h,n,f,-1))}return Pd(),h=ad(Error(t(421))),Mu(n,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ux.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,vn=rs(f.nextSibling),yn=s,ot=!0,Xn=null,n!==null&&(Pn[kn++]=Dr,Pn[kn++]=Vr,Pn[kn++]=Qs,Dr=n.id,Vr=n.overflow,Qs=s),s=fd(s,h.children),s.flags|=4096,s)}function Zm(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),qh(n.return,s,a)}function pd(n,s,a,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function eg(n,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Zt(n,s,h.children,a),h=ut.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zm(n,a,s);else if(n.tag===19)Zm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(nt(ut,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&ku(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),pd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&ku(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}pd(s,!0,a,null,g);break;case"together":pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Lu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Mr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ei|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ps(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ps(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Yw(n,s,a){switch(s.tag){case 3:Xm(s),ho();break;case 5:pm(s);break;case 1:an(s.type)&&wu(s);break;case 4:Hh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;nt(bu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(nt(ut,ut.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(n,s,a):(nt(ut,ut.current&1),n=Mr(n,s,a),n!==null?n.sibling:null);nt(ut,ut.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return eg(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),nt(ut,ut.current),h)break;return null;case 22:case 23:return s.lanes=0,Hm(n,s,a)}return Mr(n,s,a)}var tg,md,ng,rg;tg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},md=function(){},ng=function(n,s,a,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,Js(cr.current);var g=null;switch(a){case"input":f=Xt(n,f),h=Xt(n,h),g=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),g=[];break;case"textarea":f=ia(n,f),h=ia(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=yu)}ha(a,h);var w;a=null;for(U in f)if(!h.hasOwnProperty(U)&&f.hasOwnProperty(U)&&f[U]!=null)if(U==="style"){var P=f[U];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?g||(g=[]):(g=g||[]).push(U,null));for(U in h){var N=h[U];if(P=f!=null?f[U]:void 0,h.hasOwnProperty(U)&&N!==P&&(N!=null||P!=null))if(U==="style")if(P){for(w in P)!P.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&P[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push(U,a)),a=N;else U==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(g=g||[]).push(U,N)):U==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(U,""+N):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(N!=null&&U==="onScroll"&&rt("scroll",n),g||P===N||(g=[])):(g=g||[]).push(U,N))}a&&(g=g||[]).push("style",a);var U=g;(s.updateQueue=U)&&(s.flags|=4)}},rg=function(n,s,a,h){a!==h&&(s.flags|=4)};function Ka(n,s){if(!ot)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function Jw(n,s,a){var h=s.pendingProps;switch(Mh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return an(s.type)&&_u(),Kt(s),null;case 3:return h=s.stateNode,go(),st(on),st($t),Xh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Iu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xn!==null&&(bd(Xn),Xn=null))),md(n,s),Kt(s),null;case 5:Gh(s);var f=Js(Ba.current);if(a=s.type,n!==null&&s.stateNode!=null)ng(n,s,a,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(n=Js(cr.current),Iu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[ur]=s,h[ja]=g,n=(s.mode&1)!==0,a){case"dialog":rt("cancel",h),rt("close",h);break;case"iframe":case"object":case"embed":rt("load",h);break;case"video":case"audio":for(f=0;f<Na.length;f++)rt(Na[f],h);break;case"source":rt("error",h);break;case"img":case"image":case"link":rt("error",h),rt("load",h);break;case"details":rt("toggle",h);break;case"input":Ut(h,g),rt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},rt("invalid",h);break;case"textarea":Ni(h,g),rt("invalid",h)}ha(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?h.textContent!==P&&(g.suppressHydrationWarning!==!0&&gu(h.textContent,P,n),f=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&gu(h.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&rt("scroll",h)}switch(a){case"input":Te(h),ki(h,g,!0);break;case"textarea":Te(h),oa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=yu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Tt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(a,{is:h.is}):(n=w.createElement(a),a==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,a),n[ur]=s,n[ja]=h,tg(n,s,!1,!1),s.stateNode=n;e:{switch(w=da(a,h),a){case"dialog":rt("cancel",n),rt("close",n),f=h;break;case"iframe":case"object":case"embed":rt("load",n),f=h;break;case"video":case"audio":for(f=0;f<Na.length;f++)rt(Na[f],n);f=h;break;case"source":rt("error",n),f=h;break;case"img":case"image":case"link":rt("error",n),rt("load",n),f=h;break;case"details":rt("toggle",n),f=h;break;case"input":Ut(n,h),f=Xt(n,h),rt("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),rt("invalid",n);break;case"textarea":Ni(n,h),f=ia(n,h),rt("invalid",n);break;default:f=h}ha(a,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var N=P[g];g==="style"?ua(n,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&aa(n,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Wr(n,N):typeof N=="number"&&Wr(n,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&rt("scroll",n):N!=null&&Q(n,g,N,w))}switch(a){case"input":Te(n),ki(n,h,!1);break;case"textarea":Te(n),oa(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ke(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?Tr(n,!!h.multiple,g,!1):h.defaultValue!=null&&Tr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=yu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(n&&s.stateNode!=null)rg(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Js(Ba.current),Js(cr.current),Iu(s)){if(h=s.stateNode,a=s.memoizedProps,h[ur]=s,(g=h.nodeValue!==a)&&(n=yn,n!==null))switch(n.tag){case 3:gu(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gu(h.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[ur]=s,s.stateNode=h}return Kt(s),null;case 13:if(st(ut),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ot&&vn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)om(),ho(),s.flags|=98560,g=!1;else if(g=Iu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ur]=s}else ho(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),g=!1}else Xn!==null&&(bd(Xn),Xn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ut.current&1)!==0?At===0&&(At=3):Pd())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return go(),md(n,s),n===null&&Da(s.stateNode.containerInfo),Kt(s),null;case 10:return $h(s.type._context),Kt(s),null;case 17:return an(s.type)&&_u(),Kt(s),null;case 19:if(st(ut),g=s.memoizedState,g===null)return Kt(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Ka(g,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=ku(n),w!==null){for(s.flags|=128,Ka(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nt(ut,ut.current&1|2),s.child}n=n.sibling}g.tail!==null&&tt()>wo&&(s.flags|=128,h=!0,Ka(g,!1),s.lanes=4194304)}else{if(!h)if(n=ku(w),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ka(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ot)return Kt(s),null}else 2*tt()-g.renderingStartTime>wo&&a!==1073741824&&(s.flags|=128,h=!0,Ka(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=tt(),s.sibling=null,a=ut.current,nt(ut,h?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return Cd(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Zw(n,s){switch(Mh(s),s.tag){case 1:return an(s.type)&&_u(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return go(),st(on),st($t),Xh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Gh(s),null;case 13:if(st(ut),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ho()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return st(ut),null;case 4:return go(),null;case 10:return $h(s.type._context),null;case 22:case 23:return Cd(),null;case 24:return null;default:return null}}var Fu=!1,Wt=!1,ex=typeof WeakSet=="function"?WeakSet:Set,pe=null;function vo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ft(n,s,h)}else a.current=null}function gd(n,s,a){try{a()}catch(h){ft(n,s,h)}}var sg=!1;function tx(n,s){if(Ch=es,n=Op(),wh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch(re){a=null;break e}var w=0,P=-1,N=-1,U=0,J=0,ee=n,X=null;t:for(;;){for(var ce;ee!==a||f!==0&&ee.nodeType!==3||(P=w+f),ee!==g||h!==0&&ee.nodeType!==3||(N=w+h),ee.nodeType===3&&(w+=ee.nodeValue.length),(ce=ee.firstChild)!==null;)X=ee,ee=ce;for(;;){if(ee===n)break t;if(X===a&&++U===f&&(P=w),X===g&&++J===h&&(N=w),(ce=ee.nextSibling)!==null)break;ee=X,X=ee.parentNode}ee=ce}a=P===-1||N===-1?null:{start:P,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ph={focusedElem:n,selectionRange:a},es=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,yt=me.memoizedState,F=s.stateNode,j=F.getSnapshotBeforeUpdate(s.elementType===s.type?ye:Yn(s.type,ye),yt);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ft(s,s.return,re)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return me=sg,sg=!1,me}function Wa(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&gd(s,a,g)}f=f.next}while(f!==h)}}function Bu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function yd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ig(n){var s=n.alternate;s!==null&&(n.alternate=null,ig(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[ur],delete s[ja],delete s[Dh],delete s[Mw],delete s[Lw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function og(n){return n.tag===5||n.tag===3||n.tag===4}function ag(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yu));else if(h!==4&&(n=n.child,n!==null))for(vd(n,s,a),n=n.sibling;n!==null;)vd(n,s,a),n=n.sibling}function _d(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(_d(n,s,a),n=n.sibling;n!==null;)_d(n,s,a),n=n.sibling}var Mt=null,Jn=!1;function us(n,s,a){for(a=a.child;a!==null;)lg(n,s,a),a=a.sibling}function lg(n,s,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Bs,a)}catch(P){}switch(a.tag){case 5:Wt||vo(a,s);case 6:var h=Mt,f=Jn;Mt=null,us(n,s,a),Mt=h,Jn=f,Mt!==null&&(Jn?(n=Mt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Mt.removeChild(a.stateNode));break;case 18:Mt!==null&&(Jn?(n=Mt,a=a.stateNode,n.nodeType===8?Nh(n.parentNode,a):n.nodeType===1&&Nh(n,a),Hn(n)):Nh(Mt,a.stateNode));break;case 4:h=Mt,f=Jn,Mt=a.stateNode.containerInfo,Jn=!0,us(n,s,a),Mt=h,Jn=f;break;case 0:case 11:case 14:case 15:if(!Wt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&gd(a,s,w),f=f.next}while(f!==h)}us(n,s,a);break;case 1:if(!Wt&&(vo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){ft(a,s,P)}us(n,s,a);break;case 21:us(n,s,a);break;case 22:a.mode&1?(Wt=(h=Wt)||a.memoizedState!==null,us(n,s,a),Wt=h):us(n,s,a);break;default:us(n,s,a)}}function ug(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ex),s.forEach(function(h){var f=cx.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Zn(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:Mt=P.stateNode,Jn=!1;break e;case 3:Mt=P.stateNode.containerInfo,Jn=!0;break e;case 4:Mt=P.stateNode.containerInfo,Jn=!0;break e}P=P.return}if(Mt===null)throw Error(t(160));lg(g,w,f),Mt=null,Jn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(U){ft(f,s,U)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)cg(s,n),s=s.sibling}function cg(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zn(s,n),dr(n),h&4){try{Wa(3,n,n.return),Bu(3,n)}catch(ye){ft(n,n.return,ye)}try{Wa(5,n,n.return)}catch(ye){ft(n,n.return,ye)}}break;case 1:Zn(s,n),dr(n),h&512&&a!==null&&vo(a,a.return);break;case 5:if(Zn(s,n),dr(n),h&512&&a!==null&&vo(a,a.return),n.flags&32){var f=n.stateNode;try{Wr(f,"")}catch(ye){ft(n,n.return,ye)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,P=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&In(f,g),da(P,w);var U=da(P,g);for(w=0;w<N.length;w+=2){var J=N[w],ee=N[w+1];J==="style"?ua(f,ee):J==="dangerouslySetInnerHTML"?aa(f,ee):J==="children"?Wr(f,ee):Q(f,J,ee,U)}switch(P){case"input":xr(f,g);break;case"textarea":Di(f,g);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ce=g.value;ce!=null?Tr(f,!!g.multiple,ce,!1):X!==!!g.multiple&&(g.defaultValue!=null?Tr(f,!!g.multiple,g.defaultValue,!0):Tr(f,!!g.multiple,g.multiple?[]:"",!1))}f[ja]=g}catch(ye){ft(n,n.return,ye)}}break;case 6:if(Zn(s,n),dr(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ye){ft(n,n.return,ye)}}break;case 3:if(Zn(s,n),dr(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Hn(s.containerInfo)}catch(ye){ft(n,n.return,ye)}break;case 4:Zn(s,n),dr(n);break;case 13:Zn(s,n),dr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Ed=tt())),h&4&&ug(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(Wt=(U=Wt)||J,Zn(s,n),Wt=U):Zn(s,n),dr(n),h&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!J&&(n.mode&1)!==0)for(pe=n,J=n.child;J!==null;){for(ee=pe=J;pe!==null;){switch(X=pe,ce=X.child,X.tag){case 0:case 11:case 14:case 15:Wa(4,X,X.return);break;case 1:vo(X,X.return);var me=X.stateNode;if(typeof me.componentWillUnmount=="function"){h=X,a=X.return;try{s=h,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ye){ft(h,a,ye)}}break;case 5:vo(X,X.return);break;case 22:if(X.memoizedState!==null){fg(ee);continue}}ce!==null?(ce.return=X,pe=ce):fg(ee)}J=J.sibling}e:for(J=null,ee=n;;){if(ee.tag===5){if(J===null){J=ee;try{f=ee.stateNode,U?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=ee.stateNode,N=ee.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=la("display",w))}catch(ye){ft(n,n.return,ye)}}}else if(ee.tag===6){if(J===null)try{ee.stateNode.nodeValue=U?"":ee.memoizedProps}catch(ye){ft(n,n.return,ye)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;J===ee&&(J=null),ee=ee.return}J===ee&&(J=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Zn(s,n),dr(n),h&4&&ug(n);break;case 21:break;default:Zn(s,n),dr(n)}}function dr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(og(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Wr(f,""),h.flags&=-33);var g=ag(n);_d(n,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,P=ag(n);vd(n,P,w);break;default:throw Error(t(161))}}catch(N){ft(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function nx(n,s,a){pe=n,hg(n)}function hg(n,s,a){for(var h=(n.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Fu;if(!w){var P=f.alternate,N=P!==null&&P.memoizedState!==null||Wt;P=Fu;var U=Wt;if(Fu=w,(Wt=N)&&!U)for(pe=f;pe!==null;)w=pe,N=w.child,w.tag===22&&w.memoizedState!==null?pg(f):N!==null?(N.return=w,pe=N):pg(f);for(;g!==null;)pe=g,hg(g),g=g.sibling;pe=f,Fu=P,Wt=U}dg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,pe=g):dg(n)}}function dg(n){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Wt||Bu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Wt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Yn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&fm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}fm(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var U=s.alternate;if(U!==null){var J=U.memoizedState;if(J!==null){var ee=J.dehydrated;ee!==null&&Hn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||s.flags&512&&yd(s)}catch(X){ft(s,s.return,X)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function fg(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function pg(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Bu(4,s)}catch(N){ft(s,a,N)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(N){ft(s,f,N)}}var g=s.return;try{yd(s)}catch(N){ft(s,g,N)}break;case 5:var w=s.return;try{yd(s)}catch(N){ft(s,w,N)}}}catch(N){ft(s,s.return,N)}if(s===n){pe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,pe=P;break}pe=s.return}}var rx=Math.ceil,zu=ne.ReactCurrentDispatcher,wd=ne.ReactCurrentOwner,Dn=ne.ReactCurrentBatchConfig,We=0,Nt=null,_t=null,Lt=0,_n=0,_o=ss(0),At=0,Ha=null,ei=0,Uu=0,xd=0,Ga=null,un=null,Ed=0,wo=1/0,Lr=null,$u=!1,Td=null,cs=null,qu=!1,hs=null,Ku=0,Qa=0,Id=null,Wu=-1,Hu=0;function en(){return(We&6)!==0?tt():Wu!==-1?Wu:Wu=tt()}function ds(n){return(n.mode&1)===0?1:(We&2)!==0&&Lt!==0?Lt&-Lt:Bw.transition!==null?(Hu===0&&(Hu=Us()),Hu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Ta(n.type)),n)}function er(n,s,a,h){if(50<Qa)throw Qa=0,Id=null,Error(t(185));Xr(n,a,h),((We&2)===0||n!==Nt)&&(n===Nt&&((We&2)===0&&(Uu|=a),At===4&&fs(n,Lt)),cn(n,h),a===1&&We===0&&(s.mode&1)===0&&(wo=tt()+500,xu&&os()))}function cn(n,s){var a=n.callbackNode;br(n,s);var h=zs(n,n===Nt?Lt:0);if(h===0)a!==null&&va(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&va(a),s===1)n.tag===0?Fw(gg.bind(null,n)):tm(gg.bind(null,n)),jw(function(){(We&6)===0&&os()}),a=null;else{switch(Jr(h)){case 1:a=Fs;break;case 4:a=Hr;break;case 16:a=bn;break;case 536870912:a=Hl;break;default:a=bn}a=Ig(a,mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function mg(n,s){if(Wu=-1,Hu=0,(We&6)!==0)throw Error(t(327));var a=n.callbackNode;if(xo()&&n.callbackNode!==a)return null;var h=zs(n,n===Nt?Lt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=Gu(n,h);else{s=h;var f=We;We|=2;var g=vg();(Nt!==n||Lt!==s)&&(Lr=null,wo=tt()+500,ni(n,s));do try{ox();break}catch(P){yg(n,P)}while(!0);Uh(),zu.current=g,We=f,_t!==null?s=0:(Nt=null,Lt=0,s=At)}if(s!==0){if(s===2&&(f=pn(n),f!==0&&(h=f,s=Sd(n,f))),s===1)throw a=Ha,ni(n,0),fs(n,h),cn(n,tt()),a;if(s===6)fs(n,h);else{if(f=n.current.alternate,(h&30)===0&&!sx(f)&&(s=Gu(n,h),s===2&&(g=pn(n),g!==0&&(h=g,s=Sd(n,g))),s===1))throw a=Ha,ni(n,0),fs(n,h),cn(n,tt()),a;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ri(n,un,Lr);break;case 3:if(fs(n,h),(h&130023424)===h&&(s=Ed+500-tt(),10<s)){if(zs(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){en(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Rh(ri.bind(null,n,un,Lr),s);break}ri(n,un,Lr);break;case 4:if(fs(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var w=31-Yt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=tt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*rx(h/1960))-h,10<h){n.timeoutHandle=Rh(ri.bind(null,n,un,Lr),h);break}ri(n,un,Lr);break;case 5:ri(n,un,Lr);break;default:throw Error(t(329))}}}return cn(n,tt()),n.callbackNode===a?mg.bind(null,n):null}function Sd(n,s){var a=Ga;return n.current.memoizedState.isDehydrated&&(ni(n,s).flags|=256),n=Gu(n,s),n!==2&&(s=un,un=a,s!==null&&bd(s)),n}function bd(n){un===null?un=n:un.push.apply(un,n)}function sx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Qn(g(),f))return!1}catch(w){return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(n,s){for(s&=~xd,s&=~Uu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Yt(s),h=1<<a;n[a]=-1,s&=~h}}function gg(n){if((We&6)!==0)throw Error(t(327));xo();var s=zs(n,0);if((s&1)===0)return cn(n,tt()),null;var a=Gu(n,s);if(n.tag!==0&&a===2){var h=pn(n);h!==0&&(s=h,a=Sd(n,h))}if(a===1)throw a=Ha,ni(n,0),fs(n,s),cn(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ri(n,un,Lr),cn(n,tt()),null}function Ad(n,s){var a=We;We|=1;try{return n(s)}finally{We=a,We===0&&(wo=tt()+500,xu&&os())}}function ti(n){hs!==null&&hs.tag===0&&(We&6)===0&&xo();var s=We;We|=1;var a=Dn.transition,h=Me;try{if(Dn.transition=null,Me=1,n)return n()}finally{Me=h,Dn.transition=a,We=s,(We&6)===0&&os()}}function Cd(){_n=_o.current,st(_o)}function ni(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Vw(a)),_t!==null)for(a=_t.return;a!==null;){var h=a;switch(Mh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&_u();break;case 3:go(),st(on),st($t),Xh();break;case 5:Gh(h);break;case 4:go();break;case 13:st(ut);break;case 19:st(ut);break;case 10:$h(h.type._context);break;case 22:case 23:Cd()}a=a.return}if(Nt=n,_t=n=ps(n.current,null),Lt=_n=s,At=0,Ha=null,xd=Uu=ei=0,un=Ga=null,Ys!==null){for(s=0;s<Ys.length;s++)if(a=Ys[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Ys=null}return n}function yg(n,s){do{var a=_t;try{if(Uh(),Ru.current=ju,Nu){for(var h=ct.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Nu=!1}if(Zs=0,Rt=bt=ct=null,za=!1,Ua=0,wd.current=null,a===null||a.return===null){At=1,Ha=s,_t=null;break}e:{var g=n,w=a.return,P=a,N=s;if(s=Lt,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var U=N,J=P,ee=J.tag;if((J.mode&1)===0&&(ee===0||ee===11||ee===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var ce=Um(w);if(ce!==null){ce.flags&=-257,$m(ce,w,P,g,s),ce.mode&1&&zm(g,U,s),s=ce,N=U;var me=s.updateQueue;if(me===null){var ye=new Set;ye.add(N),s.updateQueue=ye}else me.add(N);break e}else{if((s&1)===0){zm(g,U,s),Pd();break e}N=Error(t(426))}}else if(ot&&P.mode&1){var yt=Um(w);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),$m(yt,w,P,g,s),Bh(yo(N,P));break e}}g=N=yo(N,P),At!==4&&(At=2),Ga===null?Ga=[g]:Ga.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=Fm(g,N,s);dm(g,F);break e;case 1:P=N;var j=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(cs===null||!cs.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=Bm(g,P,s);dm(g,re);break e}}g=g.return}while(g!==null)}wg(a)}catch(_e){s=_e,_t===a&&a!==null&&(_t=a=a.return);continue}break}while(!0)}function vg(){var n=zu.current;return zu.current=ju,n===null?ju:n}function Pd(){(At===0||At===3||At===2)&&(At=4),Nt===null||(ei&268435455)===0&&(Uu&268435455)===0||fs(Nt,Lt)}function Gu(n,s){var a=We;We|=2;var h=vg();(Nt!==n||Lt!==s)&&(Lr=null,ni(n,s));do try{ix();break}catch(f){yg(n,f)}while(!0);if(Uh(),We=a,zu.current=h,_t!==null)throw Error(t(261));return Nt=null,Lt=0,At}function ix(){for(;_t!==null;)_g(_t)}function ox(){for(;_t!==null&&!Kl();)_g(_t)}function _g(n){var s=Tg(n.alternate,n,_n);n.memoizedProps=n.pendingProps,s===null?wg(n):_t=s,wd.current=null}function wg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Jw(a,s,_n),a!==null){_t=a;return}}else{if(a=Zw(a,s),a!==null){a.flags&=32767,_t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,_t=null;return}}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);At===0&&(At=5)}function ri(n,s,a){var h=Me,f=Dn.transition;try{Dn.transition=null,Me=1,ax(n,s,a,h)}finally{Dn.transition=f,Me=h}return null}function ax(n,s,a,h){do xo();while(hs!==null);if((We&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(et(n,g),n===Nt&&(_t=Nt=null,Lt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||qu||(qu=!0,Ig(bn,function(){return xo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Dn.transition,Dn.transition=null;var w=Me;Me=1;var P=We;We|=4,wd.current=null,tx(n,a),cg(a,n),Aw(Ph),es=!!Ch,Ph=Ch=null,n.current=a,nx(a),dh(),We=P,Me=w,Dn.transition=g}else n.current=a;if(qu&&(qu=!1,hs=n,Ku=f),g=n.pendingLanes,g===0&&(cs=null),Gl(a.stateNode),cn(n,tt()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if($u)throw $u=!1,n=Td,Td=null,n;return(Ku&1)!==0&&n.tag!==0&&xo(),g=n.pendingLanes,(g&1)!==0?n===Id?Qa++:(Qa=0,Id=n):Qa=0,os(),null}function xo(){if(hs!==null){var n=Jr(Ku),s=Dn.transition,a=Me;try{if(Dn.transition=null,Me=16>n?16:n,hs===null)var h=!1;else{if(n=hs,hs=null,Ku=0,(We&6)!==0)throw Error(t(331));var f=We;for(We|=4,pe=n.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var P=g.deletions;if(P!==null){for(var N=0;N<P.length;N++){var U=P[N];for(pe=U;pe!==null;){var J=pe;switch(J.tag){case 0:case 11:case 15:Wa(8,J,g)}var ee=J.child;if(ee!==null)ee.return=J,pe=ee;else for(;pe!==null;){J=pe;var X=J.sibling,ce=J.return;if(ig(J),J===U){pe=null;break}if(X!==null){X.return=ce,pe=X;break}pe=ce}}}var me=g.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var yt=ye.sibling;ye.sibling=null,ye=yt}while(ye!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Wa(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,pe=F;break e}pe=g.return}}var j=n.current;for(pe=j;pe!==null;){w=pe;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,pe=B;else e:for(w=j;pe!==null;){if(P=pe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Bu(9,P)}}catch(_e){ft(P,P.return,_e)}if(P===w){pe=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,pe=re;break e}pe=P.return}}if(We=f,os(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Bs,n)}catch(_e){}h=!0}return h}finally{Me=a,Dn.transition=s}}return!1}function xg(n,s,a){s=yo(a,s),s=Fm(n,s,1),n=ls(n,s,1),s=en(),n!==null&&(Xr(n,1,s),cn(n,s))}function ft(n,s,a){if(n.tag===3)xg(n,n,a);else for(;s!==null;){if(s.tag===3){xg(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))){n=yo(a,n),n=Bm(s,n,1),s=ls(s,n,1),n=en(),s!==null&&(Xr(s,1,n),cn(s,n));break}}s=s.return}}function lx(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=en(),n.pingedLanes|=n.suspendedLanes&a,Nt===n&&(Lt&a)===a&&(At===4||At===3&&(Lt&130023424)===Lt&&500>tt()-Ed?ni(n,0):xd|=a),cn(n,s)}function Eg(n,s){s===0&&((n.mode&1)===0?s=1:(s=$i,$i<<=1,($i&130023424)===0&&($i=4194304)));var a=en();n=jr(n,s),n!==null&&(Xr(n,s,a),cn(n,a))}function ux(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Eg(n,a)}function cx(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Eg(n,a)}var Tg;Tg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return ln=!1,Yw(n,s,a);ln=(n.flags&131072)!==0}else ln=!1,ot&&(s.flags&1048576)!==0&&nm(s,Tu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Lu(n,s),n=s.pendingProps;var f=lo(s,$t.current);mo(s,a),f=Zh(null,s,h,n,f,a);var g=ed();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(h)?(g=!0,wu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Wh(s),f.updater=Ou,s.stateNode=f,f._reactInternals=s,od(s,h,n,a),s=cd(null,s,h,!0,g,a)):(s.tag=0,ot&&g&&Oh(s),Zt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Lu(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=dx(h),n=Yn(h,n),f){case 0:s=ud(null,s,h,n,a);break e;case 1:s=Qm(null,s,h,n,a);break e;case 11:s=qm(null,s,h,n,a);break e;case 14:s=Km(null,s,h,Yn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),ud(n,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),Qm(n,s,h,f,a);case 3:e:{if(Xm(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,hm(n,s),Pu(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=yo(Error(t(423)),s),s=Ym(n,s,h,a,f);break e}else if(h!==f){f=yo(Error(t(424)),s),s=Ym(n,s,h,a,f);break e}else for(vn=rs(s.stateNode.containerInfo.firstChild),yn=s,ot=!0,Xn=null,a=um(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ho(),h===f){s=Mr(n,s,a);break e}Zt(n,s,h,a)}s=s.child}return s;case 5:return pm(s),n===null&&Fh(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,kh(h,f)?w=null:g!==null&&kh(h,g)&&(s.flags|=32),Gm(n,s),Zt(n,s,w,a),s.child;case 6:return n===null&&Fh(s),null;case 13:return Jm(n,s,a);case 4:return Hh(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=fo(s,null,h,a):Zt(n,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),qm(n,s,h,f,a);case 7:return Zt(n,s,s.pendingProps,a),s.child;case 8:return Zt(n,s,s.pendingProps.children,a),s.child;case 12:return Zt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,nt(bu,h._currentValue),h._currentValue=w,g!==null)if(Qn(g.value,w)){if(g.children===f.children&&!on.current){s=Mr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var N=P.firstContext;N!==null;){if(N.context===h){if(g.tag===1){N=Or(-1,a&-a),N.tag=2;var U=g.updateQueue;if(U!==null){U=U.shared;var J=U.pending;J===null?N.next=N:(N.next=J.next,J.next=N),U.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),qh(g.return,a,s),P.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),qh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Zt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,mo(s,a),f=Rn(f),h=h(f),s.flags|=1,Zt(n,s,h,a),s.child;case 14:return h=s.type,f=Yn(h,s.pendingProps),f=Yn(h.type,f),Km(n,s,h,f,a);case 15:return Wm(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Yn(h,f),Lu(n,s),s.tag=1,an(h)?(n=!0,wu(s)):n=!1,mo(s,a),Mm(s,h,f),od(s,h,f,a),cd(null,s,h,!0,n,a);case 19:return eg(n,s,a);case 22:return Hm(n,s,a)}throw Error(t(156,s.tag))};function Ig(n,s){return zi(n,s)}function hx(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,a,h){return new hx(n,s,a,h)}function kd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dx(n){if(typeof n=="function")return kd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===Ne)return 14}return 2}function ps(n,s){var a=n.alternate;return a===null?(a=Vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Qu(n,s,a,h,f,g){var w=2;if(h=n,typeof n=="function")kd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return si(a.children,f,g,s);case E:w=8,f|=8;break;case A:return n=Vn(12,a,s,f|2),n.elementType=A,n.lanes=g,n;case b:return n=Vn(13,a,s,f),n.elementType=b,n.lanes=g,n;case Ee:return n=Vn(19,a,s,f),n.elementType=Ee,n.lanes=g,n;case Re:return Xu(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:w=10;break e;case k:w=9;break e;case D:w=11;break e;case Ne:w=14;break e;case fe:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Vn(w,a,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function si(n,s,a,h){return n=Vn(7,n,h,s),n.lanes=a,n}function Xu(n,s,a,h){return n=Vn(22,n,h,s),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function Rd(n,s,a){return n=Vn(6,n,null,s),n.lanes=a,n}function Nd(n,s,a){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function fx(n,s,a,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qr(0),this.expirationTimes=Qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Dd(n,s,a,h,f,g,w,P,N){return n=new fx(n,s,a,P,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Vn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(g),n}function px(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function Sg(n){if(!n)return is;n=n._reactInternals;e:{if(Un(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(an(a))return Zp(n,a,s)}return s}function bg(n,s,a,h,f,g,w,P,N){return n=Dd(a,h,!0,n,f,g,w,P,N),n.context=Sg(null),a=n.current,h=en(),f=ds(a),g=Or(h,f),g.callback=s!=null?s:null,ls(a,g,f),n.current.lanes=f,Xr(n,f,h),cn(n,h),n}function Yu(n,s,a,h){var f=s.current,g=en(),w=ds(f);return a=Sg(a),s.context===null?s.context=a:s.pendingContext=a,s=Or(g,w),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ls(f,s,w),n!==null&&(er(n,f,w,g),Cu(n,f,w)),w}function Ju(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ag(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Vd(n,s){Ag(n,s),(n=n.alternate)&&Ag(n,s)}function mx(){return null}var Cg=typeof reportError=="function"?reportError:function(n){console.error(n)};function jd(n){this._internalRoot=n}Zu.prototype.render=jd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Yu(n,s,null,null)},Zu.prototype.unmount=jd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ti(function(){Yu(null,n,null,null)}),s[Rr]=null}};function Zu(n){this._internalRoot=n}Zu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<ir.length&&s!==0&&s<ir[a].priority;a++);ir.splice(a,0,n),a===0&&nu(n)}};function Od(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ec(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function gx(n,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var U=Ju(w);g.call(U)}}var w=bg(s,h,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=w,n[Rr]=w.current,Da(n.nodeType===8?n.parentNode:n),ti(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var P=h;h=function(){var U=Ju(N);P.call(U)}}var N=Dd(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=N,n[Rr]=N.current,Da(n.nodeType===8?n.parentNode:n),ti(function(){Yu(s,N,a,h)}),N}function tc(n,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var P=f;f=function(){var N=Ju(w);P.call(N)}}Yu(s,w,n,f)}else w=gx(a,s,n,f,h);return Ju(w)}Yl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Gr(s.pendingLanes);a!==0&&(Yr(s,a|1),cn(s,tt()),(We&6)===0&&(wo=tt()+500,os()))}break;case 13:ti(function(){var h=jr(n,1);if(h!==null){var f=en();er(h,n,1,f)}}),Vd(n,1)}},qi=function(n){if(n.tag===13){var s=jr(n,134217728);if(s!==null){var a=en();er(s,n,134217728,a)}Vd(n,134217728)}},Jl=function(n){if(n.tag===13){var s=ds(n),a=jr(n,s);if(a!==null){var h=en();er(a,n,s,h)}Vd(n,s)}},Zl=function(){return Me},eu=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},ji=function(n,s,a){switch(s){case"input":if(xr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var f=vu(h);if(!f)throw Error(t(90));Be(h),xr(h,f)}}}break;case"textarea":Di(n,a);break;case"select":s=a.value,s!=null&&Tr(n,!!a.multiple,s,!1)}},js=Ad,pa=ti;var yx={usingClientEntryPoint:!1,Events:[Oa,oo,vu,rr,fa,Ad]},Xa={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vx={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ya(n),n===null?null:n.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{Bs=nc.inject(vx),fn=nc}catch(n){}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yx,hn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(s))throw Error(t(200));return px(n,s,null,a)},hn.createRoot=function(n,s){if(!Od(n))throw Error(t(299));var a=!1,h="",f=Cg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Dd(n,1,!1,null,null,a,!1,h,f),n[Rr]=s.current,Da(n.nodeType===8?n.parentNode:n),new jd(s)},hn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ya(s),n=n===null?null:n.stateNode,n},hn.flushSync=function(n){return ti(n)},hn.hydrate=function(n,s,a){if(!ec(s))throw Error(t(200));return tc(null,n,s,!0,a)},hn.hydrateRoot=function(n,s,a){if(!Od(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=Cg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=bg(s,null,n,1,a!=null?a:null,f,!1,g,w),n[Rr]=s.current,Da(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Zu(s)},hn.render=function(n,s,a){if(!ec(s))throw Error(t(200));return tc(null,n,s,!1,a)},hn.unmountComponentAtNode=function(n){if(!ec(n))throw Error(t(40));return n._reactRootContainer?(ti(function(){tc(null,null,n,!1,function(){n._reactRootContainer=null,n[Rr]=null})}),!0):!1},hn.unstable_batchedUpdates=Ad,hn.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!ec(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return tc(n,s,a,!1,h)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var Ug;function Cv(){if(Ug)return zd.exports;Ug=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zd.exports=Nx(),zd.exports}var $g;function Dx(){if($g)return sc;$g=1;var i=Cv();return sc.createRoot=i.createRoot,sc.hydrateRoot=i.hydrateRoot,sc}var Vx=Dx();const jx=Av(Vx),Ox={primary:"bg-accent-blue hover:bg-blue-600 text-white shadow-glow-blue/30",secondary:"bg-bg-hover hover:bg-border text-white border border-border",danger:"bg-accent-red hover:bg-red-600 text-white",success:"bg-accent-green hover:bg-green-600 text-white",ghost:"bg-transparent hover:bg-bg-hover text-gray-400 hover:text-white"},Mx={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},zt=d=>{var p=d,{variant:i="primary",size:e="md",isLoading:t=!1,disabled:r,className:o="",children:l}=p,c=Ld(p,["variant","size","isLoading","disabled","className","children"]);return y.jsxs("button",jn(ht({className:`
        inline-flex items-center justify-center gap-2 rounded-lg font-semibold
        transition-all duration-200 ease-out
        disabled:opacity-50 disabled:cursor-not-allowed
        active:scale-95
        ${Ox[i]}
        ${Mx[e]}
        ${o}
      `,disabled:r||t},c),{children:[t&&y.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),l]}))},Lx=()=>{};var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Fx=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},kv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,v=p?i[o+2]:0,x=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|v>>6,V=v&63;p||(V=64,c||(S=64)),r.push(t[x],t[T],t[S],t[V])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Pv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Fx(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const T=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||d==null||v==null||T==null)throw new Bx;const S=l<<2|d>>4;if(r.push(S),v!==64){const V=d<<4&240|v>>2;if(r.push(V),T!==64){const z=v<<6&192|T;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Bx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zx=function(i){const e=Pv(i);return kv.encodeByteArray(e,!0)},Ic=function(i){return zx(i).replace(/\./g,"")},Ux=function(i){try{return kv.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=()=>Rv().__FIREBASE_DEFAULTS__,qx=()=>{if(typeof process=="undefined"||typeof qg=="undefined")return;const i=qg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Kx=()=>{if(typeof document=="undefined")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=i&&Ux(i[1]);return e&&JSON.parse(e)},Nf=()=>{try{return Lx()||$x()||qx()||Kx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Wx=i=>{var e,t;return(t=(e=Nf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Hx=i=>{const e=Wx(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Nv=()=>{var i;return(i=Nf())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch(e){return!1}}function Qx(i){return Z(this,null,function*(){return(yield fetch(i,{credentials:"include"})).ok})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ic(JSON.stringify(t)),Ic(JSON.stringify(c)),""].join(".")}const ll={};function Yx(){const i={prod:[],emulator:[]};for(const e of Object.keys(ll))ll[e]?i.emulator.push(e):i.prod.push(e);return i}function Jx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Kg=!1;function Zx(i,e){if(typeof window=="undefined"||typeof document=="undefined"||!Df(window.location.host)||ll[i]===e||ll[i]||Kg)return;ll[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=Yx().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Kg=!0,c()},S}function x(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Jx(r),V=t("text"),z=document.getElementById(V)||document.createElement("span"),K=t("learnmore"),$=document.getElementById(K)||document.createElement("a"),se=t("preprendIcon"),H=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),x($,K);const ne=v();p(H,se),Q.append(H,z,$,ne),document.body.appendChild(Q)}l?(z.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dv(){var i;const e=(i=Nf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function Vv(){return!Dv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jv(){return!Dv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ov(){try{return typeof indexedDB=="object"}catch(i){return!1}}function e1(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="FirebaseError";class Jo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=t1,Object.setPrototypeOf(this,Jo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mv.prototype.create)}}class Mv{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?n1(l,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Jo(o,d,r)}}function n1(i,e){return i.replace(r1,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const r1=/\{\$([^}]+)}/g;function bc(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(Wg(l)&&Wg(c)){if(!bc(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Wg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(i){return i&&i._delegate?i._delegate:i}class vl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Gx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch(o){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o1(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch(l){}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return Z(this,null,function*(){const e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch(l){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(o){}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(i){return i===oi?void 0:i}function o1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qe||(qe={}));const l1={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},u1=qe.INFO,c1={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},h1=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=c1[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lv{constructor(e){this.name=e,this._logLevel=u1,this._logHandler=h1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const d1=(i,e)=>e.some(t=>i instanceof t);let Hg,Gg;function f1(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p1(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,ef=new WeakMap,Bv=new WeakMap,qd=new WeakMap,Vf=new WeakMap;function m1(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Es(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Fv.set(t,i)}).catch(()=>{}),Vf.set(e,i),e}function g1(i){if(ef.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});ef.set(i,e)}let tf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ef.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Bv.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function y1(i){tf=i(tf)}function v1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Kd(this),e,...t);return Bv.set(r,e.sort?e.sort():[e]),Es(r)}:p1().includes(i)?function(...e){return i.apply(Kd(this),e),Es(Fv.get(this))}:function(...e){return Es(i.apply(Kd(this),e))}}function _1(i){return typeof i=="function"?v1(i):(i instanceof IDBTransaction&&g1(i),d1(i,f1())?new Proxy(i,tf):i)}function Es(i){if(i instanceof IDBRequest)return m1(i);if(qd.has(i))return qd.get(i);const e=_1(i);return e!==i&&(qd.set(i,e),Vf.set(e,i)),e}const Kd=i=>Vf.get(i);function w1(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),d=Es(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Es(c.result),p.oldVersion,p.newVersion,Es(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const x1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],Wd=new Map;function Qg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=E1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||x1.includes(t)))return;const l=function(c,...d){return Z(this,null,function*(){const p=this.transaction(c,o?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(yield Promise.all([v[t](...d),o&&p.done]))[0]})};return Wd.set(e,l),l}y1(i=>jn(ht({},i),{get:(e,t,r)=>Qg(e,t)||i.get(e,t,r),has:(e,t)=>!!Qg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function I1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Xg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Lv("@firebase/app"),S1="@firebase/app-compat",b1="@firebase/analytics-compat",A1="@firebase/analytics",C1="@firebase/app-check-compat",P1="@firebase/app-check",k1="@firebase/auth",R1="@firebase/auth-compat",N1="@firebase/database",D1="@firebase/data-connect",V1="@firebase/database-compat",j1="@firebase/functions",O1="@firebase/functions-compat",M1="@firebase/installations",L1="@firebase/installations-compat",F1="@firebase/messaging",B1="@firebase/messaging-compat",z1="@firebase/performance",U1="@firebase/performance-compat",$1="@firebase/remote-config",q1="@firebase/remote-config-compat",K1="@firebase/storage",W1="@firebase/storage-compat",H1="@firebase/firestore",G1="@firebase/ai",Q1="@firebase/firestore-compat",X1="firebase",Y1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",J1={[nf]:"fire-core",[S1]:"fire-core-compat",[A1]:"fire-analytics",[b1]:"fire-analytics-compat",[P1]:"fire-app-check",[C1]:"fire-app-check-compat",[k1]:"fire-auth",[R1]:"fire-auth-compat",[N1]:"fire-rtdb",[D1]:"fire-data-connect",[V1]:"fire-rtdb-compat",[j1]:"fire-fn",[O1]:"fire-fn-compat",[M1]:"fire-iid",[L1]:"fire-iid-compat",[F1]:"fire-fcm",[B1]:"fire-fcm-compat",[z1]:"fire-perf",[U1]:"fire-perf-compat",[$1]:"fire-rc",[q1]:"fire-rc-compat",[K1]:"fire-gcs",[W1]:"fire-gcs-compat",[H1]:"fire-fst",[Q1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[X1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,Z1=new Map,sf=new Map;function Yg(i,e){try{i.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Cc(i){const e=i.name;if(sf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,i);for(const t of Ac.values())Yg(t,i);for(const t of Z1.values())Yg(t,i);return!0}function eE(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function tE(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Mv("app","Firebase",nE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=Y1;function zv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rf,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(t||(t=Nv()),!t)throw Ts.create("no-options");const l=Ac.get(o);if(l){if(bc(t,l.options)&&bc(r,l.config))return l;throw Ts.create("duplicate-app",{appName:o})}const c=new a1(o);for(const p of sf.values())c.addComponent(p);const d=new rE(t,r,c);return Ac.set(o,d),d}function iE(i=rf){const e=Ac.get(i);if(!e&&i===rf&&Nv())return zv();if(!e)throw Ts.create("no-app",{appName:i});return e}function jo(i,e,t){var r;let o=(r=J1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(d.join(" "));return}Cc(new vl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebase-heartbeat-database",aE=1,_l="firebase-heartbeat-store";let Hd=null;function Uv(){return Hd||(Hd=w1(oE,aE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(i=>{throw Ts.create("idb-open",{originalErrorMessage:i.message})})),Hd}function lE(i){return Z(this,null,function*(){try{const t=(yield Uv()).transaction(_l),r=yield t.objectStore(_l).get($v(i));return yield t.done,r}catch(e){if(e instanceof Jo)Ur.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}})}function Jg(i,e){return Z(this,null,function*(){try{const r=(yield Uv()).transaction(_l,"readwrite");yield r.objectStore(_l).put(e,$v(i)),yield r.done}catch(t){if(t instanceof Jo)Ur.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(r.message)}}})}function $v(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=1024,cE=30;class hE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return Z(this,null,function*(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>cE){const c=pE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}})}getHeartbeatsHeader(){return Z(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zg(),{heartbeatsToSend:r,unsentEntries:o}=dE(this._heartbeatsCache.heartbeats),l=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}})}}function Zg(){return new Date().toISOString().substring(0,10)}function dE(i,e=uE){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ey(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Z(this,null,function*(){return Ov()?e1().then(()=>!0).catch(()=>!1):!1})}read(){return Z(this,null,function*(){if(yield this._canUseIndexedDBPromise){const t=yield lE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return Z(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return Jg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return Z(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){const o=yield this.read();return Jg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return})}}function ey(i){return Ic(JSON.stringify({version:2,heartbeats:i})).length}function pE(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(i){Cc(new vl("platform-logger",e=>new T1(e),"PRIVATE")),Cc(new vl("heartbeat",e=>new hE(e),"PRIVATE")),jo(nf,Xg,i),jo(nf,Xg,"esm2017"),jo("fire-js","")}mE("");var ty=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,qv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,E){function A(){}A.prototype=E.prototype,R.D=E.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(C,k,D){for(var b=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)b[Ee-2]=arguments[Ee];return E.prototype[k].apply(C,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,E,A){A||(A=0);var C=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)C[k]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(k=0;16>k;++k)C[k]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=R.g[0],A=R.g[1],k=R.g[2];var D=R.g[3],b=E+(D^A&(k^D))+C[0]+3614090360&4294967295;E=A+(b<<7&4294967295|b>>>25),b=D+(k^E&(A^k))+C[1]+3905402710&4294967295,D=E+(b<<12&4294967295|b>>>20),b=k+(A^D&(E^A))+C[2]+606105819&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(E^k&(D^E))+C[3]+3250441966&4294967295,A=k+(b<<22&4294967295|b>>>10),b=E+(D^A&(k^D))+C[4]+4118548399&4294967295,E=A+(b<<7&4294967295|b>>>25),b=D+(k^E&(A^k))+C[5]+1200080426&4294967295,D=E+(b<<12&4294967295|b>>>20),b=k+(A^D&(E^A))+C[6]+2821735955&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(E^k&(D^E))+C[7]+4249261313&4294967295,A=k+(b<<22&4294967295|b>>>10),b=E+(D^A&(k^D))+C[8]+1770035416&4294967295,E=A+(b<<7&4294967295|b>>>25),b=D+(k^E&(A^k))+C[9]+2336552879&4294967295,D=E+(b<<12&4294967295|b>>>20),b=k+(A^D&(E^A))+C[10]+4294925233&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(E^k&(D^E))+C[11]+2304563134&4294967295,A=k+(b<<22&4294967295|b>>>10),b=E+(D^A&(k^D))+C[12]+1804603682&4294967295,E=A+(b<<7&4294967295|b>>>25),b=D+(k^E&(A^k))+C[13]+4254626195&4294967295,D=E+(b<<12&4294967295|b>>>20),b=k+(A^D&(E^A))+C[14]+2792965006&4294967295,k=D+(b<<17&4294967295|b>>>15),b=A+(E^k&(D^E))+C[15]+1236535329&4294967295,A=k+(b<<22&4294967295|b>>>10),b=E+(k^D&(A^k))+C[1]+4129170786&4294967295,E=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(E^A))+C[6]+3225465664&4294967295,D=E+(b<<9&4294967295|b>>>23),b=k+(E^A&(D^E))+C[11]+643717713&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^E&(k^D))+C[0]+3921069994&4294967295,A=k+(b<<20&4294967295|b>>>12),b=E+(k^D&(A^k))+C[5]+3593408605&4294967295,E=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(E^A))+C[10]+38016083&4294967295,D=E+(b<<9&4294967295|b>>>23),b=k+(E^A&(D^E))+C[15]+3634488961&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^E&(k^D))+C[4]+3889429448&4294967295,A=k+(b<<20&4294967295|b>>>12),b=E+(k^D&(A^k))+C[9]+568446438&4294967295,E=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(E^A))+C[14]+3275163606&4294967295,D=E+(b<<9&4294967295|b>>>23),b=k+(E^A&(D^E))+C[3]+4107603335&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^E&(k^D))+C[8]+1163531501&4294967295,A=k+(b<<20&4294967295|b>>>12),b=E+(k^D&(A^k))+C[13]+2850285829&4294967295,E=A+(b<<5&4294967295|b>>>27),b=D+(A^k&(E^A))+C[2]+4243563512&4294967295,D=E+(b<<9&4294967295|b>>>23),b=k+(E^A&(D^E))+C[7]+1735328473&4294967295,k=D+(b<<14&4294967295|b>>>18),b=A+(D^E&(k^D))+C[12]+2368359562&4294967295,A=k+(b<<20&4294967295|b>>>12),b=E+(A^k^D)+C[5]+4294588738&4294967295,E=A+(b<<4&4294967295|b>>>28),b=D+(E^A^k)+C[8]+2272392833&4294967295,D=E+(b<<11&4294967295|b>>>21),b=k+(D^E^A)+C[11]+1839030562&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^E)+C[14]+4259657740&4294967295,A=k+(b<<23&4294967295|b>>>9),b=E+(A^k^D)+C[1]+2763975236&4294967295,E=A+(b<<4&4294967295|b>>>28),b=D+(E^A^k)+C[4]+1272893353&4294967295,D=E+(b<<11&4294967295|b>>>21),b=k+(D^E^A)+C[7]+4139469664&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^E)+C[10]+3200236656&4294967295,A=k+(b<<23&4294967295|b>>>9),b=E+(A^k^D)+C[13]+681279174&4294967295,E=A+(b<<4&4294967295|b>>>28),b=D+(E^A^k)+C[0]+3936430074&4294967295,D=E+(b<<11&4294967295|b>>>21),b=k+(D^E^A)+C[3]+3572445317&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^E)+C[6]+76029189&4294967295,A=k+(b<<23&4294967295|b>>>9),b=E+(A^k^D)+C[9]+3654602809&4294967295,E=A+(b<<4&4294967295|b>>>28),b=D+(E^A^k)+C[12]+3873151461&4294967295,D=E+(b<<11&4294967295|b>>>21),b=k+(D^E^A)+C[15]+530742520&4294967295,k=D+(b<<16&4294967295|b>>>16),b=A+(k^D^E)+C[2]+3299628645&4294967295,A=k+(b<<23&4294967295|b>>>9),b=E+(k^(A|~D))+C[0]+4096336452&4294967295,E=A+(b<<6&4294967295|b>>>26),b=D+(A^(E|~k))+C[7]+1126891415&4294967295,D=E+(b<<10&4294967295|b>>>22),b=k+(E^(D|~A))+C[14]+2878612391&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~E))+C[5]+4237533241&4294967295,A=k+(b<<21&4294967295|b>>>11),b=E+(k^(A|~D))+C[12]+1700485571&4294967295,E=A+(b<<6&4294967295|b>>>26),b=D+(A^(E|~k))+C[3]+2399980690&4294967295,D=E+(b<<10&4294967295|b>>>22),b=k+(E^(D|~A))+C[10]+4293915773&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~E))+C[1]+2240044497&4294967295,A=k+(b<<21&4294967295|b>>>11),b=E+(k^(A|~D))+C[8]+1873313359&4294967295,E=A+(b<<6&4294967295|b>>>26),b=D+(A^(E|~k))+C[15]+4264355552&4294967295,D=E+(b<<10&4294967295|b>>>22),b=k+(E^(D|~A))+C[6]+2734768916&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~E))+C[13]+1309151649&4294967295,A=k+(b<<21&4294967295|b>>>11),b=E+(k^(A|~D))+C[4]+4149444226&4294967295,E=A+(b<<6&4294967295|b>>>26),b=D+(A^(E|~k))+C[11]+3174756917&4294967295,D=E+(b<<10&4294967295|b>>>22),b=k+(E^(D|~A))+C[2]+718787259&4294967295,k=D+(b<<15&4294967295|b>>>17),b=A+(D^(k|~E))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(k+(b<<21&4294967295|b>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+D&4294967295}r.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var A=E-this.blockSize,C=this.B,k=this.h,D=0;D<E;){if(k==0)for(;D<=A;)o(this,R,D),D+=this.blockSize;if(typeof R=="string"){for(;D<E;)if(C[k++]=R.charCodeAt(D++),k==this.blockSize){o(this,C),k=0;break}}else for(;D<E;)if(C[k++]=R[D++],k==this.blockSize){o(this,C),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var A=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=A&255,A/=256;for(this.u(R),R=Array(16),E=A=0;4>E;++E)for(var C=0;32>C;C+=8)R[A++]=this.g[E]>>>C&255;return R};function l(R,E){var A=d;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=E(R)}function c(R,E){this.h=E;for(var A=[],C=!0,k=R.length-1;0<=k;k--){var D=R[k]|0;C&&D==E||(A[k]=D,C=!1)}this.g=A}var d={};function p(R){return-128<=R&&128>R?l(R,function(E){return new c([E|0],0>E?-1:0)}):new c([R|0],0>R?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return $(v(-R));for(var E=[],A=1,C=0;R>=A;C++)E[C]=R/A|0,A*=4294967296;return new c(E,0)}function x(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return $(x(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(E,8)),C=T,k=0;k<R.length;k+=8){var D=Math.min(8,R.length-k),b=parseInt(R.substring(k,k+D),E);8>D?(D=v(Math.pow(E,D)),C=C.j(D).add(v(b))):(C=C.j(A),C=C.add(v(b)))}return C}var T=p(0),S=p(1),V=p(16777216);i=c.prototype,i.m=function(){if(K(this))return-$(this).m();for(var R=0,E=1,A=0;A<this.g.length;A++){var C=this.i(A);R+=(0<=C?C:4294967296+C)*E,E*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(K(this))return"-"+$(this).toString(R);for(var E=v(Math.pow(R,6)),A=this,C="";;){var k=ne(A,E).g;A=se(A,k.j(E));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=k,z(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function K(R){return R.h==-1}i.l=function(R){return R=se(this,R),K(R)?-1:z(R)?0:1};function $(R){for(var E=R.g.length,A=[],C=0;C<E;C++)A[C]=~R.g[C];return new c(A,~R.h).add(S)}i.abs=function(){return K(this)?$(this):this},i.add=function(R){for(var E=Math.max(this.g.length,R.g.length),A=[],C=0,k=0;k<=E;k++){var D=C+(this.i(k)&65535)+(R.i(k)&65535),b=(D>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);C=b>>>16,D&=65535,b&=65535,A[k]=b<<16|D}return new c(A,A[A.length-1]&-2147483648?-1:0)};function se(R,E){return R.add($(E))}i.j=function(R){if(z(this)||z(R))return T;if(K(this))return K(R)?$(this).j($(R)):$($(this).j(R));if(K(R))return $(this.j($(R)));if(0>this.l(V)&&0>R.l(V))return v(this.m()*R.m());for(var E=this.g.length+R.g.length,A=[],C=0;C<2*E;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<R.g.length;k++){var D=this.i(C)>>>16,b=this.i(C)&65535,Ee=R.i(k)>>>16,Ne=R.i(k)&65535;A[2*C+2*k]+=b*Ne,H(A,2*C+2*k),A[2*C+2*k+1]+=D*Ne,H(A,2*C+2*k+1),A[2*C+2*k+1]+=b*Ee,H(A,2*C+2*k+1),A[2*C+2*k+2]+=D*Ee,H(A,2*C+2*k+2)}for(C=0;C<E;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=E;C<2*E;C++)A[C]=0;return new c(A,0)};function H(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function Q(R,E){this.g=R,this.h=E}function ne(R,E){if(z(E))throw Error("division by zero");if(z(R))return new Q(T,T);if(K(R))return E=ne($(R),E),new Q($(E.g),$(E.h));if(K(E))return E=ne(R,$(E)),new Q($(E.g),E.h);if(30<R.g.length){if(K(R)||K(E))throw Error("slowDivide_ only works with positive integers.");for(var A=S,C=E;0>=C.l(R);)A=de(A),C=de(C);var k=ue(A,1),D=ue(C,1);for(C=ue(C,2),A=ue(A,2);!z(C);){var b=D.add(C);0>=b.l(R)&&(k=k.add(A),D=b),C=ue(C,1),A=ue(A,1)}return E=se(R,k.j(E)),new Q(k,E)}for(k=T;0<=R.l(E);){for(A=Math.max(1,Math.floor(R.m()/E.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=v(A),b=D.j(E);K(b)||0<b.l(R);)A-=C,D=v(A),b=D.j(E);z(D)&&(D=S),k=k.add(D),R=se(R,b)}return new Q(k,R)}i.A=function(R){return ne(this,R).h},i.and=function(R){for(var E=Math.max(this.g.length,R.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)&R.i(C);return new c(A,this.h&R.h)},i.or=function(R){for(var E=Math.max(this.g.length,R.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)|R.i(C);return new c(A,this.h|R.h)},i.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),A=[],C=0;C<E;C++)A[C]=this.i(C)^R.i(C);return new c(A,this.h^R.h)};function de(R){for(var E=R.g.length+1,A=[],C=0;C<E;C++)A[C]=R.i(C)<<1|R.i(C-1)>>>31;return new c(A,R.h)}function ue(R,E){var A=E>>5;E%=32;for(var C=R.g.length-A,k=[],D=0;D<C;D++)k[D]=0<E?R.i(D+A)>>>E|R.i(D+A+1)<<32-E:R.i(D+A);return new c(k,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qv=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=x,Is=c}).apply(typeof ty!="undefined"?ty:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kv,rl,Wv,dc,of,Hv,Gv,Qv;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in _))break e;_=_[M]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,I=!1,M={next:function(){if(!I&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function x(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:T,S.apply(null,arguments)}function V(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function z(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,M,q){for(var oe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)oe[Ge-2]=arguments[Ge];return m.prototype[M].apply(I,oe)}}function K(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function $(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const M=u.length||0,q=I.length||0;u.length=M+q;for(let oe=0;oe<q;oe++)u[M+oe]=I[oe]}else u.push(I)}}class se{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var de=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ue(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function R(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function E(u){const m={};for(const _ in u)m[_]=u[_];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,m){let _,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(_ in I)u[_]=I[_];for(let q=0;q<A.length;q++)_=A[q],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function k(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function D(u){d.setTimeout(()=>{throw u},0)}function b(){var u=ve;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ee{constructor(){this.h=this.g=null}add(m,_){const I=Ne.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Ne=new se(()=>new fe,u=>u.reset());class fe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,ie=!1,ve=new Ee,ae=()=>{const u=d.Promise.resolve(void 0);Re=()=>{u.then(O)}};var O=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(_){D(_)}var m=Ne;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var ke=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch(_){}return u})();function De(u,m){if(we.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(de){e:{try{ne(m.nodeName);var M=!0;break e}catch(q){}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&De.aa.h.call(this)}}z(De,we);var Oe={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Ye(u,m,_,I,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=M,this.key=++Ke,this.da=this.fa=!1}function mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,_,I,M){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var oe=ze(u,m,I,M);return-1<oe?(m=u[oe],_||(m.fa=!1)):(m=new Ye(m,this.src,q,!!I,M),m.fa=_,u.push(m)),m};function Be(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],M=Array.prototype.indexOf.call(I,m,void 0),q;(q=0<=M)&&Array.prototype.splice.call(I,M,1),q&&(mt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ze(u,m,_,I){for(var M=0;M<u.length;++M){var q=u[M];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==I)return M}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),Ut={};function In(u,m,_,I,M){if(Array.isArray(m)){for(var q=0;q<m.length;q++)In(u,m[q],_,I,M);return null}return _=oa(_),u&&u[Fe]?u.K(m,_,v(I)?!!I.capture:!1,M):xr(u,m,_,!1,I,M)}function xr(u,m,_,I,M,q){if(!m)throw Error("Invalid event type");var oe=v(M)?!!M.capture:!!M,Ge=Ni(u);if(Ge||(u[Xt]=Ge=new Te(u)),_=Ge.add(m,_,I,oe,q),_.proxy)return _;if(I=ki(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)ke||(M=oe),M===void 0&&(M=!1),u.addEventListener(m.toString(),I,M);else if(u.attachEvent)u.attachEvent(Tr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ki(){function u(_){return m.call(u.src,u.listener,_)}const m=ia;return u}function Ri(u,m,_,I,M){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ri(u,m[q],_,I,M);else I=v(I)?!!I.capture:!!I,_=oa(_),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=ze(q,_,I,M),-1<_&&(mt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ni(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ze(m,_,I,M)),(_=-1<u?m[u]:null)&&Er(_))}function Er(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])Be(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(Tr(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Ni(m))?(Be(_,u),_.h==0&&(_.src=null,m[Xt]=null)):mt(u)}}}function Tr(u){return u in Ut?Ut[u]:Ut[u]="on"+u}function ia(u,m){if(u.da)u=!0;else{m=new De(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&Er(u),u=_.call(I,m)}return u}function Ni(u){return u=u[Xt],u instanceof Te?u:null}var Di="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(u){return typeof u=="function"?u:(u[Di]||(u[Di]=function(m){return u.handleEvent(m)}),u[Di])}function Tt(){W.call(this),this.i=new Te(this),this.M=this,this.F=null}z(Tt,W),Tt.prototype[Fe]=!0,Tt.prototype.removeEventListener=function(u,m,_,I){Ri(this,u,m,_,I)};function It(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new we(m,u);else if(m instanceof we)m.target=m.target||u;else{var M=m;m=new we(I,u),C(m,M)}if(M=!0,_)for(var q=_.length-1;0<=q;q--){var oe=m.g=_[q];M=Ir(oe,I,!0,m)&&M}if(oe=m.g=u,M=Ir(oe,I,!0,m)&&M,M=Ir(oe,I,!1,m)&&M,_)for(q=0;q<_.length;q++)oe=m.g=_[q],M=Ir(oe,I,!1,m)&&M}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)mt(_[I]);delete u.g[m],u.h--}}this.F=null},Tt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},Tt.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function Ir(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,q=0;q<m.length;++q){var oe=m[q];if(oe&&!oe.da&&oe.capture==_){var Ge=oe.listener,St=oe.ha||oe.src;oe.fa&&Be(u.i,oe),M=Ge.call(St,I)!==!1&&M}}return M&&!I.defaultPrevented}function aa(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Wr(u){u.g=aa(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ns extends W{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(u){W.call(this),this.h=u,this.g={}}z(Ds,W);var la=[];function ua(u){ue(u.g,function(m,_){this.g.hasOwnProperty(_)&&Er(m)},u),u.g={}}Ds.prototype.N=function(){Ds.aa.N.call(this),ua(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Vs(){}Vs.prototype.h=null;function Vi(u){return u.h||(u.h=u.i())}function ji(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){we.call(this,"d")}z(nr,we);function Oi(){we.call(this,"c")}z(Oi,we);var rr={},fa=null;function js(){return fa=fa||new Tt}rr.La="serverreachability";function pa(u){we.call(this,rr.La,u)}z(pa,we);function Sr(u){const m=js();It(m,new pa(m))}rr.STAT_EVENT="statevent";function ma(u,m){we.call(this,rr.STAT_EVENT,u),this.stat=m}z(ma,we);function gt(u){const m=js();It(m,new ma(m,u))}rr.Ma="timingevent";function Mi(u,m){we.call(this,rr.Ma,u),this.size=m}z(Mi,we);function Bn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Ms(u,m,_,I,M,q){u.info(function(){if(u.g)if(q)for(var oe="",Ge=q.split("&"),St=0;St<Ge.length;St++){var Ue=Ge[St].split("=");if(1<Ue.length){var kt=Ue[0];Ue=Ue[1];var vt=kt.split("_");oe=2<=vt.length&&vt[1]=="type"?oe+(kt+"="+Ue+"&"):oe+(kt+"=redacted&")}}else oe=null;else oe=q;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+m+`
`+_+`
`+oe})}function Li(u,m,_,I,M,q,oe){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+m+`
`+_+`
`+q+" "+oe})}function zn(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hh(u,_)+(I?" "+I:"")})}function ga(u,m){u.info(function(){return"TIMEOUT: "+m})}Os.prototype.info=function(){};function hh(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(var oe=1;oe<M.length;oe++)M[oe]=""}}}}return ca(_)}catch(Ge){return m}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$l={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Un;function Ls(){}z(Ls,Vs),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},Un=new Ls;function $n(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new Ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ql}function ql(){this.i=null,this.g="",this.h=!1}var ya={},Bi={};function zi(u,m,_){u.L=1,u.v=Yr(pn(m)),u.m=_,u.P=!0,va(u,null)}function va(u,m){u.F=Date.now(),tt(u),u.A=pn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Zr(_.i,"t",I),u.C=0,_=u.j.J,u.h=new ql,u.g=lu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Ns(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(la[0]=M.toString()),M=la);for(var q=0;q<M.length;q++){var oe=In(_,M[q],I||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Sr(),Ms(u.i,u.u,u.A,u.l,u.R,u.m)}$n.prototype.ca=function(u){u=u.target;const m=this.M;m&&sn(u)==3?m.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const vt=sn(this.g);var m=this.g.Ba();const Cn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Ia(this.g)))){this.J||vt!=4||m==7||(m==8||0>=Cn?Sr(3):Sr(2)),Fs(this);var _=this.g.Z();this.X=_;t:if(Kl(this)){var I=Ia(this.g);u="";var M=I.length,q=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){bn(this),Hr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(q&&m==M-1)});I.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,Li(this.i,this.u,this.A,this.l,this.R,vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,St=this.g;if((Ge=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ge)){var Ue=Ge;break t}}Ue=null}if(_=Ue)zn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,_);else{this.o=!1,this.s=3,gt(12),bn(this),Hr(this);break e}}if(this.P){_=!0;let gn;for(;!this.J&&this.C<oe.length;)if(gn=dh(this,oe),gn==Bi){vt==4&&(this.s=4,gt(14),_=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==ya){this.s=4,gt(15),zn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else zn(this.i,this.l,gn,null),_a(this,gn);if(Kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||oe.length!=0||this.h.h||(this.s=1,gt(16),_=!1),this.o=this.o&&_,!_)zn(this.i,this.l,oe,"[Invalid Chunked Response]"),bn(this),Hr(this);else if(0<oe.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ba(kt),kt.M=!0,gt(11))}}else zn(this.i,this.l,oe,null),_a(this,oe);vt==4&&bn(this),this.o&&!this.J&&(vt==4?Ji(this.j,this):(this.o=!1,tt(this)))}else Hi(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),bn(this),Hr(this)}}}catch(vt){}finally{}};function Kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dh(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Bi:(_=Number(m.substring(_,I)),isNaN(_)?ya:(I+=1,I+_>m.length?Bi:(m=m.slice(I,I+_),u.C=I+_,m)))}$n.prototype.cancel=function(){this.J=!0,bn(this)};function tt(u){u.S=Date.now()+u.I,Wl(u,u.I)}function Wl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bn(S(u.ba,u),m)}function Fs(u){u.B&&(d.clearTimeout(u.B),u.B=null)}$n.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ga(this.i,this.A),this.L!=2&&(Sr(),gt(17)),bn(this),this.s=2,Hr(this)):Wl(this,this.S-u)};function Hr(u){u.j.G==0||u.J||Ji(u.j,u)}function bn(u){Fs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ua(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function _a(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Yt(_.h,u))){if(!u.K&&Yt(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch(Ue){I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Yi(_),Gn(_);else break e;Xi(_),gt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Bn(S(_.Za,_),6e3));if(1>=Gl(_.h)&&_.ca){try{_.ca()}catch(Ue){}_.ca=void 0}}else kr(_,11)}else if((u.K||_.g==u)&&Yi(_),!H(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Ue=M[m];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const kt=Ue[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const vt=Ue[4];vt!=null&&(_.Aa=vt,_.j.info("SVER="+_.Aa));const Cn=Ue[5];Cn!=null&&typeof Cn=="number"&&0<Cn&&(I=1.5*Cn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const gn=u.g;if(gn){const Ws=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var q=I.h;q.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(wa(q,q.h),q.h=null))}if(I.D){const eo=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;eo&&(I.ya=eo,et(I.I,I.D,eo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var oe=u;if(I.qa=au(I,I.J?I.ia:null,I.W),oe.K){Ql(I.h,oe);var Ge=oe,St=I.L;St&&(Ge.I=St),Ge.B&&(Fs(Ge),tt(Ge)),I.g=oe}else Ks(I);0<_.i.length&&ar(_)}else Ue[0]!="stop"&&Ue[0]!="close"||kr(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?kr(_,7):Ot(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Sr(4)}catch(Ue){}}var Hl=class{constructor(u,m){this.g=u,this.map=m}};function Bs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gl(u){return u.h?1:u.g?u.g.size:0}function Yt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function wa(u,m){u.g?u.g.add(m):u.h=m}function Ql(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Bs.prototype.cancel=function(){if(this.i=Xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return K(u.i)}function Ui(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map!="undefined"&&u instanceof Map||typeof Set!="undefined"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function $i(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map!="undefined"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set!="undefined"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function Gr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=$i(u),I=Ui(u),M=I.length,q=0;q<M;q++)m.call(void 0,I[q],_&&_[q],u)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),M=null;if(0<=I){var q=u[_].substring(0,I);M=u[_].substring(I+1)}else q=u[_];m(q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,Us(this,u.j),this.o=u.o,this.g=u.g,Qr(this,u.s),this.l=u.l;var m=u.i,_=new sr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Xr(this,_),this.m=u.m}else u&&(m=String(u).match(zs))?(this.h=!1,Us(this,m[1]||"",!0),this.o=Me(m[2]||""),this.g=Me(m[3]||"",!0),Qr(this,m[4]),this.l=Me(m[5]||"",!0),Xr(this,m[6]||"",!0),this.m=Me(m[7]||"")):(this.h=!1,this.i=new sr(null,this.h))}br.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Jr(m,qi,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Jr(m,qi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Jr(_,_.charAt(0)=="/"?Zl:Jl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Jr(_,xa)),u.join("")};function pn(u){return new br(u)}function Us(u,m,_){u.j=_?Me(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xr(u,m,_){m instanceof sr?(u.i=m,ir(u.i,u.h)):(_||(m=Jr(m,eu)),u.i=new sr(m,u.h))}function et(u,m,_){u.i.set(m,_)}function Yr(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Me(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Yl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Yl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qi=/[#\/\?@]/g,Jl=/[#\?:]/g,Zl=/[#\?]/g,eu=/[#\?@]/g,xa=/#/g;function sr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function jt(u){u.g||(u.g=new Map,u.h=0,u.i&&fh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=sr.prototype,i.add=function(u,m){jt(this),this.i=null,u=An(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function qn(u,m){jt(u),m=An(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Kn(u,m){return jt(u),m=An(u,m),u.g.has(m)}i.forEach=function(u,m){jt(this),this.g.forEach(function(_,I){_.forEach(function(M){u.call(m,M,I,this)},this)},this)},i.na=function(){jt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const M=u[I];for(let q=0;q<M.length;q++)_.push(m[I])}return _},i.V=function(u){jt(this);let m=[];if(typeof u=="string")Kn(this,u)&&(m=m.concat(this.g.get(An(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},i.set=function(u,m){return jt(this),this.i=null,u=An(this,u),Kn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Zr(u,m,_){qn(u,m),0<_.length&&(u.i=null,u.g.set(An(u,m),K(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const q=encodeURIComponent(String(I)),oe=this.V(I);for(I=0;I<oe.length;I++){var M=q;oe[I]!==""&&(M+="="+encodeURIComponent(String(oe[I]))),u.push(M)}}return this.i=u.join("&")};function An(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ir(u,m){m&&!u.j&&(jt(u),u.i=null,u.g.forEach(function(_,I){var M=I.toLowerCase();I!=M&&(qn(this,I),Zr(this,M,_))},u)),u.j=m}function ph(u,m){const _=new Os;if(d.Image){const I=new Image;I.onload=V(rn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=V(rn,_,"TestLoadImage: error",!1,m,I),I.onabort=V(rn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=V(rn,_,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function tu(u,m){const _=new Os,I=new AbortController,M=setTimeout(()=>{I.abort(),rn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(M),q.ok?rn(_,"TestPingServer: ok",!0,m):rn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),rn(_,"TestPingServer: error",!1,m)})}function rn(u,m,_,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(_)}catch(q){}}function mh(){this.g=new da}function nu(u,m,_){const I=_||"";try{Gr(u,function(M,q){let oe=M;v(M)&&(oe=ca(M)),m.push(I+q+"="+encodeURIComponent(oe))})}catch(M){throw m.push(I+"type="+encodeURIComponent("_badmap")),M}}function Ar(u){this.l=u.Ub||null,this.j=u.eb||!1}z(Ar,Vs),Ar.prototype.g=function(){return new $s(this.l,this.j)},Ar.prototype.i=(function(u){return function(){return u}})({});function $s(u,m){Tt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z($s,Tt),i=$s.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Hn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ru(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ru(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):Hn(this),this.readyState==3&&ru(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},i.Qa=function(u){this.g&&(this.response=u,Wn(this))},i.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Hn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cr(u){let m="";return ue(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function es(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Cr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):et(u,m,_))}function it(u){Tt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(it,Tt);var gh=/^https?$/i,Ea=["POST","PUT"];i=it.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Un.g(),this.v=this.o?Vi(this.o):Vi(Un),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){qs(this,q);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)_.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),M=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ea,m,void 0))||I||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,oe]of _)this.g.setRequestHeader(q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){qs(this,q)}};function qs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ki(u),mn(u)}function Ki(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),mn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mn(this,!0)),it.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},i.bb=function(){Ta(this)};function Ta(u){if(u.h&&typeof c!="undefined"&&(!u.v[1]||sn(u)!=4||u.Z()!=2)){if(u.u&&sn(u)==4)aa(u.Ea,0,u);else if(It(u,"readystatechange"),sn(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=oe===0){var M=String(u.D).match(zs)[1]||null;!M&&d.self&&d.self.location&&(M=d.self.location.protocol.slice(0,-1)),I=!gh.test(M?M.toLowerCase():"")}_=I}if(_)It(u,"complete"),It(u,"success");else{u.m=6;try{var q=2<sn(u)?u.g.statusText:""}catch(Ge){q=""}u.l=q+" ["+u.Z()+"]",Ki(u)}}finally{mn(u)}}}}function mn(u,m){if(u.g){Wi(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||It(u,"ready");try{_.onreadystatechange=I}catch(M){}}}function Wi(u){u.I&&(d.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function sn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch(u){return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ha(m)}};function Ia(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(m){return null}}function Hi(u){const m={};u=(u.g&&2<=sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(H(u[I]))continue;var _=k(u[I]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[M]||[];m[M]=q,q.push(_)}R(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Sa(u){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=or("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=or("baseRetryDelayMs",5e3,u),this.cb=or("retryDelaySeedMs",1e4,u),this.Wa=or("forwardChannelMaxRetries",2,u),this.wa=or("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Bs(u&&u.concurrentRequestLimit),this.Da=new mh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Sa.prototype,i.la=8,i.G=1,i.connect=function(u,m,_,I){gt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=au(this,null,this.W),ar(this)};function Ot(u){if(Gi(u),u.G==3){var m=u.U++,_=pn(u.I);if(et(_,"SID",u.K),et(_,"RID",m),et(_,"TYPE","terminate"),Pr(u,_),m=new $n(u,u.j,m),m.L=2,m.v=Yr(pn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch(I){}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),tt(m)}ou(u)}function Gn(u){u.g&&(ba(u),u.g.cancel(),u.g=null)}function Gi(u){Gn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Yi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function ar(u){if(!fn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Re||ae(),ie||(Re(),ie=!0),ve.add(m,u),u.B=0}}function yh(u,m){return Gl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bn(S(u.Ga,u,m),iu(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new $n(this,this.j,u);let q=this.o;if(this.S&&(q?(q=E(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(M.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ts(this,M,m),_=pn(this.I),et(_,"RID",u),et(_,"CVER",22),this.D&&et(_,"X-HTTP-Session-Id",this.D),Pr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Cr(q)))+"&"+m:this.m&&es(_,this.m,q)),wa(this.h,M),this.Ua&&et(_,"TYPE","init"),this.P?(et(_,"$req",m),et(_,"SID","null"),M.T=!0,zi(M,_,null)):zi(M,_,m),this.G=2}}else this.G==3&&(u?Qi(this,u):this.i.length==0||fn(this.h)||Qi(this))};function Qi(u,m){var _;m?_=m.l:_=u.U++;const I=pn(u.I);et(I,"SID",u.K),et(I,"RID",_),et(I,"AID",u.T),Pr(u,I),u.m&&u.o&&es(I,u.m,u.o),_=new $n(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ts(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wa(u.h,_),zi(_,I,m)}function Pr(u,m){u.H&&ue(u.H,function(_,I){et(m,I,_)}),u.l&&Gr({},function(_,I){et(m,I,_)})}function ts(u,m,_){_=Math.min(u.i.length,_);var I=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let q=-1;for(;;){const oe=["count="+_];q==-1?0<_?(q=M[0].g,oe.push("ofs="+q)):q=0:oe.push("ofs="+q);let Ge=!0;for(let St=0;St<_;St++){let Ue=M[St].g;const kt=M[St].map;if(Ue-=q,0>Ue)q=Math.max(0,M[St].g-100),Ge=!1;else try{nu(kt,oe,"req"+Ue+"_")}catch(vt){I&&I(kt)}}if(Ge){I=oe.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function Ks(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Re||ae(),ie||(Re(),ie=!0),ve.add(m,u),u.v=0}}function Xi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bn(S(u.Fa,u),iu(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bn(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Gn(this),su(this))};function ba(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function su(u){u.g=new $n(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=pn(u.qa);et(m,"RID","rpc"),et(m,"SID",u.K),et(m,"AID",u.T),et(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(m,"TO",u.ja),et(m,"TYPE","xmlhttp"),Pr(u,m),u.m&&u.o&&es(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Yr(pn(m)),_.m=null,_.P=!0,va(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Gn(this),Xi(this),gt(19))};function Yi(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ji(u,m){var _=null;if(u.g==m){Yi(u),ba(u),u.g=null;var I=2}else if(Yt(u.h,m))_=m.D,Ql(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;I=js(),It(I,new Mi(I,_)),ar(u)}else Ks(u);else if(M=m.s,M==3||M==0&&0<m.X||!(I==1&&yh(u,m)||I==2&&Xi(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:kr(u,5);break;case 4:kr(u,10);break;case 3:kr(u,6);break;default:kr(u,2)}}}function iu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function kr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),I=u.Xa;const M=!I;I=new br(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Us(I,"https"),Yr(I),M?ph(I.toString(),_):tu(I.toString(),_)}else gt(2);u.G=0,u.l&&u.l.sa(m),ou(u),Gi(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ou(u){if(u.G=0,u.ka=[],u.l){const m=Xl(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function au(u,m,_){var I=_ instanceof br?pn(_):new br(_);if(I.g!="")m&&(I.g=m+"."+I.g),Qr(I,I.s);else{var M=d.location;I=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var q=new br(null);I&&Us(q,I),m&&(q.g=m),M&&Qr(q,M),_&&(q.l=_),I=q}return _=u.D,m=u.ya,_&&m&&et(I,_,m),et(I,"VER",u.la),Pr(u,I),I}function lu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new it(new Ar({eb:_})):new it(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Aa(){}i=Aa.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Zi(){}Zi.prototype.g=function(u,m){return new Jt(u,m)};function Jt(u,m){Tt.call(this),this.g=new Sa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!H(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new lr(this)}z(Jt,Tt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ot(this.g)},Jt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ca(u),u=_);m.i.push(new Hl(m.Ya++,u)),m.G==3&&ar(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Jt.aa.N.call(this)};function uu(u){nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}z(uu,nr);function cu(){Oi.call(this),this.status=1}z(cu,Oi);function lr(u){this.g=u}z(lr,Aa),lr.prototype.ua=function(){It(this.g,"a")},lr.prototype.ta=function(u){It(this.g,new uu(u))},lr.prototype.sa=function(u){It(this.g,new cu)},lr.prototype.ra=function(){It(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Qv=function(){return new Zi},Gv=function(){return js()},Hv=rr,of={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,dc=Fi,$l.COMPLETE="complete",Wv=$l,ji.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,rl=ji,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Kv=it}).apply(typeof ic!="undefined"?ic:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const ny="@firebase/firestore",ry="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Lv("@firebase/firestore");function Co(){return vi.logLevel}function te(i,...e){if(vi.logLevel<=qe.DEBUG){const t=e.map(jf);vi.debug(`Firestore (${Zo}): ${i}`,...t)}}function tn(i,...e){if(vi.logLevel<=qe.ERROR){const t=e.map(jf);vi.error(`Firestore (${Zo}): ${i}`,...t)}}function vr(i,...e){if(vi.logLevel<=qe.WARN){const t=e.map(jf);vi.warn(`Firestore (${Zo}): ${i}`,...t)}}function jf(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch(e){return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Xv(i,r,t)}function Xv(i,e,t){let r=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch(o){r+=" CONTEXT: "+t}throw tn(r),new Error(r)}function xe(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||Xv(e,o,r)}function Pe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Jo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class yE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((()=>Z(this,null,function*(){yield p.promise,yield o(this.currentUser)})))},d=p=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Yv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class _E{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wE{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _E(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);const r=l=>{l.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(i){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=EE(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Ae(i,e){return i<e?-1:i>e?1:0}function af(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ae(r,o);{const l=Jv(),c=TE(l.encode(iy(i,t)),l.encode(iy(e,t)));return c!==0?c:Ae(r,o)}}t+=r>65535?2:1}return Ae(i.length,e.length)}function iy(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function TE(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ae(i[t],e[t]);return Ae(i.length,e.length)}function Lo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}function Zv(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class fr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=fr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ae(e.length,t.length)}static compareSegments(e,t){const r=fr.isNumericId(e),o=fr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?fr.extractNumericId(e).compare(fr.extractNumericId(t)):af(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class Je extends fr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const IE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends fr{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return IE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new dt([oy])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new he(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(l(),o++)}if(l(),c)throw new he(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Je.fromString(e))}static fromName(e){return new le(Je.fromString(e).popFirst(5))}static empty(){return new le(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(i,e,t){if(!t)throw new he(G.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bE(i,e,t,r){if(e===!0&&r===!0)throw new he(G.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ay(i){if(!le.isDocumentKey(i))throw new he(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function e0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Mf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ge(12329,{type:typeof i})}function zr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(i);throw new he(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Dl(i,e){if(!e0(i))throw new he(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-62135596800,uy=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uy);return new Qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ly)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:xt("string",Qe._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Qe(0,0))}static max(){return new Ie(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=-1;class Pc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function lf(i){return i.fields.find((e=>e.kind===2))}function ai(i){return i.fields.filter((e=>e.kind!==2))}Pc.UNKNOWN_ID=-1;class fc{constructor(e,t){this.fieldPath=e,this.kind=t}}class xl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xl(0,Tn.min())}}function AE(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Tn(o,le.empty(),e)}function t0(i){return new Tn(i.readTime,i.key,wl)}class Tn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tn(Ie.min(),le.empty(),wl)}static max(){return new Tn(Ie.max(),le.empty(),wl)}}function Lf(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(i.documentKey,e.documentKey),t!==0?t:Ae(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(i){return Z(this,null,function*(){if(i.code!==G.FAILED_PRECONDITION||i.message!==n0)throw i;te("LocalStore","Unexpectedly lost primary lease")})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>r(p)))})),c=!0,l===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((x=>{c[v]=x,++d,d===l&&r(c)}),(x=>o(x)))}}))}static doWhile(e,t){return new L(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="SimpleDb";class Hc{static open(e,t,r,o){try{return new Hc(t,e.transaction(o,r))}catch(l){throw new ul(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Br,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ul(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Ff(r.target.error);this.S.reject(new ul(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te(wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PE(t)}}class Ss{static delete(e){return te(wn,"Removing database:",e),ui(Rv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ov())return!1;if(Ss.F())return!0;const e=Sc(),t=Ss.M(e),r=0<t&&t<10,o=s0(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process!="undefined"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Ss.M(Sc())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return Z(this,null,function*(){return this.db||(te(wn,"Opening database:",this.name),this.db=yield new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const c=l.target.result;t(c)},o.onblocked=()=>{r(new ul(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new he(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new he(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ul(e,c))},o.onupgradeneeded=l=>{te(wn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,l.oldVersion,this.version).next((()=>{te(wn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(vr('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,o){return Z(this,null,function*(){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=yield this.k(e);const d=Hc.open(this.db,e,l?"readonly":"readwrite",r),p=o(d).next((v=>(d.v(),v))).catch((v=>(d.abort(v),L.reject(v)))).toPromise();return p.catch((()=>{})),yield d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(te(wn,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}})}close(){this.db&&this.db.close(),this.db=void 0}}function s0(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class CE{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ui(this.$.delete())}}class ul extends he{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ks(i){return i.name==="IndexedDbTransactionError"}class PE{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(te(wn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(te(wn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ui(r)}add(e){return te(wn,"ADD",this.store.name,e,e),ui(this.store.add(e))}get(e){return ui(this.store.get(e)).next((t=>(t===void 0&&(t=null),te(wn,"GET",this.store.name,e,t),t)))}delete(e){return te(wn,"DELETE",this.store.name,e),ui(this.store.delete(e))}count(){return te(wn,"COUNT",this.store.name),ui(this.store.count())}j(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(r.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Y(e,t){te(wn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.J(o,((l,c,d)=>d.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.J(o,t)}ee(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=l=>{const c=Ff(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new L(((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new CE(d),v=t(d.primaryKey,d.value,p);if(v instanceof L){const x=v.catch((T=>(p.done(),L.reject(T))));r.push(x)}p.isDone?o():p.W===null?d.continue():d.continue(p.W)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ui(i){return new L(((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Ff(r.target.error);t(o)}}))}let cy=!1;function Ff(i){const e=Ss.M(Sc());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cy||(cy=!0,setTimeout((()=>{throw r}),0)),r}}return i}const cl="IndexBackfiller";class kE{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){te(cl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(()=>Z(this,null,function*(){this.task=null;try{const t=yield this.te.re();te(cl,`Documents written: ${t}`)}catch(t){ks(t)?te(cl,"Ignoring IndexedDB error during index backfill: ",t):yield Si(t)}yield this.ne(6e4)})))}}class RE{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return Z(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))})}ie(e,t){const r=new Set;let o=t,l=!0;return L.doWhile((()=>l===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return te(cl,`Processing collection: ${c}`),this.se(e,c,o).next((d=>{o-=d,r.add(c)}));l=!1})))).next((()=>t-o))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this.oe(o,l))).next((d=>(te(cl,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((o,l)=>{const c=t0(l);Lf(c,r)>0&&(r=c)})),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Mn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=-1;function Gc(i){return i==null}function El(i){return i===0&&1/i==-1/0}function NE(i){return typeof i=="number"&&Number.isInteger(i)&&!El(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="";function Qt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=hy(e)),e=DE(i.get(t),e);return hy(e)}function DE(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case kc:t+="";break;default:t+=l}}return t}function hy(i){return i+kc+""}function pr(i){const e=i.length;if(xe(e>=2,64408,{path:i}),e===2)return xe(i.charAt(0)===kc&&i.charAt(1)==="",56145,{path:i}),Je.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=i.indexOf(kc,l);switch((c<0||c>t)&&ge(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(l,c),o+="\0";break;case"":o+=i.substring(l,c+1);break;default:ge(61167,{path:i})}l=c+2}return new Je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="remoteDocuments",Vl="owner",Eo="owner",Tl="mutationQueues",VE="userId",tr="mutations",dy="batchId",fi="userMutationsIndex",fy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(i,e){return[i,Qt(e)]}function i0(i,e,t){return[i,Qt(e),t]}const jE={},Fo="documentMutations",Rc="remoteDocumentsV14",OE=["prefixPath","collectionGroup","readTime","documentId"],mc="documentKeyIndex",ME=["prefixPath","collectionGroup","documentId"],o0="collectionGroupIndex",LE=["collectionGroup","readTime","prefixPath","documentId"],Il="remoteDocumentGlobal",uf="remoteDocumentGlobalKey",Bo="targets",a0="queryTargetsIndex",FE=["canonicalId","targetId"],zo="targetDocuments",BE=["targetId","path"],Bf="documentTargetsIndex",zE=["path","targetId"],Nc="targetGlobalKey",mi="targetGlobal",Sl="collectionParents",UE=["collectionId","parent"],Uo="clientMetadata",$E="clientId",Qc="bundles",qE="bundleId",Xc="namedQueries",KE="name",zf="indexConfiguration",WE="indexId",cf="collectionGroupIndex",HE="collectionGroup",hl="indexState",GE=["indexId","uid"],l0="sequenceNumberIndex",QE=["uid","sequenceNumber"],dl="indexEntries",XE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],u0="documentKeyIndex",YE=["indexId","uid","orderedDocumentKey"],Yc="documentOverlays",JE=["userId","collectionPath","documentId"],hf="collectionPathOverlayIndex",ZE=["userId","collectionPath","largestBatchId"],c0="collectionGroupOverlayIndex",eT=["userId","collectionGroup","largestBatchId"],Uf="globals",tT="name",h0=[Tl,tr,Fo,li,Bo,Vl,mi,zo,Uo,Il,Sl,Qc,Xc],nT=[...h0,Yc],d0=[Tl,tr,Fo,Rc,Bo,Vl,mi,zo,Uo,Il,Sl,Qc,Xc,Yc],f0=d0,$f=[...f0,zf,hl,dl],rT=$f,p0=[...$f,Uf],sT=p0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends r0{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Pt(i,e){const t=Pe(i);return Ss.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function bi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function m0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r!=null?r:Bt.RED,this.left=o!=null?o:Bt.EMPTY,this.right=l!=null?l:Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Bt(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,o!=null?o:this.left,l!=null?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new my(this.data.getIterator())}getIteratorFrom(e){return new my(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class my{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Xe(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException!="undefined"&&l instanceof DOMException?new g0("Invalid base64 string: "+l):l}})(e);return new Et(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Et(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const iT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(i){if(xe(!!i,39018),typeof i=="string"){let e=0;const t=iT.exec(i);if(xe(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(i.seconds),nanos:at(i.nanos)}}function at(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qr(i){return typeof i=="string"?Et.fromBase64String(i):Et.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="server_timestamp",v0="__type__",_0="__previous_value__",w0="__local_write_time__";function qf(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[v0])===null||t===void 0?void 0:t.stringValue)===y0}function Jc(i){const e=i.mapValue.fields[_0];return qf(e)?Jc(e):e}function bl(i){const e=$r(i.mapValue.fields[w0].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t,r,o,l,c,d,p,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=x}}const Dc="(default)";class _i{constructor(e,t){this.projectId=e,this.database=t||Dc}static empty(){return new _i("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof _i&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="__type__",x0="__max__",xs={mapValue:{fields:{__type__:{stringValue:x0}}}},Wf="__vector__",$o="value",gc={nullValue:"NULL_VALUE"};function bs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?qf(i)?4:E0(i)?9007199254740991:Zc(i)?10:11:ge(28295,{value:i})}function _r(i,e){if(i===e)return!0;const t=bs(i);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return bl(i).isEqual(bl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=$r(o.timestampValue),d=$r(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return qr(o.bytesValue).isEqual(qr(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=at(o.doubleValue),d=at(l.doubleValue);return c===d?El(c)===El(d):isNaN(c)&&isNaN(d)}return!1})(i,e);case 9:return Lo(i.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(py(c)!==py(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!_r(c[p],d[p])))return!1;return!0})(i,e);default:return ge(52216,{left:i})}}function Al(i,e){return(i.values||[]).find((t=>_r(t,e)))!==void 0}function As(i,e){if(i===e)return 0;const t=bs(i),r=bs(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=at(l.integerValue||l.doubleValue),p=at(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(i,e);case 3:return gy(i.timestampValue,e.timestampValue);case 4:return gy(bl(i),bl(e));case 5:return af(i.stringValue,e.stringValue);case 6:return(function(l,c){const d=qr(l),p=qr(c);return d.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const x=Ae(d[v],p[v]);if(x!==0)return x}return Ae(d.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ae(at(l.latitude),at(c.latitude));return d!==0?d:Ae(at(l.longitude),at(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return yy(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,v,x;const T=l.fields||{},S=c.fields||{},V=(d=T[$o])===null||d===void 0?void 0:d.arrayValue,z=(p=S[$o])===null||p===void 0?void 0:p.arrayValue,K=Ae(((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0,((x=z==null?void 0:z.values)===null||x===void 0?void 0:x.length)||0);return K!==0?K:yy(V,z)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===xs.mapValue&&c===xs.mapValue)return 0;if(l===xs.mapValue)return 1;if(c===xs.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),v=c.fields||{},x=Object.keys(v);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const S=af(p[T],x[T]);if(S!==0)return S;const V=As(d[p[T]],v[x[T]]);if(V!==0)return V}return Ae(p.length,x.length)})(i.mapValue,e.mapValue);default:throw ge(23264,{le:t})}}function gy(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ae(i,e);const t=$r(i),r=$r(e),o=Ae(t.seconds,r.seconds);return o!==0?o:Ae(t.nanos,r.nanos)}function yy(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=As(t[o],r[o]);if(l)return l}return Ae(t.length,r.length)}function qo(i){return ff(i)}function ff(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=$r(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return qr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return le.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=ff(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${ff(t.fields[c])}`;return o+"}"})(i.mapValue):ge(61005,{value:i})}function yc(i){switch(bs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(i);return e?16+yc(e):16;case 5:return 2*i.stringValue.length;case 6:return qr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+yc(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return bi(r.fields,((l,c)=>{o+=l.length+yc(c)})),o})(i.mapValue);default:throw ge(13486,{value:i})}}function Hf(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function pf(i){return!!i&&"integerValue"in i}function Cl(i){return!!i&&"arrayValue"in i}function vy(i){return!!i&&"nullValue"in i}function _y(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vc(i){return!!i&&"mapValue"in i}function Zc(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kf])===null||t===void 0?void 0:t.stringValue)===Wf}function fl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return bi(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fl(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function E0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===x0}const T0={mapValue:{fields:{[Kf]:{stringValue:Wf},[$o]:{arrayValue:{}}}}};function aT(i){return"nullValue"in i?gc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Hf(_i.empty(),le.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Zc(i)?T0:{mapValue:{}}:ge(35942,{value:i})}function lT(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Hf(_i.empty(),le.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?T0:"mapValue"in i?Zc(i)?{mapValue:{}}:xs:ge(61959,{value:i})}function wy(i,e){const t=As(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function xy(i,e){const t=As(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=dt.emptyPath(),r={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=fl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];vc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){bi(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new dn(fl(this.value))}}function I0(i){const e=[];return bi(i.fields,((t,r)=>{const o=new dt([t]);if(vc(r)){const l=I0(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t,r,o,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new pt(e,0,Ie.min(),Ie.min(),Ie.min(),dn.empty(),0)}static newFoundDocument(e,t,r,o){return new pt(e,1,t,Ie.min(),r,o,0)}static newNoDocument(e,t){return new pt(e,2,t,Ie.min(),Ie.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,Ie.min(),Ie.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.position=e,this.inclusive=t}}function Ey(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=le.comparator(le.fromName(c.referenceValue),t.key):r=As(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ty(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!_r(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function uT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{}class Le extends S0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cT(e,t,r):t==="array-contains"?new fT(e,r):t==="in"?new R0(e,r):t==="not-in"?new pT(e,r):t==="array-contains-any"?new mT(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hT(e,r):new dT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(As(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends S0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ze(e,t)}matches(e){return Wo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Wo(i){return i.op==="and"}function mf(i){return i.op==="or"}function Gf(i){return b0(i)&&Wo(i)}function b0(i){for(const e of i.filters)if(e instanceof Ze)return!1;return!0}function gf(i){if(i instanceof Le)return i.field.canonicalString()+i.op.toString()+qo(i.value);if(Gf(i))return i.filters.map((e=>gf(e))).join(",");{const e=i.filters.map((t=>gf(t))).join(",");return`${i.op}(${e})`}}function A0(i,e){return i instanceof Le?(function(r,o){return o instanceof Le&&r.op===o.op&&r.field.isEqual(o.field)&&_r(r.value,o.value)})(i,e):i instanceof Ze?(function(r,o){return o instanceof Ze&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,d)=>l&&A0(c,o.filters[d])),!0):!1})(i,e):void ge(19439)}function C0(i,e){const t=i.filters.concat(e);return Ze.create(t,i.op)}function P0(i){return i instanceof Le?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(i):i instanceof Ze?(function(t){return t.op.toString()+" {"+t.getFilters().map(P0).join(" ,")+"}"})(i):"Filter"}class cT extends Le{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class hT extends Le{constructor(e,t){super(e,"in",t),this.keys=k0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dT extends Le{constructor(e,t){super(e,"not-in",t),this.keys=k0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function k0(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>le.fromName(r.referenceValue)))}class fT extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cl(t)&&Al(t.arrayValue,this.value)}}class R0 extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}}class pT extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}}class mT extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Al(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t=null,r=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function yf(i,e=null,t=[],r=[],o=null,l=null,c=null){return new gT(i,e,t,r,o,l,c)}function wi(i){const e=Pe(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>gf(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Gc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>qo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>qo(r))).join(",")),e.Pe=t}return e.Pe}function jl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!uT(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!A0(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ty(i.startAt,e.startAt)&&Ty(i.endAt,e.endAt)}function jc(i){return le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Oc(i,e){return i.filters.filter((t=>t instanceof Le&&t.field.isEqual(e)))}function Iy(i,e,t){let r=gc,o=!0;for(const l of Oc(i,e)){let c=gc,d=!0;switch(l.op){case"<":case"<=":c=aT(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=gc}wy({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];wy({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function Sy(i,e,t){let r=xs,o=!0;for(const l of Oc(i,e)){let c=xs,d=!0;switch(l.op){case">=":case">":c=lT(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=xs}xy({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];xy({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t=null,r=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function yT(i,e,t,r,o,l,c,d){return new eh(i,e,t,r,o,l,c,d)}function Ol(i){return new eh(i)}function by(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function vT(i){return i.collectionGroup!==null}function pl(i){const e=Pe(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(dt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(d=d.add(v.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Vc(l,r))})),t.has(dt.keyField().canonicalString())||e.Te.push(new Vc(dt.keyField(),r))}return e.Te}function Fn(i){const e=Pe(i);return e.Ie||(e.Ie=_T(e,pl(i))),e.Ie}function _T(i,e){if(i.limitType==="F")return yf(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Vc(o.field,l)}));const t=i.endAt?new Ko(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ko(i.startAt.position,i.startAt.inclusive):null;return yf(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function vf(i,e,t){return new eh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function th(i,e){return jl(Fn(i),Fn(e))&&i.limitType===e.limitType}function N0(i){return`${wi(Fn(i))}|lt:${i.limitType}`}function Po(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>P0(o))).join(", ")}]`),Gc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${r})`})(Fn(i))}; limitType=${i.limitType})`}function Ml(i,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):le.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,o){for(const l of pl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(c,d,p){const v=Ey(c,d,p);return c.inclusive?v<=0:v<0})(r.startAt,pl(r),o)||r.endAt&&!(function(c,d,p){const v=Ey(c,d,p);return c.inclusive?v>=0:v>0})(r.endAt,pl(r),o))})(i,e)}function wT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function D0(i){return(e,t)=>{let r=!1;for(const o of pl(i)){const l=xT(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function xT(i,e,t){const r=i.field.isKeyField()?le.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),v=d.data.field(l);return p!==null&&v!==null?As(p,v):ge(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return m0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new lt(le.comparator);function xn(){return ET}const V0=new lt(le.comparator);function sl(...i){let e=V0;for(const t of i)e=e.insert(t.key,t);return e}function j0(i){let e=V0;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function mr(){return ml()}function O0(){return ml()}function ml(){return new Kr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const TT=new lt(le.comparator),IT=new Xe(le.comparator);function Ve(...i){let e=IT;for(const t of i)e=e.add(t);return e}const ST=new Xe(Ae);function bT(){return ST}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function M0(i){return{integerValue:""+i}}function AT(i,e){return NE(e)?M0(e):Qf(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this._=void 0}}function CT(i,e,t){return i instanceof Pl?(function(o,l){const c={fields:{[v0]:{stringValue:y0},[w0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qf(l)&&(l=Jc(l)),l&&(c.fields[_0]=l),{mapValue:c}})(t,e):i instanceof Ho?F0(i,e):i instanceof Go?B0(i,e):(function(o,l){const c=L0(o,l),d=Ay(c)+Ay(o.Ee);return pf(c)&&pf(o.Ee)?M0(d):Qf(o.serializer,d)})(i,e)}function PT(i,e,t){return i instanceof Ho?F0(i,e):i instanceof Go?B0(i,e):t}function L0(i,e){return i instanceof kl?(function(r){return pf(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Pl extends nh{}class Ho extends nh{constructor(e){super(),this.elements=e}}function F0(i,e){const t=z0(e);for(const r of i.elements)t.some((o=>_r(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Go extends nh{constructor(e){super(),this.elements=e}}function B0(i,e){let t=z0(e);for(const r of i.elements)t=t.filter((o=>!_r(o,r)));return{arrayValue:{values:t}}}class kl extends nh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ay(i){return at(i.integerValue||i.doubleValue)}function z0(i){return Cl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t){this.field=e,this.transform=t}}function RT(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Ho&&o instanceof Ho||r instanceof Go&&o instanceof Go?Lo(r.elements,o.elements,_r):r instanceof kl&&o instanceof kl?_r(r.Ee,o.Ee):r instanceof Pl&&o instanceof Pl})(i.transform,e.transform)}class NT{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class rh{}function U0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Xf(i.key,En.none()):new ea(i.key,i.data,En.none());{const t=i.data,r=dn.empty();let o=new Xe(dt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new Rs(i.key,r,new Ln(o.toArray()),En.none())}}function DT(i,e,t){i instanceof ea?(function(o,l,c){const d=o.value.clone(),p=Py(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(i,e,t):i instanceof Rs?(function(o,l,c){if(!_c(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Py(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll($0(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function gl(i,e,t,r){return i instanceof ea?(function(l,c,d,p){if(!_c(l.precondition,c))return d;const v=l.value.clone(),x=ky(l.fieldTransforms,p,c);return v.setAll(x),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null})(i,e,t,r):i instanceof Rs?(function(l,c,d,p){if(!_c(l.precondition,c))return d;const v=ky(l.fieldTransforms,p,c),x=c.data;return x.setAll($0(l)),x.setAll(v),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(i,e,t,r):(function(l,c,d){return _c(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(i,e,t)}function VT(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=L0(r.transform,o||null);l!=null&&(t===null&&(t=dn.empty()),t.set(r.field,l))}return t||null}function Cy(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,((l,c)=>RT(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ea extends rh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends rh{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $0(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Py(i,e,t){const r=new Map;xe(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,d=e.data.field(l.field);r.set(l.field,PT(c,d,t[o]))}return r}function ky(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,CT(l,c,e))}return r}class Xf extends rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q0 extends rh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&DT(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=O0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=U0(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,r)=>Cy(t,r)))&&Lo(this.baseMutations,e.baseMutations,((t,r)=>Cy(t,r)))}}class Jf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return TT})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new Jf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,$e;function OT(i){switch(i){case G.OK:return ge(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ge(15467,{code:i})}}function K0(i){if(i===void 0)return tn("GRPC error has no .code"),G.UNKNOWN;switch(i){case wt.OK:return G.OK;case wt.CANCELLED:return G.CANCELLED;case wt.UNKNOWN:return G.UNKNOWN;case wt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case wt.INTERNAL:return G.INTERNAL;case wt.UNAVAILABLE:return G.UNAVAILABLE;case wt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case wt.NOT_FOUND:return G.NOT_FOUND;case wt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case wt.ABORTED:return G.ABORTED;case wt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case wt.DATA_LOSS:return G.DATA_LOSS;default:return ge(39323,{code:i})}}($e=wt||(wt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Is([4294967295,4294967295],0);function Ry(i){const e=Jv().encode(i),t=new qv;return t.update(e),new Uint8Array(t.digest())}function Ny(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,r],0),new Is([o,l],0)]}class ep{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new il(`Invalid padding: ${t}`);if(r<0)throw new il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new il(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Is.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(Is.fromNumber(r)));return o.compare(MT)===1&&(o=new Is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ry(e),[r,o]=Ny(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ep(l,o,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=Ry(e),[r,o]=Ny(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sh(Ie.min(),o,new lt(Ae),xn(),Ve())}}class Ll{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ll(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class W0{constructor(e,t){this.targetId=e,this.De=t}}class H0{constructor(e,t,r=Et.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Dy{constructor(){this.ve=0,this.Ce=Vy(),this.Fe=Et.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),r=Ve();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ge(38017,{changeType:l})}})),new Ll(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Vy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class LT{constructor(e){this.We=e,this.Ge=new Map,this.ze=xn(),this.je=ac(),this.Je=ac(),this.He=new lt(Ae)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const l=o.target;if(jc(l))if(r===0){const c=new le(l.path);this.Xe(t,c,pt.newNoDocument(c,Ie.min()))}else xe(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=qr(r).toUint8Array()}catch(p){if(p instanceof g0)return vr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ep(c,o,l)}catch(p){return vr(p instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&jc(d.target)){const p=new le(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,pt.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=Ve();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const v=this.st(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new sh(e,t,this.He,this.ze,r);return this.ze=xn(),this.je=ac(),this.Je=ac(),this.He=new lt(Ae),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Dy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Xe(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Xe(Ae),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Dy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ac(){return new lt(le.comparator)}function Vy(){return new lt(le.comparator)}const FT={asc:"ASCENDING",desc:"DESCENDING"},BT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zT={and:"AND",or:"OR"};class UT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _f(i,e){return i.useProto3Json||Gc(e)?e:{value:e}}function Qo(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $T(i,e){return Qo(i,e.toTimestamp())}function nn(i){return xe(!!i,49232),Ie.fromTimestamp((function(t){const r=$r(t);return new Qe(r.seconds,r.nanos)})(i))}function tp(i,e){return wf(i,e).canonicalString()}function wf(i,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function Q0(i){const e=Je.fromString(i);return xe(s_(e),10190,{key:e.toString()}),e}function Mc(i,e){return tp(i.databaseId,e.path)}function gi(i,e){const t=Q0(e);if(t.get(1)!==i.databaseId.projectId)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new le(J0(t))}function X0(i,e){return tp(i.databaseId,e)}function Y0(i){const e=Q0(i);return e.length===4?Je.emptyPath():J0(e)}function xf(i){return new Je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function J0(i){return xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function jy(i,e,t){return{name:Mc(i,e),fields:t.value.mapValue.fields}}function qT(i,e,t){const r=gi(i,e.name),o=nn(e.updateTime),l=e.createTime?nn(e.createTime):Ie.min(),c=new dn({mapValue:{fields:e.fields}}),d=pt.newFoundDocument(r,o,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function KT(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ge(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,x){return v.useProto3Json?(xe(x===void 0||typeof x=="string",58123),Et.fromBase64String(x||"")):(xe(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Et.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(v){const x=v.code===void 0?G.UNKNOWN:K0(v.code);return new he(x,v.message||"")})(c);t=new H0(r,o,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=gi(i,r.document.name),l=nn(r.document.updateTime),c=r.document.createTime?nn(r.document.createTime):Ie.min(),d=new dn({mapValue:{fields:r.document.fields}}),p=pt.newFoundDocument(o,l,c,d),v=r.targetIds||[],x=r.removedTargetIds||[];t=new wc(v,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=gi(i,r.document),l=r.readTime?nn(r.readTime):Ie.min(),c=pt.newNoDocument(o,l),d=r.removedTargetIds||[];t=new wc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=gi(i,r.document),l=r.removedTargetIds||[];t=new wc([],l,o,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new jT(o,l),d=r.targetId;t=new W0(d,c)}}return t}function Lc(i,e){let t;if(e instanceof ea)t={update:jy(i,e.key,e.value)};else if(e instanceof Xf)t={delete:Mc(i,e.key)};else if(e instanceof Rs)t={update:jy(i,e.key,e.data),updateMask:YT(e.fieldMask)};else{if(!(e instanceof q0))return ge(16599,{Rt:e.type});t={verify:Mc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof Pl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ho)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Go)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kl)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw ge(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:$T(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(i,e.precondition)),t}function Ef(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?En.updateTime(nn(l.updateTime)):l.exists!==void 0?En.exists(l.exists):En.none()})(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,d){let p=null;if("setToServerValue"in d)xe(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Pl;else if("appendMissingElements"in d){const x=d.appendMissingElements.values||[];p=new Ho(x)}else if("removeAllFromArray"in d){const x=d.removeAllFromArray.values||[];p=new Go(x)}else"increment"in d?p=new kl(c,d.increment):ge(16584,{proto:d});const v=dt.fromServerFormat(d.fieldPath);return new kT(v,p)})(i,o))):[];if(e.update){e.update.name;const o=gi(i,e.update.name),l=new dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const v=p.fieldPaths||[];return new Ln(v.map((x=>dt.fromServerFormat(x))))})(e.updateMask);return new Rs(o,l,c,t,r)}return new ea(o,l,t,r)}if(e.delete){const o=gi(i,e.delete);return new Xf(o,t)}if(e.verify){const o=gi(i,e.verify);return new q0(o,t)}return ge(1463,{proto:e})}function WT(i,e){return i&&i.length>0?(xe(e!==void 0,14353),i.map((t=>(function(o,l){let c=o.updateTime?nn(o.updateTime):nn(l);return c.isEqual(Ie.min())&&(c=nn(l)),new NT(c,o.transformResults||[])})(t,e)))):[]}function Z0(i,e){return{documents:[X0(i,e.path)]}}function e_(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=X0(i,o);const l=(function(v){if(v.length!==0)return r_(Ze.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(v){if(v.length!==0)return v.map((x=>(function(S){return{field:ko(S.field),direction:GT(S.dir)}})(x)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=_f(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function t_(i){let e=Y0(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){xe(r===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(T){const S=n_(T);return S instanceof Ze&&Gf(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(z){return new Vc(Ro(z.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Gc(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,V=T.values||[];return new Ko(V,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const S=!T.before,V=T.values||[];return new Ko(V,S)})(t.endAt)),yT(e,o,c,l,d,"F",p,v)}function HT(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n_(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ro(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(t.unaryFilter.field);return Le.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ro(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Le.create(Ro(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Ze.create(t.compositeFilter.filters.map((r=>n_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(i):ge(30097,{filter:i})}function GT(i){return FT[i]}function QT(i){return BT[i]}function XT(i){return zT[i]}function ko(i){return{fieldPath:i.canonicalString()}}function Ro(i){return dt.fromServerFormat(i.fieldPath)}function r_(i){return i instanceof Le?(function(t){if(t.op==="=="){if(_y(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(vy(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_y(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(vy(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:QT(t.op),value:t.value}}})(i):i instanceof Ze?(function(t){const r=t.getFilters().map((o=>r_(o)));return r.length===1?r[0]:{compositeFilter:{op:XT(t.op),filters:r}}})(i):ge(54877,{filter:i})}function YT(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function s_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t,r,o,l=Ie.min(),c=Ie.min(),d=Et.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.gt=e}}function JT(i,e){let t;if(e.document)t=qT(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),o=Ei(e.noDocument.readTime);t=pt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const r=le.fromSegments(e.unknownDocument.path),o=Ei(e.unknownDocument.version);t=pt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const l=new Qe(o[0],o[1]);return Ie.fromTimestamp(l)})(e.readTime)),t}function Oy(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Fc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Mc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Qo(l,c.version.toTimestamp()),createTime:Qo(l,c.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xi(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xi(e.version)}}return r}function Fc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xi(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ei(i){const e=new Qe(i.seconds,i.nanoseconds);return Ie.fromTimestamp(e)}function ci(i,e){const t=(e.baseMutations||[]).map((l=>Ef(i.gt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>Ef(i.gt,l))),o=Qe.fromMillis(e.localWriteTimeMs);return new Yf(e.batchId,o,t,r)}function ol(i){const e=Ei(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ei(i.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return xe(c===1,1966,{count:c}),Fn(Ol(Y0(l.documents[0])))})(i.query):(function(l){return Fn(t_(l))})(i.query),new Fr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Et.fromBase64String(i.resumeToken))}function o_(i,e){const t=xi(e.snapshotVersion),r=xi(e.lastLimboFreeSnapshotVersion);let o;o=jc(e.target)?Z0(i.gt,e.target):e_(i.gt,e.target).Vt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wi(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function a_(i){const e=t_({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?vf(e,e.limit,"L"):e}function Gd(i,e){return new Zf(e.largestBatchId,Ef(i.gt,e.overlayMutation))}function My(i,e){const t=e.path.lastSegment();return[i,Qt(e.path.popLast()),t]}function Ly(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:xi(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{getBundleMetadata(e,t){return Fy(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Ei(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return Fy(e).put((function(o){return{bundleId:o.id,createTime:xi(nn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return By(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:a_(l.bundledQuery),readTime:Ei(l.readTime)}})(r)}))}saveNamedQuery(e,t){return By(e).put((function(o){return{name:o.name,readTime:xi(nn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function Fy(i){return Pt(i,Qc)}function By(i){return Pt(i,Xc)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new ih(e,r)}getOverlay(e,t){return Ja(e).get(My(this.userId,t)).next((r=>r?Gd(this.serializer,r):null))}getOverlays(e,t){const r=mr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((l,c)=>{const d=new Zf(t,c);o.push(this.wt(e,d))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(Qt(c.getCollectionPath()))));const l=[];return o.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Ja(e).Y(hf,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,r){const o=mr(),l=Qt(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ja(e).j(hf,c).next((d=>{for(const p of d){const v=Gd(this.serializer,p);o.set(v.getKey(),v)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const l=mr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ja(e).X({index:c0,range:d},((p,v,x)=>{const T=Gd(this.serializer,v);l.size()<o||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):x.done()})).next((()=>l))}wt(e,t){return Ja(e).put((function(o,l,c){const[d,p,v]=My(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Lc(o.gt,c.mutation)}})(this.serializer,this.userId,t))}}function Ja(i){return Pt(i,Yc)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{St(e){return Pt(e,Uf)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(at(e.integerValue));else if("doubleValue"in e){const r=at(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),El(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=$r(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(qr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?E0(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Zc(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ge(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const o of Object.keys(r))this.xt(o,t),this.Dt(r[o],t)}Lt(e,t){var r,o;const l=e.fields||{};this.Ct(t,53);const c=$o,d=((o=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Ct(t,15),t.Ft(at(d)),this.xt(c,t),this.Dt(l[c],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const o of r)this.Dt(o,t)}Bt(e,t){this.Ct(t,37),le.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}hi.Ut=new hi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=255;function tI(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function zy(i){const e=64-(function(r){let o=0;for(let l=0;l<8;++l){const c=tI(255&r[l]);if(o+=c,c!==8)break}return o})(i);return Math.ceil(e/8)}class nI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const o=t.codePointAt(0);this.Wt(240|o>>>18),this.Wt(128|63&o>>>12),this.Wt(128|63&o>>>6),this.Wt(128|63&o)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const o=t.codePointAt(0);this.jt(240|o>>>18),this.jt(128|63&o>>>12),this.jt(128|63&o>>>6),this.jt(128|63&o)}}this.Jt()}Zt(e){const t=this.Xt(e),r=zy(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}tn(e){const t=this.Xt(e),r=zy(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}nn(){this.rn(Io),this.rn(255)}sn(){this._n(Io),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===Io?(this.rn(Io),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Io?(this._n(Io),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class rI{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class sI{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Za{constructor(){this.un=new nI,this.cn=new rI(this.un),this.ln=new sI(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r,o){this.Pn=e,this.Tn=t,this.In=r,this.dn=o}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new di(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:xc(this.In),directionalValue:xc(this.dn),orderedDocumentKey:xc(t),documentKey:r.path.toArray()}}Rn(e,t,r){const o=this.An(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function gs(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=Uy(i.In,e.In),t!==0?t:(t=Uy(i.dn,e.dn),t!==0?t:le.comparator(i.Tn,e.Tn)))}function Uy(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function xc(i){return jv()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(i):i}function $y(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(i)}class qy{constructor(e){this.Vn=new Xe(((t,r)=>dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=lf(e);if(t!==void 0&&!this.yn(t))return!1;const r=ai(e);let o=new Set,l=0,c=0;for(;l<r.length&&this.yn(r[l]);++l)o=o.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[l];if(!this.wn(d,p)||!this.Sn(this.mn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.mn.length||!this.Sn(this.mn[c++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new Xe(dt.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fc(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fc(r.field,r.dir==="asc"?0:1)));return new Pc(Pc.UNKNOWN_ID,this.collectionId,t,xl.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(i){var e,t;if(xe(i instanceof Le||i instanceof Ze,20012),i instanceof Le){if(i instanceof R0){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>Le.create(i.field,"==",l))))||[];return Ze.create(o,"or")}return i}const r=i.filters.map((o=>l_(o)));return Ze.create(r,i.op)}function iI(i){if(i.getFilters().length===0)return[];const e=Sf(l_(i));return xe(u_(e),7391),Tf(e)||If(e)?[e]:e.getFilters()}function Tf(i){return i instanceof Le}function If(i){return i instanceof Ze&&Gf(i)}function u_(i){return Tf(i)||If(i)||(function(t){if(t instanceof Ze&&mf(t)){for(const r of t.getFilters())if(!Tf(r)&&!If(r))return!1;return!0}return!1})(i)}function Sf(i){if(xe(i instanceof Le||i instanceof Ze,34018),i instanceof Le)return i;if(i.filters.length===1)return Sf(i.filters[0]);const e=i.filters.map((r=>Sf(r)));let t=Ze.create(e,i.op);return t=Bc(t),u_(t)?t:(xe(t instanceof Ze,64498),xe(Wo(t),40251),xe(t.filters.length>1,57927),t.filters.reduce(((r,o)=>np(r,o))))}function np(i,e){let t;return xe(i instanceof Le||i instanceof Ze,38388),xe(e instanceof Le||e instanceof Ze,25473),t=i instanceof Le?e instanceof Le?(function(o,l){return Ze.create([o,l],"and")})(i,e):Ky(i,e):e instanceof Le?Ky(e,i):(function(o,l){if(xe(o.filters.length>0&&l.filters.length>0,48005),Wo(o)&&Wo(l))return C0(o,l.getFilters());const c=mf(o)?o:l,d=mf(o)?l:o,p=c.filters.map((v=>np(v,d)));return Ze.create(p,"or")})(i,e),Bc(t)}function Ky(i,e){if(Wo(e))return C0(e,i.getFilters());{const t=e.filters.map((r=>np(i,r)));return Ze.create(t,"or")}}function Bc(i){if(xe(i instanceof Le||i instanceof Ze,11850),i instanceof Le)return i;const e=i.getFilters();if(e.length===1)return Bc(e[0]);if(b0(i))return i;const t=e.map((o=>Bc(o))),r=[];return t.forEach((o=>{o instanceof Le?r.push(o):o instanceof Ze&&(o.op===i.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Ze.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Dn=new rp}addToCollectionParentIndex(e,t){return this.Dn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Tn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class rp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Xe(Je.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Xe(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="IndexedDbIndexManager",lc=new Uint8Array(0);class aI{constructor(e,t){this.databaseId=t,this.vn=new rp,this.Cn=new Kr((r=>wi(r)),((r,o)=>jl(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Qt(o)};return Hy(e).put(l)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Zv(t),""],!1,!0);return Hy(e).j(o).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(pr(c.parent))}return r}))}addFieldIndex(e,t){const r=el(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const l=r.add(o);if(t.indexState){const c=bo(e);return l.next((d=>{c.put(Ly(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=el(e),o=bo(e),l=So(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=el(e),r=So(e),o=bo(e);return t.Y().next((()=>r.Y())).next((()=>o.Y()))}createTargetIndexes(e,t){return L.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const l=new qy(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=So(e);let o=!0;const l=new Map;return L.forEach(this.Fn(t),(c=>this.Mn(e,c).next((d=>{o&&(o=!!d),l.set(c,d)})))).next((()=>{if(o){let c=Ve();const d=[];return L.forEach(l,((p,v)=>{te(Wy,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((ne=>`${ne.fieldPath}:${ne.kind}`)).join(",")}`})(p)} to execute ${wi(t)}`);const x=(function(Q,ne){const de=lf(ne);if(de===void 0)return null;for(const ue of Oc(Q,de.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(v,p),T=(function(Q,ne){const de=new Map;for(const ue of ai(ne))for(const R of Oc(Q,ue.fieldPath))switch(R.op){case"==":case"in":de.set(ue.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return de.set(ue.fieldPath.canonicalString(),R.value),Array.from(de.values())}return null})(v,p),S=(function(Q,ne){const de=[];let ue=!0;for(const R of ai(ne)){const E=R.kind===0?Iy(Q,R.fieldPath,Q.startAt):Sy(Q,R.fieldPath,Q.startAt);de.push(E.value),ue&&(ue=E.inclusive)}return new Ko(de,ue)})(v,p),V=(function(Q,ne){const de=[];let ue=!0;for(const R of ai(ne)){const E=R.kind===0?Sy(Q,R.fieldPath,Q.endAt):Iy(Q,R.fieldPath,Q.endAt);de.push(E.value),ue&&(ue=E.inclusive)}return new Ko(de,ue)})(v,p),z=this.xn(p,v,S),K=this.xn(p,v,V),$=this.On(p,v,T),se=this.Nn(p.indexId,x,z,S.inclusive,K,V.inclusive,$);return L.forEach(se,(H=>r.H(H,t.limit).next((Q=>{Q.forEach((ne=>{const de=le.fromSegments(ne.documentKey);c.has(de)||(c=c.add(de),d.push(de))}))}))))})).next((()=>d))}return L.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=iI(Ze.create(e.filters,"and")).map((r=>yf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,o,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),v=p/(t!=null?t.length:1),x=[];for(let T=0;T<p;++T){const S=t?this.Bn(t[T/v]):lc,V=this.Ln(e,S,r[T%v],o),z=this.kn(e,S,l[T%v],c),K=d.map(($=>this.Ln(e,S,$,!0)));x.push(...this.createRange(V,z,K))}return x}Ln(e,t,r,o){const l=new di(e,le.empty(),t,r);return o?l:l.En()}kn(e,t,r,o){const l=new di(e,le.empty(),t,r);return o?l.En():l}Mn(e,t){const r=new qy(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((l=>{let c=null;for(const d of l)r.pn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const o=this.Fn(t);return L.forEach(o,(l=>this.Mn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(p){let v=new Xe(dt.comparator),x=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?x=!0:v=v.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(x?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}qn(e,t){const r=new Za;for(const o of ai(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const c=r.hn(o.kind);hi.Ut.bt(l,c)}return r.an()}Bn(e){const t=new Za;return hi.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Za;return hi.Ut.bt(Hf(this.databaseId,t),r.hn((function(l){const c=ai(l);return c.length===0?0:c[c.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let o=[];o.push(new Za);let l=0;for(const c of ai(e)){const d=r[l++];for(const p of o)if(this.$n(t,c.fieldPath)&&Cl(d))o=this.Un(o,c,d);else{const v=p.hn(c.kind);hi.Ut.bt(d,v)}}return this.Kn(o)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new Za;p.seed(d.an()),hi.Ut.bt(c,p.hn(t.kind)),l.push(p)}return l}$n(e,t){return!!e.filters.find((r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=el(e),o=bo(e);return(t?r.j(cf,IDBKeyRange.bound(t,t)):r.j()).next((l=>{const c=[];return L.forEach(l,(d=>o.get([d.indexId,this.uid]).next((p=>{c.push((function(x,T){const S=T?new xl(T.sequenceNumber,new Tn(Ei(T.readTime),new le(pr(T.documentKey)),T.largestBatchId)):xl.empty(),V=x.fields.map((([z,K])=>new fc(dt.fromServerFormat(z),K)));return new Pc(x.indexId,x.collectionGroup,V,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:Ae(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=el(e),l=bo(e);return this.Wn(e).next((c=>o.j(cf,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(Ly(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,l)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(r.set(o.collectionGroup,d),L.forEach(d,(p=>this.Gn(e,o,p).next((v=>{const x=this.zn(l,p);return v.isEqual(x)?L.resolve():this.jn(e,l,p,v,x)})))))))}))}Jn(e,t,r,o){return So(e).put(o.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,o){return So(e).delete(o.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const o=So(e);let l=new Xe(gs);return o.X({index:u0,range:IDBKeyRange.only([r.indexId,this.uid,xc(this.Qn(r,t))])},((c,d)=>{l=l.add(new di(r.indexId,t,$y(d.arrayValue),$y(d.directionalValue)))})).next((()=>l))}zn(e,t){let r=new Xe(gs);const o=this.qn(t,e);if(o==null)return r;const l=lf(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Cl(c))for(const d of c.arrayValue.values||[])r=r.add(new di(t.indexId,e.key,this.Bn(d),o))}else r=r.add(new di(t.indexId,e.key,lc,o));return r}jn(e,t,r,o,l){te(Wy,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,v,x,T,S){const V=p.getIterator(),z=v.getIterator();let K=To(V),$=To(z);for(;K||$;){let se=!1,H=!1;if(K&&$){const Q=x(K,$);Q<0?H=!0:Q>0&&(se=!0)}else K!=null?H=!0:se=!0;se?(T($),$=To(z)):H?(S(K),K=To(V)):(K=To(V),$=To(z))}})(o,l,gs,(d=>{c.push(this.Jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),L.waitFor(c)}Wn(e){let t=1;return bo(e).X({index:l0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,l)=>{l.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>gs(c,d))).filter(((c,d,p)=>!d||gs(c,p[d-1])!==0));const o=[];o.push(e);for(const c of r){const d=gs(c,e),p=gs(c,t);if(d===0)o[0]=e.En();else if(d>0&&p<0)o.push(c),o.push(c.En());else if(p>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.Yn(o[c],o[c+1]))return[];const d=o[c].Rn(this.uid,lc,le.empty()),p=o[c+1].Rn(this.uid,lc,le.empty());l.push(IDBKeyRange.bound(d,p))}return l}Yn(e,t){return gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gy)}getMinOffset(e,t){return L.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((o=>o||ge(44426))))).next(Gy)}}function Hy(i){return Pt(i,Sl)}function So(i){return Pt(i,dl)}function el(i){return Pt(i,zf)}function bo(i){return Pt(i,hl)}function Gy(i){xe(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;Lf(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c_=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(i,e,t){const r=i.store(tr),o=i.store(Fo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.X({range:c},((x,T,S)=>(d++,S.delete())));l.push(p.next((()=>{xe(d===1,47070,{batchId:t.batchId})})));const v=[];for(const x of t.mutations){const T=i0(e,x.key.path,t.batchId);l.push(o.delete(T)),v.push(x.key)}return L.waitFor(l).next((()=>v))}function zc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ge(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(c_,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);class oh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Zn={}}static yt(e,t,r,o){xe(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new oh(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).X({index:fi,range:r},((o,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const l=No(e),c=ys(e);return c.add({}).next((d=>{xe(typeof d=="number",49019);const p=new Yf(d,t,r,o),v=(function(V,z,K){const $=K.baseMutations.map((H=>Lc(V.gt,H))),se=K.mutations.map((H=>Lc(V.gt,H)));return{userId:z,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:$,mutations:se}})(this.serializer,this.userId,p),x=[];let T=new Xe(((S,V)=>Ae(S.canonicalString(),V.canonicalString())));for(const S of o){const V=i0(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),x.push(c.put(v)),x.push(l.put(V,jE))}return T.forEach((S=>{x.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),L.waitFor(x).next((()=>p))}))}lookupMutationBatch(e,t){return ys(e).get(t).next((r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ci(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?L.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ys(e).X({index:fi,range:o},((c,d,p)=>{d.userId===this.userId&&(xe(d.batchId>=r,47524,{er:r}),l=ci(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=pi;return ys(e).X({index:fi,range:t,reverse:!0},((o,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,pi],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).j(fi,t).next((r=>r.map((o=>ci(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return No(e).X({range:o},((c,d,p)=>{const[v,x,T]=c,S=pr(x);if(v===this.userId&&t.path.isEqual(S))return ys(e).get(T).next((V=>{if(!V)throw ge(61480,{tr:c,batchId:T});xe(V.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:V.userId,batchId:T}),l.push(ci(this.serializer,V))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ae);const o=[];return t.forEach((l=>{const c=pc(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=No(e).X({range:d},((v,x,T)=>{const[S,V,z]=v,K=pr(V);S===this.userId&&l.path.isEqual(K)?r=r.add(z):T.done()}));o.push(p)})),L.waitFor(o).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=pc(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Xe(Ae);return No(e).X({range:c},((p,v,x)=>{const[T,S,V]=p,z=pr(S);T===this.userId&&r.isPrefixOf(z)?z.length===o&&(d=d.add(V)):x.done()})).next((()=>this.nr(e,d)))}nr(e,t){const r=[],o=[];return t.forEach((l=>{o.push(ys(e).get(l).next((c=>{if(c===null)throw ge(35274,{batchId:l});xe(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(ci(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return h_(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return No(e).X({range:r},((l,c,d)=>{if(l[0]===this.userId){const p=pr(l[1]);o.push(p)}else d.done()})).next((()=>{xe(o.length===0,56720,{ir:o.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return d_(e,this.userId,t)}sr(e){return f_(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:pi,lastStreamToken:""}))}}function d_(i,e,t){const r=pc(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return No(i).X({range:l,Z:!0},((d,p,v)=>{const[x,T,S]=d;x===e&&T===o&&(c=!0),v.done()})).next((()=>c))}function ys(i){return Pt(i,tr)}function No(i){return Pt(i,Fo)}function f_(i){return Pt(i,Tl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ti(0)}static ur(){return new Ti(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new Ti(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>Ie.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.lr(e,o))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ao(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let o=0;const l=[];return Ao(e).X(((c,d)=>{const p=ol(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>o))}forEachTarget(e,t){return Ao(e).X(((r,o)=>{const l=ol(o);t(l)}))}cr(e){return Xy(e).get(Nc).next((t=>(xe(t!==null,2888),t)))}lr(e,t){return Xy(e).put(Nc,t)}hr(e,t){return Ao(e).put(o_(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=wi(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ao(e).X({range:o,index:a0},((c,d,p)=>{const v=ol(d);jl(t,v.target)&&(l=v,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const o=[],l=_s(e);return t.forEach((c=>{const d=Qt(c.path);o.push(l.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=_s(e);return L.forEach(t,(l=>{const c=Qt(l.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=_s(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=_s(e);let l=Ve();return o.X({range:r,Z:!0},((c,d,p)=>{const v=pr(c[1]),x=new le(v);l=l.add(x)})).next((()=>l))}containsKey(e,t){const r=Qt(t.path),o=IDBKeyRange.bound([r],[Zv(r)],!1,!0);let l=0;return _s(e).X({index:Bf,Z:!0,range:o},(([c,d],p,v)=>{c!==0&&(l++,v.done())})).next((()=>l>0))}Et(e,t){return Ao(e).get(t).next((r=>r?ol(r):null))}}function Ao(i){return Pt(i,Bo)}function Xy(i){return Pt(i,mi)}function _s(i){return Pt(i,zo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="LruGarbageCollector",uI=1048576;function Jy([i,e],[t,r]){const o=Ae(i,t);return o===0?Ae(e,r):o}class cI{constructor(e){this.Tr=e,this.buffer=new Xe(Jy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Jy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(Yy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(()=>Z(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ks(t)?te(Yy,"Ignoring IndexedDB error during garbage collection: ",t):yield Si(t)}yield this.Rr(3e5)})))}}class hI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Mn.ue);const r=new cI(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Qy)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,l,c,d,p,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,d=Date.now(),this.removeTargets(e,r,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(v=Date.now(),Co()<=qe.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(v-p)+`ms
Total Duration: ${v-x}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function m_(i,e){return new hI(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t){this.db=e,this.garbageCollector=m_(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,o)=>t(o)))}addReference(e,t,r){return uc(e,r)}removeReference(e,t,r){return uc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uc(e,t)}Sr(e,t){return(function(o,l){let c=!1;return f_(o).ee((d=>d_(o,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.wr(e,((c,d)=>{if(d<=t){const p=this.Sr(e,c).next((v=>{if(!v)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ie.min()),_s(e).delete((function(T){return[0,Qt(T.path)]})(c)))))}));o.push(p)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uc(e,t)}wr(e,t){const r=_s(e);let o,l=Mn.ue;return r.X({index:Bf},(([c,d],{path:p,sequenceNumber:v})=>{c===0?(l!==Mn.ue&&t(new le(pr(o)),l),l=v,o=p):l=Mn.ue})).next((()=>{l!==Mn.ue&&t(new le(pr(o)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(i,e){return _s(i).put((function(r,o){return{targetId:0,path:Qt(r.path),sequenceNumber:o}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.changes=new Kr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ii(e).put(r)}removeEntry(e,t,r){return ii(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Fc(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=pt.newInvalidDocument(t);return ii(e).X({index:mc,range:IDBKeyRange.only(tl(t))},((o,l)=>{r=this.Dr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:pt.newInvalidDocument(t)};return ii(e).X({index:mc,range:IDBKeyRange.only(tl(t))},((o,l)=>{r={document:this.Dr(t,l),size:zc(l)}})).next((()=>r))}getEntries(e,t){let r=xn();return this.Cr(e,t,((o,l)=>{const c=this.Dr(o,l);r=r.insert(o,c)})).next((()=>r))}Fr(e,t){let r=xn(),o=new lt(le.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Dr(l,c);r=r.insert(l,d),o=o.insert(l,zc(c))})).next((()=>({documents:r,Mr:o})))}Cr(e,t,r){if(t.isEmpty())return L.resolve();let o=new Xe(tv);t.forEach((p=>o=o.add(p)));const l=IDBKeyRange.bound(tl(o.first()),tl(o.last())),c=o.getIterator();let d=c.getNext();return ii(e).X({index:mc,range:l},((p,v,x)=>{const T=le.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&tv(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?x.G(tl(d)):x.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Fc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ii(e).j(IDBKeyRange.bound(d,p,!0)).next((v=>{l==null||l.incrementDocumentReadCount(v.length);let x=xn();for(const T of v){const S=this.Dr(le.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Ml(t,S)||o.has(S.key))&&(x=x.insert(S.key,S))}return x}))}getAllFromCollectionGroup(e,t,r,o){let l=xn();const c=ev(t,r),d=ev(t,Tn.max());return ii(e).X({index:o0,range:IDBKeyRange.bound(c,d,!0)},((p,v,x)=>{const T=this.Dr(le.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);l=l.insert(T.key,T),l.size===o&&x.done()})).next((()=>l))}newChangeBuffer(e){return new pI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Zy(e).get(uf).next((t=>(xe(!!t,20021),t)))}br(e,t){return Zy(e).put(uf,t)}Dr(e,t){if(t){const r=JT(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return pt.newInvalidDocument(e)}}function y_(i){return new fI(i)}class pI extends g_{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Kr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Xe(((l,c)=>Ae(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Nr.get(l);if(t.push(this.Or.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=Oy(this.Or.serializer,c);o=o.add(l.path.popLast());const v=zc(p);r+=v-d.size,t.push(this.Or.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=Oy(this.Or.serializer,c.convertToNoDocument(Ie.min()));t.push(this.Or.addEntry(e,l,p))}})),o.forEach((l=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Or.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:o})=>(o.forEach(((l,c)=>{this.Nr.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function Zy(i){return Pt(i,Il)}function ii(i){return Pt(i,Rc)}function tl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ev(i,e){const t=e.documentKey.path.toArray();return[i,Fc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tv(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Ae(t[l],r[l]),o)return o;return o=Ae(t.length,r.length),o||(o=Ae(t[t.length-2],r[r.length-2]),o||Ae(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&gl(r.mutation,o,Ln.empty(),Qe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const o=mr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let c=sl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=mr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,o){let l=xn();const c=ml(),d=(function(){return ml()})();return t.forEach(((p,v)=>{const x=r.get(v.key);o.has(v.key)&&(x===void 0||x.mutation instanceof Rs)?l=l.insert(v.key,v):x!==void 0?(c.set(v.key,x.mutation.getFieldMask()),gl(x.mutation,v,x.mutation.getFieldMask(),Qe.now())):c.set(v.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,x)=>c.set(v,x))),t.forEach(((v,x)=>{var T;return d.set(v,new mI(x,(T=c.get(v))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=ml();let o=new lt(((c,d)=>c-d)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let x=r.get(p)||Ln.empty();x=d.applyToLocalView(v,x),r.set(p,x);const T=(o.get(d.batchId)||Ve()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,x=p.value,T=O0();x.forEach((S=>{if(!l.has(S)){const V=U0(t.get(S),r.get(S));V!==null&&T.set(S,V),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,T))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):L.resolve(mr());let d=wl,p=l;return c.next((v=>L.forEach(v,((x,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(x)?L.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{p=p.insert(x,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,Ve()))).next((x=>({batchId:d,changes:j0(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let o=sl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=sl();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const v=(function(T,S){return new eh(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((x=>{x.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((c=>{l.forEach(((p,v)=>{const x=v.getKey();c.get(x)===null&&(c=c.insert(x,pt.newInvalidDocument(x)))}));let d=sl();return c.forEach(((p,v)=>{const x=l.get(p);x!==void 0&&gl(x.mutation,v,Ln.empty(),Qe.now()),Ml(t,v)&&(d=d.insert(p,v))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return L.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:nn(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:a_(o.bundledQuery),readTime:nn(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.overlays=new lt(le.comparator),this.kr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.wt(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=mr(),l=t.length+1,c=new le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new lt(((v,x)=>v-x));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let x=l.get(v.largestBatchId);x===null&&(x=mr(),l=l.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const d=mr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,x)=>d.set(v,x))),!(d.size()>=o)););return L.resolve(d)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Zf(t,r));let l=this.kr.get(t);l===void 0&&(l=Ve(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.qr=new Xe(Vt.Qr),this.$r=new Xe(Vt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new le(new Je([])),r=new Vt(t,e),o=new Vt(t,e+1),l=[];return this.$r.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new le(new Je([])),r=new Vt(t,e),o=new Vt(t,e+1);let l=Ve();return this.$r.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Vt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return le.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Xe(Vt.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yf(l,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new Vt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),l=o<0?0:o;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?pi:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ae);return t.forEach((o=>{const l=new Vt(o,0),c=new Vt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;le.isDocumentKey(l)||(l=l.child(""));const c=new Vt(new le(l),0);let d=new Xe(Ae);return this.Yr.forEachWhile((p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(d=d.add(p.Hr)),!0)}),c),L.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(t.mutations,(o=>{const l=new Vt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Vt(t,0),o=this.Yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.ni=e,this.docs=(function(){return new lt(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=xn();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():pt.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=xn();const c=t.path,d=new le(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:x}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Lf(t0(x),r)<=0||(o.has(x.key)||Ml(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,r,o){ge(9500)}ri(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new xI(this)}getSize(e){return L.resolve(this.size)}}class xI extends g_{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.persistence=e,this.ii=new Kr((t=>wi(t)),jl),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new sp,this.targetCount=0,this._i=Ti.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),L.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ti(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.hr(t),L.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),L.waitFor(l).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t){this.ai={},this.overlays={},this.ui=new Mn(0),this.ci=!1,this.ci=!0,this.li=new vI,this.referenceDelegate=e(this),this.hi=new EI(this),this.indexManager=new oI,this.remoteDocumentCache=(function(o){return new wI(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new i_(t),this.Ti=new gI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new _I(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);const o=new TI(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return L.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class TI extends r0{constructor(e){super(),this.currentSequenceNumber=e}}class ah{constructor(e){this.persistence=e,this.Ai=new sp,this.Ri=null}static Vi(e){return new ah(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,(r=>{const o=le.fromPath(r);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return L.or([()=>L.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Uc{constructor(e,t){this.persistence=e,this.gi=new Kr((r=>Qt(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=m_(this,t)}static Vi(e,t){return new Uc(e,t)}Ii(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return L.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((l=>l?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yc(e.data.value)),t}Sr(e,t,r){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.serializer=e}q(e,t,r,o){const l=new Hc("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(Vl)})(e),(function(p){p.createObjectStore(Tl,{keyPath:VE}),p.createObjectStore(tr,{keyPath:dy,autoIncrement:!0}).createIndex(fi,fy,{unique:!0}),p.createObjectStore(Fo)})(e),nv(e),(function(p){p.createObjectStore(li)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(zo),p.deleteObjectStore(Bo),p.deleteObjectStore(mi)})(e),nv(e)),c=c.next((()=>(function(p){const v=p.store(mi),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return v.put(Nc,x)})(l)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(p,v){return v.store(tr).j().next((T=>{p.deleteObjectStore(tr),p.createObjectStore(tr,{keyPath:dy,autoIncrement:!0}).createIndex(fi,fy,{unique:!0});const S=v.store(tr),V=T.map((z=>S.put(z)));return L.waitFor(V)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Uo,{keyPath:$E})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.pi(l)))),r<6&&o>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Il)})(e),this.yi(l))))),r<7&&o>=7&&(c=c.next((()=>this.wi(l)))),r<8&&o>=8&&(c=c.next((()=>this.Si(e,l)))),r<9&&o>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.bi(l)))),r<11&&o>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Qc,{keyPath:qE})})(e),(function(p){p.createObjectStore(Xc,{keyPath:KE})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(p){const v=p.createObjectStore(Yc,{keyPath:JE});v.createIndex(hf,ZE,{unique:!1}),v.createIndex(c0,eT,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(p){const v=p.createObjectStore(Rc,{keyPath:OE});v.createIndex(mc,ME),v.createIndex(o0,LE)})(e))).next((()=>this.Di(e,l))).next((()=>e.deleteObjectStore(li)))),r<14&&o>=14&&(c=c.next((()=>this.Ci(e,l)))),r<15&&o>=15&&(c=c.next((()=>(function(p){p.createObjectStore(zf,{keyPath:WE,autoIncrement:!0}).createIndex(cf,HE,{unique:!1}),p.createObjectStore(hl,{keyPath:GE}).createIndex(l0,QE,{unique:!1}),p.createObjectStore(dl,{keyPath:XE}).createIndex(u0,YE,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(hl).clear()})).next((()=>{t.objectStore(dl).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Uf,{keyPath:tT})})(e)}))),r<18&&o>=18&&jv()&&(c=c.next((()=>{t.objectStore(hl).clear()})).next((()=>{t.objectStore(dl).clear()}))),c}yi(e){let t=0;return e.store(li).X(((r,o)=>{t+=zc(o)})).next((()=>{const r={byteSize:t};return e.store(Il).put(uf,r)}))}pi(e){const t=e.store(Tl),r=e.store(tr);return t.j().next((o=>L.forEach(o,(l=>{const c=IDBKeyRange.bound([l.userId,pi],[l.userId,l.lastAcknowledgedBatchId]);return r.j(fi,c).next((d=>L.forEach(d,(p=>{xe(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=ci(this.serializer,p);return h_(e,l.userId,v).next((()=>{}))}))))}))))}wi(e){const t=e.store(zo),r=e.store(li);return e.store(mi).get(Nc).next((o=>{const l=[];return r.X(((c,d)=>{const p=new Je(c),v=(function(T){return[0,Qt(T)]})(p);l.push(t.get(v).next((x=>x?L.resolve():(T=>t.put({targetId:0,path:Qt(T),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}Si(e,t){e.createObjectStore(Sl,{keyPath:UE});const r=t.store(Sl),o=new rp,l=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:Qt(p)})}};return t.store(li).X({Z:!0},((c,d)=>{const p=new Je(c);return l(p.popLast())})).next((()=>t.store(Fo).X({Z:!0},(([c,d,p],v)=>{const x=pr(d);return l(x.popLast())}))))}bi(e){const t=e.store(Bo);return t.X(((r,o)=>{const l=ol(o),c=o_(this.serializer,l);return t.put(c)}))}Di(e,t){const r=t.store(li),o=[];return r.X(((l,c)=>{const d=t.store(Rc),p=(function(T){return T.document?new le(Je.fromString(T.document.name).popFirst(5)):T.noDocument?le.fromSegments(T.noDocument.path):T.unknownDocument?le.fromSegments(T.unknownDocument.path):ge(36783)})(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(v))})).next((()=>L.waitFor(o)))}Ci(e,t){const r=t.store(tr),o=y_(this.serializer),l=new ip(ah.Vi,this.serializer.gt);return r.j().next((c=>{const d=new Map;return c.forEach((p=>{var v;let x=(v=d.get(p.userId))!==null&&v!==void 0?v:Ve();ci(this.serializer,p).keys().forEach((T=>x=x.add(T))),d.set(p.userId,x)})),L.forEach(d,((p,v)=>{const x=new Ft(v),T=ih.yt(this.serializer,x),S=l.getIndexManager(x),V=oh.yt(x,this.serializer,S,l.referenceDelegate);return new v_(o,V,T,S).recalculateAndSaveOverlaysForDocumentKeys(new df(t,Mn.ue),p).next()}))}))}}function nv(i){i.createObjectStore(zo,{keyPath:BE}).createIndex(Bf,zE,{unique:!0}),i.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(a0,FE,{unique:!0}),i.createObjectStore(mi)}const vs="IndexedDbPersistence",Qd=18e5,Xd=5e3,Yd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SI="main";class op{constructor(e,t,r,o,l,c,d,p,v,x,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=l,this.window=c,this.document=d,this.Mi=v,this.xi=x,this.Oi=T,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=S=>Promise.resolve(),!op.C())throw new he(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dI(this,o),this.Qi=t+SI,this.serializer=new i_(p),this.$i=new Ss(this.Qi,this.Oi,new II(this.serializer)),this.li=new eI,this.hi=new lI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=y_(this.serializer),this.Ti=new ZT,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,x===!1&&tn(vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,Yd);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new Mn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=t=>Z(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((()=>Z(this,null,function*(){this.started&&(yield this.Ki())}))))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>cc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ks(e))return te(vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(vs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return nl(e).get(Eo).next((t=>L.resolve(this.Xi(t))))}es(e){return cc(e).delete(this.clientId)}ts(){return Z(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,Qd)){this.ki=Date.now();const e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Pt(t,Uo);return r.j().next((o=>{const l=this.rs(o,Qd),c=o.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?L.resolve(!0):nl(e).get(Eo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Xd)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,Yd);return!1}}return!(!this.networkEnabled||!this.inForeground)||cc(e).j().next((r=>this.rs(r,Xd).find((o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te(vs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}shutdown(){return Z(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[Vl,Uo],(e=>{const t=new df(e,Mn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()})}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>cc(e).j().next((t=>this.rs(t,Qd).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return oh.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aI(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return ih.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){te(vs,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?sT:p===17?p0:p===16?rT:p===15?$f:p===14?f0:p===13?d0:p===12?nT:p===11?h0:void ge(60245)})(this.Oi);let c;return this.$i.runTransaction(e,o,l,(d=>(c=new df(d,this.ui?this.ui.next():Mn.ue),t==="readwrite-primary"?this.Ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new he(G.FAILED_PRECONDITION,n0);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ts(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ts(e){return nl(e).get(Eo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Xd)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(G.FAILED_PRECONDITION,Yd)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nl(e).put(Eo,t)}static C(){return Ss.C()}Yi(e){const t=nl(e);return t.get(Eo).next((r=>this.Xi(r)?(te(vs,"Releasing primary lease."),t.delete(Eo)):L.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;Vv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return te(vs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn(vs,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nl(i){return Pt(i,Vl)}function cc(i){return Pt(i,Uo)}function bI(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ap(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Vv()?8:s0(Sc())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new AI;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(Co()<=qe.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Co()<=qe.DEBUG&&te("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Co()<=qe.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):L.resolve())}ps(e,t){if(by(t))return L.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=vf(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ve(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const v=this.bs(t,d);return this.Ds(t,v,c,p.readTime)?this.ps(e,vf(t,null,"F")):this.vs(e,v,t,p)}))))})))))}ys(e,t,r,o){return by(t)||o.isEqual(Ie.min())?L.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,o)?L.resolve(null):(Co()<=qe.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(t)),this.vs(e,c,t,AE(o,wl)).next((d=>d)))}))}bs(e,t){let r=new Xe(D0(e));return t.forEach(((o,l)=>{Ml(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,r){return Co()<=qe.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Po(t)),this.gs.getDocumentsMatchingQuery(e,t,Tn.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",CI=3e8;class PI{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new lt(Ae),this.Ms=new Kr((l=>wi(l)),jl),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function w_(i,e,t,r){return new PI(i,e,t,r)}function x_(i,e){return Z(this,null,function*(){const t=Pe(i);return yield t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=Ve();for(const v of o){c.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}for(const v of l){d.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(r,p).next((v=>({Bs:v,removedBatchIds:c,addedBatchIds:d})))}))}))})}function kI(i,e){const t=Pe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,v,x){const T=v.batch,S=T.keys();let V=L.resolve();return S.forEach((z=>{V=V.next((()=>x.getEntry(p,z))).next((K=>{const $=v.docVersions.get(z);xe($!==null,48541),K.version.compareTo($)<0&&(T.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),x.addEntry(K)))}))})),V.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Ve();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function E_(i){const e=Pe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function RI(i,e){const t=Pe(i),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((x,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(l,x.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,x.addedDocuments,T))));let V=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Et.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):x.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(x.resumeToken,r)),o=o.insert(T,V),(function(K,$,se){return K.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=CI?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(S,V,x)&&d.push(t.hi.updateTargetData(l,V))}));let p=xn(),v=Ve();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),d.push(NI(l,c,e.documentUpdates).next((x=>{p=x.Ls,v=x.ks}))),!r.isEqual(Ie.min())){const x=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(x)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function NI(i,e,t){let r=Ve(),o=Ve();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=xn();return t.forEach(((d,p)=>{const v=l.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):te(lp,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function DI(i,e){const t=Pe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=pi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function VI(i,e){const t=Pe(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((l=>l?(o=l,L.resolve(o)):t.hi.allocateTargetId(r).next((c=>(o=new Fr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}function bf(i,e,t){return Z(this,null,function*(){const r=Pe(i),o=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o))))}catch(c){if(!ks(c))throw c;te(lp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)})}function rv(i,e,t){const r=Pe(i);let o=Ie.min(),l=Ve();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,v,x){const T=Pe(p),S=T.Ms.get(x);return S!==void 0?L.resolve(T.Fs.get(S)):T.hi.getTargetData(v,x)})(r,c,Fn(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:Ve()))).next((d=>(jI(r,wT(e),d),{documents:d,qs:l})))))}function jI(i,e,t){let r=i.xs.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}class sv{constructor(){this.activeTargetIds=bT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T_{constructor(){this.Fo=new sv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="ConnectivityMonitor";class ov{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(iv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){te(iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Af(){return hc===null?hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="RestConnection",MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LI{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,l){const c=Af(),d=this.Go(e,t.toUriEncodedString());te(Jd,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:v}=new URL(d),x=Df(v);return this.jo(e,d,p,r,x).then((T=>(te(Jd,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw vr(Jd,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",r),T}))}Jo(e,t,r,o,l,c){return this.Wo(e,t,r,o,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const r=MI[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class BI extends LI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,l){const c=Af();return new Promise(((d,p)=>{const v=new Kv;v.setWithCredentials(!0),v.listenOnce(Wv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case dc.NO_ERROR:const T=v.getResponseJson();te(Ht,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case dc.TIMEOUT:te(Ht,`RPC '${e}' ${c} timed out`),p(new he(G.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const S=v.getStatus();if(te(Ht,`RPC '${e}' ${c} failed with status:`,S,"response text:",v.getResponseText()),S>0){let V=v.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=V==null?void 0:V.error;if(z&&z.status&&z.message){const K=(function(se){const H=se.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(H)>=0?H:G.UNKNOWN})(z.status);p(new he(K,z.message))}else p(new he(G.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new he(G.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:c,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{te(Ht,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(o);te(Ht,`RPC '${e}' ${c} sending request:`,o),v.send(t,"POST",x,r,15)}))}P_(e,t,r){const o=Af(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Qv(),d=Gv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=l.join("");te(Ht,`Creating RPC '${e}' stream ${o}: ${x}`,p);const T=c.createWebChannel(x,p);this.T_(T);let S=!1,V=!1;const z=new FI({Ho:$=>{V?te(Ht,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(S||(te(Ht,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),te(Ht,`RPC '${e}' stream ${o} sending:`,$),T.send($))},Yo:()=>T.close()}),K=($,se,H)=>{$.listen(se,(Q=>{try{H(Q)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return K(T,rl.EventType.OPEN,(()=>{V||(te(Ht,`RPC '${e}' stream ${o} transport opened.`),z.s_())})),K(T,rl.EventType.CLOSE,(()=>{V||(V=!0,te(Ht,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(T))})),K(T,rl.EventType.ERROR,($=>{V||(V=!0,vr(Ht,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),z.__(new he(G.UNAVAILABLE,"The operation could not be completed")))})),K(T,rl.EventType.MESSAGE,($=>{var se;if(!V){const H=$.data[0];xe(!!H,16349);const Q=H,ne=(Q==null?void 0:Q.error)||((se=Q[0])===null||se===void 0?void 0:se.error);if(ne){te(Ht,`RPC '${e}' stream ${o} received error:`,ne);const de=ne.status;let ue=(function(A){const C=wt[A];if(C!==void 0)return K0(C)})(de),R=ne.message;ue===void 0&&(ue=G.INTERNAL,R="Unknown error status: "+de+" with message "+ne.message),V=!0,z.__(new he(ue,R)),T.close()}else te(Ht,`RPC '${e}' stream ${o} received:`,H),z.a_(H)}})),K(d,Hv.STAT_EVENT,($=>{$.stat===of.PROXY?te(Ht,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===of.NOPROXY&&te(Ht,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.o_()}),0),z}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return typeof window!="undefined"?window:null}function Ec(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(i){return new UT(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="PersistentStream";class S_{constructor(e,t,r,o,l,c,d,p){this.Fi=e,this.w_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new I_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return Z(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}L_(){return Z(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return Z(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new he(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((()=>Z(this,null,function*(){this.state=0,this.start()})))}G_(e){return te(av,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(te(av,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UI extends S_{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=KT(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?nn(c.readTime):Ie.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=xf(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=jc(p)?{documents:Z0(l,p)}:{query:e_(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=G0(l,c.resumeToken);const v=_f(l,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Qo(l,c.snapshotVersion.toTimestamp());const v=_f(l,c.expectedCount);v!==null&&(d.expectedCount=v)}return d})(this.serializer,e);const r=HT(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=xf(this.serializer),t.removeTarget=e,this.k_(t)}}class $I extends S_{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WT(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Lc(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{}class KI extends qI{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,wf(t,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(G.UNKNOWN,l.toString())}))}Jo(e,t,r,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,wf(t,r),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(G.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class WI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(tn(t),this._a=!1):te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="RemoteStore";class HI{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((()=>Z(this,null,function*(){Ai(this)&&(te(Ii,"Restarting streams for network reachability change."),yield(function(p){return Z(this,null,function*(){const v=Pe(p);v.Ia.add(4),yield Fl(v),v.Aa.set("Unknown"),v.Ia.delete(4),yield uh(v)})})(this))})))})),this.Aa=new WI(r,o)}}function uh(i){return Z(this,null,function*(){if(Ai(i))for(const e of i.da)yield e(!0)})}function Fl(i){return Z(this,null,function*(){for(const e of i.da)yield e(!1)})}function b_(i,e){const t=Pe(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),dp(t)?hp(t):ta(t).x_()&&cp(t,e))}function up(i,e){const t=Pe(i),r=ta(t);t.Ta.delete(e),r.x_()&&A_(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ai(t)&&t.Aa.set("Unknown"))}function cp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(i).H_(e)}function A_(i,e){i.Ra.$e(e),ta(i).Y_(e)}function hp(i){i.Ra=new LT({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),ta(i).start(),i.Aa.aa()}function dp(i){return Ai(i)&&!ta(i).M_()&&i.Ta.size>0}function Ai(i){return Pe(i).Ia.size===0}function C_(i){i.Ra=void 0}function GI(i){return Z(this,null,function*(){i.Aa.set("Online")})}function QI(i){return Z(this,null,function*(){i.Ta.forEach(((e,t)=>{cp(i,e)}))})}function XI(i,e){return Z(this,null,function*(){C_(i),dp(i)?(i.Aa.la(e),hp(i)):i.Aa.set("Unknown")})}function YI(i,e,t){return Z(this,null,function*(){if(i.Aa.set("Online"),e instanceof H0&&e.state===2&&e.cause)try{yield(function(o,l){return Z(this,null,function*(){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(yield o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})})(i,e)}catch(r){te(Ii,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $c(i,r)}else if(e instanceof wc?i.Ra.Ye(e):e instanceof W0?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Ie.min()))try{const r=yield E_(i.localStore);t.compareTo(r)>=0&&(yield(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const x=l.Ta.get(v);x&&l.Ta.set(v,x.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,v)=>{const x=l.Ta.get(p);if(!x)return;l.Ta.set(p,x.withResumeToken(Et.EMPTY_BYTE_STRING,x.snapshotVersion)),A_(l,p);const T=new Fr(x.target,p,v,x.sequenceNumber);cp(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(i,t))}catch(r){te(Ii,"Failed to raise snapshot:",r),yield $c(i,r)}})}function $c(i,e,t){return Z(this,null,function*(){if(!ks(e))throw e;i.Ia.add(1),yield Fl(i),i.Aa.set("Offline"),t||(t=()=>E_(i.localStore)),i.asyncQueue.enqueueRetryable((()=>Z(null,null,function*(){te(Ii,"Retrying IndexedDB access"),yield t(),i.Ia.delete(1),yield uh(i)})))})}function P_(i,e){return e().catch((t=>$c(i,t,e)))}function Bl(i){return Z(this,null,function*(){const e=Pe(i),t=Cs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:pi;for(;JI(e);)try{const o=yield DI(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,ZI(e,o)}catch(o){yield $c(e,o)}k_(e)&&R_(e)})}function JI(i){return Ai(i)&&i.Pa.length<10}function ZI(i,e){i.Pa.push(e);const t=Cs(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function k_(i){return Ai(i)&&!Cs(i).M_()&&i.Pa.length>0}function R_(i){Cs(i).start()}function e2(i){return Z(this,null,function*(){Cs(i).na()})}function t2(i){return Z(this,null,function*(){const e=Cs(i);for(const t of i.Pa)e.X_(t.mutations)})}function n2(i,e,t){return Z(this,null,function*(){const r=i.Pa.shift(),o=Jf.from(r,e,t);yield P_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),yield Bl(i)})}function r2(i,e){return Z(this,null,function*(){e&&Cs(i).Z_&&(yield(function(r,o){return Z(this,null,function*(){if((function(c){return OT(c)&&c!==G.ABORTED})(o.code)){const l=r.Pa.shift();Cs(r).N_(),yield P_(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),yield Bl(r)}})})(i,e)),k_(i)&&R_(i)})}function lv(i,e){return Z(this,null,function*(){const t=Pe(i);t.asyncQueue.verifyOperationInProgress(),te(Ii,"RemoteStore received new credentials");const r=Ai(t);t.Ia.add(3),yield Fl(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield uh(t)})}function s2(i,e){return Z(this,null,function*(){const t=Pe(i);e?(t.Ia.delete(2),yield uh(t)):e||(t.Ia.add(2),yield Fl(t),t.Aa.set("Unknown"))})}function ta(i){return i.Va||(i.Va=(function(t,r,o){const l=Pe(t);return l.ia(),new UI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:GI.bind(null,i),e_:QI.bind(null,i),n_:XI.bind(null,i),J_:YI.bind(null,i)}),i.da.push((e=>Z(null,null,function*(){e?(i.Va.N_(),dp(i)?hp(i):i.Aa.set("Unknown")):(yield i.Va.stop(),C_(i))})))),i.Va}function Cs(i){return i.ma||(i.ma=(function(t,r,o){const l=Pe(t);return l.ia(),new $I(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:e2.bind(null,i),n_:r2.bind(null,i),ea:t2.bind(null,i),ta:n2.bind(null,i)}),i.da.push((e=>Z(null,null,function*(){e?(i.ma.N_(),yield Bl(i)):(yield i.ma.stop(),i.Pa.length>0&&(te(Ii,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,d=new fp(e,t,c,o,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(i,e){if(tn("AsyncQueue",`${e}: ${i}`),ks(i))return new he(G.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=sl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.fa=new lt(le.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ge(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xo{constructor(e,t,r,o,l,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xo(e,t,Oo.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class o2{constructor(){this.queries=cv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=Pe(t),l=o.queries;o.queries=cv(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(r)}))})(this,new he(G.ABORTED,"Firestore shutting down"))}}function cv(){return new Kr((i=>N0(i)),th)}function N_(i,e){return Z(this,null,function*(){const t=Pe(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(r=2):(l=new i2,r=e.ba()?0:1);try{switch(r){case 0:l.ya=yield t.onListen(o,!0);break;case 1:l.ya=yield t.onListen(o,!1);break;case 2:yield t.onFirstRemoteStoreListen(o)}}catch(c){const d=pp(c,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&mp(t)})}function D_(i,e){return Z(this,null,function*(){const t=Pe(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function a2(i,e){const t=Pe(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(r=!0);c.ya=o}}r&&mp(t)}function l2(i,e,t){const r=Pe(i),o=r.queries.get(e);if(o)for(const l of o.wa)l.onError(t);r.queries.delete(e)}function mp(i){i.Da.forEach((e=>{e.next()}))}var Cf,hv;(hv=Cf||(Cf={})).Fa="default",hv.Cache="cache";class V_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.key=e}}class O_{constructor(e){this.key=e}}class u2{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=D0(e),this.eu=new Oo(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new uv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,T)=>{const S=o.get(x),V=Ml(this.query,T)?T:null,z=!!S&&this.mutatedKeys.has(S.key),K=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let $=!1;S&&V?S.data.isEqual(V.data)?z!==K&&(r.track({type:3,doc:V}),$=!0):this.iu(S,V)||(r.track({type:2,doc:V}),$=!0,(p&&this.Xa(V,p)>0||v&&this.Xa(V,v)<0)&&(d=!0)):!S&&V?(r.track({type:0,doc:V}),$=!0):S&&!V&&(r.track({type:1,doc:S}),$=!0,(p||v)&&(d=!0)),$&&(V?(c=c.add(V),l=K?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{eu:c,ru:r,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((x,T)=>(function(V,z){const K=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:$})}};return K(V)-K(z)})(x.type,T.type)||this.Xa(x.doc,T.doc))),this.su(r),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,v=p!==this.Ya;return this.Ya=p,c.length!==0||v?{snapshot:new Xo(this.query,e.eu,l,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new uv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new O_(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new j_(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Xo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const gp="SyncEngine";class c2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class h2{constructor(e){this.key=e,this.lu=!1}}class d2{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Kr((d=>N0(d)),th),this.Tu=new Map,this.Iu=new Set,this.du=new lt(le.comparator),this.Eu=new Map,this.Au=new sp,this.Ru={},this.Vu=new Map,this.mu=Ti.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}function f2(i,e,t=!0){return Z(this,null,function*(){const r=U_(i);let o;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=yield M_(r,e,t,!0),o})}function p2(i,e){return Z(this,null,function*(){const t=U_(i);yield M_(t,e,!0,!1)})}function M_(i,e,t,r){return Z(this,null,function*(){const o=yield VI(i.localStore,Fn(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=yield m2(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&b_(i.remoteStore,o),d})}function m2(i,e,t,r,o){return Z(this,null,function*(){i.gu=(T,S,V)=>(function(K,$,se,H){return Z(this,null,function*(){let Q=$.view.nu(se);Q.Ds&&(Q=yield rv(K.localStore,$.query,!1).then((({documents:R})=>$.view.nu(R,Q))));const ne=H&&H.targetChanges.get($.targetId),de=H&&H.targetMismatches.get($.targetId)!=null,ue=$.view.applyChanges(Q,K.isPrimaryClient,ne,de);return fv(K,$.targetId,ue._u),ue.snapshot})})(i,T,S,V);const l=yield rv(i.localStore,e,!0),c=new u2(e,l.qs),d=c.nu(l.documents),p=Ll.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),v=c.applyChanges(d,i.isPrimaryClient,p);fv(i,t,v._u);const x=new c2(e,t,c);return i.Pu.set(e,x),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),v.snapshot})}function g2(i,e,t){return Z(this,null,function*(){const r=Pe(i),o=r.Pu.get(e),l=r.Tu.get(o.targetId);if(l.length>1)return r.Tu.set(o.targetId,l.filter((c=>!th(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||(yield bf(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&up(r.remoteStore,o.targetId),Pf(r,o.targetId)})).catch(Si))):(Pf(r,o.targetId),yield bf(r.localStore,o.targetId,!0))})}function y2(i,e){return Z(this,null,function*(){const t=Pe(i),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),up(t.remoteStore,r.targetId))})}function v2(i,e,t){return Z(this,null,function*(){const r=$_(i);try{const o=yield(function(c,d){const p=Pe(c),v=Qe.now(),x=d.reduce(((V,z)=>V.add(z.key)),Ve());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let z=xn(),K=Ve();return p.Os.getEntries(V,x).next(($=>{z=$,z.forEach(((se,H)=>{H.isValidDocument()||(K=K.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,z))).next(($=>{T=$;const se=[];for(const H of d){const Q=VT(H,T.get(H.key).overlayedDocument);Q!=null&&se.push(new Rs(H.key,Q,I0(Q.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(V,v,se,d)})).next(($=>{S=$;const se=$.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(V,$.batchId,se)}))})).then((()=>({batchId:S.batchId,changes:j0(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let v=c.Ru[c.currentUser.toKey()];v||(v=new lt(Ae)),v=v.insert(d,p),c.Ru[c.currentUser.toKey()]=v})(r,o.batchId,t),yield zl(r,o.changes),yield Bl(r.remoteStore)}catch(o){const l=pp(o,"Failed to persist write");t.reject(l)}})}function L_(i,e){return Z(this,null,function*(){const t=Pe(i);try{const r=yield RI(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?xe(c.lu,14607):o.removedDocuments.size>0&&(xe(c.lu,42227),c.lu=!1))})),yield zl(t,r,e)}catch(r){yield Si(r)}})}function dv(i,e,t){const r=Pe(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Pe(c);p.onlineState=d;let v=!1;p.queries.forEach(((x,T)=>{for(const S of T.wa)S.va(d)&&(v=!0)})),v&&mp(p)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _2(i,e,t){return Z(this,null,function*(){const r=Pe(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new lt(le.comparator);c=c.insert(l,pt.newNoDocument(l,Ie.min()));const d=Ve().add(l),p=new sh(Ie.min(),new Map,new lt(Ae),c,d);yield L_(r,p),r.du=r.du.remove(l),r.Eu.delete(e),yp(r)}else yield bf(r.localStore,e,!1).then((()=>Pf(r,e,t))).catch(Si)})}function w2(i,e){return Z(this,null,function*(){const t=Pe(i),r=e.batch.batchId;try{const o=yield kI(t.localStore,e);B_(t,r,null),F_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zl(t,o)}catch(o){yield Si(o)}})}function x2(i,e,t){return Z(this,null,function*(){const r=Pe(i);try{const o=yield(function(c,d){const p=Pe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return p.mutationQueue.lookupMutationBatch(v,d).next((T=>(xe(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(v,T)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,x,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>p.localDocuments.getDocuments(v,x)))}))})(r.localStore,e);B_(r,e,t),F_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zl(r,o)}catch(o){yield Si(o)}})}function F_(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function B_(i,e,t){const r=Pe(i);let o=r.Ru[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Pf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||z_(i,r)}))}function z_(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(up(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),yp(i))}function fv(i,e,t){for(const r of t)r instanceof j_?(i.Au.addReference(r.key,e),E2(i,r)):r instanceof O_?(te(gp,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||z_(i,r.key)):ge(19791,{yu:r})}function E2(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(te(gp,"New document in limbo: "+t),i.Iu.add(r),yp(i))}function yp(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new le(Je.fromString(e)),r=i.mu.next();i.Eu.set(r,new h2(t)),i.du=i.du.insert(t,r),b_(i.remoteStore,new Fr(Fn(Ol(t.path)),r,"TargetPurposeLimboResolution",Mn.ue))}}function zl(i,e,t){return Z(this,null,function*(){const r=Pe(i),o=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,p)=>{c.push(r.gu(p,e,t).then((v=>{var x;if((v||t)&&r.isPrimaryClient){const T=v?!v.fromCache:(x=t==null?void 0:t.targetChanges.get(p.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(v){o.push(v);const T=ap.Es(p.targetId,v);l.push(T)}})))})),yield Promise.all(c),r.hu.J_(o),yield(function(p,v){return Z(this,null,function*(){const x=Pe(p);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(v,(S=>L.forEach(S.Is,(V=>x.persistence.referenceDelegate.addReference(T,S.targetId,V))).next((()=>L.forEach(S.ds,(V=>x.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))))))}catch(T){if(!ks(T))throw T;te(lp,"Failed to update sequence numbers: "+T)}for(const T of v){const S=T.targetId;if(!T.fromCache){const V=x.Fs.get(S),z=V.snapshotVersion,K=V.withLastLimboFreeSnapshotVersion(z);x.Fs=x.Fs.insert(S,K)}}})})(r.localStore,l))})}function T2(i,e){return Z(this,null,function*(){const t=Pe(i);if(!t.currentUser.isEqual(e)){te(gp,"User change. New user:",e.toKey());const r=yield x_(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new he(G.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zl(t,r.Bs)}})}function I2(i,e){const t=Pe(i),r=t.Eu.get(e);if(r&&r.lu)return Ve().add(r.key);{let o=Ve();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function U_(i){const e=Pe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=L_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_2.bind(null,e),e.hu.J_=a2.bind(null,e.eventManager),e.hu.pu=l2.bind(null,e.eventManager),e}function $_(i){const e=Pe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x2.bind(null,e),e}class Rl{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return Z(this,null,function*(){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),yield this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)})}Cu(e,t){return null}Fu(e,t){return null}vu(e){return w_(this.persistence,new __,e.initialUser,this.serializer)}Du(e){return new ip(ah.Vi,this.serializer)}bu(e){return new T_}terminate(){return Z(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}Rl.provider={build:()=>new Rl};class S2 extends Rl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){xe(this.persistence.referenceDelegate instanceof Uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p_(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new ip((r=>Uc.Vi(r,t)),this.serializer)}}class vp extends Rl{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return Z(this,null,function*(){yield Vg(vp.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield $_(this.Mu.syncEngine),yield Bl(this.Mu.remoteStore),yield this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))})}vu(e){return w_(this.persistence,new __,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new p_(r,e.asyncQueue,t)}Fu(e,t){const r=new RE(t,this.persistence);return new kE(e.asyncQueue,r)}Du(e){const t=bI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new op(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zI(),Ec(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new T_}}class qc{initialize(e,t){return Z(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T2.bind(null,this.syncEngine),yield s2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return(function(){return new o2})()}createDatastore(e){const t=lh(e.databaseInfo.databaseId),r=(function(l){return new BI(l)})(e.databaseInfo);return(function(l,c,d,p){return new KI(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,c,d){return new HI(r,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>dv(this.syncEngine,t,0)),(function(){return ov.C()?new ov:new OI})())}createSyncEngine(e,t){return(function(o,l,c,d,p,v,x){const T=new d2(o,l,c,d,p,v);return x&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return Z(this,null,function*(){var e,t;yield(function(o){return Z(this,null,function*(){const l=Pe(o);te(Ii,"RemoteStore shutting down."),l.Ia.add(5),yield Fl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}}qc.provider={build:()=>new qc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class b2{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(c=>Z(this,null,function*(){te(Ps,"Received user=",c.uid),yield this.authCredentialListener(c),this.user=c}))),this.appCheckCredentials.start(r,(c=>(te(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((()=>Z(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=pp(t,"Failed to shutdown persistence");e.reject(r)}}))),e.promise}}function Zd(i,e){return Z(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),te(Ps,"Initializing OfflineComponentProvider");const t=i.configuration;yield e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((o=>Z(null,null,function*(){r.isEqual(o)||(yield x_(e.localStore,o),r=o)}))),e.persistence.setDatabaseDeletedListener((()=>{vr("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{vr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e})}function pv(i,e){return Z(this,null,function*(){i.asyncQueue.verifyOperationInProgress();const t=yield A2(i);te(Ps,"Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>lv(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>lv(e.remoteStore,o))),i._onlineComponents=e})}function A2(i){return Z(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te(Ps,"Using user provided OfflineComponentProvider");try{yield Zd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;vr("Error using user provided cache. Falling back to memory cache: "+t),yield Zd(i,new Rl)}}else te(Ps,"Using default OfflineComponentProvider"),yield Zd(i,new S2(void 0));return i._offlineComponents})}function K_(i){return Z(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(te(Ps,"Using user provided OnlineComponentProvider"),yield pv(i,i._uninitializedComponentsProvider._online)):(te(Ps,"Using default OnlineComponentProvider"),yield pv(i,new qc))),i._onlineComponents})}function C2(i){return K_(i).then((e=>e.syncEngine))}function kf(i){return Z(this,null,function*(){const e=yield K_(i),t=e.eventManager;return t.onListen=f2.bind(null,e.syncEngine),t.onUnlisten=g2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y2.bind(null,e.syncEngine),t})}function P2(i,e,t={}){const r=new Br;return i.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return(function(l,c,d,p,v){const x=new q_({next:S=>{x.Ou(),c.enqueueAndForget((()=>D_(l,T)));const V=S.docs.has(d);!V&&S.fromCache?v.reject(new he(G.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?v.reject(new he(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),T=new V_(Ol(d.path),x,{includeMetadataChanges:!0,ka:!0});return N_(l,T)})(yield kf(i),i.asyncQueue,e,t,r)}))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firestore.googleapis.com",gv=!0;class yv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H_,this.ssl=gv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uI)throw new he(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _p{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gE;switch(r.type){case"firstParty":return new wE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return Z(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=mv.get(t);r&&(te("ComponentProvider","Removing Datastore"),mv.delete(t),r.terminate())})(this),Promise.resolve()}}function k2(i,e,t,r={}){var o;i=zr(i,_p);const l=Df(e),c=i._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Qx(`https://${p}`),Zx("Firestore",!0)),c.host!==H_&&c.host!==p&&vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:r});if(!bc(v,d)&&(i._setSettings(v),r.mockUserToken)){let x,T;if(typeof r.mockUserToken=="string")x=r.mockUserToken,T=Ft.MOCK_USER;else{x=Xx(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new he(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Ft(S)}i._authCredentials=new yE(new Yv(x,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ch(this.firestore,e,this._query)}}class Ct{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dl(t,Ct._jsonSchema))return new Ct(e,r||null,new le(Je.fromString(t.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:xt("string",Ct._jsonSchemaVersion),referencePath:xt("string")};class Nl extends ch{constructor(e,t,r){super(e,t,Ol(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new le(e))}withConverter(e){return new Nl(this.firestore,e,this._path)}}function na(i,e,...t){if(i=yl(i),arguments.length===1&&(e=Of.newId()),SE("doc","path",e),i instanceof _p){const r=Je.fromString(e,...t);return ay(r),new Ct(i,null,new le(r))}{if(!(i instanceof Ct||i instanceof Nl))throw new he(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Je.fromString(e,...t));return ay(r),new Ct(i.firestore,i instanceof Nl?i.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="AsyncQueue";class _v{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new I_(this,"async_queue_retry"),this.oc=()=>{const r=Ec();r&&te(vv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ec();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ec();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Br;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}cc(){return Z(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ks(e))throw e;te(vv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}})}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,tn("INTERNAL UNHANDLED ERROR: ",wv(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=fp.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&ge(47125,{hc:wv(this.tc)})}verifyOperationInProgress(){}Pc(){return Z(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function wv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class Yo extends _p{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new _v,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}_terminate(){return Z(this,null,function*(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _v(e),this._firestoreClient=void 0,yield e}})}}function R2(i,e){const t=typeof i=="object"?i:iE(),r=typeof i=="string"?i:Dc,o=eE(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=Hx("firestore");l&&k2(o,...l)}return o}function wp(i){if(i._terminated)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||G_(i),i._firestoreClient}function G_(i){var e,t,r;const o=i._freezeSettings(),l=(function(d,p,v,x){return new oT(d,p,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,W_(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new b2(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(i._componentsProvider))}function N2(i,e){vr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return D2(i,qc.provider,{build:r=>new vp(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function D2(i,e,t){if((i=zr(i,Yo))._firestoreClient||i._terminated)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new he(G.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},G_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Et.fromBase64String(e))}catch(t){throw new he(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new On(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:xt("string",On._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:xt("string",gr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new he(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:xt("string",yr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^__.*__$/;class j2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ea(e,this.data,t,this.fieldTransforms)}}function X_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:i})}}class Ep{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ep(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(X_(this.Ec)&&V2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class O2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lh(e)}Dc(e,t,r,o=!1){return new Ep({Ec:e,methodName:t,bc:r,path:dt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M2(i){const e=i._freezeSettings(),t=lh(i._databaseId);return new O2(i._databaseId,!!e.ignoreUndefinedProperties,t)}function L2(i,e,t,r,o,l={}){const c=i.Dc(l.merge||l.mergeFields?2:0,e,t,o);ew("Data must be an object, but it was:",c,r);const d=J_(r,c);let p,v;if(l.merge)p=new Ln(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const T of l.mergeFields){const S=F2(e,T,t);if(!c.contains(S))throw new he(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);z2(x,S)||x.push(S)}p=new Ln(x),v=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,v=c.fieldTransforms;return new j2(new dn(d),p,v)}function Y_(i,e){if(Z_(i=yl(i)))return ew("Unsupported field value:",e,i),J_(i,e);if(i instanceof Q_)return(function(r,o){if(!X_(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const d of r){let p=Y_(d,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,o){if((r=yl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Qe.fromDate(r);return{timestampValue:Qo(o.serializer,l)}}if(r instanceof Qe){const l=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qo(o.serializer,l)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:G0(o.serializer,r._byteString)};if(r instanceof Ct){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof yr)return(function(c,d){return{mapValue:{fields:{[Kf]:{stringValue:Wf},[$o]:{arrayValue:{values:c.toArray().map((v=>{if(typeof v!="number")throw d.wc("VectorValues must only contain numeric values.");return Qf(d.serializer,v)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${Mf(r)}`)})(i,e)}function J_(i,e){const t={};return m0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(i,((r,o)=>{const l=Y_(o,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function Z_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qe||i instanceof gr||i instanceof On||i instanceof Ct||i instanceof Q_||i instanceof yr)}function ew(i,e,t){if(!Z_(t)||!e0(t)){const r=Mf(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function F2(i,e,t){if((e=yl(e))instanceof xp)return e._internalPath;if(typeof e=="string")return tw(i,e);throw Kc("Field path arguments must be of type string or ",i,!1,void 0,t)}const B2=new RegExp("[~\\*/\\[\\]]");function tw(i,e,t){if(e.search(B2)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new xp(...e.split("."))._internalPath}catch(r){throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kc(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new he(G.INVALID_ARGUMENT,d+i+p)}function z2(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class U2 extends nw{data(){return super.data()}}function rw(i,e){return typeof e=="string"?tw(i,e):e instanceof xp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q2{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bi(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[$o].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((c=>at(c.doubleValue)));return new yr(l)}convertGeoPoint(e){return new gr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const t=$r(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);xe(s_(r),9688,{name:e});const o=new _i(r.get(1),r.get(3)),l=new le(r.popFirst(5));return o.isEqual(t)||tn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends nw{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:xt("string",yi._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Tc extends yi{data(e={}){return super.data(e)}}class Mo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new al(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Tc(this._firestore,this._userDataWriter,r.key,r,new al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Tc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,x=-1;return d.type!==0&&(v=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),x=c.indexOf(d.doc.key)),{type:W2(d.type),doc:p,oldIndex:v,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(i){i=zr(i,Ct);const e=zr(i.firestore,Yo);return P2(wp(e),i._key).then((t=>aw(e,i,t)))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:xt("string",Mo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class iw extends q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}}function Tp(i,e,t){i=zr(i,Ct);const r=zr(i.firestore,Yo),o=K2(i.converter,e,t);return H2(r,[L2(M2(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,En.none())])}function ow(i,...e){var t,r,o;i=yl(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||xv(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(xv(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,v,x;if(i instanceof Ct)v=zr(i.firestore,Yo),x=Ol(i._key.path),p={next:T=>{e[c]&&e[c](aw(v,i,T))},error:e[c+1],complete:e[c+2]};else{const T=zr(i,ch);v=zr(T.firestore,Yo),x=T._query;const S=new iw(v);p={next:V=>{e[c]&&e[c](new Mo(v,S,T,V))},error:e[c+1],complete:e[c+2]},$2(i._query)}return(function(S,V,z,K){const $=new q_(K),se=new V_(V,$,z);return S.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return N_(yield kf(S),se)}))),()=>{$.Ou(),S.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return D_(yield kf(S),se)})))}})(wp(v),x,d,p)}function H2(i,e){return(function(r,o){const l=new Br;return r.asyncQueue.enqueueAndForget((()=>Z(null,null,function*(){return v2(yield C2(r),o,l)}))),l.promise})(wp(i),e)}function aw(i,e,t){const r=t.docs.get(e._key),o=new iw(i);return new yi(i,o,e._key,r,new al(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Zo=o})(sE),Cc(new vl("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Yo(new vE(r.getProvider("auth-internal")),new xE(c,r.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _i(v.options.projectId,x)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),jo(ny,ry,e),jo(ny,ry,"esm2017")})();var G2="firebase",Q2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo(G2,Q2,"app");const X2={apiKey:"AIzaSyBWvyaFWIL0PV4VD33BJNQl3qP2k1IbQus",authDomain:"rutine-f2ac1.firebaseapp.com",projectId:"rutine-f2ac1",storageBucket:"rutine-f2ac1.firebasestorage.app",messagingSenderId:"161382347749",appId:"1:161382347749:web:a07ebafa5bdd35d480350c",measurementId:"G-BNC489N193"},Y2=zv(X2),Ci=R2(Y2);N2(Ci).catch(i=>{console.warn("Offline persistence failed:",i.code)});const ra=i=>i.toLowerCase().replace(/[.#$[\]]/g,"_"),lw="users",J2=(i,e)=>Z(null,null,function*(){try{const t=ra(i),r=na(Ci,lw,t),o=yield sw(r);if(!o.exists())return{success:!1,error:"No account found with this email. Please create an account first."};const l=o.data();return l.password===e?{success:!0,user:{email:l.email,displayName:l.displayName||i.split("@")[0],createdAt:l.createdAt}}:{success:!1,error:"Incorrect password. Please try again."}}catch(t){return console.error("Sign in error:",t),{success:!1,error:"Sign in failed. Please try again."}}}),Z2=(i,e)=>Z(null,null,function*(){try{const t=ra(i),r=na(Ci,lw,t);if((yield sw(r)).exists())return{success:!1,error:"An account with this email already exists. Please sign in instead."};if(e.length<6)return{success:!1,error:"Password must be at least 6 characters long."};const l={email:i.toLowerCase(),password:e,displayName:i.split("@")[0],createdAt:Date.now()};return yield Tp(r,l),{success:!0,isNewUser:!0,user:{email:l.email,displayName:l.displayName,createdAt:l.createdAt}}}catch(t){return console.error("Create account error:",t),{success:!1,error:"Account creation failed. Please try again."}}}),eS=()=>{const i=localStorage.getItem("lft_user");if(i)try{return JSON.parse(i)}catch(e){return null}return null},Ev=i=>{localStorage.setItem("lft_user",JSON.stringify(i))},tS=()=>{localStorage.removeItem("lft_user")},uw=Y.createContext(void 0),nS=({children:i})=>{const[e,t]=Y.useState(null),[r,o]=Y.useState(!0),[l,c]=Y.useState(null);Y.useEffect(()=>{const x=eS();x&&t(x),o(!1)},[]);const d=(x,T)=>Z(null,null,function*(){o(!0),c(null);const S=yield J2(x,T);return S.success&&S.user?(t(S.user),Ev(S.user),o(!1),!0):(c(S.error||"Sign in failed"),o(!1),!1)}),p=(x,T)=>Z(null,null,function*(){o(!0),c(null);const S=yield Z2(x,T);return S.success&&S.user?(t(S.user),Ev(S.user),o(!1),!0):(c(S.error||"Account creation failed"),o(!1),!1)}),v=()=>{t(null),tS()};return y.jsx(uw.Provider,{value:{user:e,isLoading:r,error:l,signIn:d,createAccount:p,logout:v},children:i})},Ul=()=>{const i=Y.useContext(uw);if(!i)throw new Error("useAuth must be used within AuthProvider");return i},rS=()=>{const{signIn:i,createAccount:e,isLoading:t,error:r}=Ul(),[o,l]=Y.useState("signin"),[c,d]=Y.useState(""),[p,v]=Y.useState(""),[x,T]=Y.useState(""),[S,V]=Y.useState(""),z=$=>Z(null,null,function*(){if($.preventDefault(),V(""),!c.trim()){V("Please enter your email");return}if(!c.includes("@")){V("Please enter a valid email");return}if(!p.trim()){V("Please enter your password");return}if(o==="create"){if(p.length<6){V("Password must be at least 6 characters");return}if(p!==x){V("Passwords do not match");return}yield e(c.trim(),p)}else yield i(c.trim(),p)}),K=$=>{l($),V(""),T("")};return y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-md",children:y.jsxs("div",{className:"bg-bg-card border border-border rounded-2xl p-8 shadow-2xl",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Study",y.jsx("span",{className:"bg-gradient-to-r from-accent-green to-accent-blue bg-clip-text text-transparent",children:"Goals"})]}),y.jsx("p",{className:"text-gray-400",children:o==="signin"?"Welcome back!":"Create your account"})]}),y.jsxs("div",{className:"flex mb-6 bg-bg-hover rounded-lg p-1",children:[y.jsx("button",{type:"button",onClick:()=>K("signin"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="signin"?"bg-accent-blue text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Sign In"}),y.jsx("button",{type:"button",onClick:()=>K("create"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="create"?"bg-accent-green text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Create Account"})]}),y.jsxs("form",{onSubmit:z,className:"space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),y.jsx("input",{type:"email",value:c,onChange:$=>d($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"your@email.com",autoComplete:"email"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),y.jsx("input",{type:"password",value:p,onChange:$=>v($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"",autoComplete:o==="create"?"new-password":"current-password"})]}),o==="create"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),y.jsx("input",{type:"password",value:x,onChange:$=>T($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all",placeholder:"",autoComplete:"new-password"})]}),(S||r)&&y.jsx("div",{className:"p-3 bg-accent-red/10 border border-accent-red/50 rounded-lg text-accent-red text-sm",children:S||r}),y.jsx(zt,{type:"submit",className:"w-full",size:"lg",isLoading:t,children:o==="signin"?"Sign In":"Create Account"})]}),y.jsx("p",{className:"text-center text-gray-500 text-sm mt-6",children:o==="signin"?"Don't have an account? Click 'Create Account' above.":'Already have an account? Click "Sign In" above.'})]})})})};var sS=Cv();const ws={table1:["Phy","Chem","Bio","GK","English"],table2:["Morning Session","Noon Session","Night Session","Exam"]},iS=[{key:"mqb",name:"MQB"},{key:"ret",name:"Retina QB"},{key:"med",name:"Meditrics"},{key:"camp",name:"Campus Exam"},{key:"week",name:"Weekly Exam"},{key:"rev",name:"Revision Class"},{key:"new",name:"Lecture"},{key:"secret",name:"Secret Files"}],Do={customStudyTypes:[...iS],countdownSettings:{title:"Countdown to Goal",targetDate:"2025-12-31",targetTime:"00:00"},subjects:ws.table1},Wc={table1:{},table2:{},targetCards:[]},cw=i=>`data/${i}/studyProgress/data_v4`,hw=i=>`data/${i}/studyProgress/settings_v1`,oS=(i,e,t)=>{const r=ra(i),o=na(Ci,cw(r));return ow(o,l=>{if(l.exists()){const c=l.data();e({completedTopics:c.completedTopics||{},tableData:c.tableData||ht({},Wc)})}else e({completedTopics:{},tableData:ht({},Wc)})},t)},aS=(i,e,t)=>{const r=ra(i),o=na(Ci,hw(r));return ow(o,l=>{if(l.exists()){const c=l.data();e({customStudyTypes:c.customStudyTypes||Do.customStudyTypes,countdownSettings:c.countdownSettings||Do.countdownSettings,subjects:c.subjects||Do.subjects})}else e(ht({},Do))},t)},lS=(i,e,t)=>Z(null,null,function*(){const r=ra(i),o=na(Ci,cw(r));yield Tp(o,{tableData:e,completedTopics:t},{merge:!1})}),uS=(i,e)=>Z(null,null,function*(){const t=ra(i),r=na(Ci,hw(t));yield Tp(r,e,{merge:!0})}),dw=Y.createContext(void 0),cS=({children:i})=>{const[e,t]=Y.useState([]),r=Y.useCallback((l,c)=>{const d=Date.now().toString();t(v=>[...v,{id:d,type:l,message:c}]),setTimeout(()=>{t(v=>v.filter(x=>x.id!==d))},l==="syncing"?4e3:l==="error"?3500:2500)},[]),o=Y.useCallback(l=>{t(c=>c.filter(d=>d.id!==l))},[]);return y.jsx(dw.Provider,{value:{toasts:e,showToast:r,removeToast:o},children:i})},fw=()=>{const i=Y.useContext(dw);if(!i)throw new Error("useToastContext must be used within ToastProvider");return i},pw=Y.createContext(void 0),mw=({children:i})=>{const{user:e}=Ul(),{showToast:t}=fw(),[r,o]=Y.useState(ht({},Wc)),[l,c]=Y.useState({}),[d,p]=Y.useState(ht({},Do)),[v,x]=Y.useState(!0),T=Y.useRef(null),S=Y.useRef(!1);Y.useEffect(()=>{if(!e){o(ht({},Wc)),c({}),p(ht({},Do)),x(!1);return}x(!0);const E=oS(e.email,C=>{S.current||(o(C.tableData),c(C.completedTopics),x(!1))},C=>{console.error("Data subscription error:",C),t("error","Failed to load data"),x(!1)}),A=aS(e.email,C=>p(C),C=>console.error("Settings error:",C));return()=>{E(),A()}},[e,t]);const V=Y.useCallback((E,A)=>{e&&(S.current=!0,T.current&&clearTimeout(T.current),T.current=setTimeout(()=>Z(null,null,function*(){try{t("syncing","Syncing..."),yield lS(e.email,E,A),t("success","Synced")}catch(C){t("error","Sync failed")}finally{S.current=!1}}),1e3))},[e,t]),z=Y.useCallback((E,A)=>{c(C=>{const k=jn(ht({},C),{[E]:ht(ht({},C[E]),A)});return o(D=>(V(D,k),D)),k})},[V]),K=Y.useCallback((E,A,C,k,D)=>{const b=D||`topic_${Date.now().toString(36)}${Math.random().toString(36).substr(2,9)}`,Ee=E;return o(Ne=>{const fe=JSON.parse(JSON.stringify(Ne));return fe[Ee][A]||(fe[Ee][A]={}),fe[Ee][A][C]||(fe[Ee][A][C]=[]),fe[Ee][A][C].push(b),fe}),c(Ne=>{const fe=jn(ht({},Ne),{[b]:k});return setTimeout(()=>{o(Re=>(V(Re,fe),Re))},0),fe}),b},[V]),$=Y.useCallback(E=>{o(A=>{const C=JSON.parse(JSON.stringify(A));return["table1","table2"].forEach(k=>{Object.keys(C[k]).forEach(D=>{Object.keys(C[k][D]).forEach(b=>{C[k][D][b]=C[k][D][b].filter(Ee=>Ee!==E)})})}),C}),c(A=>{const D=A,{[E]:C}=D,k=Ld(D,[Ng(E)]);return setTimeout(()=>{o(b=>(V(b,k),b))},0),k})},[V]),se=Y.useCallback(E=>{o(E),c(A=>(V(E,A),A))},[V]),H=Y.useCallback(E=>Z(null,null,function*(){if(e){p(E);try{yield uS(e.email,E),t("success","Settings saved")}catch(A){t("error","Failed to save settings")}}}),[e,t]),Q=Y.useCallback((E,A)=>{o(C=>{if(C[E][A])return C;const k=jn(ht({},C),{[E]:jn(ht({},C[E]),{[A]:{}})});return V(k,l),k})},[l,V]),ne=Y.useCallback((E,A,C)=>{const k=`target_${Date.now().toString(36)}${Math.random().toString(36).substr(2,5)}`,D={id:k,title:E,startDate:A,endDate:C,data:{}};return o(b=>{const Ee=jn(ht({},b),{targetCards:[...b.targetCards||[],D]});return V(Ee,l),Ee}),k},[l,V]),de=Y.useCallback((E,A)=>{o(C=>{const k=JSON.parse(JSON.stringify(C));return k.targetCards=(k.targetCards||[]).map(D=>D.id===E?ht(ht({},D),A):D),V(k,l),k})},[l,V]),ue=Y.useCallback(E=>{o(A=>{const C=JSON.parse(JSON.stringify(A));return delete C.table1[E],C.targetCards=(C.targetCards||[]).filter(k=>k.id!==E),V(C,l),C})},[l,V]),R=Y.useCallback((E,A)=>{const C=E;o(k=>{const D=JSON.parse(JSON.stringify(k));return delete D[C][A],V(D,l),D})},[l,V]);return y.jsx(pw.Provider,{value:{tableData:r,completedTopics:l,settings:d,isLoading:v,updateTopic:z,addTopic:K,deleteTopic:$,updateTableData:se,updateSettings:H,addCard:Q,deleteCard:R,addTargetCard:ne,updateTargetCard:de,deleteTargetCard:ue},children:i})},Pi=()=>{const i=Y.useContext(pw);if(!i)throw new Error("useData must be used within DataProvider");return i},Tv=({tableId:i,date:e,dateData:t,completedTopics:r,onAddTopic:o,onEditTopic:l,onDeleteCard:c,onDateChange:d})=>{const{tableData:p,updateTableData:v,updateTopic:x}=Pi(),[T,S]=Y.useState(!1),[V,z]=Y.useState(null),K=ws[i],{totalTopics:$,completedCount:se,percentage:H}=Y.useMemo(()=>{let E=0,A=0;return K.forEach(C=>{(t[C]||[]).forEach(D=>{const b=r[D];b&&(E++,b.progress===100&&A++)})}),{totalTopics:E,completedCount:A,percentage:E>0?A/E*100:0}},[K,t,r]),Q=Y.useMemo(()=>{if(i!=="table2")return[];const E=[],A=new Set;return Object.values(t).forEach(C=>{C.forEach(k=>A.add(k))}),p.targetCards&&p.targetCards.forEach(C=>{const k=(C.data,C.title),b=C.data&&Object.keys(C.data).length>0?C.data:p.table1[C.id]||{};Object.entries(b||{}).forEach(([Ee,Ne])=>{Array.isArray(Ne)&&Ne.forEach(fe=>{const Re=r[fe];Re&&!A.has(fe)&&E.push({topicId:fe,topic:Re,targetTitle:k,column:Ee})})})}),E},[i,p,t,r]),ne=(E,A)=>{const C=JSON.parse(JSON.stringify(p));C.table2[e]||(C.table2[e]={}),C.table2[e][A]||(C.table2[e][A]=[]),C.table2[e][A].push(E),v(C),S(!1),z(null)},de=()=>H===100?"from-green-500 to-emerald-400":H>=75?"from-blue-500 to-cyan-400":H>=50?"from-yellow-500 to-amber-400":H>=25?"from-orange-500 to-red-400":"from-gray-600 to-gray-500",ue=[0,20,40,60,80,100],R=(E,A,C)=>{E.stopPropagation();const D=(ue.indexOf(A.progress)+1)%ue.length;x(C,{progress:ue[D]})};return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden animate-slideUp",children:[y.jsxs("div",{className:"px-5 py-4 border-b border-white/10",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[y.jsx("h3",{contentEditable:!0,suppressContentEditableWarning:!0,className:"text-lg font-bold text-white flex-1 truncate",onBlur:E=>{var C;const A=(C=E.currentTarget.textContent)==null?void 0:C.trim();A&&A!==e&&d(e,A)},children:e}),y.jsx("button",{onClick:()=>c(i,e),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete card",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full bg-gradient-to-r ${de()} rounded-full transition-all duration-500 ease-out`,style:{width:`${H}%`}})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:`text-sm font-bold ${H===100?"text-green-400":"text-white"}`,children:[Math.round(H),"%"]}),y.jsxs("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-0.5 rounded-full",children:[se,"/",$]})]})]})})]}),y.jsx("div",{className:"p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:K.map(E=>(t[E]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-3 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:E}),y.jsxs("div",{className:"space-y-2 md:space-y-1",children:[(t[E]||[]).map(A=>{const C=r[A];return C?y.jsxs("div",{onClick:k=>R(k,C,A),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${C.progress===100?"bg-green-500":"bg-gray-600"} ${C.progress>0&&C.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${C.progress===100?"text-gray-500 line-through":"text-white"}`,children:C.name}),C.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:C.note}),C.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",C.timedNote]}),C.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",C.estimatedTime]})]}),y.jsxs("span",{className:`text-xs font-mono font-medium ${C.progress===100?"text-green-500":"text-gray-500"}`,children:[C.progress,"%"]}),y.jsx("button",{onClick:k=>{k.stopPropagation(),l(A)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},A):null}),(t[E]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},E))}),y.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[y.jsx("button",{onClick:()=>o(i,e),className:"flex-1 py-2.5 border-2 border-dashed border-white/20 rounded-xl text-gray-400 font-semibold hover:text-accent-blue hover:border-accent-blue hover:bg-accent-blue/5 transition-all",children:"+ Add New Topic"}),i==="table2"&&y.jsx("button",{onClick:()=>S(!0),className:"pull-button px-4 py-2.5 rounded-xl font-semibold bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all",children:" Pull"})]}),T&&sS.createPortal(y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:()=>{S(!1),z(null)},children:y.jsxs("div",{className:"w-full max-w-lg bg-bg-card border border-border rounded-xl shadow-2xl overflow-hidden",onClick:E=>E.stopPropagation(),children:[y.jsx("div",{className:"px-5 py-4 border-b border-border",children:y.jsx("h3",{className:"text-lg font-semibold text-white",children:" Pull from Targets"})}),y.jsxs("div",{className:"p-5 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Add to Session"}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:K.map(E=>y.jsx("button",{onClick:()=>z(E),className:`p-2.5 rounded-lg text-sm font-medium transition-all ${V===E?"bg-accent-blue text-white":"bg-bg-hover border border-border text-gray-300 hover:border-accent-blue"}`,children:E},E))})]}),V&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Available Topics (",Q.length,")"]}),y.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:[Q.map(({topicId:E,topic:A,targetTitle:C,column:k})=>y.jsxs("button",{onClick:()=>ne(E,V),className:"w-full p-3 text-left bg-bg-hover border border-border rounded-lg hover:border-accent-purple transition-all group",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${A.progress===100?"bg-green-500":"bg-gray-500"}`}),y.jsx("span",{className:"text-white font-medium text-sm",children:A.name})]}),y.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-gray-400 group-hover:bg-accent-purple/20 group-hover:text-accent-purple",children:"+ Add"})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[k,"  ",C]})]},E)),Q.length===0&&y.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"All topics already added"})]})]})]}),y.jsx("div",{className:"px-5 py-4 border-t border-border bg-black/30 flex justify-end",children:y.jsx("button",{onClick:()=>{S(!1),z(null)},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Close"})})]})}),document.body)]})},Iv=({cardMeta:i,dateData:e,completedTopics:t,onAddTopic:r,onEditTopic:o,onEditCard:l,onDeleteCard:c})=>{const{updateTopic:d,settings:p}=Pi(),v=p.subjects&&p.subjects.length>0?p.subjects:ws.table1,{totalTopics:x,completedCount:T,percentage:S}=Y.useMemo(()=>{let se=0,H=0;return v.forEach(Q=>{(e[Q]||[]).forEach(de=>{const ue=t[de];ue&&(se++,ue.progress===100&&H++)})}),{totalTopics:se,completedCount:H,percentage:se>0?H/se*100:0}},[v,e,t]),V=Y.useMemo(()=>{const se=new Date;se.setHours(0,0,0,0);const H=new Date(i.startDate),Q=new Date(i.endDate),ne=Math.ceil((Q.getTime()-H.getTime())/(1e3*60*60*24)),de=Math.ceil((Q.getTime()-se.getTime())/(1e3*60*60*24)),ue=ne-de,R=ne>0?Math.min(100,Math.max(0,ue/ne*100)):0;return{totalDays:ne,daysRemaining:Math.max(0,de),timeProgress:R}},[i.startDate,i.endDate]),z=[0,20,40,60,80,100],K=(se,H,Q)=>{se.stopPropagation();const de=(z.indexOf(H.progress)+1)%z.length;d(Q,{progress:z[de]})},$=se=>new Date(se).toLocaleDateString("en-US",{month:"short",day:"numeric"});return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden",children:[y.jsxs("div",{className:"px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3",children:[y.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:flex-1 gap-2",children:[y.jsxs("h3",{className:"text-base font-bold text-white flex-1 truncate flex items-center gap-2",children:[y.jsx("span",{className:"text-accent-purple",children:""}),i.title]}),y.jsx("button",{onClick:()=>l(i),className:"p-1.5 text-gray-400 hover:text-accent-purple hover:bg-accent-purple/10 rounded-lg transition-all",title:"Edit target",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),y.jsx("button",{onClick:()=>c(i.id),className:"sm:hidden p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3 w-full sm:w-auto text-xs",children:[y.jsxs("span",{className:"text-xs font-semibold px-3 py-1.5 rounded-lg bg-accent-purple/10 text-accent-purple border border-accent-purple/20 shadow-[0_0_10px_-3px_rgba(168,85,247,0.3)] flex items-center gap-1.5",children:[y.jsx("span",{className:"text-white/70",children:$(i.startDate)}),y.jsx("span",{className:"text-accent-purple",children:""}),y.jsx("span",{className:"text-white",children:$(i.endDate)})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"font-bold px-2 py-1 rounded-lg bg-gray-500/20 text-gray-300",title:"Total days",children:[V.totalDays,"d"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${V.daysRemaining<=3?"bg-red-500/20 text-red-400":V.daysRemaining<=7?"bg-yellow-500/20 text-yellow-400":"bg-accent-blue/20 text-accent-blue"}`,title:"Days remaining",children:[V.daysRemaining,"d left"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${S===100?"bg-green-500/20 text-green-400":"bg-white/10 text-gray-300"}`,children:[T,"/",x]}),y.jsx("button",{onClick:()=>c(i.id),className:"hidden sm:block p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),y.jsx("div",{className:"px-4 pb-3",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all ${S===100?"bg-green-500":"bg-gradient-to-r from-accent-blue to-accent-purple"}`,style:{width:`${S}%`}})}),y.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(S),"%"]})]})}),y.jsx("div",{className:"px-3 pb-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:v.map(se=>(e[se]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-2 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:se}),y.jsxs("div",{className:"space-y-2 md:space-y-1",children:[(e[se]||[]).map(Q=>{const ne=t[Q];return ne?y.jsxs("div",{onClick:de=>K(de,ne,Q),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${ne.progress===100?"bg-green-500":"bg-gray-600"} ${ne.progress>0&&ne.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${ne.progress===100?"text-gray-500 line-through":"text-white"}`,children:ne.name}),ne.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:ne.note}),ne.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",ne.timedNote]}),ne.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",ne.estimatedTime]})]}),y.jsxs("span",{className:`text-xs font-mono ${ne.progress===100?"text-green-500":"text-gray-500"}`,children:[ne.progress,"%"]}),y.jsx("button",{onClick:de=>{de.stopPropagation(),o(Q)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},Q):null}),(e[se]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},se))}),y.jsx("div",{className:"px-3 pb-3",children:y.jsx("button",{onClick:()=>r("table1",i.id),className:"w-full py-2 text-sm border border-dashed border-white/20 rounded-lg text-gray-400 font-medium hover:text-accent-green hover:border-accent-green hover:bg-accent-green/5 transition-all",children:"+ Add Topic"})})]})},hS=({activeTab:i,onTabChange:e})=>{const t=[{id:"dashboard",label:"Home",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"targets",label:"Targets",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"daily",label:"Daily",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"settings",label:"Settings",icon:y.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return y.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-bg-card border-t border-white/10 flex items-center justify-around shadow-[0_-5px_20px_-5px_rgba(0,0,0,0.3)] z-50 pt-2 pb-[env(safe-area-inset-bottom)] animate-slideUp",children:t.map(r=>y.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center gap-1 w-full h-auto p-1.5 rounded-xl transition-all duration-300 ${i===r.id?"text-accent-blue":"text-gray-500 hover:text-gray-300"}`,children:[y.jsx("div",{className:`p-1 rounded-xl transition-all ${i===r.id?"bg-accent-blue/10 scale-110":""}`,children:r.icon}),y.jsx("span",{className:"text-[10px] font-medium",children:r.label})]},r.id))})},gw=({onLogout:i})=>{var k,D;const{user:e,logout:t}=Ul(),{settings:r,updateSettings:o}=Pi(),[l,c]=Y.useState("account"),[d,p]=Y.useState([]),[v,x]=Y.useState([]),[T,S]=Y.useState(""),[V,z]=Y.useState(""),[K,$]=Y.useState("");Y.useEffect(()=>{p(r.customStudyTypes||[]),x(r.subjects||[]),S(r.countdownSettings.title),z(r.countdownSettings.targetDate),$(r.countdownSettings.targetTime)},[r]);const se=()=>{const b=d.filter(Ee=>Ee.name.trim());o(jn(ht({},r),{customStudyTypes:b}))},H=()=>{const b=v.filter(Ee=>Ee.trim());o(jn(ht({},r),{subjects:b}))},Q=()=>{x([...v,""])},ne=b=>{x(v.filter((Ee,Ne)=>Ne!==b))},de=(b,Ee)=>{const Ne=[...v];Ne[b]=Ee,x(Ne)},ue=()=>{o(jn(ht({},r),{countdownSettings:{title:T,targetDate:V,targetTime:K}}))},R=()=>{p([...d,{key:`custom_${Date.now()}`,name:""}])},E=b=>{p(d.filter(Ee=>Ee.key!==b))},A=()=>{i&&i(),t()},C=[{id:"account",label:"Account",icon:""},{id:"custom",label:"Custom",icon:""},{id:"countdown",label:"Ref",icon:""},{id:"dev",label:"Dev",icon:""}];return y.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden rounded-2xl bg-bg-card border border-white/10",children:[y.jsxs("div",{className:"w-full md:w-60 bg-black/20 border-b md:border-b-0 md:border-r border-white/5 p-4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible shrink-0 no-scrollbar",children:[y.jsx("h3",{className:"hidden md:block text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 px-2",children:"Settings"}),C.map(b=>y.jsxs("button",{onClick:()=>c(b.id),className:`flex items-center gap-2 md:gap-3 px-3 py-2 md:px-3 md:py-2.5 rounded-xl text-sm font-semibold transition-all whitespace-nowrap ${l===b.id?"bg-accent-blue/10 text-accent-blue border border-accent-blue/20":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx("span",{className:"text-lg",children:b.icon}),y.jsx("span",{className:"hidden md:inline",children:b.label==="Ref"?"Countdown":b.label}),y.jsx("span",{className:"md:hidden",children:b.label})]},b.id)),y.jsx("div",{className:"hidden md:block mt-auto pt-4 border-t border-white/5",children:y.jsx("div",{className:"px-2 mb-2 text-[10px] text-gray-600",children:"StudyGoals V1.0"})})]}),y.jsxs("div",{className:"flex-1 p-4 md:p-6 bg-gradient-to-br from-bg-card to-bg-card/50 overflow-y-auto custom-scrollbar",children:[l==="account"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"My Account"}),y.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10",children:[y.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-accent-purple/20",children:((D=(k=e==null?void 0:e.displayName)==null?void 0:k[0])==null?void 0:D.toUpperCase())||"U"}),y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-bold text-white",children:e==null?void 0:e.displayName}),y.jsx("div",{className:"text-xs text-gray-400",children:e==null?void 0:e.email}),y.jsxs("div",{className:"text-[10px] text-green-400 mt-1 flex items-center gap-1",children:[y.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"})," Active Session"]})]})]}),y.jsx(zt,{variant:"danger",onClick:A,className:"w-full py-2.5 rounded-xl text-sm font-semibold border border-red-500/20 hover:bg-red-500/10",children:"Sign Out"})]}),l==="custom"&&y.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Target Subjects"}),y.jsx(zt,{variant:"success",onClick:H,className:"px-4 py-1.5 text-sm",children:"Save Subjects"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Manage the subjects for your Target cards."}),y.jsxs("div",{className:"space-y-2.5",children:[v.map((b,Ee)=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsx("div",{className:"flex-1 relative",children:y.jsx("input",{type:"text",value:b,onChange:Ne=>de(Ee,Ne.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all",placeholder:"Subject Name (e.g. Physics)"})}),y.jsx("button",{onClick:()=>ne(Ee),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Ee)),v.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No subjects defined"})]}),y.jsx(zt,{variant:"secondary",onClick:Q,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-purple/50 hover:text-accent-purple",children:"+ Add New Subject"}),y.jsx("div",{className:"h-px bg-white/5 my-6"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Study Types"}),y.jsx(zt,{variant:"success",onClick:se,className:"px-4 py-1.5 text-sm",children:"Save Changes"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Define your custom study categories (e.g., Theory, Practical)."}),y.jsxs("div",{className:"space-y-2.5",children:[d.map(b=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx("input",{type:"text",value:b.name,onChange:Ee=>p(d.map(Ne=>Ne.key===b.key?jn(ht({},Ne),{name:Ee.target.value}):Ne)),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-blue focus:ring-1 focus:ring-accent-blue transition-all",placeholder:"Type Name (e.g. Lab Work)"}),y.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-accent-blue/50"})]}),y.jsx("button",{onClick:()=>E(b.key),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},b.key)),d.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No custom types yet"})]}),y.jsx(zt,{variant:"secondary",onClick:R,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-blue/50 hover:text-accent-blue",children:"+ Add New Study Type"})]})]}),l==="countdown"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Countdown"}),y.jsx(zt,{variant:"success",onClick:ue,className:"px-4 py-1.5 text-sm",children:"Update"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Event Title"}),y.jsx("input",{value:T,onChange:b=>S(b.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Target Date"}),y.jsx("input",{type:"date",value:V,onChange:b=>z(b.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Time (Optional)"}),y.jsx("input",{type:"time",value:K,onChange:b=>$(b.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]})]})]})]}),l==="dev"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Developer"}),y.jsxs("div",{className:"p-6 bg-gradient-to-br from-accent-purple/20 to-accent-blue/10 border border-accent-purple/20 rounded-2xl flex flex-col items-center text-center space-y-4",children:[y.jsx("div",{className:"w-20 h-20 bg-black/40 rounded-full flex items-center justify-center text-3xl border-2 border-accent-purple shadow-[0_0_20px_rgba(168,85,247,0.4)]",children:""}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:"Adnan Shahria"}),y.jsx("p",{className:"text-sm text-accent-cyan",children:"Full Stack Developer"})]}),y.jsxs("div",{className:"flex items-center justify-center gap-4 w-full pt-2",children:[y.jsx("a",{href:"https://t.me/adnanshahria",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-[#229ED9]/20 text-[#229ED9] hover:bg-[#229ED9] hover:text-white transition-all border border-[#229ED9]/30",title:"Telegram",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}),y.jsx("a",{href:"mailto:adnanshahria2019@gmail.com",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-red-500/20 text-red-500 hover:bg-red-500 hover:text-white transition-all border border-red-500/30",title:"Email",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),y.jsx("div",{className:"pt-4 text-[10px] text-gray-500 font-mono",children:"v1.0.1  StudyGoals Inc"})]})]})]})]})},dS={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},sa=({isOpen:i,onClose:e,title:t,children:r,footer:o,size:l="md"})=>{const c=Y.useRef(null);return Y.useEffect(()=>{const d=p=>{p.key==="Escape"&&e()};return i&&document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i,e]),i?y.jsx("div",{ref:c,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:d=>d.target===c.current&&e(),children:y.jsxs("div",{className:`
        w-full ${dS[l]} bg-bg-card border border-border rounded-xl
        shadow-2xl transform transition-all duration-300 scale-100
        max-h-[90vh] flex flex-col
      `,children:[t&&y.jsx("div",{className:"px-6 py-4 border-b border-border",children:y.jsx("h3",{className:"text-xl font-semibold text-white",children:t})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:r}),o&&y.jsx("div",{className:"px-6 py-4 border-t border-border bg-black/30",children:o})]})}):null},Vo=({options:i,value:e,onChange:t,placeholder:r="Select...",className:o=""})=>{const[l,c]=Y.useState(!1),d=Y.useRef(null),p=i.find(v=>v.value===e);return Y.useEffect(()=>{const v=x=>{d.current&&!d.current.contains(x.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),y.jsxs("div",{ref:d,className:`relative ${o}`,children:[y.jsxs("button",{type:"button",onClick:()=>c(!l),className:`
          w-full flex items-center justify-between px-3 py-2
          bg-bg-hover border border-border rounded-lg
          text-white transition-all duration-200
          ${l?"border-accent-blue ring-2 ring-accent-blue/20":"hover:border-border-light"}
        `,children:[y.jsx("span",{className:p?"text-white":"text-gray-500",children:(p==null?void 0:p.label)||r}),y.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&y.jsx("div",{className:"absolute z-50 w-full mt-1 py-1 bg-bg-card border border-border-light rounded-lg shadow-xl max-h-48 overflow-y-auto",children:i.map(v=>y.jsx("button",{type:"button",onClick:()=>{t(v.value),c(!1)},className:`
                w-full px-3 py-2 text-left transition-colors
                ${v.value===e?"bg-accent-blue text-white font-semibold":"text-white hover:bg-bg-hover"}
              `,children:v.label},v.value))})]})},fS=({isOpen:i,onClose:e,tableId:t,date:r})=>{var Ee,Ne;const{settings:o,addTopic:l,tableData:c}=Pi(),[d,p]=Y.useState(""),[v,x]=Y.useState(""),[T,S]=Y.useState(""),V=ws[t]||ws.table2,[z,K]=Y.useState(V[0]||""),[$,se]=Y.useState("medium"),[H,Q]=Y.useState(((Ne=(Ee=o.customStudyTypes)==null?void 0:Ee[0])==null?void 0:Ne.key)||"new"),[ne,de]=Y.useState("low"),ue=t==="table2"?(c.targetCards||[]).find(fe=>{const Re=new Date(fe.startDate),ie=new Date(fe.endDate);let ve=new Date(r);if(isNaN(ve.getTime())&&r.includes("/")){const[ae,O,W]=r.split("/").map(Number);ve=new Date(W,O-1,ae)}return ve>=Re&&ve<=ie}):void 0,[R,E]=Y.useState(""),A=()=>{if(!d.trim())return;const fe={name:d.trim(),note:"",timedNote:v.trim(),estimatedTime:T.trim(),progress:0,priority:ne,hardness:$,studyStatus:H},Re=l(t,r,z,fe);ue&&R&&l("table1",ue.id,R,fe,Re),p(""),x(""),S(""),de("low"),E(""),e()},k=(t==="table1"?o.subjects&&o.subjects.length>0?o.subjects:ws.table1:ws[t]).map(fe=>({value:fe,label:fe})),D=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],b=o.customStudyTypes.map(fe=>({value:fe.key,label:fe.name}));return y.jsx(sa,{isOpen:i,onClose:e,title:"Add New Topic",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{onClick:A,disabled:!d.trim(),children:"Save Topic"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:d,onChange:fe=>p(fe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"Enter topic name",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:v,onChange:fe=>x(fe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 30 min or 10:00 AM"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time (Optional)"}),y.jsx("input",{type:"text",value:T,onChange:fe=>S(fe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:t==="table1"?"Subject":"Session"}),y.jsx(Vo,{options:k,value:z,onChange:K})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Vo,{options:D,value:$,onChange:se})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Vo,{options:b,value:H,onChange:Q})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(fe=>y.jsxs("button",{type:"button",onClick:()=>de(fe),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${ne===fe?fe==="high"?"border-accent-red bg-accent-red/20 text-white":fe==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${fe==="high"?"bg-accent-red":fe==="medium"?"bg-accent-gold":"bg-gray-500"}`}),fe.charAt(0).toUpperCase()+fe.slice(1)]},fe))})]}),ue&&y.jsxs("div",{className:"pt-4 border-t border-white/10",children:[y.jsxs("label",{className:"block text-sm font-medium text-accent-purple mb-1 flex items-center gap-2",children:[y.jsx("span",{className:"animate-pulse",children:""})," Link to Target: ",ue.title]}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select a subject to automatically add this task to your long-term plan."}),y.jsx(Vo,{options:[{value:"",label:"Do not link"},...(o.subjects&&o.subjects.length>0?o.subjects:ws.table1).map(fe=>({value:fe,label:fe}))],value:R,onChange:E})]})]})})},pS=({isOpen:i,onClose:e,topicId:t,onDelete:r})=>{const{completedTopics:o,settings:l,updateTopic:c}=Pi(),[d,p]=Y.useState(""),[v,x]=Y.useState(""),[T,S]=Y.useState(""),[V,z]=Y.useState(""),[K,$]=Y.useState("medium"),[se,H]=Y.useState(""),[Q,ne]=Y.useState("low");Y.useEffect(()=>{if(t&&o[t]){const E=o[t];p(E.name),x(E.timedNote||""),S(E.estimatedTime||""),z(E.note||""),$(E.hardness),H(E.studyStatus),ne(E.priority)}},[t,o]);const de=()=>{!t||!d.trim()||(c(t,{name:d.trim(),timedNote:v.trim(),estimatedTime:T.trim(),note:V.trim(),hardness:K,studyStatus:se,priority:Q}),e())},ue=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],R=l.customStudyTypes.map(E=>({value:E.key,label:E.name}));return y.jsx(sa,{isOpen:i,onClose:e,title:"Edit Topic",footer:y.jsxs("div",{className:"flex justify-between",children:[y.jsx(zt,{variant:"danger",onClick:()=>t&&r(t),children:"Delete"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:"success",onClick:de,children:"Save"})]})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:d,onChange:E=>p(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:v,onChange:E=>x(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time"}),y.jsx("input",{type:"text",value:T,onChange:E=>S(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),y.jsx("textarea",{value:V,onChange:E=>z(E.target.value),rows:3,className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue resize-none",placeholder:"Add your notes here..."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Vo,{options:ue,value:K,onChange:$})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Vo,{options:R,value:se,onChange:H})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(E=>y.jsxs("button",{type:"button",onClick:()=>ne(E),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${Q===E?E==="high"?"border-accent-red bg-accent-red/20 text-white":E==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${E==="high"?"bg-accent-red":E==="medium"?"bg-accent-gold":"bg-gray-500"}`}),E.charAt(0).toUpperCase()+E.slice(1)]},E))})]})]})})},mS=({isOpen:i,onClose:e})=>y.jsx(sa,{isOpen:i,onClose:e,size:"xl",children:y.jsx("div",{className:"h-[550px] md:h-[480px]",children:y.jsx(gw,{onLogout:e})})}),gS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yS=["Su","Mo","Tu","We","Th","Fr","Sa"],vS=({isOpen:i,onClose:e,onSelectDate:t,existingDates:r})=>{const o=new Date,[l,c]=Y.useState(o.getMonth()),[d,p]=Y.useState(o.getFullYear()),v=new Date(d,l,1).getDay(),x=new Date(d,l+1,0).getDate(),T=Array.from({length:x},(H,Q)=>Q+1),S=H=>{const Q=String(H).padStart(2,"0"),ne=String(l+1).padStart(2,"0");return`${Q}/${ne}/${d}`},V=H=>new Date(d,l,H)<new Date(o.getFullYear(),o.getMonth(),o.getDate()),z=H=>d===o.getFullYear()&&l===o.getMonth()&&H===o.getDate(),K=H=>r.includes(S(H)),$=()=>{l===0?(c(11),p(d-1)):c(l-1)},se=()=>{l===11?(c(0),p(d+1)):c(l+1)};return y.jsxs(sa,{isOpen:i,onClose:e,size:"sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("button",{onClick:$,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),y.jsxs("span",{className:"text-lg font-semibold text-white",children:[gS[l]," ",d]}),y.jsx("button",{onClick:se,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),y.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:yS.map(H=>y.jsx("div",{className:"text-center text-xs font-semibold text-gray-500",children:H},H))}),y.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:v}).map((H,Q)=>y.jsx("div",{},`empty-${Q}`)),T.map(H=>y.jsxs("button",{disabled:V(H),onClick:()=>{t(S(H)),e()},className:`
              p-2 text-center rounded-lg transition-all relative
              ${V(H)?"text-gray-600 cursor-not-allowed":"hover:bg-bg-hover cursor-pointer"}
              ${z(H)?"border border-accent-gold text-accent-gold font-bold":"text-white"}
              ${K(H)?"border border-accent-blue shadow-glow-blue":""}
            `,children:[H,K(H)&&y.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-accent-blue rounded-full"})]},H))]}),y.jsx(zt,{variant:"secondary",onClick:e,className:"w-full mt-4",children:"Cancel"})]})},_S=({isOpen:i,onClose:e,onConfirm:t,message:r,confirmText:o="Yes, Delete",confirmVariant:l="danger"})=>y.jsxs(sa,{isOpen:i,onClose:e,title:"Are you sure?",size:"sm",children:[y.jsx("p",{className:"text-gray-300 mb-4",children:r}),y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:l,onClick:()=>{t(),e()},children:o})]})]}),wS=({isOpen:i,onClose:e,cardMeta:t})=>{const{updateTargetCard:r}=Pi(),[o,l]=Y.useState(""),[c,d]=Y.useState(""),[p,v]=Y.useState("");Y.useEffect(()=>{t&&(l(t.title),d(t.startDate),v(t.endDate))},[t]);const x=()=>{!t||!o.trim()||!c||!p||(r(t.id,{title:o.trim(),startDate:c,endDate:p}),e())};return y.jsx(sa,{isOpen:i,onClose:e,title:"Edit Target",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(zt,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(zt,{variant:"success",onClick:x,disabled:!o.trim()||!c||!p,children:"Save Changes"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-purple"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-green"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:p,onChange:T=>v(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-red"})]})]}),c&&p&&y.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:y.jsxs("div",{className:"flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Duration"}),y.jsxs("span",{className:"text-accent-blue font-mono",children:[Math.ceil((new Date(p).getTime()-new Date(c).getTime())/(1e3*60*60*24))," days"]})]})})]})})},xS=i=>{const[e,t]=Y.useState({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!1}),r=Y.useCallback(()=>{if(!i)return;const o=`${i.targetDate}T${i.targetTime||"00:00"}`,l=new Date(o).getTime(),c=Date.now(),d=l-c;if(d<0){t({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!0});return}const p=Math.floor(d/(1e3*60*60*24)),v=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(d%(1e3*60*60)/(1e3*60)),T=Math.floor(d%(1e3*60)/1e3);t({days:String(p).padStart(2,"0"),hours:String(v).padStart(2,"0"),minutes:String(x).padStart(2,"0"),seconds:String(T).padStart(2,"0"),isExpired:!1})},[i]);return Y.useEffect(()=>{r();const o=setInterval(r,1e3);return()=>clearInterval(o)},[r]),e},ES=()=>{var mt;const{user:i,logout:e}=Ul(),{tableData:t,completedTopics:r,addCard:o,deleteCard:l,deleteTopic:c,updateTableData:d,addTargetCard:p,deleteTargetCard:v,settings:x}=Pi(),{days:T}=xS(x.countdownSettings),[S,V]=Y.useState(()=>{try{return localStorage.getItem("view")||"table1"}catch(Te){return"table1"}}),[z,K]=Y.useState(()=>{try{return localStorage.getItem("activeMobileTab")||"dashboard"}catch(Te){return"dashboard"}});Y.useEffect(()=>{try{localStorage.setItem("view",S)}catch(Te){}},[S]),Y.useEffect(()=>{try{localStorage.setItem("activeMobileTab",z)}catch(Te){}},[z]);const[$,se]=Y.useState(!1),[H,Q]=Y.useState(!1),[ne,de]=Y.useState(!1),[ue,R]=Y.useState(null),[E,A]=Y.useState(null),[C,k]=Y.useState(null),[D,b]=Y.useState(null),[Ee,Ne]=Y.useState(""),[fe,Re]=Y.useState(""),[ie,ve]=Y.useState(""),{totalMarksAchieved:ae,totalMarksPossible:O}=Y.useMemo(()=>{let Te=0,Be=0;const ze=new Set;return(t.targetCards||[]).forEach(Xt=>{const Ut=t.table1[Xt.id]||{};Object.values(Ut||{}).forEach(In=>{Array.isArray(In)&&In.forEach(xr=>ze.add(xr))})}),Object.values(t.table2).forEach(Xt=>{Object.values(Xt).forEach(Ut=>{Array.isArray(Ut)&&Ut.forEach(In=>ze.add(In))})}),ze.forEach(Xt=>{const Ut=r[Xt];Ut&&(Be+=1,Ut.progress===100&&(Te+=1))}),{totalMarksAchieved:Te,totalMarksPossible:Be}},[t,r]),W=Y.useMemo(()=>Object.keys(t.table2).sort((Te,Be)=>{const[ze,Xt,Ut]=Te.split("/").map(Number),[In,xr,ki]=Be.split("/").map(Number);return new Date(Ut,Xt-1,ze).getTime()-new Date(ki,xr-1,In).getTime()}),[t.table2]),we=Y.useMemo(()=>W.filter(Te=>{const Be=t.table2[Te];return Be?Object.values(Be).some(ze=>Array.isArray(ze)&&ze.length>0):!1}),[W,t.table2]),ke=Y.useMemo(()=>(t.targetCards||[]).filter(Te=>Te&&typeof Te.id=="string"&&typeof Te.title=="string").sort((Te,Be)=>new Date(Te.endDate).getTime()-new Date(Be.endDate).getTime()),[t.targetCards]),De=Y.useMemo(()=>Object.keys(t.table1).concat(Object.keys(t.table2)),[t]),Oe=Te=>{o("table2",Te)},Fe=(Te,Be)=>{const ze=JSON.parse(JSON.stringify(t));ze[S][Be]=ze[S][Te],delete ze[S][Te],d(ze)},Ke=Te=>{c(Te),A(null)},Ye=()=>{!Ee.trim()||!fe||!ie||(p(Ee.trim(),fe,ie),Ne(""),Re(""),ve(""),de(!1))};return y.jsxs("div",{className:"min-h-screen bg-bg-dark text-white font-sans selection:bg-accent-purple/30 pb-24 md:pb-0",children:[y.jsx("div",{className:`md:hidden p-4 flex justify-between items-center sticky top-0 z-40 bg-bg-dark/80 backdrop-blur-md border-b border-white/5 ${z!=="dashboard"?"hidden":""}`,children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-xl flex items-center justify-center shadow-lg shadow-accent-purple/20",children:y.jsx("span",{className:"text-xl",children:""})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"StudyGoals"}),y.jsxs("p",{className:"text-xs text-gray-400",children:["Welcome back, ",(mt=i==null?void 0:i.displayName)==null?void 0:mt.split(" ")[0]]})]})]})}),y.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8 md:h-screen md:overflow-hidden flex flex-col",children:[y.jsxs("div",{className:"hidden md:flex flex-col h-full gap-6",children:[y.jsxs("div",{className:"flex items-center justify-between bg-bg-card border border-border rounded-2xl p-6 shadow-2xl relative overflow-hidden group",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-purple/5 to-accent-blue/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsxs("div",{className:"flex items-center gap-6 relative z-10 w-full",children:[y.jsxs("div",{className:"flex items-center gap-8 bg-bg-card/80 border border-accent-purple/30 shadow-[0_0_15px_-5px_rgba(168,85,247,0.25)] rounded-2xl p-3 pr-6 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-14 h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-2xl flex items-center justify-center text-3xl shadow-lg shadow-accent-purple/20 animate-float",children:""}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"StudyGoals"}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),y.jsx("span",{children:"Ready to focus"})]})]})]}),y.jsx("div",{className:"h-10 w-px bg-white/10"}),y.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 border border-accent-purple/30 shadow-[0_0_10px_-3px_rgba(168,85,247,0.2)]",children:[y.jsx("button",{onClick:()=>V("table1"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table1"?"bg-accent-purple text-white shadow-lg shadow-accent-purple/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Target Plan"}),y.jsx("button",{onClick:()=>V("table2"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table2"?"bg-accent-cyan text-black shadow-lg shadow-accent-cyan/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Daily Plan"})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-green/30 shadow-[0_0_15px_-3px_rgba(16,185,129,0.2)] rounded-2xl p-3 hover:border-accent-green/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-green/10 rounded-xl text-accent-green",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})})}),y.jsxs("div",{className:"flex flex-col justify-center h-full",children:[y.jsx("span",{className:"text-xs text-gray-400",children:"Tasks Done"}),y.jsxs("span",{className:"font-mono font-bold text-accent-green text-lg leading-none",children:[ae,"/",O]})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-blue/30 shadow-[0_0_20px_-5px_rgba(59,130,246,0.25)] rounded-2xl p-3 hover:border-accent-blue/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-blue/10 rounded-xl text-accent-blue",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-baseline gap-1",children:[y.jsx("span",{className:"text-2xl font-bold text-white tabular-nums",children:T}),y.jsx("span",{className:"text-sm text-gray-500",children:"days left"})]})]})]}),y.jsx("button",{onClick:()=>se(!0),className:"p-4 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 transition-all hover:scale-105 active:scale-95 group/settings",children:y.jsxs("svg",{className:"w-6 h-6 text-gray-400 group-hover/settings:text-white group-hover/settings:rotate-90 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),y.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6 min-h-0",children:[y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table1"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-purple/20 rounded-lg text-accent-purple",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Long Term Targets"})]}),y.jsx("button",{onClick:()=>de(!0),className:"px-4 py-2 bg-accent-purple hover:bg-accent-purple/80 text-white rounded-xl text-sm font-semibold shadow-lg shadow-accent-purple/25 transition-all hover:-translate-y-0.5",children:"+ Create Target"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:ke.length>0?ke.map(Te=>y.jsx(Iv,{cardMeta:Te,dateData:t.table1[Te.id]||{},completedTopics:r,onAddTopic:(Be,ze)=>R({tableId:Be,cardId:ze}),onEditTopic:A,onEditCard:k,onDeleteCard:Be=>b({tableId:"table1",cardId:"new",targetCardId:Be})},Te.id)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[y.jsx("span",{className:"text-4xl mb-4 opacity-50",children:""}),y.jsx("p",{children:"No targets set yet"})]})})]}),y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table2"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-cyan/20 rounded-lg text-accent-cyan",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Daily Plan"})]}),y.jsx("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-accent-cyan hover:bg-accent-cyan/80 text-black rounded-xl text-sm font-semibold shadow-lg shadow-accent-cyan/25 transition-all hover:-translate-y-0.5",children:"+ New Day"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:W.length>0?W.map(Te=>y.jsx(Tv,{tableId:"table2",date:Te,dateData:t.table2[Te],completedTopics:r,onAddTopic:(Be,ze)=>R({tableId:Be,cardId:ze}),onEditTopic:A,onDeleteCard:(Be,ze)=>b({tableId:Be,cardId:ze}),onDateChange:Fe},Te)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-4",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center",children:""}),y.jsx("p",{children:"No daily plans yet"}),y.jsx("button",{onClick:()=>Q(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400 hover:text-accent-cyan hover:border-accent-cyan hover:bg-accent-cyan/5 transition-all",children:"+ Start Today"})]})})]})]})]}),y.jsxs("div",{className:"md:hidden space-y-4",children:[z==="dashboard"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsxs("div",{className:"bg-gradient-to-br from-gray-900/50 to-slate-900/50 border border-gray-800 rounded-2xl p-5 shadow-xl relative overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400 font-medium mb-1",children:"Total Progress"}),y.jsxs("h3",{className:"text-3xl font-bold text-white tracking-tight",children:[ae,y.jsxs("span",{className:"text-lg text-gray-500 font-normal",children:["/",O]})]})]}),y.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl text-emerald-400 border border-emerald-500/20",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),y.jsxs("div",{className:"relative pt-2",children:[y.jsx("div",{className:"h-3 bg-gray-700/30 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.3)] transition-all duration-1000 ease-out",style:{width:`${ae/O*100}%`}})}),y.jsxs("p",{className:"text-right text-xs text-emerald-400 mt-2 font-mono",children:[Math.round(ae/O*100),"% Complete"]})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-slate-900/50 to-purple-900/30 border border-blue-500/20 rounded-2xl p-5 shadow-lg relative",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-blue-400",children:y.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),y.jsx("p",{className:"text-sm text-blue-300 font-medium mb-1 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[y.jsx("span",{className:"text-5xl font-bold text-white tracking-tighter tabular-nums drop-shadow-glow",children:T}),y.jsx("span",{className:"text-lg text-blue-200/80 mb-2 font-medium",children:"days remaining"})]}),y.jsx("div",{className:"mt-4 flex gap-2",children:y.jsxs("div",{className:"flex-1 bg-black/20 rounded-lg p-2 text-center border border-white/5",children:[y.jsx("div",{className:"text-xs text-gray-400",children:"Target"}),y.jsx("div",{className:"text-sm font-mono text-blue-300",children:x.countdownSettings.targetDate})]})})]})]}),z==="targets"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Targets"}),y.jsx("button",{onClick:()=>de(!0),className:"p-2 bg-accent-purple/20 text-accent-purple rounded-lg border border-accent-purple/30",children:"+ New"})]}),ke.length>0?ke.map(Te=>y.jsx(Iv,{cardMeta:Te,dateData:t.table1[Te.id]||{},completedTopics:r,onAddTopic:(Be,ze)=>R({tableId:Be,cardId:ze}),onEditTopic:A,onEditCard:k,onDeleteCard:Be=>b({tableId:"table1",cardId:"new",targetCardId:Be})},Te.id)):y.jsx("div",{className:"text-center py-10 text-gray-500",children:"No targets yet"})]}),z==="daily"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Daily Plan"}),y.jsx("button",{onClick:()=>Q(!0),className:"p-2 bg-accent-cyan/20 text-accent-cyan rounded-lg border border-accent-cyan/30",children:"+ Day"})]}),we.length>0?we.map(Te=>y.jsx(Tv,{tableId:"table2",date:Te,dateData:t.table2[Te],completedTopics:r,onAddTopic:(Be,ze)=>R({tableId:Be,cardId:ze}),onEditTopic:A,onDeleteCard:(Be,ze)=>b({tableId:Be,cardId:ze}),onDateChange:Fe},Te)):y.jsxs("div",{className:"text-center py-10",children:[y.jsx("p",{className:"text-gray-500 mb-4",children:"No days added"}),y.jsx("button",{onClick:()=>Q(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400",children:"+ Start Today"})]})]}),z==="settings"&&y.jsx("div",{className:"animate-fadeIn pb-20",children:y.jsx(gw,{onLogout:e})})]})]}),y.jsx(hS,{activeTab:z,onTabChange:K}),y.jsx(mS,{isOpen:$,onClose:()=>se(!1)}),y.jsx(vS,{isOpen:H,onClose:()=>Q(!1),onSelectDate:Oe,existingDates:De}),ue&&y.jsx(fS,{isOpen:!0,onClose:()=>R(null),tableId:ue.tableId,date:ue.cardId}),y.jsx(pS,{isOpen:!!E,onClose:()=>A(null),topicId:E,onDelete:Ke}),y.jsx(wS,{isOpen:!!C,onClose:()=>k(null),cardMeta:C}),y.jsx(_S,{isOpen:!!D,onClose:()=>b(null),onConfirm:()=>{D&&(D.targetCardId?v(D.targetCardId):l(D.tableId,D.cardId)),b(null)},message:"This will delete the card and all its topics. Continue?"}),ne&&y.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>de(!1),children:y.jsxs("div",{className:"glass-card rounded-2xl p-6 max-w-md w-full animate-slideUp",onClick:Te=>Te.stopPropagation(),children:[y.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[y.jsx("span",{className:"text-2xl",children:""})," Create New Target"]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:Ee,onChange:Te=>Ne(Te.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:fe,onChange:Te=>Re(Te.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-green focus:ring-1 focus:ring-accent-green transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:ie,onChange:Te=>ve(Te.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-red focus:ring-1 focus:ring-accent-red transition-all"})]})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx("button",{onClick:()=>de(!1),className:"flex-1 py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),y.jsx("button",{onClick:Ye,disabled:!Ee.trim()||!fe||!ie,className:"flex-1 py-3 bg-gradient-to-r from-accent-blue to-accent-purple text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-all",children:"Create Target"})]})]})})]})},TS={success:"bg-accent-green text-white border-green-600",error:"bg-accent-red text-white border-red-600",info:"bg-bg-card text-white border-border-light",syncing:"bg-white text-gray-900 border-gray-300"},Sv=()=>{const{toasts:i,removeToast:e}=fw();return i.length===0?null:y.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:i.map(t=>y.jsxs("div",{className:`
            flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg
            animate-slideUp cursor-pointer transition-transform hover:scale-105
            ${TS[t.type]}
          `,onClick:()=>e(t.id),children:[t.type==="syncing"&&y.jsx("span",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}),t.type==="success"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.type==="error"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),y.jsx("span",{className:"font-semibold",children:t.message})]},t.id))})},IS=()=>{const{user:i,isLoading:e}=Ul();return e?y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx("div",{className:"w-10 h-10 border-4 border-accent-blue border-t-transparent rounded-full animate-spin"}),y.jsx("span",{className:"text-gray-400 font-semibold",children:"Loading..."})]})}):i?y.jsxs(mw,{children:[y.jsx(ES,{}),y.jsx(Sv,{})]}):y.jsxs(y.Fragment,{children:[y.jsx(rS,{}),y.jsx(Sv,{})]})},SS="modulepreload",bS=function(i){return"/studygoals/"+i},bv={},AS=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let c=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(v=>{if(v=bS(v),v in bv)return;bv[v]=!0;const x=v.endsWith(".css"),T=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":SS,x||(S.as="script"),S.crossOrigin="",S.href=v,p&&S.setAttribute("nonce",p),document.head.appendChild(S),x)return new Promise((V,z)=>{S.addEventListener("load",V),S.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function CS(i={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i;let d,p,v;const x=(S=!0)=>Z(null,null,function*(){yield p,v==null||v()});function T(){return Z(this,null,function*(){if("serviceWorker"in navigator){if(d=yield AS(()=>Z(null,null,function*(){const{Workbox:S}=yield import("./workbox-window.prod.es5-CcvICf7O.js");return{Workbox:S}}),[]).then(({Workbox:S})=>new S("/studygoals/sw.js",{scope:"/studygoals/",type:"classic"})).catch(S=>{c==null||c(S)}),!d)return;v=()=>{d==null||d.messageSkipWaiting()};{let S=!1;const V=()=>{S=!0,d==null||d.addEventListener("controlling",z=>{z.isUpdate&&window.location.reload()}),t==null||t()};d.addEventListener("installed",z=>{typeof z.isUpdate=="undefined"?typeof z.isExternal!="undefined"&&z.isExternal?V():!S&&(r==null||r()):z.isUpdate||r==null||r()}),d.addEventListener("waiting",V)}d.register({immediate:e}).then(S=>{l?l("/studygoals/sw.js",S):o==null||o(S)}).catch(S=>{c==null||c(S)})}})}return p=T(),x}function PS(i={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i,[d,p]=Y.useState(!1),[v,x]=Y.useState(!1),[T]=Y.useState(()=>CS({immediate:e,onOfflineReady(){x(!0),r==null||r()},onNeedRefresh(){p(!0),t==null||t()},onRegistered:o,onRegisteredSW:l,onRegisterError:c}));return{needRefresh:[d,p],offlineReady:[v,x],updateServiceWorker:T}}const kS=()=>{const{offlineReady:[i,e],needRefresh:[t,r],updateServiceWorker:o}=PS({onRegistered(c){console.log("SW Registered: "+c)},onRegisterError(c){console.log("SW registration error",c)}}),l=()=>{e(!1),r(!1)};return!i&&!t?null:y.jsxs("div",{className:"fixed bottom-4 right-4 z-50 p-4 rounded-xl bg-gray-900/95 border border-white/10 shadow-2xl backdrop-blur-md max-w-[300px] animate-slide-in",children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("h3",{className:"font-semibold text-white text-sm",children:i?"App ready to work offline":"New version available!"}),y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i?"You can use this app without internet.":"Click reload to update to the latest version."})]}),y.jsxs("div",{className:"flex gap-2",children:[t&&y.jsx("button",{className:"flex-1 px-3 py-1.5 bg-accent-green text-black text-xs font-bold rounded-lg hover:bg-accent-green/90 transition-colors",onClick:()=>o(!0),children:"Reload"}),y.jsx("button",{className:"flex-1 px-3 py-1.5 border border-white/10 text-white text-xs font-medium rounded-lg hover:bg-white/5 transition-colors",onClick:l,children:"Dismiss"})]})]})};class RS extends Y.Component{constructor(){super(...arguments);Dg(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){var t;return this.state.hasError?y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 text-white p-4 text-center",children:[y.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-500",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-300 mb-4",children:"The application encountered an error."}),y.jsx("pre",{className:"bg-black/50 p-4 rounded text-xs text-left overflow-auto max-w-full mb-4 border border-white/10",children:(t=this.state.error)==null?void 0:t.toString()}),y.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Data & Reload"})]}):this.props.children}}console.log(`%c  Loaded StudyGoals Version: 1.3 
%c Contact: adnanshahria2019@gmail.com `,"background: linear-gradient(to right, #6366f1, #a855f7, #ec4899); color: white; padding: 10px; border-radius: 10px; font-weight: bold; margin-top: 20px;","color: #9ca3af; margin-top: 5px; font-style: italic;");jx.createRoot(document.getElementById("root")).render(y.jsx(Px.StrictMode,{children:y.jsx(cS,{children:y.jsx(nS,{children:y.jsx(mw,{children:y.jsxs(RS,{children:[y.jsx(IS,{}),y.jsx(kS,{})]})})})})}))});export default NS();
//# sourceMappingURL=index-Bc1ndRid.js.map
