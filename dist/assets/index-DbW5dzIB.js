(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function pv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Nd={exports:{}},Ha={},Dd={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function ox(){if(Eg)return Ne;Eg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,K={};function $(O,W,ve){this.props=O,this.context=W,this.refs=K,this.updater=ve||j}$.prototype.isReactComponent={},$.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function re(){}re.prototype=$.prototype;function H(O,W,ve){this.props=O,this.context=W,this.refs=K,this.updater=ve||j}var Q=H.prototype=new re;Q.constructor=H,U(Q,$.prototype),Q.isPureReactComponent=!0;var te=Array.isArray,de=Object.prototype.hasOwnProperty,ue={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(O,W,ve){var Pe,ke={},Ve=null,Me=null;if(W!=null)for(Pe in W.ref!==void 0&&(Me=W.ref),W.key!==void 0&&(Ve=""+W.key),W)de.call(W,Pe)&&!k.hasOwnProperty(Pe)&&(ke[Pe]=W[Pe]);var $e=arguments.length-2;if($e===1)ke.children=ve;else if(1<$e){for(var Xe=Array($e),ft=0;ft<$e;ft++)Xe[ft]=arguments[ft+2];ke.children=Xe}if(O&&O.defaultProps)for(Pe in $e=O.defaultProps,$e)ke[Pe]===void 0&&(ke[Pe]=$e[Pe]);return{$$typeof:i,type:O,key:Ve,ref:Me,props:ke,_owner:ue.current}}function b(O,W){return{$$typeof:i,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function R(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ve){return W[ve]})}var D=/\/+/g;function A(O,W){return typeof O=="object"&&O!==null&&O.key!=null?R(""+O.key):W.toString(36)}function oe(O,W,ve,Pe,ke){var Ve=typeof O;(Ve==="undefined"||Ve==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(Ve){case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case i:case e:Me=!0}}if(Me)return Me=O,ke=ke(Me),O=Pe===""?"."+A(Me,0):Pe,te(ke)?(ve="",O!=null&&(ve=O.replace(D,"$&/")+"/"),oe(ke,W,ve,"",function(ft){return ft})):ke!=null&&(C(ke)&&(ke=b(ke,ve+(!ke.key||Me&&Me.key===ke.key?"":(""+ke.key).replace(D,"$&/")+"/")+O)),W.push(ke)),1;if(Me=0,Pe=Pe===""?".":Pe+":",te(O))for(var $e=0;$e<O.length;$e++){Ve=O[$e];var Xe=Pe+A(Ve,$e);Me+=oe(Ve,W,ve,Xe,ke)}else if(Xe=S(O),typeof Xe=="function")for(O=Xe.call(O),$e=0;!(Ve=O.next()).done;)Ve=Ve.value,Xe=Pe+A(Ve,$e++),Me+=oe(Ve,W,ve,Xe,ke);else if(Ve==="object")throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Me}function be(O,W,ve){if(O==null)return O;var Pe=[],ke=0;return oe(O,Pe,"","",function(Ve){return W.call(ve,Ve,ke++)}),Pe}function We(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(ve){(O._status===0||O._status===-1)&&(O._status=1,O._result=ve)},function(ve){(O._status===0||O._status===-1)&&(O._status=2,O._result=ve)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var De={current:null},se={transition:null},we={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:se,ReactCurrentOwner:ue};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:be,forEach:function(O,W,ve){be(O,function(){W.apply(this,arguments)},ve)},count:function(O){var W=0;return be(O,function(){W++}),W},toArray:function(O){return be(O,function(W){return W})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ne.Component=$,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=H,Ne.StrictMode=r,Ne.Suspense=p,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Ne.act=le,Ne.cloneElement=function(O,W,ve){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Pe=U({},O.props),ke=O.key,Ve=O.ref,Me=O._owner;if(W!=null){if(W.ref!==void 0&&(Ve=W.ref,Me=ue.current),W.key!==void 0&&(ke=""+W.key),O.type&&O.type.defaultProps)var $e=O.type.defaultProps;for(Xe in W)de.call(W,Xe)&&!k.hasOwnProperty(Xe)&&(Pe[Xe]=W[Xe]===void 0&&$e!==void 0?$e[Xe]:W[Xe])}var Xe=arguments.length-2;if(Xe===1)Pe.children=ve;else if(1<Xe){$e=Array(Xe);for(var ft=0;ft<Xe;ft++)$e[ft]=arguments[ft+2];Pe.children=$e}return{$$typeof:i,type:O.type,key:ke,ref:Ve,props:Pe,_owner:Me}},Ne.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Ne.createElement=E,Ne.createFactory=function(O){var W=E.bind(null,O);return W.type=O,W},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:d,render:O}},Ne.isValidElement=C,Ne.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:We}},Ne.memo=function(O,W){return{$$typeof:v,type:O,compare:W===void 0?null:W}},Ne.startTransition=function(O){var W=se.transition;se.transition={};try{O()}finally{se.transition=W}},Ne.unstable_act=le,Ne.useCallback=function(O,W){return De.current.useCallback(O,W)},Ne.useContext=function(O){return De.current.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O){return De.current.useDeferredValue(O)},Ne.useEffect=function(O,W){return De.current.useEffect(O,W)},Ne.useId=function(){return De.current.useId()},Ne.useImperativeHandle=function(O,W,ve){return De.current.useImperativeHandle(O,W,ve)},Ne.useInsertionEffect=function(O,W){return De.current.useInsertionEffect(O,W)},Ne.useLayoutEffect=function(O,W){return De.current.useLayoutEffect(O,W)},Ne.useMemo=function(O,W){return De.current.useMemo(O,W)},Ne.useReducer=function(O,W,ve){return De.current.useReducer(O,W,ve)},Ne.useRef=function(O){return De.current.useRef(O)},Ne.useState=function(O){return De.current.useState(O)},Ne.useSyncExternalStore=function(O,W,ve){return De.current.useSyncExternalStore(O,W,ve)},Ne.useTransition=function(){return De.current.useTransition()},Ne.version="18.3.1",Ne}var Tg;function If(){return Tg||(Tg=1,Dd.exports=ox()),Dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function ax(){if(Ig)return Ha;Ig=1;var i=If(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,v){var x,T={},S=null,j=null;v!==void 0&&(S=""+v),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(j=p.ref);for(x in p)r.call(p,x)&&!l.hasOwnProperty(x)&&(T[x]=p[x]);if(d&&d.defaultProps)for(x in p=d.defaultProps,p)T[x]===void 0&&(T[x]=p[x]);return{$$typeof:e,type:d,key:S,ref:j,props:T,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var Sg;function lx(){return Sg||(Sg=1,Nd.exports=ax()),Nd.exports}var y=lx(),J=If();const ux=pv(J);var Zu={},Vd={exports:{}},un={},jd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function cx(){return bg||(bg=1,(function(i){function e(se,we){var le=se.length;se.push(we);e:for(;0<le;){var O=le-1>>>1,W=se[O];if(0<o(W,we))se[O]=we,se[le]=W,le=O;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var we=se[0],le=se.pop();if(le!==we){se[0]=le;e:for(var O=0,W=se.length,ve=W>>>1;O<ve;){var Pe=2*(O+1)-1,ke=se[Pe],Ve=Pe+1,Me=se[Ve];if(0>o(ke,le))Ve<W&&0>o(Me,ke)?(se[O]=Me,se[Ve]=le,O=Ve):(se[O]=ke,se[Pe]=le,O=Pe);else if(Ve<W&&0>o(Me,le))se[O]=Me,se[Ve]=le,O=Ve;else break e}}return we}function o(se,we){var le=se.sortIndex-we.sortIndex;return le!==0?le:se.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],x=1,T=null,S=3,j=!1,U=!1,K=!1,$=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(se){for(var we=t(v);we!==null;){if(we.callback===null)r(v);else if(we.startTime<=se)r(v),we.sortIndex=we.expirationTime,e(p,we);else break;we=t(v)}}function te(se){if(K=!1,Q(se),!U)if(t(p)!==null)U=!0,We(de);else{var we=t(v);we!==null&&De(te,we.startTime-se)}}function de(se,we){U=!1,K&&(K=!1,re(E),E=-1),j=!0;var le=S;try{for(Q(we),T=t(p);T!==null&&(!(T.expirationTime>we)||se&&!R());){var O=T.callback;if(typeof O=="function"){T.callback=null,S=T.priorityLevel;var W=O(T.expirationTime<=we);we=i.unstable_now(),typeof W=="function"?T.callback=W:T===t(p)&&r(p),Q(we)}else r(p);T=t(p)}if(T!==null)var ve=!0;else{var Pe=t(v);Pe!==null&&De(te,Pe.startTime-we),ve=!1}return ve}finally{T=null,S=le,j=!1}}var ue=!1,k=null,E=-1,b=5,C=-1;function R(){return!(i.unstable_now()-C<b)}function D(){if(k!==null){var se=i.unstable_now();C=se;var we=!0;try{we=k(!0,se)}finally{we?A():(ue=!1,k=null)}}else ue=!1}var A;if(typeof H=="function")A=function(){H(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,be=oe.port2;oe.port1.onmessage=D,A=function(){be.postMessage(null)}}else A=function(){$(D,0)};function We(se){k=se,ue||(ue=!0,A())}function De(se,we){E=$(function(){se(i.unstable_now())},we)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(se){se.callback=null},i.unstable_continueExecution=function(){U||j||(U=!0,We(de))},i.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<se?Math.floor(1e3/se):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(se){switch(S){case 1:case 2:case 3:var we=3;break;default:we=S}var le=S;S=we;try{return se()}finally{S=le}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(se,we){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var le=S;S=se;try{return we()}finally{S=le}},i.unstable_scheduleCallback=function(se,we,le){var O=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?O+le:O):le=O,se){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=le+W,se={id:x++,callback:we,priorityLevel:se,startTime:le,expirationTime:W,sortIndex:-1},le>O?(se.sortIndex=le,e(v,se),t(p)===null&&se===t(v)&&(K?(re(E),E=-1):K=!0,De(te,le-O))):(se.sortIndex=W,e(p,se),U||j||(U=!0,We(de))),se},i.unstable_shouldYield=R,i.unstable_wrapCallback=function(se){var we=S;return function(){var le=S;S=we;try{return se.apply(this,arguments)}finally{S=le}}}})(Od)),Od}var Ag;function hx(){return Ag||(Ag=1,jd.exports=cx()),jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function dx(){if(Cg)return un;Cg=1;var i=If(),e=hx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},T={};function S(n){return p.call(T,n)?!0:p.call(x,n)?!1:v.test(n)?T[n]=!0:(x[n]=!0,!1)}function j(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function U(n,s,a,h){if(s===null||typeof s>"u"||j(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function K(n,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new K(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];$[s]=new K(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new K(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new K(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new K(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new K(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new K(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new K(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new K(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function H(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(re,H);$[s]=new K(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(re,H);$[s]=new K(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(re,H);$[s]=new K(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new K(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new K(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,s,a,h){var f=$.hasOwnProperty(s)?$[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,a,f,h)&&(a=null),h||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var te=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),ue=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),se=Symbol.iterator;function we(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,O;function W(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var ve=!1;function Pe(n,s){if(!n||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var f=z.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,P=g.length-1;1<=w&&0<=P&&f[w]!==g[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==g[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==g[P]){var N=`
`+f[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=P);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function ke(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case ue:return"Portal";case b:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case oe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case C:return(n._context.displayName||"Context")+".Provider";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case be:return s=n.displayName||null,s!==null?s:Ve(n.type)||"Memo";case We:s=n._payload,n=n._init;try{return Ve(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ft(n){var s=Xe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ee(n){n._valueTracker||(n._valueTracker=ft(n))}function Le(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Xe(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function Fe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Gt(n,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Bt(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=$e(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function En(n,s){s=s.checked,s!=null&&Q(n,"checked",s,!1)}function yr(n,s){En(n,s);var a=$e(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?bi(n,s.type,a):s.hasOwnProperty("defaultValue")&&bi(n,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Si(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function bi(n,s,a){(s!=="number"||Fe(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var vr=Array.isArray;function _r(n,s,a,h){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+$e(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ta(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ai(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(vr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:$e(a)}}function Ci(n,s){var a=$e(s.value),h=$e(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function na(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function xt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?xt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wr,ra=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(wr=wr||document.createElement("div"),wr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=wr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Ur(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cs=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(n){Cs.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),As[s]=As[n]})});function sa(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||As.hasOwnProperty(n)&&As[n]?(""+s).trim():s+"px"}function ia(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=sa(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var oa=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(n,s){if(s){if(oa[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function la(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function Pi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ki=null,Tn=null,Zn=null;function Ri(n){if(n=Na(n)){if(typeof ki!="function")throw Error(t(280));var s=n.stateNode;s&&(s=pu(s),ki(n.stateNode,n.type,s))}}function er(n){Tn?Zn?Zn.push(n):Zn=[n]:Tn=n}function ua(){if(Tn){var n=Tn,s=Zn;if(Zn=Tn=null,Ri(n),s)for(n=0;n<s.length;n++)Ri(s[n])}}function ks(n,s){return n(s)}function ca(){}var xr=!1;function ha(n,s,a){if(xr)return n(s,a);xr=!0;try{return ks(n,s,a)}finally{xr=!1,(Tn!==null||Zn!==null)&&(ca(),ua())}}function pt(n,s){var a=n.stateNode;if(a===null)return null;var h=pu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ni=!1;if(d)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Ni=!1}function Rs(n,s,a,h,f,g,w,P,N){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var Ns=!1,Di=null,Ln=!1,da=null,oh={onError:function(n){Ns=!0,Di=n}};function Vi(n,s,a,h,f,g,w,P,N){Ns=!1,Di=null,Rs.apply(oh,arguments)}function Fl(n,s,a,h,f,g,w,P,N){if(Vi.apply(this,arguments),Ns){if(Ns){var z=Di;Ns=!1,Di=null}else throw Error(t(198));Ln||(Ln=!0,da=z)}}function Fn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ds(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Bn(n){if(Fn(n)!==n)throw Error(t(188))}function Bl(n){var s=n.alternate;if(!s){if(s=Fn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Bn(f),n;if(g===h)return Bn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,h=g;break}if(P===h){w=!0,h=f,a=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===a){w=!0,a=g,h=f;break}if(P===h){w=!0,h=g,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function fa(n){return n=Bl(n),n!==null?ji(n):null}function ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ji(n);if(s!==null)return s;n=n.sibling}return null}var Oi=e.unstable_scheduleCallback,pa=e.unstable_cancelCallback,zl=e.unstable_shouldYield,ah=e.unstable_requestPaint,et=e.unstable_now,Ul=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,$r=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,ma=e.unstable_LowPriority,$l=e.unstable_IdlePriority,js=null,hn=null;function ql(n){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(js,n,void 0,(n.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:Wl,ga=Math.log,Kl=Math.LN2;function Wl(n){return n>>>=0,n===0?32:31-(ga(n)/Kl|0)|0}var Mi=64,Li=4194304;function qr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Os(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?h=qr(P):(g&=w,g!==0&&(h=qr(g)))}else w=a&~f,w!==0?h=qr(w):g!==0&&(h=qr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-Qt(s),f=1<<a,h|=n[a],s&=~f;return h}function lh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-Qt(g),P=1<<w,N=f[w];N===-1?((P&a)===0||(P&h)!==0)&&(f[w]=lh(P,s)):N<=s&&(n.expiredLanes|=P),g&=~P}}function dn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ms(){var n=Mi;return Mi<<=1,(Mi&4194240)===0&&(Mi=64),n}function Kr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Wr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Qt(s),n[s]=a}function Ze(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Qt(a),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,a&=~g}}function Hr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-Qt(a),f=1<<h;f&s|n[h]&s&&(n[h]|=s),a&=~f}}var je=0;function Gr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Hl,Fi,Gl,Ql,Xl,ya=!1,tr=[],Dt=null,zn=null,Un=null,Qr=new Map,Sn=new Map,nr=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yl(n,s){switch(n){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Qr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(s.pointerId)}}function tn(n,s,a,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Na(s),s!==null&&Fi(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function ch(n,s,a,h,f){switch(s){case"focusin":return Dt=tn(Dt,n,s,a,h,f),!0;case"dragenter":return zn=tn(zn,n,s,a,h,f),!0;case"mouseover":return Un=tn(Un,n,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Qr.set(g,tn(Qr.get(g)||null,n,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Sn.set(g,tn(Sn.get(g)||null,n,s,a,h,f)),!0}return!1}function Jl(n){var s=Us(n.target);if(s!==null){var a=Fn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ds(a),s!==null){n.blockedOn=s,Xl(n.priority,function(){Gl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Bi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Ps=h,a.target.dispatchEvent(h),Ps=null}else return s=Na(a),s!==null&&Fi(s),n.blockedOn=a,!1;s.shift()}return!0}function Ls(n,s,a){Tr(n)&&a.delete(s)}function Zl(){ya=!1,Dt!==null&&Tr(Dt)&&(Dt=null),zn!==null&&Tr(zn)&&(zn=null),Un!==null&&Tr(Un)&&(Un=null),Qr.forEach(Ls),Sn.forEach(Ls)}function $n(n,s){n.blockedOn===s&&(n.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zl)))}function qn(n){function s(f){return $n(f,n)}if(0<tr.length){$n(tr[0],n);for(var a=1;a<tr.length;a++){var h=tr[a];h.blockedOn===n&&(h.blockedOn=null)}}for(Dt!==null&&$n(Dt,n),zn!==null&&$n(zn,n),Un!==null&&$n(Un,n),Qr.forEach(s),Sn.forEach(s),a=0;a<nr.length;a++)h=nr[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)Jl(a),a.blockedOn===null&&nr.shift()}var Ir=te.ReactCurrentBatchConfig,Xr=!0;function st(n,s,a,h){var f=je,g=Ir.transition;Ir.transition=null;try{je=1,va(n,s,a,h)}finally{je=f,Ir.transition=g}}function hh(n,s,a,h){var f=je,g=Ir.transition;Ir.transition=null;try{je=4,va(n,s,a,h)}finally{je=f,Ir.transition=g}}function va(n,s,a,h){if(Xr){var f=Bi(n,s,a,h);if(f===null)Eh(n,s,h,Fs,a),Yl(n,h);else if(ch(f,n,s,a,h))h.stopPropagation();else if(Yl(n,h),s&4&&-1<uh.indexOf(n)){for(;f!==null;){var g=Na(f);if(g!==null&&Hl(g),g=Bi(n,s,a,h),g===null&&Eh(n,s,h,Fs,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Eh(n,s,h,null,a)}}var Fs=null;function Bi(n,s,a,h){if(Fs=null,n=Pi(h),n=Us(n),n!==null)if(s=Fn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ds(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Fs=n,null}function _a(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case Vs:return 1;case $r:return 4;case In:case ma:return 16;case $l:return 536870912;default:return 16}default:return 16}}var fn=null,zi=null,nn=null;function wa(){if(nn)return nn;var n,s=zi,a=s.length,h,f="value"in fn?fn.value:fn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return nn=f.slice(n,1<h?1-h:void 0)}function Ui(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function rr(){return!0}function xa(){return!1}function Vt(n){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?rr:xa,this.isPropagationStopped=xa,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=Vt(Kn),sr=le({},Kn,{view:0,detail:0}),dh=Vt(sr),qi,Sr,Yr,Bs=le({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yr&&(Yr&&n.type==="mousemove"?(qi=n.screenX-Yr.screenX,Sr=n.screenY-Yr.screenY):Sr=qi=0,Yr=n),qi)},movementY:function(n){return"movementY"in n?n.movementY:Sr}}),Ki=Vt(Bs),Ea=le({},Bs,{dataTransfer:0}),eu=Vt(Ea),Wi=le({},sr,{relatedTarget:0}),Hi=Vt(Wi),tu=le({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),br=Vt(tu),nu=le({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ru=Vt(nu),su=le({},Kn,{data:0}),Ta=Vt(su),Gi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ou(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=iu[n])?!!s[n]:!1}function ir(){return ou}var u=le({},sr,{key:function(n){if(n.key){var s=Gi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ui(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(n){return n.type==="keypress"?Ui(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ui(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Vt(u),_=le({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Vt(_),M=le({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),q=Vt(M),ie=le({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Vt(ie),Tt=le({},Bs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Vt(Tt),Ct=[9,13,27,32],gt=d&&"CompositionEvent"in window,bn=null;d&&"documentMode"in document&&(bn=document.documentMode);var pn=d&&"TextEvent"in window&&!bn,zs=d&&(!gt||bn&&8<bn&&11>=bn),Qi=" ",gp=!1;function yp(n,s){switch(n){case"keyup":return Ct.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xi=!1;function rw(n,s){switch(n){case"compositionend":return vp(s);case"keypress":return s.which!==32?null:(gp=!0,Qi);case"textInput":return n=s.data,n===Qi&&gp?null:n;default:return null}}function sw(n,s){if(Xi)return n==="compositionend"||!gt&&yp(n,s)?(n=wa(),nn=zi=fn=null,Xi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zs&&s.locale!=="ko"?null:s.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!iw[n.type]:s==="textarea"}function wp(n,s,a,h){er(h),s=hu(s,"onChange"),0<s.length&&(a=new $i("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Ia=null,Sa=null;function ow(n){Lp(n,0)}function au(n){var s=to(n);if(Le(s))return n}function aw(n,s){if(n==="change")return s}var xp=!1;if(d){var fh;if(d){var ph="oninput"in document;if(!ph){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),ph=typeof Ep.oninput=="function"}fh=ph}else fh=!1;xp=fh&&(!document.documentMode||9<document.documentMode)}function Tp(){Ia&&(Ia.detachEvent("onpropertychange",Ip),Sa=Ia=null)}function Ip(n){if(n.propertyName==="value"&&au(Sa)){var s=[];wp(s,Sa,n,Pi(n)),ha(ow,s)}}function lw(n,s,a){n==="focusin"?(Tp(),Ia=s,Sa=a,Ia.attachEvent("onpropertychange",Ip)):n==="focusout"&&Tp()}function uw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return au(Sa)}function cw(n,s){if(n==="click")return au(s)}function hw(n,s){if(n==="input"||n==="change")return au(s)}function dw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Wn=typeof Object.is=="function"?Object.is:dw;function ba(n,s){if(Wn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Wn(n[f],s[f]))return!1}return!0}function Sp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bp(n,s){var a=Sp(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sp(a)}}function Ap(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ap(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Cp(){for(var n=window,s=Fe();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fe(n.document)}return s}function mh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function fw(n){var s=Cp(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Ap(a.ownerDocument.documentElement,a)){if(h!==null&&mh(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=bp(a,g);var w=bp(a,h);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var pw=d&&"documentMode"in document&&11>=document.documentMode,Yi=null,gh=null,Aa=null,yh=!1;function Pp(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||Yi==null||Yi!==Fe(h)||(h=Yi,"selectionStart"in h&&mh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Aa&&ba(Aa,h)||(Aa=h,h=hu(gh,"onSelect"),0<h.length&&(s=new $i("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Yi)))}function lu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ji={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},vh={},kp={};d&&(kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function uu(n){if(vh[n])return vh[n];if(!Ji[n])return n;var s=Ji[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in kp)return vh[n]=s[a];return n}var Rp=uu("animationend"),Np=uu("animationiteration"),Dp=uu("animationstart"),Vp=uu("transitionend"),jp=new Map,Op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(n,s){jp.set(n,s),l(s,[n])}for(var _h=0;_h<Op.length;_h++){var wh=Op[_h],mw=wh.toLowerCase(),gw=wh[0].toUpperCase()+wh.slice(1);Jr(mw,"on"+gw)}Jr(Rp,"onAnimationEnd"),Jr(Np,"onAnimationIteration"),Jr(Dp,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(Vp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Mp(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,Fl(h,s,void 0,n),n.currentTarget=null}function Lp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var P=h[w],N=P.instance,z=P.currentTarget;if(P=P.listener,N!==g&&f.isPropagationStopped())break e;Mp(f,P,z),g=N}else for(w=0;w<h.length;w++){if(P=h[w],N=P.instance,z=P.currentTarget,P=P.listener,N!==g&&f.isPropagationStopped())break e;Mp(f,P,z),g=N}}}if(Ln)throw n=da,Ln=!1,da=null,n}function nt(n,s){var a=s[Ch];a===void 0&&(a=s[Ch]=new Set);var h=n+"__bubble";a.has(h)||(Fp(s,n,2,!1),a.add(h))}function xh(n,s,a){var h=0;s&&(h|=4),Fp(a,n,h,s)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Pa(n){if(!n[cu]){n[cu]=!0,r.forEach(function(a){a!=="selectionchange"&&(yw.has(a)||xh(a,!1,n),xh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[cu]||(s[cu]=!0,xh("selectionchange",!1,s))}}function Fp(n,s,a,h){switch(_a(s)){case 1:var f=st;break;case 4:f=hh;break;default:f=va}a=f.bind(null,s,a,n),f=void 0,!Ni||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Eh(n,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;P!==null;){if(w=Us(P),w===null)return;if(N=w.tag,N===5||N===6){h=g=w;continue e}P=P.parentNode}}h=h.return}ha(function(){var z=g,Y=Pi(a),Z=[];e:{var X=jp.get(n);if(X!==void 0){var ce=$i,pe=n;switch(n){case"keypress":if(Ui(a)===0)break e;case"keydown":case"keyup":ce=m;break;case"focusin":pe="focus",ce=Hi;break;case"focusout":pe="blur",ce=Hi;break;case"beforeblur":case"afterblur":ce=Hi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=q;break;case Rp:case Np:case Dp:ce=br;break;case Vp:ce=He;break;case"scroll":ce=dh;break;case"wheel":ce=Be;break;case"copy":case"cut":case"paste":ce=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=I}var ge=(s&4)!==0,mt=!ge&&n==="scroll",F=ge?X!==null?X+"Capture":null:X;ge=[];for(var V=z,B;V!==null;){B=V;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,F!==null&&(ne=pt(V,F),ne!=null&&ge.push(ka(V,ne,B)))),mt)break;V=V.return}0<ge.length&&(X=new ce(X,pe,null,a,Y),Z.push({event:X,listeners:ge}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",X&&a!==Ps&&(pe=a.relatedTarget||a.fromElement)&&(Us(pe)||pe[Ar]))break e;if((ce||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,ce?(pe=a.relatedTarget||a.toElement,ce=z,pe=pe?Us(pe):null,pe!==null&&(mt=Fn(pe),pe!==mt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=z),ce!==pe)){if(ge=Ki,ne="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ge=I,ne="onPointerLeave",F="onPointerEnter",V="pointer"),mt=ce==null?X:to(ce),B=pe==null?X:to(pe),X=new ge(ne,V+"leave",ce,a,Y),X.target=mt,X.relatedTarget=B,ne=null,Us(Y)===z&&(ge=new ge(F,V+"enter",pe,a,Y),ge.target=B,ge.relatedTarget=mt,ne=ge),mt=ne,ce&&pe)t:{for(ge=ce,F=pe,V=0,B=ge;B;B=Zi(B))V++;for(B=0,ne=F;ne;ne=Zi(ne))B++;for(;0<V-B;)ge=Zi(ge),V--;for(;0<B-V;)F=Zi(F),B--;for(;V--;){if(ge===F||F!==null&&ge===F.alternate)break t;ge=Zi(ge),F=Zi(F)}ge=null}else ge=null;ce!==null&&Bp(Z,X,ce,ge,!1),pe!==null&&mt!==null&&Bp(Z,mt,pe,ge,!0)}}e:{if(X=z?to(z):window,ce=X.nodeName&&X.nodeName.toLowerCase(),ce==="select"||ce==="input"&&X.type==="file")var ye=aw;else if(_p(X))if(xp)ye=hw;else{ye=uw;var Te=lw}else(ce=X.nodeName)&&ce.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ye=cw);if(ye&&(ye=ye(n,z))){wp(Z,ye,a,Y);break e}Te&&Te(n,X,z),n==="focusout"&&(Te=X._wrapperState)&&Te.controlled&&X.type==="number"&&bi(X,"number",X.value)}switch(Te=z?to(z):window,n){case"focusin":(_p(Te)||Te.contentEditable==="true")&&(Yi=Te,gh=z,Aa=null);break;case"focusout":Aa=gh=Yi=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Pp(Z,a,Y);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":Pp(Z,a,Y)}var Ie;if(gt)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Xi?yp(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(zs&&a.locale!=="ko"&&(Xi||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Xi&&(Ie=wa()):(fn=Y,zi="value"in fn?fn.value:fn.textContent,Xi=!0)),Te=hu(z,Ae),0<Te.length&&(Ae=new Ta(Ae,n,null,a,Y),Z.push({event:Ae,listeners:Te}),Ie?Ae.data=Ie:(Ie=vp(a),Ie!==null&&(Ae.data=Ie)))),(Ie=pn?rw(n,a):sw(n,a))&&(z=hu(z,"onBeforeInput"),0<z.length&&(Y=new Ta("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:z}),Y.data=Ie))}Lp(Z,s)})}function ka(n,s,a){return{instance:n,listener:s,currentTarget:a}}function hu(n,s){for(var a=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=pt(n,a),g!=null&&h.unshift(ka(n,g,f)),g=pt(n,s),g!=null&&h.push(ka(n,g,f))),n=n.return}return h}function Zi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Bp(n,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var P=a,N=P.alternate,z=P.stateNode;if(N!==null&&N===h)break;P.tag===5&&z!==null&&(P=z,f?(N=pt(a,g),N!=null&&w.unshift(ka(a,N,P))):f||(N=pt(a,g),N!=null&&w.push(ka(a,N,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var vw=/\r\n?/g,_w=/\u0000|\uFFFD/g;function zp(n){return(typeof n=="string"?n:""+n).replace(vw,`
`).replace(_w,"")}function du(n,s,a){if(s=zp(s),zp(n)!==s&&a)throw Error(t(425))}function fu(){}var Th=null,Ih=null;function Sh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bh=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(n){return Up.resolve(null).then(n).catch(Ew)}:bh;function Ew(n){setTimeout(function(){throw n})}function Ah(n,s){var a=s,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),qn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);qn(s)}function Zr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function $p(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),or="__reactFiber$"+eo,Ra="__reactProps$"+eo,Ar="__reactContainer$"+eo,Ch="__reactEvents$"+eo,Tw="__reactListeners$"+eo,Iw="__reactHandles$"+eo;function Us(n){var s=n[or];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ar]||a[or]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=$p(n);n!==null;){if(a=n[or])return a;n=$p(n)}return s}n=a,a=n.parentNode}return null}function Na(n){return n=n[or]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function pu(n){return n[Ra]||null}var Ph=[],no=-1;function es(n){return{current:n}}function rt(n){0>no||(n.current=Ph[no],Ph[no]=null,no--)}function tt(n,s){no++,Ph[no]=n.current,n.current=s}var ts={},zt=es(ts),rn=es(!1),$s=ts;function ro(n,s){var a=n.type.contextTypes;if(!a)return ts;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function sn(n){return n=n.childContextTypes,n!=null}function mu(){rt(rn),rt(zt)}function qp(n,s,a){if(zt.current!==ts)throw Error(t(168));tt(zt,s),tt(rn,a)}function Kp(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Me(n)||"Unknown",f));return le({},a,h)}function gu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ts,$s=zt.current,tt(zt,n),tt(rn,rn.current),!0}function Wp(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=Kp(n,s,$s),h.__reactInternalMemoizedMergedChildContext=n,rt(rn),rt(zt),tt(zt,n)):rt(rn),tt(rn,a)}var Cr=null,yu=!1,kh=!1;function Hp(n){Cr===null?Cr=[n]:Cr.push(n)}function Sw(n){yu=!0,Hp(n)}function ns(){if(!kh&&Cr!==null){kh=!0;var n=0,s=je;try{var a=Cr;for(je=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Cr=null,yu=!1}catch(f){throw Cr!==null&&(Cr=Cr.slice(n+1)),Oi(Vs,ns),f}finally{je=s,kh=!1}}return null}var so=[],io=0,vu=null,_u=0,An=[],Cn=0,qs=null,Pr=1,kr="";function Ks(n,s){so[io++]=_u,so[io++]=vu,vu=n,_u=s}function Gp(n,s,a){An[Cn++]=Pr,An[Cn++]=kr,An[Cn++]=qs,qs=n;var h=Pr;n=kr;var f=32-Qt(h)-1;h&=~(1<<f),a+=1;var g=32-Qt(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Pr=1<<32-Qt(s)+f|a<<f|h,kr=g+n}else Pr=1<<g|a<<f|h,kr=n}function Rh(n){n.return!==null&&(Ks(n,1),Gp(n,1,0))}function Nh(n){for(;n===vu;)vu=so[--io],so[io]=null,_u=so[--io],so[io]=null;for(;n===qs;)qs=An[--Cn],An[Cn]=null,kr=An[--Cn],An[Cn]=null,Pr=An[--Cn],An[Cn]=null}var mn=null,gn=null,it=!1,Hn=null;function Qp(n,s){var a=Nn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Xp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,mn=n,gn=Zr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,mn=n,gn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=qs!==null?{id:Pr,overflow:kr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Nn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,mn=n,gn=null,!0):!1;default:return!1}}function Dh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vh(n){if(it){var s=gn;if(s){var a=s;if(!Xp(n,s)){if(Dh(n))throw Error(t(418));s=Zr(a.nextSibling);var h=mn;s&&Xp(n,s)?Qp(h,a):(n.flags=n.flags&-4097|2,it=!1,mn=n)}}else{if(Dh(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,mn=n}}}function Yp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mn=n}function wu(n){if(n!==mn)return!1;if(!it)return Yp(n),it=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Sh(n.type,n.memoizedProps)),s&&(s=gn)){if(Dh(n))throw Jp(),Error(t(418));for(;s;)Qp(n,s),s=Zr(s.nextSibling)}if(Yp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){gn=Zr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}gn=null}}else gn=mn?Zr(n.stateNode.nextSibling):null;return!0}function Jp(){for(var n=gn;n;)n=Zr(n.nextSibling)}function oo(){gn=mn=null,it=!1}function jh(n){Hn===null?Hn=[n]:Hn.push(n)}var bw=te.ReactCurrentBatchConfig;function Da(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var P=f.refs;w===null?delete P[g]:P[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function xu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Zp(n){var s=n._init;return s(n._payload)}function em(n){function s(F,V){if(n){var B=F.deletions;B===null?(F.deletions=[V],F.flags|=16):B.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)s(F,V),V=V.sibling;return null}function h(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function f(F,V){return F=cs(F,V),F.index=0,F.sibling=null,F}function g(F,V,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<V?(F.flags|=2,V):B):(F.flags|=2,V)):(F.flags|=1048576,V)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function P(F,V,B,ne){return V===null||V.tag!==6?(V=bd(B,F.mode,ne),V.return=F,V):(V=f(V,B),V.return=F,V)}function N(F,V,B,ne){var ye=B.type;return ye===k?Y(F,V,B.props.children,ne,B.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===We&&Zp(ye)===V.type)?(ne=f(V,B.props),ne.ref=Da(F,V,B),ne.return=F,ne):(ne=Ku(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Da(F,V,B),ne.return=F,ne)}function z(F,V,B,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Ad(B,F.mode,ne),V.return=F,V):(V=f(V,B.children||[]),V.return=F,V)}function Y(F,V,B,ne,ye){return V===null||V.tag!==7?(V=Zs(B,F.mode,ne,ye),V.return=F,V):(V=f(V,B),V.return=F,V)}function Z(F,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=bd(""+V,F.mode,B),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case de:return B=Ku(V.type,V.key,V.props,null,F.mode,B),B.ref=Da(F,null,V),B.return=F,B;case ue:return V=Ad(V,F.mode,B),V.return=F,V;case We:var ne=V._init;return Z(F,ne(V._payload),B)}if(vr(V)||we(V))return V=Zs(V,F.mode,B,null),V.return=F,V;xu(F,V)}return null}function X(F,V,B,ne){var ye=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ye!==null?null:P(F,V,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case de:return B.key===ye?N(F,V,B,ne):null;case ue:return B.key===ye?z(F,V,B,ne):null;case We:return ye=B._init,X(F,V,ye(B._payload),ne)}if(vr(B)||we(B))return ye!==null?null:Y(F,V,B,ne,null);xu(F,B)}return null}function ce(F,V,B,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(B)||null,P(V,F,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case de:return F=F.get(ne.key===null?B:ne.key)||null,N(V,F,ne,ye);case ue:return F=F.get(ne.key===null?B:ne.key)||null,z(V,F,ne,ye);case We:var Te=ne._init;return ce(F,V,B,Te(ne._payload),ye)}if(vr(ne)||we(ne))return F=F.get(B)||null,Y(V,F,ne,ye,null);xu(V,ne)}return null}function pe(F,V,B,ne){for(var ye=null,Te=null,Ie=V,Ae=V=0,Rt=null;Ie!==null&&Ae<B.length;Ae++){Ie.index>Ae?(Rt=Ie,Ie=null):Rt=Ie.sibling;var Ke=X(F,Ie,B[Ae],ne);if(Ke===null){Ie===null&&(Ie=Rt);break}n&&Ie&&Ke.alternate===null&&s(F,Ie),V=g(Ke,V,Ae),Te===null?ye=Ke:Te.sibling=Ke,Te=Ke,Ie=Rt}if(Ae===B.length)return a(F,Ie),it&&Ks(F,Ae),ye;if(Ie===null){for(;Ae<B.length;Ae++)Ie=Z(F,B[Ae],ne),Ie!==null&&(V=g(Ie,V,Ae),Te===null?ye=Ie:Te.sibling=Ie,Te=Ie);return it&&Ks(F,Ae),ye}for(Ie=h(F,Ie);Ae<B.length;Ae++)Rt=ce(Ie,F,Ae,B[Ae],ne),Rt!==null&&(n&&Rt.alternate!==null&&Ie.delete(Rt.key===null?Ae:Rt.key),V=g(Rt,V,Ae),Te===null?ye=Rt:Te.sibling=Rt,Te=Rt);return n&&Ie.forEach(function(hs){return s(F,hs)}),it&&Ks(F,Ae),ye}function ge(F,V,B,ne){var ye=we(B);if(typeof ye!="function")throw Error(t(150));if(B=ye.call(B),B==null)throw Error(t(151));for(var Te=ye=null,Ie=V,Ae=V=0,Rt=null,Ke=B.next();Ie!==null&&!Ke.done;Ae++,Ke=B.next()){Ie.index>Ae?(Rt=Ie,Ie=null):Rt=Ie.sibling;var hs=X(F,Ie,Ke.value,ne);if(hs===null){Ie===null&&(Ie=Rt);break}n&&Ie&&hs.alternate===null&&s(F,Ie),V=g(hs,V,Ae),Te===null?ye=hs:Te.sibling=hs,Te=hs,Ie=Rt}if(Ke.done)return a(F,Ie),it&&Ks(F,Ae),ye;if(Ie===null){for(;!Ke.done;Ae++,Ke=B.next())Ke=Z(F,Ke.value,ne),Ke!==null&&(V=g(Ke,V,Ae),Te===null?ye=Ke:Te.sibling=Ke,Te=Ke);return it&&Ks(F,Ae),ye}for(Ie=h(F,Ie);!Ke.done;Ae++,Ke=B.next())Ke=ce(Ie,F,Ae,Ke.value,ne),Ke!==null&&(n&&Ke.alternate!==null&&Ie.delete(Ke.key===null?Ae:Ke.key),V=g(Ke,V,Ae),Te===null?ye=Ke:Te.sibling=Ke,Te=Ke);return n&&Ie.forEach(function(ix){return s(F,ix)}),it&&Ks(F,Ae),ye}function mt(F,V,B,ne){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case de:e:{for(var ye=B.key,Te=V;Te!==null;){if(Te.key===ye){if(ye=B.type,ye===k){if(Te.tag===7){a(F,Te.sibling),V=f(Te,B.props.children),V.return=F,F=V;break e}}else if(Te.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===We&&Zp(ye)===Te.type){a(F,Te.sibling),V=f(Te,B.props),V.ref=Da(F,Te,B),V.return=F,F=V;break e}a(F,Te);break}else s(F,Te);Te=Te.sibling}B.type===k?(V=Zs(B.props.children,F.mode,ne,B.key),V.return=F,F=V):(ne=Ku(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Da(F,V,B),ne.return=F,F=ne)}return w(F);case ue:e:{for(Te=B.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(F,V.sibling),V=f(V,B.children||[]),V.return=F,F=V;break e}else{a(F,V);break}else s(F,V);V=V.sibling}V=Ad(B,F.mode,ne),V.return=F,F=V}return w(F);case We:return Te=B._init,mt(F,V,Te(B._payload),ne)}if(vr(B))return pe(F,V,B,ne);if(we(B))return ge(F,V,B,ne);xu(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(F,V.sibling),V=f(V,B),V.return=F,F=V):(a(F,V),V=bd(B,F.mode,ne),V.return=F,F=V),w(F)):a(F,V)}return mt}var ao=em(!0),tm=em(!1),Eu=es(null),Tu=null,lo=null,Oh=null;function Mh(){Oh=lo=Tu=null}function Lh(n){var s=Eu.current;rt(Eu),n._currentValue=s}function Fh(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function uo(n,s){Tu=n,Oh=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(on=!0),n.firstContext=null)}function Pn(n){var s=n._currentValue;if(Oh!==n)if(n={context:n,memoizedValue:s,next:null},lo===null){if(Tu===null)throw Error(t(308));lo=n,Tu.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return s}var Ws=null;function Bh(n){Ws===null?Ws=[n]:Ws.push(n)}function nm(n,s,a,h){var f=s.interleaved;return f===null?(a.next=a,Bh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Rr(n,h)}function Rr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var rs=!1;function zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ss(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(qe&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Rr(n,a)}return f=h.interleaved,f===null?(s.next=s,Bh(h)):(s.next=f.next,f.next=s),h.interleaved=s,Rr(n,a)}function Iu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Hr(n,a)}}function sm(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Su(n,s,a,h){var f=n.updateQueue;rs=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var N=P,z=N.next;N.next=null,w===null?g=z:w.next=z,w=N;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,P=Y.lastBaseUpdate,P!==w&&(P===null?Y.firstBaseUpdate=z:P.next=z,Y.lastBaseUpdate=N))}if(g!==null){var Z=f.baseState;w=0,Y=z=N=null,P=g;do{var X=P.lane,ce=P.eventTime;if((h&X)===X){Y!==null&&(Y=Y.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var pe=n,ge=P;switch(X=s,ce=a,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){Z=pe.call(ce,Z,X);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,X=typeof pe=="function"?pe.call(ce,Z,X):pe,X==null)break e;Z=le({},Z,X);break e;case 2:rs=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,X=f.effects,X===null?f.effects=[P]:X.push(P))}else ce={eventTime:ce,lane:X,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Y===null?(z=Y=ce,N=Z):Y=Y.next=ce,w|=X;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;X=P,P=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(Y===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=z,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Qs|=w,n.lanes=w,n.memoizedState=Z}}function im(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Va={},ar=es(Va),ja=es(Va),Oa=es(Va);function Hs(n){if(n===Va)throw Error(t(174));return n}function Uh(n,s){switch(tt(Oa,s),tt(ja,n),tt(ar,Va),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Et(s,n)}rt(ar),tt(ar,s)}function co(){rt(ar),rt(ja),rt(Oa)}function om(n){Hs(Oa.current);var s=Hs(ar.current),a=Et(s,n.type);s!==a&&(tt(ja,n),tt(ar,a))}function $h(n){ja.current===n&&(rt(ar),rt(ja))}var lt=es(0);function bu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var qh=[];function Kh(){for(var n=0;n<qh.length;n++)qh[n]._workInProgressVersionPrimary=null;qh.length=0}var Au=te.ReactCurrentDispatcher,Wh=te.ReactCurrentBatchConfig,Gs=0,ut=null,It=null,Pt=null,Cu=!1,Ma=!1,La=0,Aw=0;function Ut(){throw Error(t(321))}function Hh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Wn(n[a],s[a]))return!1;return!0}function Gh(n,s,a,h,f,g){if(Gs=g,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Au.current=n===null||n.memoizedState===null?Rw:Nw,n=a(h,f),Ma){g=0;do{if(Ma=!1,La=0,25<=g)throw Error(t(301));g+=1,Pt=It=null,s.updateQueue=null,Au.current=Dw,n=a(h,f)}while(Ma)}if(Au.current=Ru,s=It!==null&&It.next!==null,Gs=0,Pt=It=ut=null,Cu=!1,s)throw Error(t(300));return n}function Qh(){var n=La!==0;return La=0,n}function lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ut.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function kn(){if(It===null){var n=ut.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var s=Pt===null?ut.memoizedState:Pt.next;if(s!==null)Pt=s,It=n;else{if(n===null)throw Error(t(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Pt===null?ut.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Fa(n,s){return typeof s=="function"?s(n):s}function Xh(n){var s=kn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=It,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var P=w=null,N=null,z=g;do{var Y=z.lane;if((Gs&Y)===Y)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var Z={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(P=N=Z,w=h):N=N.next=Z,ut.lanes|=Y,Qs|=Y}z=z.next}while(z!==null&&z!==g);N===null?w=h:N.next=P,Wn(h,s.memoizedState)||(on=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=N,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do g=f.lane,ut.lanes|=g,Qs|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Yh(n){var s=kn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);Wn(g,s.memoizedState)||(on=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function am(){}function lm(n,s){var a=ut,h=kn(),f=s(),g=!Wn(h.memoizedState,f);if(g&&(h.memoizedState=f,on=!0),h=h.queue,Jh(hm.bind(null,a,h,n),[n]),h.getSnapshot!==s||g||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,Ba(9,cm.bind(null,a,h,f,s),void 0,null),kt===null)throw Error(t(349));(Gs&30)!==0||um(a,s,f)}return f}function um(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function cm(n,s,a,h){s.value=a,s.getSnapshot=h,dm(s)&&fm(n)}function hm(n,s,a){return a(function(){dm(s)&&fm(n)})}function dm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Wn(n,a)}catch{return!0}}function fm(n){var s=Rr(n,1);s!==null&&Yn(s,n,1,-1)}function pm(n){var s=lr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:n},s.queue=n,n=n.dispatch=kw.bind(null,ut,n),[s.memoizedState,n]}function Ba(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function mm(){return kn().memoizedState}function Pu(n,s,a,h){var f=lr();ut.flags|=n,f.memoizedState=Ba(1|s,a,void 0,h===void 0?null:h)}function ku(n,s,a,h){var f=kn();h=h===void 0?null:h;var g=void 0;if(It!==null){var w=It.memoizedState;if(g=w.destroy,h!==null&&Hh(h,w.deps)){f.memoizedState=Ba(s,a,g,h);return}}ut.flags|=n,f.memoizedState=Ba(1|s,a,g,h)}function gm(n,s){return Pu(8390656,8,n,s)}function Jh(n,s){return ku(2048,8,n,s)}function ym(n,s){return ku(4,2,n,s)}function vm(n,s){return ku(4,4,n,s)}function _m(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wm(n,s,a){return a=a!=null?a.concat([n]):null,ku(4,4,_m.bind(null,s,n),a)}function Zh(){}function xm(n,s){var a=kn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hh(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function Em(n,s){var a=kn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hh(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Tm(n,s,a){return(Gs&21)===0?(n.baseState&&(n.baseState=!1,on=!0),n.memoizedState=a):(Wn(a,s)||(a=Ms(),ut.lanes|=a,Qs|=a,n.baseState=!0),s)}function Cw(n,s){var a=je;je=a!==0&&4>a?a:4,n(!0);var h=Wh.transition;Wh.transition={};try{n(!1),s()}finally{je=a,Wh.transition=h}}function Im(){return kn().memoizedState}function Pw(n,s,a){var h=ls(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Sm(n))bm(s,a);else if(a=nm(n,s,a,h),a!==null){var f=Jt();Yn(a,n,h,f),Am(a,s,h)}}function kw(n,s,a){var h=ls(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sm(n))bm(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,a);if(f.hasEagerState=!0,f.eagerState=P,Wn(P,w)){var N=s.interleaved;N===null?(f.next=f,Bh(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}a=nm(n,s,f,h),a!==null&&(f=Jt(),Yn(a,n,h,f),Am(a,s,h))}}function Sm(n){var s=n.alternate;return n===ut||s!==null&&s===ut}function bm(n,s){Ma=Cu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Am(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Hr(n,a)}}var Ru={readContext:Pn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},Rw={readContext:Pn,useCallback:function(n,s){return lr().memoizedState=[n,s===void 0?null:s],n},useContext:Pn,useEffect:gm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Pu(4194308,4,_m.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Pu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Pu(4,2,n,s)},useMemo:function(n,s){var a=lr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=lr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=Pw.bind(null,ut,n),[h.memoizedState,n]},useRef:function(n){var s=lr();return n={current:n},s.memoizedState=n},useState:pm,useDebugValue:Zh,useDeferredValue:function(n){return lr().memoizedState=n},useTransition:function(){var n=pm(!1),s=n[0];return n=Cw.bind(null,n[1]),lr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=ut,f=lr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),kt===null)throw Error(t(349));(Gs&30)!==0||um(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,gm(hm.bind(null,h,g,n),[n]),h.flags|=2048,Ba(9,cm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var n=lr(),s=kt.identifierPrefix;if(it){var a=kr,h=Pr;a=(h&~(1<<32-Qt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=La++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Aw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Nw={readContext:Pn,useCallback:xm,useContext:Pn,useEffect:Jh,useImperativeHandle:wm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Em,useReducer:Xh,useRef:mm,useState:function(){return Xh(Fa)},useDebugValue:Zh,useDeferredValue:function(n){var s=kn();return Tm(s,It.memoizedState,n)},useTransition:function(){var n=Xh(Fa)[0],s=kn().memoizedState;return[n,s]},useMutableSource:am,useSyncExternalStore:lm,useId:Im,unstable_isNewReconciler:!1},Dw={readContext:Pn,useCallback:xm,useContext:Pn,useEffect:Jh,useImperativeHandle:wm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Em,useReducer:Yh,useRef:mm,useState:function(){return Yh(Fa)},useDebugValue:Zh,useDeferredValue:function(n){var s=kn();return It===null?s.memoizedState=n:Tm(s,It.memoizedState,n)},useTransition:function(){var n=Yh(Fa)[0],s=kn().memoizedState;return[n,s]},useMutableSource:am,useSyncExternalStore:lm,useId:Im,unstable_isNewReconciler:!1};function Gn(n,s){if(n&&n.defaultProps){s=le({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function ed(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:le({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Nu={isMounted:function(n){return(n=n._reactInternals)?Fn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=Jt(),f=ls(n),g=Nr(h,f);g.payload=s,a!=null&&(g.callback=a),s=ss(n,g,f),s!==null&&(Yn(s,n,f,h),Iu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=Jt(),f=ls(n),g=Nr(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ss(n,g,f),s!==null&&(Yn(s,n,f,h),Iu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Jt(),h=ls(n),f=Nr(a,h);f.tag=2,s!=null&&(f.callback=s),s=ss(n,f,h),s!==null&&(Yn(s,n,h,a),Iu(s,n,h))}};function Cm(n,s,a,h,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!ba(a,h)||!ba(f,g):!0}function Pm(n,s,a){var h=!1,f=ts,g=s.contextType;return typeof g=="object"&&g!==null?g=Pn(g):(f=sn(s)?$s:zt.current,h=s.contextTypes,g=(h=h!=null)?ro(n,f):ts),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Nu,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function km(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Nu.enqueueReplaceState(s,s.state,null)}function td(n,s,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},zh(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Pn(g):(g=sn(s)?$s:zt.current,f.context=ro(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(ed(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Nu.enqueueReplaceState(f,f.state,null),Su(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function ho(n,s){try{var a="",h=s;do a+=ke(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function nd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function rd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Vw=typeof WeakMap=="function"?WeakMap:Map;function Rm(n,s,a){a=Nr(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Fu||(Fu=!0,vd=h),rd(n,s)},a}function Nm(n,s,a){a=Nr(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){rd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){rd(n,s),typeof h!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Dm(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Vw;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),n=Gw.bind(null,n,s,a),s.then(n,n))}function Vm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function jm(n,s,a,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Nr(-1,1),s.tag=2,ss(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var jw=te.ReactCurrentOwner,on=!1;function Yt(n,s,a,h){s.child=n===null?tm(s,null,a,h):ao(s,n.child,a,h)}function Om(n,s,a,h,f){a=a.render;var g=s.ref;return uo(s,f),h=Gh(n,s,a,h,g,f),a=Qh(),n!==null&&!on?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Dr(n,s,f)):(it&&a&&Rh(s),s.flags|=1,Yt(n,s,h,f),s.child)}function Mm(n,s,a,h,f){if(n===null){var g=a.type;return typeof g=="function"&&!Sd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Lm(n,s,g,h,f)):(n=Ku(a.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(w,h)&&n.ref===s.ref)return Dr(n,s,f)}return s.flags|=1,n=cs(g,h),n.ref=s.ref,n.return=s,s.child=n}function Lm(n,s,a,h,f){if(n!==null){var g=n.memoizedProps;if(ba(g,h)&&n.ref===s.ref)if(on=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(on=!0);else return s.lanes=n.lanes,Dr(n,s,f)}return sd(n,s,a,h,f)}function Fm(n,s,a){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(po,yn),yn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,tt(po,yn),yn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,tt(po,yn),yn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,tt(po,yn),yn|=h;return Yt(n,s,f,a),s.child}function Bm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function sd(n,s,a,h,f){var g=sn(a)?$s:zt.current;return g=ro(s,g),uo(s,f),a=Gh(n,s,a,h,g,f),h=Qh(),n!==null&&!on?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Dr(n,s,f)):(it&&h&&Rh(s),s.flags|=1,Yt(n,s,a,f),s.child)}function zm(n,s,a,h,f){if(sn(a)){var g=!0;gu(s)}else g=!1;if(uo(s,f),s.stateNode===null)Vu(n,s),Pm(s,a,h),td(s,a,h,f),h=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var N=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=Pn(z):(z=sn(a)?$s:zt.current,z=ro(s,z));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||N!==z)&&km(s,w,h,z),rs=!1;var X=s.memoizedState;w.state=X,Su(s,h,w,f),N=s.memoizedState,P!==h||X!==N||rn.current||rs?(typeof Y=="function"&&(ed(s,a,Y,h),N=s.memoizedState),(P=rs||Cm(s,a,P,h,X,N,z))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=N),w.props=h,w.state=N,w.context=z,h=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,rm(n,s),P=s.memoizedProps,z=s.type===s.elementType?P:Gn(s.type,P),w.props=z,Z=s.pendingProps,X=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=Pn(N):(N=sn(a)?$s:zt.current,N=ro(s,N));var ce=a.getDerivedStateFromProps;(Y=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==Z||X!==N)&&km(s,w,h,N),rs=!1,X=s.memoizedState,w.state=X,Su(s,h,w,f);var pe=s.memoizedState;P!==Z||X!==pe||rn.current||rs?(typeof ce=="function"&&(ed(s,a,ce,h),pe=s.memoizedState),(z=rs||Cm(s,a,z,h,X,pe,N)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,pe,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,pe,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=pe),w.props=h,w.state=pe,w.context=N,h=z):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),h=!1)}return id(n,s,a,h,g,f)}function id(n,s,a,h,f,g){Bm(n,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Wp(s,a,!1),Dr(n,s,g);h=s.stateNode,jw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&w?(s.child=ao(s,n.child,null,g),s.child=ao(s,null,P,g)):Yt(n,s,P,g),s.memoizedState=h.state,f&&Wp(s,a,!0),s.child}function Um(n){var s=n.stateNode;s.pendingContext?qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&qp(n,s.context,!1),Uh(n,s.containerInfo)}function $m(n,s,a,h,f){return oo(),jh(f),s.flags|=256,Yt(n,s,a,h),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(n){return{baseLanes:n,cachePool:null,transitions:null}}function qm(n,s,a){var h=s.pendingProps,f=lt.current,g=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),tt(lt,f&1),n===null)return Vh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,n=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Wu(w,h,0,null),n=Zs(n,h,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=ad(a),s.memoizedState=od,n):ld(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return Ow(n,s,w,h,P,f,a);if(g){g=h.fallback,w=s.mode,f=n.child,P=f.sibling;var N={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=N,s.deletions=null):(h=cs(f,N),h.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=cs(P,g):(g=Zs(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=n.child.memoizedState,w=w===null?ad(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=od,h}return g=n.child,n=g.sibling,h=cs(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function ld(n,s){return s=Wu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Du(n,s,a,h){return h!==null&&jh(h),ao(s,n.child,null,a),n=ld(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ow(n,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=nd(Error(t(422))),Du(n,s,w,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Wu({mode:"visible",children:h.children},f,0,null),g=Zs(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&ao(s,n.child,null,w),s.child.memoizedState=ad(w),s.memoizedState=od,g);if((s.mode&1)===0)return Du(n,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var P=h.dgst;return h=P,g=Error(t(419)),h=nd(g,h,void 0),Du(n,s,w,h)}if(P=(w&n.childLanes)!==0,on||P){if(h=kt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Rr(n,f),Yn(h,n,f,-1))}return Id(),h=nd(Error(t(421))),Du(n,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=Qw.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,gn=Zr(f.nextSibling),mn=s,it=!0,Hn=null,n!==null&&(An[Cn++]=Pr,An[Cn++]=kr,An[Cn++]=qs,Pr=n.id,kr=n.overflow,qs=s),s=ld(s,h.children),s.flags|=4096,s)}function Km(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Fh(n.return,s,a)}function ud(n,s,a,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function Wm(n,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Yt(n,s,h.children,a),h=lt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Km(n,a,s);else if(n.tag===19)Km(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(tt(lt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&bu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),ud(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&bu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ud(s,!0,a,null,g);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Vu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Dr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Qs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=cs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=cs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Mw(n,s,a){switch(s.tag){case 3:Um(s),oo();break;case 5:om(s);break;case 1:sn(s.type)&&gu(s);break;case 4:Uh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;tt(Eu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(tt(lt,lt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?qm(n,s,a):(tt(lt,lt.current&1),n=Dr(n,s,a),n!==null?n.sibling:null);tt(lt,lt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return Wm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(lt,lt.current),h)break;return null;case 22:case 23:return s.lanes=0,Fm(n,s,a)}return Dr(n,s,a)}var Hm,cd,Gm,Qm;Hm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},Gm=function(n,s,a,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,Hs(ar.current);var g=null;switch(a){case"input":f=Gt(n,f),h=Gt(n,h),g=[];break;case"select":f=le({},f,{value:void 0}),h=le({},h,{value:void 0}),g=[];break;case"textarea":f=ta(n,f),h=ta(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=fu)}aa(a,h);var w;a=null;for(z in f)if(!h.hasOwnProperty(z)&&f.hasOwnProperty(z)&&f[z]!=null)if(z==="style"){var P=f[z];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?g||(g=[]):(g=g||[]).push(z,null));for(z in h){var N=h[z];if(P=f!=null?f[z]:void 0,h.hasOwnProperty(z)&&N!==P&&(N!=null||P!=null))if(z==="style")if(P){for(w in P)!P.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&P[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(g||(g=[]),g.push(z,a)),a=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(g=g||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&nt("scroll",n),g||P===N||(g=[])):(g=g||[]).push(z,N))}a&&(g=g||[]).push("style",a);var z=g;(s.updateQueue=z)&&(s.flags|=4)}},Qm=function(n,s,a,h){a!==h&&(s.flags|=4)};function za(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function Lw(n,s,a){var h=s.pendingProps;switch(Nh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return sn(s.type)&&mu(),$t(s),null;case 3:return h=s.stateNode,co(),rt(rn),rt(zt),Kh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(wu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hn!==null&&(xd(Hn),Hn=null))),cd(n,s),$t(s),null;case 5:$h(s);var f=Hs(Oa.current);if(a=s.type,n!==null&&s.stateNode!=null)Gm(n,s,a,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return $t(s),null}if(n=Hs(ar.current),wu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[or]=s,h[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":nt("cancel",h),nt("close",h);break;case"iframe":case"object":case"embed":nt("load",h);break;case"video":case"audio":for(f=0;f<Ca.length;f++)nt(Ca[f],h);break;case"source":nt("error",h);break;case"img":case"image":case"link":nt("error",h),nt("load",h);break;case"details":nt("toggle",h);break;case"input":Bt(h,g),nt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},nt("invalid",h);break;case"textarea":Ai(h,g),nt("invalid",h)}aa(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var P=g[w];w==="children"?typeof P=="string"?h.textContent!==P&&(g.suppressHydrationWarning!==!0&&du(h.textContent,P,n),f=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&du(h.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&nt("scroll",h)}switch(a){case"input":Ee(h),Si(h,g,!0);break;case"textarea":Ee(h),na(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=fu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(a,{is:h.is}):(n=w.createElement(a),a==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,a),n[or]=s,n[Ra]=h,Hm(n,s,!1,!1),s.stateNode=n;e:{switch(w=la(a,h),a){case"dialog":nt("cancel",n),nt("close",n),f=h;break;case"iframe":case"object":case"embed":nt("load",n),f=h;break;case"video":case"audio":for(f=0;f<Ca.length;f++)nt(Ca[f],n);f=h;break;case"source":nt("error",n),f=h;break;case"img":case"image":case"link":nt("error",n),nt("load",n),f=h;break;case"details":nt("toggle",n),f=h;break;case"input":Bt(n,h),f=Gt(n,h),nt("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=le({},h,{value:void 0}),nt("invalid",n);break;case"textarea":Ai(n,h),f=ta(n,h),nt("invalid",n);break;default:f=h}aa(a,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var N=P[g];g==="style"?ia(n,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ra(n,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Ur(n,N):typeof N=="number"&&Ur(n,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&nt("scroll",n):N!=null&&Q(n,g,N,w))}switch(a){case"input":Ee(n),Si(n,h,!1);break;case"textarea":Ee(n),na(n);break;case"option":h.value!=null&&n.setAttribute("value",""+$e(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?_r(n,!!h.multiple,g,!1):h.defaultValue!=null&&_r(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=fu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return $t(s),null;case 6:if(n&&s.stateNode!=null)Qm(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Hs(Oa.current),Hs(ar.current),wu(s)){if(h=s.stateNode,a=s.memoizedProps,h[or]=s,(g=h.nodeValue!==a)&&(n=mn,n!==null))switch(n.tag){case 3:du(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&du(h.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[or]=s,s.stateNode=h}return $t(s),null;case 13:if(rt(lt),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&gn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Jp(),oo(),s.flags|=98560,g=!1;else if(g=wu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[or]=s}else oo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),g=!1}else Hn!==null&&(xd(Hn),Hn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(lt.current&1)!==0?St===0&&(St=3):Id())),s.updateQueue!==null&&(s.flags|=4),$t(s),null);case 4:return co(),cd(n,s),n===null&&Pa(s.stateNode.containerInfo),$t(s),null;case 10:return Lh(s.type._context),$t(s),null;case 17:return sn(s.type)&&mu(),$t(s),null;case 19:if(rt(lt),g=s.memoizedState,g===null)return $t(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)za(g,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=bu(n),w!==null){for(s.flags|=128,za(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return tt(lt,lt.current&1|2),s.child}n=n.sibling}g.tail!==null&&et()>mo&&(s.flags|=128,h=!0,za(g,!1),s.lanes=4194304)}else{if(!h)if(n=bu(w),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),za(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!it)return $t(s),null}else 2*et()-g.renderingStartTime>mo&&a!==1073741824&&(s.flags|=128,h=!0,za(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=et(),s.sibling=null,a=lt.current,tt(lt,h?a&1|2:a&1),s):($t(s),null);case 22:case 23:return Td(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(yn&1073741824)!==0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Fw(n,s){switch(Nh(s),s.tag){case 1:return sn(s.type)&&mu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return co(),rt(rn),rt(zt),Kh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return $h(s),null;case 13:if(rt(lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));oo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return rt(lt),null;case 4:return co(),null;case 10:return Lh(s.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var ju=!1,qt=!1,Bw=typeof WeakSet=="function"?WeakSet:Set,fe=null;function fo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ht(n,s,h)}else a.current=null}function hd(n,s,a){try{a()}catch(h){ht(n,s,h)}}var Xm=!1;function zw(n,s){if(Th=Xr,n=Cp(),mh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,P=-1,N=-1,z=0,Y=0,Z=n,X=null;t:for(;;){for(var ce;Z!==a||f!==0&&Z.nodeType!==3||(P=w+f),Z!==g||h!==0&&Z.nodeType!==3||(N=w+h),Z.nodeType===3&&(w+=Z.nodeValue.length),(ce=Z.firstChild)!==null;)X=Z,Z=ce;for(;;){if(Z===n)break t;if(X===a&&++z===f&&(P=w),X===g&&++Y===h&&(N=w),(ce=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=ce}a=P===-1||N===-1?null:{start:P,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ih={focusedElem:n,selectionRange:a},Xr=!1,fe=s;fe!==null;)if(s=fe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,fe=n;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,mt=pe.memoizedState,F=s.stateNode,V=F.getSnapshotBeforeUpdate(s.elementType===s.type?ge:Gn(s.type,ge),mt);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){ht(s,s.return,ne)}if(n=s.sibling,n!==null){n.return=s.return,fe=n;break}fe=s.return}return pe=Xm,Xm=!1,pe}function Ua(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&hd(s,a,g)}f=f.next}while(f!==h)}}function Ou(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function dd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Ym(n){var s=n.alternate;s!==null&&(n.alternate=null,Ym(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[or],delete s[Ra],delete s[Ch],delete s[Tw],delete s[Iw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Jm(n){return n.tag===5||n.tag===3||n.tag===4}function Zm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=fu));else if(h!==4&&(n=n.child,n!==null))for(fd(n,s,a),n=n.sibling;n!==null;)fd(n,s,a),n=n.sibling}function pd(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(pd(n,s,a),n=n.sibling;n!==null;)pd(n,s,a),n=n.sibling}var jt=null,Qn=!1;function is(n,s,a){for(a=a.child;a!==null;)eg(n,s,a),a=a.sibling}function eg(n,s,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(js,a)}catch{}switch(a.tag){case 5:qt||fo(a,s);case 6:var h=jt,f=Qn;jt=null,is(n,s,a),jt=h,Qn=f,jt!==null&&(Qn?(n=jt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):jt.removeChild(a.stateNode));break;case 18:jt!==null&&(Qn?(n=jt,a=a.stateNode,n.nodeType===8?Ah(n.parentNode,a):n.nodeType===1&&Ah(n,a),qn(n)):Ah(jt,a.stateNode));break;case 4:h=jt,f=Qn,jt=a.stateNode.containerInfo,Qn=!0,is(n,s,a),jt=h,Qn=f;break;case 0:case 11:case 14:case 15:if(!qt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&hd(a,s,w),f=f.next}while(f!==h)}is(n,s,a);break;case 1:if(!qt&&(fo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){ht(a,s,P)}is(n,s,a);break;case 21:is(n,s,a);break;case 22:a.mode&1?(qt=(h=qt)||a.memoizedState!==null,is(n,s,a),qt=h):is(n,s,a);break;default:is(n,s,a)}}function tg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Bw),s.forEach(function(h){var f=Xw.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Xn(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:jt=P.stateNode,Qn=!1;break e;case 3:jt=P.stateNode.containerInfo,Qn=!0;break e;case 4:jt=P.stateNode.containerInfo,Qn=!0;break e}P=P.return}if(jt===null)throw Error(t(160));eg(g,w,f),jt=null,Qn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(z){ht(f,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ng(s,n),s=s.sibling}function ng(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xn(s,n),ur(n),h&4){try{Ua(3,n,n.return),Ou(3,n)}catch(ge){ht(n,n.return,ge)}try{Ua(5,n,n.return)}catch(ge){ht(n,n.return,ge)}}break;case 1:Xn(s,n),ur(n),h&512&&a!==null&&fo(a,a.return);break;case 5:if(Xn(s,n),ur(n),h&512&&a!==null&&fo(a,a.return),n.flags&32){var f=n.stateNode;try{Ur(f,"")}catch(ge){ht(n,n.return,ge)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,P=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&En(f,g),la(P,w);var z=la(P,g);for(w=0;w<N.length;w+=2){var Y=N[w],Z=N[w+1];Y==="style"?ia(f,Z):Y==="dangerouslySetInnerHTML"?ra(f,Z):Y==="children"?Ur(f,Z):Q(f,Y,Z,z)}switch(P){case"input":yr(f,g);break;case"textarea":Ci(f,g);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ce=g.value;ce!=null?_r(f,!!g.multiple,ce,!1):X!==!!g.multiple&&(g.defaultValue!=null?_r(f,!!g.multiple,g.defaultValue,!0):_r(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ra]=g}catch(ge){ht(n,n.return,ge)}}break;case 6:if(Xn(s,n),ur(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ge){ht(n,n.return,ge)}}break;case 3:if(Xn(s,n),ur(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(ge){ht(n,n.return,ge)}break;case 4:Xn(s,n),ur(n);break;case 13:Xn(s,n),ur(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(yd=et())),h&4&&tg(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(z=qt)||Y,Xn(s,n),qt=z):Xn(s,n),ur(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(fe=n,Y=n.child;Y!==null;){for(Z=fe=Y;fe!==null;){switch(X=fe,ce=X.child,X.tag){case 0:case 11:case 14:case 15:Ua(4,X,X.return);break;case 1:fo(X,X.return);var pe=X.stateNode;if(typeof pe.componentWillUnmount=="function"){h=X,a=X.return;try{s=h,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(ge){ht(h,a,ge)}}break;case 5:fo(X,X.return);break;case 22:if(X.memoizedState!==null){ig(Z);continue}}ce!==null?(ce.return=X,fe=ce):ig(Z)}Y=Y.sibling}e:for(Y=null,Z=n;;){if(Z.tag===5){if(Y===null){Y=Z;try{f=Z.stateNode,z?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=Z.stateNode,N=Z.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=sa("display",w))}catch(ge){ht(n,n.return,ge)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(ge){ht(n,n.return,ge)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Xn(s,n),ur(n),h&4&&tg(n);break;case 21:break;default:Xn(s,n),ur(n)}}function ur(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Jm(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Ur(f,""),h.flags&=-33);var g=Zm(n);pd(n,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,P=Zm(n);fd(n,P,w);break;default:throw Error(t(161))}}catch(N){ht(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Uw(n,s,a){fe=n,rg(n)}function rg(n,s,a){for(var h=(n.mode&1)!==0;fe!==null;){var f=fe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||ju;if(!w){var P=f.alternate,N=P!==null&&P.memoizedState!==null||qt;P=ju;var z=qt;if(ju=w,(qt=N)&&!z)for(fe=f;fe!==null;)w=fe,N=w.child,w.tag===22&&w.memoizedState!==null?og(f):N!==null?(N.return=w,fe=N):og(f);for(;g!==null;)fe=g,rg(g),g=g.sibling;fe=f,ju=P,qt=z}sg(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,fe=g):sg(n)}}function sg(n){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:qt||Ou(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!qt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Gn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&im(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}im(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&qn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||s.flags&512&&dd(s)}catch(X){ht(s,s.return,X)}}if(s===n){fe=null;break}if(a=s.sibling,a!==null){a.return=s.return,fe=a;break}fe=s.return}}function ig(n){for(;fe!==null;){var s=fe;if(s===n){fe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,fe=a;break}fe=s.return}}function og(n){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ou(4,s)}catch(N){ht(s,a,N)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(N){ht(s,f,N)}}var g=s.return;try{dd(s)}catch(N){ht(s,g,N)}break;case 5:var w=s.return;try{dd(s)}catch(N){ht(s,w,N)}}}catch(N){ht(s,s.return,N)}if(s===n){fe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,fe=P;break}fe=s.return}}var $w=Math.ceil,Mu=te.ReactCurrentDispatcher,md=te.ReactCurrentOwner,Rn=te.ReactCurrentBatchConfig,qe=0,kt=null,yt=null,Ot=0,yn=0,po=es(0),St=0,$a=null,Qs=0,Lu=0,gd=0,qa=null,an=null,yd=0,mo=1/0,Vr=null,Fu=!1,vd=null,os=null,Bu=!1,as=null,zu=0,Ka=0,_d=null,Uu=-1,$u=0;function Jt(){return(qe&6)!==0?et():Uu!==-1?Uu:Uu=et()}function ls(n){return(n.mode&1)===0?1:(qe&2)!==0&&Ot!==0?Ot&-Ot:bw.transition!==null?($u===0&&($u=Ms()),$u):(n=je,n!==0||(n=window.event,n=n===void 0?16:_a(n.type)),n)}function Yn(n,s,a,h){if(50<Ka)throw Ka=0,_d=null,Error(t(185));Wr(n,a,h),((qe&2)===0||n!==kt)&&(n===kt&&((qe&2)===0&&(Lu|=a),St===4&&us(n,Ot)),ln(n,h),a===1&&qe===0&&(s.mode&1)===0&&(mo=et()+500,yu&&ns()))}function ln(n,s){var a=n.callbackNode;Er(n,s);var h=Os(n,n===kt?Ot:0);if(h===0)a!==null&&pa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&pa(a),s===1)n.tag===0?Sw(lg.bind(null,n)):Hp(lg.bind(null,n)),xw(function(){(qe&6)===0&&ns()}),a=null;else{switch(Gr(h)){case 1:a=Vs;break;case 4:a=$r;break;case 16:a=In;break;case 536870912:a=$l;break;default:a=In}a=gg(a,ag.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function ag(n,s){if(Uu=-1,$u=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(go()&&n.callbackNode!==a)return null;var h=Os(n,n===kt?Ot:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=qu(n,h);else{s=h;var f=qe;qe|=2;var g=cg();(kt!==n||Ot!==s)&&(Vr=null,mo=et()+500,Ys(n,s));do try{Ww();break}catch(P){ug(n,P)}while(!0);Mh(),Mu.current=g,qe=f,yt!==null?s=0:(kt=null,Ot=0,s=St)}if(s!==0){if(s===2&&(f=dn(n),f!==0&&(h=f,s=wd(n,f))),s===1)throw a=$a,Ys(n,0),us(n,h),ln(n,et()),a;if(s===6)us(n,h);else{if(f=n.current.alternate,(h&30)===0&&!qw(f)&&(s=qu(n,h),s===2&&(g=dn(n),g!==0&&(h=g,s=wd(n,g))),s===1))throw a=$a,Ys(n,0),us(n,h),ln(n,et()),a;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Js(n,an,Vr);break;case 3:if(us(n,h),(h&130023424)===h&&(s=yd+500-et(),10<s)){if(Os(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Jt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=bh(Js.bind(null,n,an,Vr),s);break}Js(n,an,Vr);break;case 4:if(us(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var w=31-Qt(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*$w(h/1960))-h,10<h){n.timeoutHandle=bh(Js.bind(null,n,an,Vr),h);break}Js(n,an,Vr);break;case 5:Js(n,an,Vr);break;default:throw Error(t(329))}}}return ln(n,et()),n.callbackNode===a?ag.bind(null,n):null}function wd(n,s){var a=qa;return n.current.memoizedState.isDehydrated&&(Ys(n,s).flags|=256),n=qu(n,s),n!==2&&(s=an,an=a,s!==null&&xd(s)),n}function xd(n){an===null?an=n:an.push.apply(an,n)}function qw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Wn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s){for(s&=~gd,s&=~Lu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Qt(s),h=1<<a;n[a]=-1,s&=~h}}function lg(n){if((qe&6)!==0)throw Error(t(327));go();var s=Os(n,0);if((s&1)===0)return ln(n,et()),null;var a=qu(n,s);if(n.tag!==0&&a===2){var h=dn(n);h!==0&&(s=h,a=wd(n,h))}if(a===1)throw a=$a,Ys(n,0),us(n,s),ln(n,et()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Js(n,an,Vr),ln(n,et()),null}function Ed(n,s){var a=qe;qe|=1;try{return n(s)}finally{qe=a,qe===0&&(mo=et()+500,yu&&ns())}}function Xs(n){as!==null&&as.tag===0&&(qe&6)===0&&go();var s=qe;qe|=1;var a=Rn.transition,h=je;try{if(Rn.transition=null,je=1,n)return n()}finally{je=h,Rn.transition=a,qe=s,(qe&6)===0&&ns()}}function Td(){yn=po.current,rt(po)}function Ys(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ww(a)),yt!==null)for(a=yt.return;a!==null;){var h=a;switch(Nh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&mu();break;case 3:co(),rt(rn),rt(zt),Kh();break;case 5:$h(h);break;case 4:co();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Lh(h.type._context);break;case 22:case 23:Td()}a=a.return}if(kt=n,yt=n=cs(n.current,null),Ot=yn=s,St=0,$a=null,gd=Lu=Qs=0,an=qa=null,Ws!==null){for(s=0;s<Ws.length;s++)if(a=Ws[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Ws=null}return n}function ug(n,s){do{var a=yt;try{if(Mh(),Au.current=Ru,Cu){for(var h=ut.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Cu=!1}if(Gs=0,Pt=It=ut=null,Ma=!1,La=0,md.current=null,a===null||a.return===null){St=1,$a=s,yt=null;break}e:{var g=n,w=a.return,P=a,N=s;if(s=Ot,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,Y=P,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ce=Vm(w);if(ce!==null){ce.flags&=-257,jm(ce,w,P,g,s),ce.mode&1&&Dm(g,z,s),s=ce,N=z;var pe=s.updateQueue;if(pe===null){var ge=new Set;ge.add(N),s.updateQueue=ge}else pe.add(N);break e}else{if((s&1)===0){Dm(g,z,s),Id();break e}N=Error(t(426))}}else if(it&&P.mode&1){var mt=Vm(w);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),jm(mt,w,P,g,s),jh(ho(N,P));break e}}g=N=ho(N,P),St!==4&&(St=2),qa===null?qa=[g]:qa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=Rm(g,N,s);sm(g,F);break e;case 1:P=N;var V=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(os===null||!os.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var ne=Nm(g,P,s);sm(g,ne);break e}}g=g.return}while(g!==null)}dg(a)}catch(ye){s=ye,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function cg(){var n=Mu.current;return Mu.current=Ru,n===null?Ru:n}function Id(){(St===0||St===3||St===2)&&(St=4),kt===null||(Qs&268435455)===0&&(Lu&268435455)===0||us(kt,Ot)}function qu(n,s){var a=qe;qe|=2;var h=cg();(kt!==n||Ot!==s)&&(Vr=null,Ys(n,s));do try{Kw();break}catch(f){ug(n,f)}while(!0);if(Mh(),qe=a,Mu.current=h,yt!==null)throw Error(t(261));return kt=null,Ot=0,St}function Kw(){for(;yt!==null;)hg(yt)}function Ww(){for(;yt!==null&&!zl();)hg(yt)}function hg(n){var s=mg(n.alternate,n,yn);n.memoizedProps=n.pendingProps,s===null?dg(n):yt=s,md.current=null}function dg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Lw(a,s,yn),a!==null){yt=a;return}}else{if(a=Fw(a,s),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,yt=null;return}}if(s=s.sibling,s!==null){yt=s;return}yt=s=n}while(s!==null);St===0&&(St=5)}function Js(n,s,a){var h=je,f=Rn.transition;try{Rn.transition=null,je=1,Hw(n,s,a,h)}finally{Rn.transition=f,je=h}return null}function Hw(n,s,a,h){do go();while(as!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ze(n,g),n===kt&&(yt=kt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Bu||(Bu=!0,gg(In,function(){return go(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Rn.transition,Rn.transition=null;var w=je;je=1;var P=qe;qe|=4,md.current=null,zw(n,a),ng(a,n),fw(Ih),Xr=!!Th,Ih=Th=null,n.current=a,Uw(a),ah(),qe=P,je=w,Rn.transition=g}else n.current=a;if(Bu&&(Bu=!1,as=n,zu=f),g=n.pendingLanes,g===0&&(os=null),ql(a.stateNode),ln(n,et()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Fu)throw Fu=!1,n=vd,vd=null,n;return(zu&1)!==0&&n.tag!==0&&go(),g=n.pendingLanes,(g&1)!==0?n===_d?Ka++:(Ka=0,_d=n):Ka=0,ns(),null}function go(){if(as!==null){var n=Gr(zu),s=Rn.transition,a=je;try{if(Rn.transition=null,je=16>n?16:n,as===null)var h=!1;else{if(n=as,as=null,zu=0,(qe&6)!==0)throw Error(t(331));var f=qe;for(qe|=4,fe=n.current;fe!==null;){var g=fe,w=g.child;if((fe.flags&16)!==0){var P=g.deletions;if(P!==null){for(var N=0;N<P.length;N++){var z=P[N];for(fe=z;fe!==null;){var Y=fe;switch(Y.tag){case 0:case 11:case 15:Ua(8,Y,g)}var Z=Y.child;if(Z!==null)Z.return=Y,fe=Z;else for(;fe!==null;){Y=fe;var X=Y.sibling,ce=Y.return;if(Ym(Y),Y===z){fe=null;break}if(X!==null){X.return=ce,fe=X;break}fe=ce}}}var pe=g.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var mt=ge.sibling;ge.sibling=null,ge=mt}while(ge!==null)}}fe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,fe=w;else e:for(;fe!==null;){if(g=fe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ua(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,fe=F;break e}fe=g.return}}var V=n.current;for(fe=V;fe!==null;){w=fe;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,fe=B;else e:for(w=V;fe!==null;){if(P=fe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Ou(9,P)}}catch(ye){ht(P,P.return,ye)}if(P===w){fe=null;break e}var ne=P.sibling;if(ne!==null){ne.return=P.return,fe=ne;break e}fe=P.return}}if(qe=f,ns(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(js,n)}catch{}h=!0}return h}finally{je=a,Rn.transition=s}}return!1}function fg(n,s,a){s=ho(a,s),s=Rm(n,s,1),n=ss(n,s,1),s=Jt(),n!==null&&(Wr(n,1,s),ln(n,s))}function ht(n,s,a){if(n.tag===3)fg(n,n,a);else for(;s!==null;){if(s.tag===3){fg(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(os===null||!os.has(h))){n=ho(a,n),n=Nm(s,n,1),s=ss(s,n,1),n=Jt(),s!==null&&(Wr(s,1,n),ln(s,n));break}}s=s.return}}function Gw(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=Jt(),n.pingedLanes|=n.suspendedLanes&a,kt===n&&(Ot&a)===a&&(St===4||St===3&&(Ot&130023424)===Ot&&500>et()-yd?Ys(n,0):gd|=a),ln(n,s)}function pg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var a=Jt();n=Rr(n,s),n!==null&&(Wr(n,s,a),ln(n,a))}function Qw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),pg(n,a)}function Xw(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),pg(n,a)}var mg;mg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||rn.current)on=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return on=!1,Mw(n,s,a);on=(n.flags&131072)!==0}else on=!1,it&&(s.flags&1048576)!==0&&Gp(s,_u,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Vu(n,s),n=s.pendingProps;var f=ro(s,zt.current);uo(s,a),f=Gh(null,s,h,n,f,a);var g=Qh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,sn(h)?(g=!0,gu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,zh(s),f.updater=Nu,s.stateNode=f,f._reactInternals=s,td(s,h,n,a),s=id(null,s,h,!0,g,a)):(s.tag=0,it&&g&&Rh(s),Yt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Vu(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=Jw(h),n=Gn(h,n),f){case 0:s=sd(null,s,h,n,a);break e;case 1:s=zm(null,s,h,n,a);break e;case 11:s=Om(null,s,h,n,a);break e;case 14:s=Mm(null,s,h,Gn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),sd(n,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),zm(n,s,h,f,a);case 3:e:{if(Um(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,rm(n,s),Su(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ho(Error(t(423)),s),s=$m(n,s,h,a,f);break e}else if(h!==f){f=ho(Error(t(424)),s),s=$m(n,s,h,a,f);break e}else for(gn=Zr(s.stateNode.containerInfo.firstChild),mn=s,it=!0,Hn=null,a=tm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),h===f){s=Dr(n,s,a);break e}Yt(n,s,h,a)}s=s.child}return s;case 5:return om(s),n===null&&Vh(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,Sh(h,f)?w=null:g!==null&&Sh(h,g)&&(s.flags|=32),Bm(n,s),Yt(n,s,w,a),s.child;case 6:return n===null&&Vh(s),null;case 13:return qm(n,s,a);case 4:return Uh(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=ao(s,null,h,a):Yt(n,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),Om(n,s,h,f,a);case 7:return Yt(n,s,s.pendingProps,a),s.child;case 8:return Yt(n,s,s.pendingProps.children,a),s.child;case 12:return Yt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,tt(Eu,h._currentValue),h._currentValue=w,g!==null)if(Wn(g.value,w)){if(g.children===f.children&&!rn.current){s=Dr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){w=g.child;for(var N=P.firstContext;N!==null;){if(N.context===h){if(g.tag===1){N=Nr(-1,a&-a),N.tag=2;var z=g.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),z.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),Fh(g.return,a,s),P.lanes|=a;break}N=N.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),Fh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Yt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,uo(s,a),f=Pn(f),h=h(f),s.flags|=1,Yt(n,s,h,a),s.child;case 14:return h=s.type,f=Gn(h,s.pendingProps),f=Gn(h.type,f),Mm(n,s,h,f,a);case 15:return Lm(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),Vu(n,s),s.tag=1,sn(h)?(n=!0,gu(s)):n=!1,uo(s,a),Pm(s,h,f),td(s,h,f,a),id(null,s,h,!0,n,a);case 19:return Wm(n,s,a);case 22:return Fm(n,s,a)}throw Error(t(156,s.tag))};function gg(n,s){return Oi(n,s)}function Yw(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,s,a,h){return new Yw(n,s,a,h)}function Sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jw(n){if(typeof n=="function")return Sd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===be)return 14}return 2}function cs(n,s){var a=n.alternate;return a===null?(a=Nn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ku(n,s,a,h,f,g){var w=2;if(h=n,typeof n=="function")Sd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return Zs(a.children,f,g,s);case E:w=8,f|=8;break;case b:return n=Nn(12,a,s,f|2),n.elementType=b,n.lanes=g,n;case A:return n=Nn(13,a,s,f),n.elementType=A,n.lanes=g,n;case oe:return n=Nn(19,a,s,f),n.elementType=oe,n.lanes=g,n;case De:return Wu(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:w=10;break e;case R:w=9;break e;case D:w=11;break e;case be:w=14;break e;case We:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Nn(w,a,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function Zs(n,s,a,h){return n=Nn(7,n,h,s),n.lanes=a,n}function Wu(n,s,a,h){return n=Nn(22,n,h,s),n.elementType=De,n.lanes=a,n.stateNode={isHidden:!1},n}function bd(n,s,a){return n=Nn(6,n,null,s),n.lanes=a,n}function Ad(n,s,a){return s=Nn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Zw(n,s,a,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Cd(n,s,a,h,f,g,w,P,N){return n=new Zw(n,s,a,P,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(g),n}function ex(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function yg(n){if(!n)return ts;n=n._reactInternals;e:{if(Fn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(sn(a))return Kp(n,a,s)}return s}function vg(n,s,a,h,f,g,w,P,N){return n=Cd(a,h,!0,n,f,g,w,P,N),n.context=yg(null),a=n.current,h=Jt(),f=ls(a),g=Nr(h,f),g.callback=s??null,ss(a,g,f),n.current.lanes=f,Wr(n,f,h),ln(n,h),n}function Hu(n,s,a,h){var f=s.current,g=Jt(),w=ls(f);return a=yg(a),s.context===null?s.context=a:s.pendingContext=a,s=Nr(g,w),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ss(f,s,w),n!==null&&(Yn(n,f,w,g),Iu(n,f,w)),w}function Gu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _g(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pd(n,s){_g(n,s),(n=n.alternate)&&_g(n,s)}function tx(){return null}var wg=typeof reportError=="function"?reportError:function(n){console.error(n)};function kd(n){this._internalRoot=n}Qu.prototype.render=kd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Hu(n,s,null,null)},Qu.prototype.unmount=kd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Xs(function(){Hu(null,n,null,null)}),s[Ar]=null}};function Qu(n){this._internalRoot=n}Qu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ql();n={blockedOn:null,target:n,priority:s};for(var a=0;a<nr.length&&s!==0&&s<nr[a].priority;a++);nr.splice(a,0,n),a===0&&Jl(n)}};function Rd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function xg(){}function nx(n,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var z=Gu(w);g.call(z)}}var w=vg(s,h,n,0,null,!1,!1,"",xg);return n._reactRootContainer=w,n[Ar]=w.current,Pa(n.nodeType===8?n.parentNode:n),Xs(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var P=h;h=function(){var z=Gu(N);P.call(z)}}var N=Cd(n,0,!1,null,null,!1,!1,"",xg);return n._reactRootContainer=N,n[Ar]=N.current,Pa(n.nodeType===8?n.parentNode:n),Xs(function(){Hu(s,N,a,h)}),N}function Yu(n,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var P=f;f=function(){var N=Gu(w);P.call(N)}}Hu(s,w,n,f)}else w=nx(a,s,n,f,h);return Gu(w)}Hl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=qr(s.pendingLanes);a!==0&&(Hr(s,a|1),ln(s,et()),(qe&6)===0&&(mo=et()+500,ns()))}break;case 13:Xs(function(){var h=Rr(n,1);if(h!==null){var f=Jt();Yn(h,n,1,f)}}),Pd(n,1)}},Fi=function(n){if(n.tag===13){var s=Rr(n,134217728);if(s!==null){var a=Jt();Yn(s,n,134217728,a)}Pd(n,134217728)}},Gl=function(n){if(n.tag===13){var s=ls(n),a=Rr(n,s);if(a!==null){var h=Jt();Yn(a,n,s,h)}Pd(n,s)}},Ql=function(){return je},Xl=function(n,s){var a=je;try{return je=n,s()}finally{je=a}},ki=function(n,s,a){switch(s){case"input":if(yr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var f=pu(h);if(!f)throw Error(t(90));Le(h),yr(h,f)}}}break;case"textarea":Ci(n,a);break;case"select":s=a.value,s!=null&&_r(n,!!a.multiple,s,!1)}},ks=Ed,ca=Xs;var rx={usingClientEntryPoint:!1,Events:[Na,to,pu,er,ua,Ed]},Wa={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sx={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fa(n),n===null?null:n.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||tx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{js=Ju.inject(sx),hn=Ju}catch{}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rx,un.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(s))throw Error(t(200));return ex(n,s,null,a)},un.createRoot=function(n,s){if(!Rd(n))throw Error(t(299));var a=!1,h="",f=wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Cd(n,1,!1,null,null,a,!1,h,f),n[Ar]=s.current,Pa(n.nodeType===8?n.parentNode:n),new kd(s)},un.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=fa(s),n=n===null?null:n.stateNode,n},un.flushSync=function(n){return Xs(n)},un.hydrate=function(n,s,a){if(!Xu(s))throw Error(t(200));return Yu(null,n,s,!0,a)},un.hydrateRoot=function(n,s,a){if(!Rd(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=wg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=vg(s,null,n,1,a??null,f,!1,g,w),n[Ar]=s.current,Pa(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Qu(s)},un.render=function(n,s,a){if(!Xu(s))throw Error(t(200));return Yu(null,n,s,!1,a)},un.unmountComponentAtNode=function(n){if(!Xu(n))throw Error(t(40));return n._reactRootContainer?(Xs(function(){Yu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1},un.unstable_batchedUpdates=Ed,un.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!Xu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Yu(n,s,a,!1,h)},un.version="18.3.1-next-f1338f8080-20240426",un}var Pg;function mv(){if(Pg)return Vd.exports;Pg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vd.exports=dx(),Vd.exports}var kg;function fx(){if(kg)return Zu;kg=1;var i=mv();return Zu.createRoot=i.createRoot,Zu.hydrateRoot=i.hydrateRoot,Zu}var px=fx();const mx=pv(px),gx={primary:"bg-accent-blue hover:bg-blue-600 text-white shadow-glow-blue/30",secondary:"bg-bg-hover hover:bg-border text-white border border-border",danger:"bg-accent-red hover:bg-red-600 text-white",success:"bg-accent-green hover:bg-green-600 text-white",ghost:"bg-transparent hover:bg-bg-hover text-gray-400 hover:text-white"},yx={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},Ft=({variant:i="primary",size:e="md",isLoading:t=!1,disabled:r,className:o="",children:l,...c})=>y.jsxs("button",{className:`
        inline-flex items-center justify-center gap-2 rounded-lg font-semibold
        transition-all duration-200 ease-out
        disabled:opacity-50 disabled:cursor-not-allowed
        active:scale-95
        ${gx[i]}
        ${yx[e]}
        ${o}
      `,disabled:r||t,...c,children:[t&&y.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),l]}),vx=()=>{};var Rg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},_x=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},yv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,v=p?i[o+2]:0,x=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|v>>6,j=v&63;p||(j=64,c||(S=64)),r.push(t[x],t[T],t[S],t[j])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(gv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):_x(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const T=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||d==null||v==null||T==null)throw new wx;const S=l<<2|d>>4;if(r.push(S),v!==64){const j=d<<4&240|v>>2;if(r.push(j),T!==64){const U=v<<6&192|T;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class wx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xx=function(i){const e=gv(i);return yv.encodeByteArray(e,!0)},_c=function(i){return xx(i).replace(/\./g,"")},Ex=function(i){try{return yv.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=()=>vv().__FIREBASE_DEFAULTS__,Ix=()=>{if(typeof process>"u"||typeof Rg>"u")return;const i=Rg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Sx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ex(i[1]);return e&&JSON.parse(e)},Sf=()=>{try{return vx()||Tx()||Ix()||Sx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},bx=i=>{var e,t;return(t=(e=Sf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Ax=i=>{const e=bx(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},_v=()=>{var i;return(i=Sf())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Px(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[_c(JSON.stringify(t)),_c(JSON.stringify(c)),""].join(".")}const sl={};function Rx(){const i={prod:[],emulator:[]};for(const e of Object.keys(sl))sl[e]?i.emulator.push(e):i.prod.push(e);return i}function Nx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Ng=!1;function Dx(i,e){if(typeof window>"u"||typeof document>"u"||!bf(window.location.host)||sl[i]===e||sl[i]||Ng)return;sl[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=Rx().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,j){S.setAttribute("width","24"),S.setAttribute("id",j),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function v(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ng=!0,c()},S}function x(S,j){S.setAttribute("id",j),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Nx(r),j=t("text"),U=document.getElementById(j)||document.createElement("span"),K=t("learnmore"),$=document.getElementById(K)||document.createElement("a"),re=t("preprendIcon"),H=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),x($,K);const te=v();p(H,re),Q.append(H,U,$,te),document.body.appendChild(Q)}l?(U.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wv(){var i;const e=(i=Sf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xv(){return!wv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ev(){return!wv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Tv(){try{return typeof indexedDB=="object"}catch{return!1}}function Vx(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="FirebaseError";class Go extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jx,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iv.prototype.create)}}class Iv{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?Ox(l,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Go(o,d,r)}}function Ox(i,e){return i.replace(Mx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Mx=/\{\$([^}]+)}/g;function xc(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(Dg(l)&&Dg(c)){if(!xc(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Dg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(i){return i&&i._delegate?i._delegate:i}class pl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Cx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fx(i){return i===ti?void 0:i}function Bx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const Ux={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},$x=Ue.INFO,qx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Kx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=qx[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=$x,this._logHandler=Kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ux[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Wx=(i,e)=>e.some(t=>i instanceof t);let Vg,jg;function Hx(){return Vg||(Vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gx(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bv=new WeakMap,Hd=new WeakMap,Av=new WeakMap,Md=new WeakMap,Af=new WeakMap;function Qx(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(ys(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bv.set(t,i)}).catch(()=>{}),Af.set(e,i),e}function Xx(i){if(Hd.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Hd.set(i,e)}let Gd={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Hd.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Av.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Yx(i){Gd=i(Gd)}function Jx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Ld(this),e,...t);return Av.set(r,e.sort?e.sort():[e]),ys(r)}:Gx().includes(i)?function(...e){return i.apply(Ld(this),e),ys(bv.get(this))}:function(...e){return ys(i.apply(Ld(this),e))}}function Zx(i){return typeof i=="function"?Jx(i):(i instanceof IDBTransaction&&Xx(i),Wx(i,Hx())?new Proxy(i,Gd):i)}function ys(i){if(i instanceof IDBRequest)return Qx(i);if(Md.has(i))return Md.get(i);const e=Zx(i);return e!==i&&(Md.set(i,e),Af.set(e,i)),e}const Ld=i=>Af.get(i);function e1(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),d=ys(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ys(c.result),p.oldVersion,p.newVersion,ys(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const t1=["get","getKey","getAll","getAllKeys","count"],n1=["put","add","delete","clear"],Fd=new Map;function Og(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Fd.get(e))return Fd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=n1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||t1.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),o&&p.done]))[0]};return Fd.set(e,l),l}Yx(i=>({...i,get:(e,t,r)=>Og(e,t)||i.get(e,t,r),has:(e,t)=>!!Og(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function s1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qd="@firebase/app",Mg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Sv("@firebase/app"),i1="@firebase/app-compat",o1="@firebase/analytics-compat",a1="@firebase/analytics",l1="@firebase/app-check-compat",u1="@firebase/app-check",c1="@firebase/auth",h1="@firebase/auth-compat",d1="@firebase/database",f1="@firebase/data-connect",p1="@firebase/database-compat",m1="@firebase/functions",g1="@firebase/functions-compat",y1="@firebase/installations",v1="@firebase/installations-compat",_1="@firebase/messaging",w1="@firebase/messaging-compat",x1="@firebase/performance",E1="@firebase/performance-compat",T1="@firebase/remote-config",I1="@firebase/remote-config-compat",S1="@firebase/storage",b1="@firebase/storage-compat",A1="@firebase/firestore",C1="@firebase/ai",P1="@firebase/firestore-compat",k1="firebase",R1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",N1={[Qd]:"fire-core",[i1]:"fire-core-compat",[a1]:"fire-analytics",[o1]:"fire-analytics-compat",[u1]:"fire-app-check",[l1]:"fire-app-check-compat",[c1]:"fire-auth",[h1]:"fire-auth-compat",[d1]:"fire-rtdb",[f1]:"fire-data-connect",[p1]:"fire-rtdb-compat",[m1]:"fire-fn",[g1]:"fire-fn-compat",[y1]:"fire-iid",[v1]:"fire-iid-compat",[_1]:"fire-fcm",[w1]:"fire-fcm-compat",[x1]:"fire-perf",[E1]:"fire-perf-compat",[T1]:"fire-rc",[I1]:"fire-rc-compat",[S1]:"fire-gcs",[b1]:"fire-gcs-compat",[A1]:"fire-fst",[P1]:"fire-fst-compat",[C1]:"fire-vertex","fire-js":"fire-js",[k1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,D1=new Map,Yd=new Map;function Lg(i,e){try{i.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Tc(i){const e=i.name;if(Yd.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,i);for(const t of Ec.values())Lg(t,i);for(const t of D1.values())Lg(t,i);return!0}function V1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function j1(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Iv("app","Firebase",O1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=R1;function Cv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xd,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw vs.create("bad-app-name",{appName:String(o)});if(t||(t=_v()),!t)throw vs.create("no-options");const l=Ec.get(o);if(l){if(xc(t,l.options)&&xc(r,l.config))return l;throw vs.create("duplicate-app",{appName:o})}const c=new zx(o);for(const p of Yd.values())c.addComponent(p);const d=new M1(t,r,c);return Ec.set(o,d),d}function F1(i=Xd){const e=Ec.get(i);if(!e&&i===Xd&&_v())return Cv();if(!e)throw vs.create("no-app",{appName:i});return e}function ko(i,e,t){var r;let o=(r=N1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(d.join(" "));return}Tc(new pl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="firebase-heartbeat-database",z1=1,ml="firebase-heartbeat-store";let Bd=null;function Pv(){return Bd||(Bd=e1(B1,z1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ml)}catch(t){console.warn(t)}}}}).catch(i=>{throw vs.create("idb-open",{originalErrorMessage:i.message})})),Bd}async function U1(i){try{const t=(await Pv()).transaction(ml),r=await t.objectStore(ml).get(kv(i));return await t.done,r}catch(e){if(e instanceof Go)Lr.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function Fg(i,e){try{const r=(await Pv()).transaction(ml,"readwrite");await r.objectStore(ml).put(e,kv(i)),await r.done}catch(t){if(t instanceof Go)Lr.warn(t.message);else{const r=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(r.message)}}}function kv(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=1024,q1=30;class K1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new H1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>q1){const c=G1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bg(),{heartbeatsToSend:r,unsentEntries:o}=W1(this._heartbeatsCache.heartbeats),l=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Lr.warn(t),""}}}function Bg(){return new Date().toISOString().substring(0,10)}function W1(i,e=$1){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class H1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tv()?Vx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await U1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zg(i){return _c(JSON.stringify({version:2,heartbeats:i})).length}function G1(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(i){Tc(new pl("platform-logger",e=>new r1(e),"PRIVATE")),Tc(new pl("heartbeat",e=>new K1(e),"PRIVATE")),ko(Qd,Mg,i),ko(Qd,Mg,"esm2017"),ko("fire-js","")}Q1("");var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,Rv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,E){function b(){}b.prototype=E.prototype,k.D=E.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(C,R,D){for(var A=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)A[oe-2]=arguments[oe];return E.prototype[R].apply(C,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,E,b){b||(b=0);var C=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)C[R]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(R=0;16>R;++R)C[R]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=k.g[0],b=k.g[1],R=k.g[2];var D=k.g[3],A=E+(D^b&(R^D))+C[0]+3614090360&4294967295;E=b+(A<<7&4294967295|A>>>25),A=D+(R^E&(b^R))+C[1]+3905402710&4294967295,D=E+(A<<12&4294967295|A>>>20),A=R+(b^D&(E^b))+C[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(E^R&(D^E))+C[3]+3250441966&4294967295,b=R+(A<<22&4294967295|A>>>10),A=E+(D^b&(R^D))+C[4]+4118548399&4294967295,E=b+(A<<7&4294967295|A>>>25),A=D+(R^E&(b^R))+C[5]+1200080426&4294967295,D=E+(A<<12&4294967295|A>>>20),A=R+(b^D&(E^b))+C[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(E^R&(D^E))+C[7]+4249261313&4294967295,b=R+(A<<22&4294967295|A>>>10),A=E+(D^b&(R^D))+C[8]+1770035416&4294967295,E=b+(A<<7&4294967295|A>>>25),A=D+(R^E&(b^R))+C[9]+2336552879&4294967295,D=E+(A<<12&4294967295|A>>>20),A=R+(b^D&(E^b))+C[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(E^R&(D^E))+C[11]+2304563134&4294967295,b=R+(A<<22&4294967295|A>>>10),A=E+(D^b&(R^D))+C[12]+1804603682&4294967295,E=b+(A<<7&4294967295|A>>>25),A=D+(R^E&(b^R))+C[13]+4254626195&4294967295,D=E+(A<<12&4294967295|A>>>20),A=R+(b^D&(E^b))+C[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(E^R&(D^E))+C[15]+1236535329&4294967295,b=R+(A<<22&4294967295|A>>>10),A=E+(R^D&(b^R))+C[1]+4129170786&4294967295,E=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(E^b))+C[6]+3225465664&4294967295,D=E+(A<<9&4294967295|A>>>23),A=R+(E^b&(D^E))+C[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^E&(R^D))+C[0]+3921069994&4294967295,b=R+(A<<20&4294967295|A>>>12),A=E+(R^D&(b^R))+C[5]+3593408605&4294967295,E=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(E^b))+C[10]+38016083&4294967295,D=E+(A<<9&4294967295|A>>>23),A=R+(E^b&(D^E))+C[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^E&(R^D))+C[4]+3889429448&4294967295,b=R+(A<<20&4294967295|A>>>12),A=E+(R^D&(b^R))+C[9]+568446438&4294967295,E=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(E^b))+C[14]+3275163606&4294967295,D=E+(A<<9&4294967295|A>>>23),A=R+(E^b&(D^E))+C[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^E&(R^D))+C[8]+1163531501&4294967295,b=R+(A<<20&4294967295|A>>>12),A=E+(R^D&(b^R))+C[13]+2850285829&4294967295,E=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(E^b))+C[2]+4243563512&4294967295,D=E+(A<<9&4294967295|A>>>23),A=R+(E^b&(D^E))+C[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^E&(R^D))+C[12]+2368359562&4294967295,b=R+(A<<20&4294967295|A>>>12),A=E+(b^R^D)+C[5]+4294588738&4294967295,E=b+(A<<4&4294967295|A>>>28),A=D+(E^b^R)+C[8]+2272392833&4294967295,D=E+(A<<11&4294967295|A>>>21),A=R+(D^E^b)+C[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^E)+C[14]+4259657740&4294967295,b=R+(A<<23&4294967295|A>>>9),A=E+(b^R^D)+C[1]+2763975236&4294967295,E=b+(A<<4&4294967295|A>>>28),A=D+(E^b^R)+C[4]+1272893353&4294967295,D=E+(A<<11&4294967295|A>>>21),A=R+(D^E^b)+C[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^E)+C[10]+3200236656&4294967295,b=R+(A<<23&4294967295|A>>>9),A=E+(b^R^D)+C[13]+681279174&4294967295,E=b+(A<<4&4294967295|A>>>28),A=D+(E^b^R)+C[0]+3936430074&4294967295,D=E+(A<<11&4294967295|A>>>21),A=R+(D^E^b)+C[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^E)+C[6]+76029189&4294967295,b=R+(A<<23&4294967295|A>>>9),A=E+(b^R^D)+C[9]+3654602809&4294967295,E=b+(A<<4&4294967295|A>>>28),A=D+(E^b^R)+C[12]+3873151461&4294967295,D=E+(A<<11&4294967295|A>>>21),A=R+(D^E^b)+C[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^E)+C[2]+3299628645&4294967295,b=R+(A<<23&4294967295|A>>>9),A=E+(R^(b|~D))+C[0]+4096336452&4294967295,E=b+(A<<6&4294967295|A>>>26),A=D+(b^(E|~R))+C[7]+1126891415&4294967295,D=E+(A<<10&4294967295|A>>>22),A=R+(E^(D|~b))+C[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~E))+C[5]+4237533241&4294967295,b=R+(A<<21&4294967295|A>>>11),A=E+(R^(b|~D))+C[12]+1700485571&4294967295,E=b+(A<<6&4294967295|A>>>26),A=D+(b^(E|~R))+C[3]+2399980690&4294967295,D=E+(A<<10&4294967295|A>>>22),A=R+(E^(D|~b))+C[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~E))+C[1]+2240044497&4294967295,b=R+(A<<21&4294967295|A>>>11),A=E+(R^(b|~D))+C[8]+1873313359&4294967295,E=b+(A<<6&4294967295|A>>>26),A=D+(b^(E|~R))+C[15]+4264355552&4294967295,D=E+(A<<10&4294967295|A>>>22),A=R+(E^(D|~b))+C[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~E))+C[13]+1309151649&4294967295,b=R+(A<<21&4294967295|A>>>11),A=E+(R^(b|~D))+C[4]+4149444226&4294967295,E=b+(A<<6&4294967295|A>>>26),A=D+(b^(E|~R))+C[11]+3174756917&4294967295,D=E+(A<<10&4294967295|A>>>22),A=R+(E^(D|~b))+C[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~E))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+D&4294967295}r.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var b=E-this.blockSize,C=this.B,R=this.h,D=0;D<E;){if(R==0)for(;D<=b;)o(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<E;)if(C[R++]=k.charCodeAt(D++),R==this.blockSize){o(this,C),R=0;break}}else for(;D<E;)if(C[R++]=k[D++],R==this.blockSize){o(this,C),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var b=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=b&255,b/=256;for(this.u(k),k=Array(16),E=b=0;4>E;++E)for(var C=0;32>C;C+=8)k[b++]=this.g[E]>>>C&255;return k};function l(k,E){var b=d;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=E(k)}function c(k,E){this.h=E;for(var b=[],C=!0,R=k.length-1;0<=R;R--){var D=k[R]|0;C&&D==E||(b[R]=D,C=!1)}this.g=b}var d={};function p(k){return-128<=k&&128>k?l(k,function(E){return new c([E|0],0>E?-1:0)}):new c([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return $(v(-k));for(var E=[],b=1,C=0;k>=b;C++)E[C]=k/b|0,b*=4294967296;return new c(E,0)}function x(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return $(x(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=v(Math.pow(E,8)),C=T,R=0;R<k.length;R+=8){var D=Math.min(8,k.length-R),A=parseInt(k.substring(R,R+D),E);8>D?(D=v(Math.pow(E,D)),C=C.j(D).add(v(A))):(C=C.j(b),C=C.add(v(A)))}return C}var T=p(0),S=p(1),j=p(16777216);i=c.prototype,i.m=function(){if(K(this))return-$(this).m();for(var k=0,E=1,b=0;b<this.g.length;b++){var C=this.i(b);k+=(0<=C?C:4294967296+C)*E,E*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(K(this))return"-"+$(this).toString(k);for(var E=v(Math.pow(k,6)),b=this,C="";;){var R=te(b,E).g;b=re(b,R.j(E));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=R,U(b))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function K(k){return k.h==-1}i.l=function(k){return k=re(this,k),K(k)?-1:U(k)?0:1};function $(k){for(var E=k.g.length,b=[],C=0;C<E;C++)b[C]=~k.g[C];return new c(b,~k.h).add(S)}i.abs=function(){return K(this)?$(this):this},i.add=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],C=0,R=0;R<=E;R++){var D=C+(this.i(R)&65535)+(k.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);C=A>>>16,D&=65535,A&=65535,b[R]=A<<16|D}return new c(b,b[b.length-1]&-2147483648?-1:0)};function re(k,E){return k.add($(E))}i.j=function(k){if(U(this)||U(k))return T;if(K(this))return K(k)?$(this).j($(k)):$($(this).j(k));if(K(k))return $(this.j($(k)));if(0>this.l(j)&&0>k.l(j))return v(this.m()*k.m());for(var E=this.g.length+k.g.length,b=[],C=0;C<2*E;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<k.g.length;R++){var D=this.i(C)>>>16,A=this.i(C)&65535,oe=k.i(R)>>>16,be=k.i(R)&65535;b[2*C+2*R]+=A*be,H(b,2*C+2*R),b[2*C+2*R+1]+=D*be,H(b,2*C+2*R+1),b[2*C+2*R+1]+=A*oe,H(b,2*C+2*R+1),b[2*C+2*R+2]+=D*oe,H(b,2*C+2*R+2)}for(C=0;C<E;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=E;C<2*E;C++)b[C]=0;return new c(b,0)};function H(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function Q(k,E){this.g=k,this.h=E}function te(k,E){if(U(E))throw Error("division by zero");if(U(k))return new Q(T,T);if(K(k))return E=te($(k),E),new Q($(E.g),$(E.h));if(K(E))return E=te(k,$(E)),new Q($(E.g),E.h);if(30<k.g.length){if(K(k)||K(E))throw Error("slowDivide_ only works with positive integers.");for(var b=S,C=E;0>=C.l(k);)b=de(b),C=de(C);var R=ue(b,1),D=ue(C,1);for(C=ue(C,2),b=ue(b,2);!U(C);){var A=D.add(C);0>=A.l(k)&&(R=R.add(b),D=A),C=ue(C,1),b=ue(b,1)}return E=re(k,R.j(E)),new Q(R,E)}for(R=T;0<=k.l(E);){for(b=Math.max(1,Math.floor(k.m()/E.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=v(b),A=D.j(E);K(A)||0<A.l(k);)b-=C,D=v(b),A=D.j(E);U(D)&&(D=S),R=R.add(D),k=re(k,A)}return new Q(R,k)}i.A=function(k){return te(this,k).h},i.and=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],C=0;C<E;C++)b[C]=this.i(C)&k.i(C);return new c(b,this.h&k.h)},i.or=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],C=0;C<E;C++)b[C]=this.i(C)|k.i(C);return new c(b,this.h|k.h)},i.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],C=0;C<E;C++)b[C]=this.i(C)^k.i(C);return new c(b,this.h^k.h)};function de(k){for(var E=k.g.length+1,b=[],C=0;C<E;C++)b[C]=k.i(C)<<1|k.i(C-1)>>>31;return new c(b,k.h)}function ue(k,E){var b=E>>5;E%=32;for(var C=k.g.length-b,R=[],D=0;D<C;D++)R[D]=0<E?k.i(D+b)>>>E|k.i(D+b+1)<<32-E:k.i(D+b);return new c(R,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rv=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=x,_s=c}).apply(typeof Ug<"u"?Ug:typeof self<"u"?self:typeof window<"u"?window:{});var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nv,Za,Dv,ac,Jd,Vv,jv,Ov;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ec=="object"&&ec];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in _))break e;_=_[M]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,I=!1,M={next:function(){if(!I&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function x(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:T,S.apply(null,arguments)}function j(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function U(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,M,q){for(var ie=Array(arguments.length-2),He=2;He<arguments.length;He++)ie[He-2]=arguments[He];return m.prototype[M].apply(I,ie)}}function K(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function $(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const M=u.length||0,q=I.length||0;u.length=M+q;for(let ie=0;ie<q;ie++)u[M+ie]=I[ie]}else u.push(I)}}class re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){return/^[\s\xa0]*$/.test(u)}function Q(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var de=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ue(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function k(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function E(u){const m={};for(const _ in u)m[_]=u[_];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,m){let _,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(_ in I)u[_]=I[_];for(let q=0;q<b.length;q++)_=b[q],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function R(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function D(u){d.setTimeout(()=>{throw u},0)}function A(){var u=we;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class oe{constructor(){this.h=this.g=null}add(m,_){const I=be.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var be=new re(()=>new We,u=>u.reset());class We{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let De,se=!1,we=new oe,le=()=>{const u=d.Promise.resolve(void 0);De=()=>{u.then(O)}};var O=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){D(_)}var m=be;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u})();function ke(u,m){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(de){e:{try{te(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}U(ke,ve);var Ve={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Xe(u,m,_,I,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=M,this.key=++$e,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,m,_,I,M){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ie=Fe(u,m,I,M);return-1<ie?(m=u[ie],_||(m.fa=!1)):(m=new Xe(m,this.src,q,!!I,M),m.fa=_,u.push(m)),m};function Le(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],M=Array.prototype.indexOf.call(I,m,void 0),q;(q=0<=M)&&Array.prototype.splice.call(I,M,1),q&&(ft(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Fe(u,m,_,I){for(var M=0;M<u.length;++M){var q=u[M];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==I)return M}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),Bt={};function En(u,m,_,I,M){if(Array.isArray(m)){for(var q=0;q<m.length;q++)En(u,m[q],_,I,M);return null}return _=na(_),u&&u[Me]?u.K(m,_,v(I)?!!I.capture:!1,M):yr(u,m,_,!1,I,M)}function yr(u,m,_,I,M,q){if(!m)throw Error("Invalid event type");var ie=v(M)?!!M.capture:!!M,He=Ai(u);if(He||(u[Gt]=He=new Ee(u)),_=He.add(m,_,I,ie,q),_.proxy)return _;if(I=Si(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)Pe||(M=ie),M===void 0&&(M=!1),u.addEventListener(m.toString(),I,M);else if(u.attachEvent)u.attachEvent(_r(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Si(){function u(_){return m.call(u.src,u.listener,_)}const m=ta;return u}function bi(u,m,_,I,M){if(Array.isArray(m))for(var q=0;q<m.length;q++)bi(u,m[q],_,I,M);else I=v(I)?!!I.capture:!!I,_=na(_),u&&u[Me]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=Fe(q,_,I,M),-1<_&&(ft(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ai(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Fe(m,_,I,M)),(_=-1<u?m[u]:null)&&vr(_))}function vr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])Le(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(_r(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Ai(m))?(Le(_,u),_.h==0&&(_.src=null,m[Gt]=null)):ft(u)}}}function _r(u){return u in Bt?Bt[u]:Bt[u]="on"+u}function ta(u,m){if(u.da)u=!0;else{m=new ke(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&vr(u),u=_.call(I,m)}return u}function Ai(u){return u=u[Gt],u instanceof Ee?u:null}var Ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function na(u){return typeof u=="function"?u:(u[Ci]||(u[Ci]=function(m){return u.handleEvent(m)}),u[Ci])}function xt(){W.call(this),this.i=new Ee(this),this.M=this,this.F=null}U(xt,W),xt.prototype[Me]=!0,xt.prototype.removeEventListener=function(u,m,_,I){bi(this,u,m,_,I)};function Et(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new ve(m,u);else if(m instanceof ve)m.target=m.target||u;else{var M=m;m=new ve(I,u),C(m,M)}if(M=!0,_)for(var q=_.length-1;0<=q;q--){var ie=m.g=_[q];M=wr(ie,I,!0,m)&&M}if(ie=m.g=u,M=wr(ie,I,!0,m)&&M,M=wr(ie,I,!1,m)&&M,_)for(q=0;q<_.length;q++)ie=m.g=_[q],M=wr(ie,I,!1,m)&&M}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)ft(_[I]);delete u.g[m],u.h--}}this.F=null},xt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},xt.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function wr(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,q=0;q<m.length;++q){var ie=m[q];if(ie&&!ie.da&&ie.capture==_){var He=ie.listener,Tt=ie.ha||ie.src;ie.fa&&Le(u.i,ie),M=He.call(Tt,I)!==!1&&M}}return M&&!I.defaultPrevented}function ra(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Ur(u){u.g=ra(()=>{u.g=null,u.i&&(u.i=!1,Ur(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class As extends W{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(u){W.call(this),this.h=u,this.g={}}U(Cs,W);var sa=[];function ia(u){ue(u.g,function(m,_){this.g.hasOwnProperty(_)&&vr(m)},u),u.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),ia(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oa=d.JSON.stringify,aa=d.JSON.parse,la=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ps(){}Ps.prototype.h=null;function Pi(u){return u.h||(u.h=u.i())}function ki(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){ve.call(this,"d")}U(Zn,ve);function Ri(){ve.call(this,"c")}U(Ri,ve);var er={},ua=null;function ks(){return ua=ua||new xt}er.La="serverreachability";function ca(u){ve.call(this,er.La,u)}U(ca,ve);function xr(u){const m=ks();Et(m,new ca(m))}er.STAT_EVENT="statevent";function ha(u,m){ve.call(this,er.STAT_EVENT,u),this.stat=m}U(ha,ve);function pt(u){const m=ks();Et(m,new ha(m,u))}er.Ma="timingevent";function Ni(u,m){ve.call(this,er.Ma,u),this.size=m}U(Ni,ve);function Mn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function Ns(u,m,_,I,M,q){u.info(function(){if(u.g)if(q)for(var ie="",He=q.split("&"),Tt=0;Tt<He.length;Tt++){var Be=He[Tt].split("=");if(1<Be.length){var Ct=Be[0];Be=Be[1];var gt=Ct.split("_");ie=2<=gt.length&&gt[1]=="type"?ie+(Ct+"="+Be+"&"):ie+(Ct+"=redacted&")}}else ie=null;else ie=q;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+m+`
`+_+`
`+ie})}function Di(u,m,_,I,M,q,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+m+`
`+_+`
`+q+" "+ie})}function Ln(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+oh(u,_)+(I?" "+I:"")})}function da(u,m){u.info(function(){return"TIMEOUT: "+m})}Rs.prototype.info=function(){};function oh(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ie=1;ie<M.length;ie++)M[ie]=""}}}}return oa(_)}catch{return m}}var Vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function Ds(){}U(Ds,Ps),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},Fn=new Ds;function Bn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bl}function Bl(){this.i=null,this.g="",this.h=!1}var fa={},ji={};function Oi(u,m,_){u.L=1,u.v=Hr(dn(m)),u.m=_,u.P=!0,pa(u,null)}function pa(u,m){u.F=Date.now(),et(u),u.A=dn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Qr(_.i,"t",I),u.C=0,_=u.j.J,u.h=new Bl,u.g=su(u.j,_?m:null,!u.m),0<u.O&&(u.M=new As(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(sa[0]=M.toString()),M=sa);for(var q=0;q<M.length;q++){var ie=En(_,M[q],I||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),xr(),Ns(u.i,u.u,u.A,u.l,u.R,u.m)}Bn.prototype.ca=function(u){u=u.target;const m=this.M;m&&nn(u)==3?m.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const gt=nn(this.g);var m=this.g.Ba();const bn=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||gt!=4||m==7||(m==8||0>=bn?xr(3):xr(2)),Vs(this);var _=this.g.Z();this.X=_;t:if(zl(this)){var I=wa(this.g);u="";var M=I.length,q=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),$r(this);var ie="";break t}this.h.i=new d.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(q&&m==M-1)});I.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Di(this.i,this.u,this.A,this.l,this.R,gt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Tt=this.g;if((He=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(He)){var Be=He;break t}}Be=null}if(_=Be)Ln(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,_);else{this.o=!1,this.s=3,pt(12),In(this),$r(this);break e}}if(this.P){_=!0;let pn;for(;!this.J&&this.C<ie.length;)if(pn=ah(this,ie),pn==ji){gt==4&&(this.s=4,pt(14),_=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==fa){this.s=4,pt(15),Ln(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else Ln(this.i,this.l,pn,null),ma(this,pn);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||ie.length!=0||this.h.h||(this.s=1,pt(16),_=!1),this.o=this.o&&_,!_)Ln(this.i,this.l,ie,"[Invalid Chunked Response]"),In(this),$r(this);else if(0<ie.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Ea(Ct),Ct.M=!0,pt(11))}}else Ln(this.i,this.l,ie,null),ma(this,ie);gt==4&&In(this),this.o&&!this.J&&(gt==4?Hi(this.j,this):(this.o=!1,et(this)))}else Ui(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),In(this),$r(this)}}}catch{}finally{}};function zl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ah(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?ji:(_=Number(m.substring(_,I)),isNaN(_)?fa:(I+=1,I+_>m.length?ji:(m=m.slice(I,I+_),u.C=I+_,m)))}Bn.prototype.cancel=function(){this.J=!0,In(this)};function et(u){u.S=Date.now()+u.I,Ul(u,u.I)}function Ul(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mn(S(u.ba,u),m)}function Vs(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(da(this.i,this.A),this.L!=2&&(xr(),pt(17)),In(this),this.s=2,$r(this)):Ul(this,this.S-u)};function $r(u){u.j.G==0||u.J||Hi(u.j,u)}function In(u){Vs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ia(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ma(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Qt(_.h,u))){if(!u.K&&Qt(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Wi(_),Kn(_);else break e;Ki(_),pt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Mn(S(_.Za,_),6e3));if(1>=ql(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else br(_,11)}else if((u.K||_.g==u)&&Wi(_),!H(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Be=M[m];if(_.T=Be[0],Be=Be[1],_.G==2)if(Be[0]=="c"){_.K=Be[1],_.ia=Be[2];const Ct=Be[3];Ct!=null&&(_.la=Ct,_.j.info("VER="+_.la));const gt=Be[4];gt!=null&&(_.Aa=gt,_.j.info("SVER="+_.Aa));const bn=Be[5];bn!=null&&typeof bn=="number"&&0<bn&&(I=1.5*bn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const pn=u.g;if(pn){const zs=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var q=I.h;q.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ga(q,q.h),q.h=null))}if(I.D){const Qi=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qi&&(I.ya=Qi,Ze(I.I,I.D,Qi))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var ie=u;if(I.qa=ru(I,I.J?I.ia:null,I.W),ie.K){Kl(I.h,ie);var He=ie,Tt=I.L;Tt&&(He.I=Tt),He.B&&(Vs(He),et(He)),I.g=ie}else Bs(I);0<_.i.length&&sr(_)}else Be[0]!="stop"&&Be[0]!="close"||br(_,7);else _.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?br(_,7):Vt(_):Be[0]!="noop"&&_.l&&_.l.ta(Be),_.v=0)}}xr(4)}catch{}}var $l=class{constructor(u,m){this.g=u,this.map=m}};function js(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ql(u){return u.h?1:u.g?u.g.size:0}function Qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ga(u,m){u.g?u.g.add(m):u.h=m}function Kl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}js.prototype.cancel=function(){if(this.i=Wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return K(u.i)}function Mi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function Li(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function qr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Li(u),I=Mi(u),M=I.length,q=0;q<M;q++)m.call(void 0,I[q],_&&_[q],u)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),M=null;if(0<=I){var q=u[_].substring(0,I);M=u[_].substring(I+1)}else q=u[_];m(q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Er(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Er){this.h=u.h,Ms(this,u.j),this.o=u.o,this.g=u.g,Kr(this,u.s),this.l=u.l;var m=u.i,_=new tr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Wr(this,_),this.m=u.m}else u&&(m=String(u).match(Os))?(this.h=!1,Ms(this,m[1]||"",!0),this.o=je(m[2]||""),this.g=je(m[3]||"",!0),Kr(this,m[4]),this.l=je(m[5]||"",!0),Wr(this,m[6]||"",!0),this.m=je(m[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}Er.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Gr(m,Fi,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Gr(m,Fi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Gr(_,_.charAt(0)=="/"?Ql:Gl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Gr(_,ya)),u.join("")};function dn(u){return new Er(u)}function Ms(u,m,_){u.j=_?je(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Kr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Wr(u,m,_){m instanceof tr?(u.i=m,nr(u.i,u.h)):(_||(m=Gr(m,Xl)),u.i=new tr(m,u.h))}function Ze(u,m,_){u.i.set(m,_)}function Hr(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function je(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Hl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fi=/[#\/\?@]/g,Gl=/[#\?:]/g,Ql=/[#\?]/g,Xl=/[#\?@]/g,ya=/#/g;function tr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Dt(u){u.g||(u.g=new Map,u.h=0,u.i&&lh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=tr.prototype,i.add=function(u,m){Dt(this),this.i=null,u=Sn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function zn(u,m){Dt(u),m=Sn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Un(u,m){return Dt(u),m=Sn(u,m),u.g.has(m)}i.forEach=function(u,m){Dt(this),this.g.forEach(function(_,I){_.forEach(function(M){u.call(m,M,I,this)},this)},this)},i.na=function(){Dt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const M=u[I];for(let q=0;q<M.length;q++)_.push(m[I])}return _},i.V=function(u){Dt(this);let m=[];if(typeof u=="string")Un(this,u)&&(m=m.concat(this.g.get(Sn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},i.set=function(u,m){return Dt(this),this.i=null,u=Sn(this,u),Un(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Qr(u,m,_){zn(u,m),0<_.length&&(u.i=null,u.g.set(Sn(u,m),K(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const q=encodeURIComponent(String(I)),ie=this.V(I);for(I=0;I<ie.length;I++){var M=q;ie[I]!==""&&(M+="="+encodeURIComponent(String(ie[I]))),u.push(M)}}return this.i=u.join("&")};function Sn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function nr(u,m){m&&!u.j&&(Dt(u),u.i=null,u.g.forEach(function(_,I){var M=I.toLowerCase();I!=M&&(zn(this,I),Qr(this,M,_))},u)),u.j=m}function uh(u,m){const _=new Rs;if(d.Image){const I=new Image;I.onload=j(tn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=j(tn,_,"TestLoadImage: error",!1,m,I),I.onabort=j(tn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=j(tn,_,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Yl(u,m){const _=new Rs,I=new AbortController,M=setTimeout(()=>{I.abort(),tn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(M),q.ok?tn(_,"TestPingServer: ok",!0,m):tn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),tn(_,"TestPingServer: error",!1,m)})}function tn(u,m,_,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(_)}catch{}}function ch(){this.g=new la}function Jl(u,m,_){const I=_||"";try{qr(u,function(M,q){let ie=M;v(M)&&(ie=oa(M)),m.push(I+q+"="+encodeURIComponent(ie))})}catch(M){throw m.push(I+"type="+encodeURIComponent("_badmap")),M}}function Tr(u){this.l=u.Ub||null,this.j=u.eb||!1}U(Tr,Ps),Tr.prototype.g=function(){return new Ls(this.l,this.j)},Tr.prototype.i=(function(u){return function(){return u}})({});function Ls(u,m){xt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Ls,xt),i=Ls.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,qn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$n(this):qn(this),this.readyState==3&&Zl(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,$n(this))},i.Qa=function(u){this.g&&(this.response=u,$n(this))},i.ga=function(){this.g&&$n(this)};function $n(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ir(u){let m="";return ue(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function Xr(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Ir(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ze(u,m,_))}function st(u){xt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(st,xt);var hh=/^https?$/i,va=["POST","PUT"];i=st.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Pi(this.o):Pi(Fn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Fs(this,q);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)_.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),M=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(va,m,void 0))||I||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of _)this.g.setRequestHeader(q,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zi(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Fs(this,q)}};function Fs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Bi(u),fn(u)}function Bi(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),fn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),st.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},i.bb=function(){_a(this)};function _a(u){if(u.h&&typeof c<"u"&&(!u.v[1]||nn(u)!=4||u.Z()!=2)){if(u.u&&nn(u)==4)ra(u.Ea,0,u);else if(Et(u,"readystatechange"),nn(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=ie===0){var M=String(u.D).match(Os)[1]||null;!M&&d.self&&d.self.location&&(M=d.self.location.protocol.slice(0,-1)),I=!hh.test(M?M.toLowerCase():"")}_=I}if(_)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var q=2<nn(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Bi(u)}}finally{fn(u)}}}}function fn(u,m){if(u.g){zi(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Et(u,"ready");try{_.onreadystatechange=I}catch{}}}function zi(u){u.I&&(d.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function nn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),aa(m)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ui(u){const m={};u=(u.g&&2<=nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(H(u[I]))continue;var _=R(u[I]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[M]||[];m[M]=q,q.push(_)}k(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function xa(u){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rr("baseRetryDelayMs",5e3,u),this.cb=rr("retryDelaySeedMs",1e4,u),this.Wa=rr("forwardChannelMaxRetries",2,u),this.wa=rr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new js(u&&u.concurrentRequestLimit),this.Da=new ch,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=xa.prototype,i.la=8,i.G=1,i.connect=function(u,m,_,I){pt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=ru(this,null,this.W),sr(this)};function Vt(u){if($i(u),u.G==3){var m=u.U++,_=dn(u.I);if(Ze(_,"SID",u.K),Ze(_,"RID",m),Ze(_,"TYPE","terminate"),Sr(u,_),m=new Bn(u,u.j,m),m.L=2,m.v=Hr(dn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=su(m.j,null),m.g.ea(m.v)),m.F=Date.now(),et(m)}nu(u)}function Kn(u){u.g&&(Ea(u),u.g.cancel(),u.g=null)}function $i(u){Kn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Wi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function sr(u){if(!hn(u.h)&&!u.s){u.s=!0;var m=u.Ga;De||le(),se||(De(),se=!0),we.add(m,u),u.B=0}}function dh(u,m){return ql(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mn(S(u.Ga,u,m),tu(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Bn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=E(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(M.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Yr(this,M,m),_=dn(this.I),Ze(_,"RID",u),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),Sr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(Ir(q)))+"&"+m:this.m&&Xr(_,this.m,q)),ga(this.h,M),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",m),Ze(_,"SID","null"),M.T=!0,Oi(M,_,null)):Oi(M,_,m),this.G=2}}else this.G==3&&(u?qi(this,u):this.i.length==0||hn(this.h)||qi(this))};function qi(u,m){var _;m?_=m.l:_=u.U++;const I=dn(u.I);Ze(I,"SID",u.K),Ze(I,"RID",_),Ze(I,"AID",u.T),Sr(u,I),u.m&&u.o&&Xr(I,u.m,u.o),_=new Bn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Yr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ga(u.h,_),Oi(_,I,m)}function Sr(u,m){u.H&&ue(u.H,function(_,I){Ze(m,I,_)}),u.l&&qr({},function(_,I){Ze(m,I,_)})}function Yr(u,m,_){_=Math.min(u.i.length,_);var I=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let q=-1;for(;;){const ie=["count="+_];q==-1?0<_?(q=M[0].g,ie.push("ofs="+q)):q=0:ie.push("ofs="+q);let He=!0;for(let Tt=0;Tt<_;Tt++){let Be=M[Tt].g;const Ct=M[Tt].map;if(Be-=q,0>Be)q=Math.max(0,M[Tt].g-100),He=!1;else try{Jl(Ct,ie,"req"+Be+"_")}catch{I&&I(Ct)}}if(He){I=ie.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function Bs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;De||le(),se||(De(),se=!0),we.add(m,u),u.v=0}}function Ki(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mn(S(u.Fa,u),tu(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mn(S(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Kn(this),eu(this))};function Ea(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=dn(u.qa);Ze(m,"RID","rpc"),Ze(m,"SID",u.K),Ze(m,"AID",u.T),Ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(m,"TO",u.ja),Ze(m,"TYPE","xmlhttp"),Sr(u,m),u.m&&u.o&&Xr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Hr(dn(m)),_.m=null,_.P=!0,pa(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Kn(this),Ki(this),pt(19))};function Wi(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Hi(u,m){var _=null;if(u.g==m){Wi(u),Ea(u),u.g=null;var I=2}else if(Qt(u.h,m))_=m.D,Kl(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;I=ks(),Et(I,new Ni(I,_)),sr(u)}else Bs(u);else if(M=m.s,M==3||M==0&&0<m.X||!(I==1&&dh(u,m)||I==2&&Ki(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:br(u,5);break;case 4:br(u,10);break;case 3:br(u,6);break;default:br(u,2)}}}function tu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function br(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),I=u.Xa;const M=!I;I=new Er(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ms(I,"https"),Hr(I),M?uh(I.toString(),_):Yl(I.toString(),_)}else pt(2);u.G=0,u.l&&u.l.sa(m),nu(u),$i(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const m=Wl(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.ra()}}function ru(u,m,_){var I=_ instanceof Er?dn(_):new Er(_);if(I.g!="")m&&(I.g=m+"."+I.g),Kr(I,I.s);else{var M=d.location;I=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var q=new Er(null);I&&Ms(q,I),m&&(q.g=m),M&&Kr(q,M),_&&(q.l=_),I=q}return _=u.D,m=u.ya,_&&m&&Ze(I,_,m),Ze(I,"VER",u.la),Sr(u,I),I}function su(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new st(new Tr({eb:_})):new st(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ta(){}i=Ta.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Gi(){}Gi.prototype.g=function(u,m){return new Xt(u,m)};function Xt(u,m){xt.call(this),this.g=new xa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!H(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ir(this)}U(Xt,xt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Vt(this.g)},Xt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=oa(u),u=_);m.i.push(new $l(m.Ya++,u)),m.G==3&&sr(m)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Xt.aa.N.call(this)};function iu(u){Zn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}U(iu,Zn);function ou(){Ri.call(this),this.status=1}U(ou,Ri);function ir(u){this.g=u}U(ir,Ta),ir.prototype.ua=function(){Et(this.g,"a")},ir.prototype.ta=function(u){Et(this.g,new iu(u))},ir.prototype.sa=function(u){Et(this.g,new ou)},ir.prototype.ra=function(){Et(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Ov=function(){return new Gi},jv=function(){return ks()},Vv=er,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,ac=Vi,Fl.COMPLETE="complete",Dv=Fl,ki.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Za=ki,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,Nv=st}).apply(typeof ec<"u"?ec:typeof self<"u"?self:typeof window<"u"?window:{});const $g="@firebase/firestore",qg="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Sv("@firebase/firestore");function To(){return fi.logLevel}function ee(i,...e){if(fi.logLevel<=Ue.DEBUG){const t=e.map(Cf);fi.debug(`Firestore (${Qo}): ${i}`,...t)}}function Zt(i,...e){if(fi.logLevel<=Ue.ERROR){const t=e.map(Cf);fi.error(`Firestore (${Qo}): ${i}`,...t)}}function mr(i,...e){if(fi.logLevel<=Ue.WARN){const t=e.map(Cf);fi.warn(`Firestore (${Qo}): ${i}`,...t)}}function Cf(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Mv(i,r,t)}function Mv(i,e,t){let r=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zt(r),new Error(r)}function _e(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||Mv(e,o,r)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Go{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mt.UNAUTHENTICATED)))}shutdown(){}}class Y1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class J1{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new Lv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class Z1{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eE{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Z1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Kg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,j1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const r=l=>{l.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Kg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Kg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=nE(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Se(i,e){return i<e?-1:i>e?1:0}function Zd(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Se(r,o);{const l=Fv(),c=rE(l.encode(Wg(i,t)),l.encode(Wg(e,t)));return c!==0?c:Se(r,o)}}t+=r>65535?2:1}return Se(i.length,e.length)}function Wg(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function rE(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Se(i[t],e[t]);return Se(i.length,e.length)}function Vo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}function Bv(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="__name__";class cr{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=cr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Se(e.length,t.length)}static compareSegments(e,t){const r=cr.isNumericId(e),o=cr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?cr.extractNumericId(e).compare(cr.extractNumericId(t)):Zd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class Ye extends cr{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const sE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends cr{construct(e,t,r){return new ct(e,t,r)}static isValidIdentifier(e){return sE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hg}static keyField(){return new ct([Hg])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new he(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(l(),o++)}if(l(),c)throw new he(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(t)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ye.fromString(e))}static fromName(e){return new ae(Ye.fromString(e).popFirst(5))}static empty(){return new ae(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(i,e,t){if(!t)throw new he(G.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function oE(i,e,t,r){if(e===!0&&r===!0)throw new he(G.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Gg(i){if(!ae.isDocumentKey(i))throw new he(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function zv(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":me(12329,{type:typeof i})}function Mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kf(i);throw new he(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(i,e){const t={typeString:i};return e&&(t.value=e),t}function Pl(i,e){if(!zv(i))throw new he(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=-62135596800,Xg=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Xg);return new Ge(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qg)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xg}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pl(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:_t("string",Ge._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ge(0,0))}static max(){return new xe(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;class Ic{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function ef(i){return i.fields.find((e=>e.kind===2))}function ni(i){return i.fields.filter((e=>e.kind!==2))}Ic.UNKNOWN_ID=-1;class lc{constructor(e,t){this.fieldPath=e,this.kind=t}}class yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yl(0,xn.min())}}function aE(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(r===1e9?new Ge(t+1,0):new Ge(t,r));return new xn(o,ae.empty(),e)}function Uv(i){return new xn(i.readTime,i.key,gl)}class xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xn(xe.min(),ae.empty(),gl)}static max(){return new xn(xe.max(),ae.empty(),gl)}}function Rf(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(i.documentKey,e.documentKey),t!==0?t:Se(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(i){if(i.code!==G.FAILED_PRECONDITION||i.message!==$v)throw i;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,r)=>{t(e)}))}static reject(e){return new L(((t,r)=>{r(e)}))}static waitFor(e){return new L(((t,r)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>r(p)))})),c=!0,l===o&&t()}))}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next((o=>o?L.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new L(((r,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((x=>{c[v]=x,++d,d===l&&r(c)}),(x=>o(x)))}}))}static doWhile(e,t){return new L(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="SimpleDb";class Uc{static open(e,t,r,o){try{return new Uc(t,e.transaction(o,r))}catch(l){throw new il(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Or,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new il(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Nf(r.target.error);this.S.reject(new il(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uE(t)}}class ws{static delete(e){return ee(vn,"Removing database:",e),si(vv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Tv())return!1;if(ws.F())return!0;const e=wc(),t=ws.M(e),r=0<t&&t<10,o=Kv(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,ws.M(wc())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ee(vn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const c=l.target.result;t(c)},o.onblocked=()=>{r(new il(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new he(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new he(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new il(e,c))},o.onupgradeneeded=l=>{ee(vn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,l.oldVersion,this.version).next((()=>{ee(vn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(mr('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,o){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=Uc.open(this.db,e,l?"readonly":"readwrite",r),p=o(d).next((v=>(d.v(),v))).catch((v=>(d.abort(v),L.reject(v)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(ee(vn,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Kv(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class lE{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return si(this.$.delete())}}class il extends he{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ss(i){return i.name==="IndexedDbTransactionError"}class uE{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ee(vn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee(vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),si(r)}add(e){return ee(vn,"ADD",this.store.name,e,e),si(this.store.add(e))}get(e){return si(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(vn,"GET",this.store.name,e,t),t)))}delete(e){return ee(vn,"DELETE",this.store.name,e),si(this.store.delete(e))}count(){return ee(vn,"COUNT",this.store.name),si(this.store.count())}j(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(r.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(r),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L(((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Y(e,t){ee(vn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.J(o,((l,c,d)=>d.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.J(o,t)}ee(e){const t=this.cursor({});return new L(((r,o)=>{t.onerror=l=>{const c=Nf(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}J(e,t){const r=[];return new L(((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new lE(d),v=t(d.primaryKey,d.value,p);if(v instanceof L){const x=v.catch((T=>(p.done(),L.reject(T))));r.push(x)}p.isDone?o():p.W===null?d.continue():d.continue(p.W)}})).next((()=>L.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function si(i){return new L(((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=Nf(r.target.error);t(o)}}))}let Yg=!1;function Nf(i){const e=ws.M(wc());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yg||(Yg=!0,setTimeout((()=>{throw r}),0)),r}}return i}const ol="IndexBackfiller";class cE{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ee(ol,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();ee(ol,`Documents written: ${t}`)}catch(t){Ss(t)?ee(ol,"Ignoring IndexedDB error during index backfill: ",t):await wi(t)}await this.ne(6e4)}))}}class hE{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const r=new Set;let o=t,l=!0;return L.doWhile((()=>l===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ee(ol,`Processing collection: ${c}`),this.se(e,c,o).next((d=>{o-=d,r.add(c)}));l=!1})))).next((()=>t-o))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this.oe(o,l))).next((d=>(ee(ol,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((o,l)=>{const c=Uv(l);Rf(c,r)>0&&(r=c)})),new xn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Vn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=-1;function $c(i){return i==null}function vl(i){return i===0&&1/i==-1/0}function dE(i){return typeof i=="number"&&Number.isInteger(i)&&!vl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="";function Ht(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Jg(e)),e=fE(i.get(t),e);return Jg(e)}function fE(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case Sc:t+="";break;default:t+=l}}return t}function Jg(i){return i+Sc+""}function hr(i){const e=i.length;if(_e(e>=2,64408,{path:i}),e===2)return _e(i.charAt(0)===Sc&&i.charAt(1)==="",56145,{path:i}),Ye.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=i.indexOf(Sc,l);switch((c<0||c>t)&&me(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(l,c),o+="\0";break;case"":o+=i.substring(l,c+1);break;default:me(61167,{path:i})}l=c+2}return new Ye(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="remoteDocuments",kl="owner",yo="owner",_l="mutationQueues",pE="userId",Jn="mutations",Zg="batchId",li="userMutationsIndex",ey=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(i,e){return[i,Ht(e)]}function Wv(i,e,t){return[i,Ht(e),t]}const mE={},jo="documentMutations",bc="remoteDocumentsV14",gE=["prefixPath","collectionGroup","readTime","documentId"],cc="documentKeyIndex",yE=["prefixPath","collectionGroup","documentId"],Hv="collectionGroupIndex",vE=["collectionGroup","readTime","prefixPath","documentId"],wl="remoteDocumentGlobal",tf="remoteDocumentGlobalKey",Oo="targets",Gv="queryTargetsIndex",_E=["canonicalId","targetId"],Mo="targetDocuments",wE=["targetId","path"],Df="documentTargetsIndex",xE=["path","targetId"],Ac="targetGlobalKey",ci="targetGlobal",xl="collectionParents",EE=["collectionId","parent"],Lo="clientMetadata",TE="clientId",qc="bundles",IE="bundleId",Kc="namedQueries",SE="name",Vf="indexConfiguration",bE="indexId",nf="collectionGroupIndex",AE="collectionGroup",al="indexState",CE=["indexId","uid"],Qv="sequenceNumberIndex",PE=["uid","sequenceNumber"],ll="indexEntries",kE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xv="documentKeyIndex",RE=["indexId","uid","orderedDocumentKey"],Wc="documentOverlays",NE=["userId","collectionPath","documentId"],rf="collectionPathOverlayIndex",DE=["userId","collectionPath","largestBatchId"],Yv="collectionGroupOverlayIndex",VE=["userId","collectionGroup","largestBatchId"],jf="globals",jE="name",Jv=[_l,Jn,jo,ri,Oo,kl,ci,Mo,Lo,wl,xl,qc,Kc],OE=[...Jv,Wc],Zv=[_l,Jn,jo,bc,Oo,kl,ci,Mo,Lo,wl,xl,qc,Kc,Wc],e0=Zv,Of=[...e0,Vf,al,ll],ME=Of,t0=[...Of,jf],LE=t0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends qv{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function At(i,e){const t=Ce(i);return ws.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function xi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function n0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tc(this.root,e,this.comparator,!0)}}class tc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Lt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ny(this.data.getIterator())}getIteratorFrom(e){return new ny(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qe(this.comparator);return t.data=e,t}}class ny{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new jn([])}unionWith(e){let t=new Qe(ct.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new r0("Invalid base64 string: "+l):l}})(e);return new wt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const FE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(i){if(_e(!!i,39018),typeof i=="string"){let e=0;const t=FE.exec(i);if(_e(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(i.seconds),nanos:ot(i.nanos)}}function ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Br(i){return typeof i=="string"?wt.fromBase64String(i):wt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="server_timestamp",i0="__type__",o0="__previous_value__",a0="__local_write_time__";function Mf(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[i0])===null||t===void 0?void 0:t.stringValue)===s0}function Hc(i){const e=i.mapValue.fields[o0];return Mf(e)?Hc(e):e}function El(i){const e=Fr(i.mapValue.fields[a0].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t,r,o,l,c,d,p,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=x}}const Cc="(default)";class pi{constructor(e,t){this.projectId=e,this.database=t||Cc}static empty(){return new pi("","")}get isDefaultDatabase(){return this.database===Cc}isEqual(e){return e instanceof pi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="__type__",l0="__max__",gs={mapValue:{fields:{__type__:{stringValue:l0}}}},Ff="__vector__",Fo="value",hc={nullValue:"NULL_VALUE"};function xs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Mf(i)?4:u0(i)?9007199254740991:Gc(i)?10:11:me(28295,{value:i})}function gr(i,e){if(i===e)return!0;const t=xs(i);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return El(i).isEqual(El(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Fr(o.timestampValue),d=Fr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return Br(o.bytesValue).isEqual(Br(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return ot(o.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(o.geoPointValue.longitude)===ot(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ot(o.integerValue)===ot(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ot(o.doubleValue),d=ot(l.doubleValue);return c===d?vl(c)===vl(d):isNaN(c)&&isNaN(d)}return!1})(i,e);case 9:return Vo(i.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(ty(c)!==ty(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!gr(c[p],d[p])))return!1;return!0})(i,e);default:return me(52216,{left:i})}}function Tl(i,e){return(i.values||[]).find((t=>gr(t,e)))!==void 0}function Es(i,e){if(i===e)return 0;const t=xs(i),r=xs(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ot(l.integerValue||l.doubleValue),p=ot(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(i,e);case 3:return ry(i.timestampValue,e.timestampValue);case 4:return ry(El(i),El(e));case 5:return Zd(i.stringValue,e.stringValue);case 6:return(function(l,c){const d=Br(l),p=Br(c);return d.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const x=Se(d[v],p[v]);if(x!==0)return x}return Se(d.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Se(ot(l.latitude),ot(c.latitude));return d!==0?d:Se(ot(l.longitude),ot(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return sy(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,v,x;const T=l.fields||{},S=c.fields||{},j=(d=T[Fo])===null||d===void 0?void 0:d.arrayValue,U=(p=S[Fo])===null||p===void 0?void 0:p.arrayValue,K=Se(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((x=U==null?void 0:U.values)===null||x===void 0?void 0:x.length)||0);return K!==0?K:sy(j,U)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===gs.mapValue&&c===gs.mapValue)return 0;if(l===gs.mapValue)return 1;if(c===gs.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),v=c.fields||{},x=Object.keys(v);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const S=Zd(p[T],x[T]);if(S!==0)return S;const j=Es(d[p[T]],v[x[T]]);if(j!==0)return j}return Se(p.length,x.length)})(i.mapValue,e.mapValue);default:throw me(23264,{le:t})}}function ry(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Se(i,e);const t=Fr(i),r=Fr(e),o=Se(t.seconds,r.seconds);return o!==0?o:Se(t.nanos,r.nanos)}function sy(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Es(t[o],r[o]);if(l)return l}return Se(t.length,r.length)}function Bo(i){return of(i)}function of(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Fr(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Br(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ae.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=of(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${of(t.fields[c])}`;return o+"}"})(i.mapValue):me(61005,{value:i})}function dc(i){switch(xs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hc(i);return e?16+dc(e):16;case 5:return 2*i.stringValue.length;case 6:return Br(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+dc(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return xi(r.fields,((l,c)=>{o+=l.length+dc(c)})),o})(i.mapValue);default:throw me(13486,{value:i})}}function Bf(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function af(i){return!!i&&"integerValue"in i}function Il(i){return!!i&&"arrayValue"in i}function iy(i){return!!i&&"nullValue"in i}function oy(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fc(i){return!!i&&"mapValue"in i}function Gc(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lf])===null||t===void 0?void 0:t.stringValue)===Ff}function ul(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return xi(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ul(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(i.arrayValue.values[t]);return e}return Object.assign({},i)}function u0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===l0}const c0={mapValue:{fields:{[Lf]:{stringValue:Ff},[Fo]:{arrayValue:{}}}}};function zE(i){return"nullValue"in i?hc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Bf(pi.empty(),ae.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Gc(i)?c0:{mapValue:{}}:me(35942,{value:i})}function UE(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Bf(pi.empty(),ae.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?c0:"mapValue"in i?Gc(i)?{mapValue:{}}:gs:me(61959,{value:i})}function ay(i,e){const t=Es(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ly(i,e){const t=Es(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=ct.emptyPath(),r={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=ul(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());fc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];fc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xi(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new cn(ul(this.value))}}function h0(i){const e=[];return xi(i.fields,((t,r)=>{const o=new ct([t]);if(fc(r)){const l=h0(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t,r,o,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dt(e,0,xe.min(),xe.min(),xe.min(),cn.empty(),0)}static newFoundDocument(e,t,r,o){return new dt(e,1,t,xe.min(),r,o,0)}static newNoDocument(e,t){return new dt(e,2,t,xe.min(),xe.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new dt(e,3,t,xe.min(),xe.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t){this.position=e,this.inclusive=t}}function uy(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=ae.comparator(ae.fromName(c.referenceValue),t.key):r=Es(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function cy(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!gr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function $E(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{}class Oe extends d0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qE(e,t,r):t==="array-contains"?new HE(e,r):t==="in"?new v0(e,r):t==="not-in"?new GE(e,r):t==="array-contains-any"?new QE(e,r):new Oe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KE(e,r):new WE(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Es(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends d0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Je(e,t)}matches(e){return Uo(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Uo(i){return i.op==="and"}function lf(i){return i.op==="or"}function zf(i){return f0(i)&&Uo(i)}function f0(i){for(const e of i.filters)if(e instanceof Je)return!1;return!0}function uf(i){if(i instanceof Oe)return i.field.canonicalString()+i.op.toString()+Bo(i.value);if(zf(i))return i.filters.map((e=>uf(e))).join(",");{const e=i.filters.map((t=>uf(t))).join(",");return`${i.op}(${e})`}}function p0(i,e){return i instanceof Oe?(function(r,o){return o instanceof Oe&&r.op===o.op&&r.field.isEqual(o.field)&&gr(r.value,o.value)})(i,e):i instanceof Je?(function(r,o){return o instanceof Je&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,d)=>l&&p0(c,o.filters[d])),!0):!1})(i,e):void me(19439)}function m0(i,e){const t=i.filters.concat(e);return Je.create(t,i.op)}function g0(i){return i instanceof Oe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bo(t.value)}`})(i):i instanceof Je?(function(t){return t.op.toString()+" {"+t.getFilters().map(g0).join(" ,")+"}"})(i):"Filter"}class qE extends Oe{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class KE extends Oe{constructor(e,t){super(e,"in",t),this.keys=y0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class WE extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=y0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function y0(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ae.fromName(r.referenceValue)))}class HE extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Il(t)&&Tl(t.arrayValue,this.value)}}class v0 extends Oe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tl(this.value.arrayValue,t)}}class GE extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tl(this.value.arrayValue,t)}}class QE extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Il(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Tl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t=null,r=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function cf(i,e=null,t=[],r=[],o=null,l=null,c=null){return new XE(i,e,t,r,o,l,c)}function mi(i){const e=Ce(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>uf(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),$c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Bo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Bo(r))).join(",")),e.Pe=t}return e.Pe}function Rl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!$E(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!p0(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!cy(i.startAt,e.startAt)&&cy(i.endAt,e.endAt)}function kc(i){return ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Rc(i,e){return i.filters.filter((t=>t instanceof Oe&&t.field.isEqual(e)))}function hy(i,e,t){let r=hc,o=!0;for(const l of Rc(i,e)){let c=hc,d=!0;switch(l.op){case"<":case"<=":c=zE(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=hc}ay({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];ay({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function dy(i,e,t){let r=gs,o=!0;for(const l of Rc(i,e)){let c=gs,d=!0;switch(l.op){case">=":case">":c=UE(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=gs}ly({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];ly({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t=null,r=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function YE(i,e,t,r,o,l,c,d){return new Qc(i,e,t,r,o,l,c,d)}function Nl(i){return new Qc(i)}function fy(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function JE(i){return i.collectionGroup!==null}function cl(i){const e=Ce(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qe(ct.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(d=d.add(v.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Pc(l,r))})),t.has(ct.keyField().canonicalString())||e.Te.push(new Pc(ct.keyField(),r))}return e.Te}function On(i){const e=Ce(i);return e.Ie||(e.Ie=ZE(e,cl(i))),e.Ie}function ZE(i,e){if(i.limitType==="F")return cf(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Pc(o.field,l)}));const t=i.endAt?new zo(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new zo(i.startAt.position,i.startAt.inclusive):null;return cf(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function hf(i,e,t){return new Qc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Xc(i,e){return Rl(On(i),On(e))&&i.limitType===e.limitType}function _0(i){return`${mi(On(i))}|lt:${i.limitType}`}function Io(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>g0(o))).join(", ")}]`),$c(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Bo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Bo(o))).join(",")),`Target(${r})`})(On(i))}; limitType=${i.limitType})`}function Dl(i,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ae.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,o){for(const l of cl(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(c,d,p){const v=uy(c,d,p);return c.inclusive?v<=0:v<0})(r.startAt,cl(r),o)||r.endAt&&!(function(c,d,p){const v=uy(c,d,p);return c.inclusive?v>=0:v>0})(r.endAt,cl(r),o))})(i,e)}function eT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function w0(i){return(e,t)=>{let r=!1;for(const o of cl(i)){const l=tT(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function tT(i,e,t){const r=i.field.isKeyField()?ae.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),v=d.data.field(l);return p!==null&&v!==null?Es(p,v):me(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return n0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=new at(ae.comparator);function _n(){return nT}const x0=new at(ae.comparator);function el(...i){let e=x0;for(const t of i)e=e.insert(t.key,t);return e}function E0(i){let e=x0;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function dr(){return hl()}function T0(){return hl()}function hl(){return new zr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const rT=new at(ae.comparator),sT=new Qe(ae.comparator);function Re(...i){let e=sT;for(const t of i)e=e.add(t);return e}const iT=new Qe(Se);function oT(){return iT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function I0(i){return{integerValue:""+i}}function aT(i,e){return dE(e)?I0(e):Uf(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function lT(i,e,t){return i instanceof Sl?(function(o,l){const c={fields:{[i0]:{stringValue:s0},[a0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Mf(l)&&(l=Hc(l)),l&&(c.fields[o0]=l),{mapValue:c}})(t,e):i instanceof $o?b0(i,e):i instanceof qo?A0(i,e):(function(o,l){const c=S0(o,l),d=py(c)+py(o.Ee);return af(c)&&af(o.Ee)?I0(d):Uf(o.serializer,d)})(i,e)}function uT(i,e,t){return i instanceof $o?b0(i,e):i instanceof qo?A0(i,e):t}function S0(i,e){return i instanceof bl?(function(r){return af(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Sl extends Yc{}class $o extends Yc{constructor(e){super(),this.elements=e}}function b0(i,e){const t=C0(e);for(const r of i.elements)t.some((o=>gr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class qo extends Yc{constructor(e){super(),this.elements=e}}function A0(i,e){let t=C0(e);for(const r of i.elements)t=t.filter((o=>!gr(o,r)));return{arrayValue:{values:t}}}class bl extends Yc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function py(i){return ot(i.integerValue||i.doubleValue)}function C0(i){return Il(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t){this.field=e,this.transform=t}}function hT(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof $o&&o instanceof $o||r instanceof qo&&o instanceof qo?Vo(r.elements,o.elements,gr):r instanceof bl&&o instanceof bl?gr(r.Ee,o.Ee):r instanceof Sl&&o instanceof Sl})(i.transform,e.transform)}class dT{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Jc{}function P0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new $f(i.key,wn.none()):new Xo(i.key,i.data,wn.none());{const t=i.data,r=cn.empty();let o=new Qe(ct.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new bs(i.key,r,new jn(o.toArray()),wn.none())}}function fT(i,e,t){i instanceof Xo?(function(o,l,c){const d=o.value.clone(),p=gy(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(i,e,t):i instanceof bs?(function(o,l,c){if(!pc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=gy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(k0(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function dl(i,e,t,r){return i instanceof Xo?(function(l,c,d,p){if(!pc(l.precondition,c))return d;const v=l.value.clone(),x=yy(l.fieldTransforms,p,c);return v.setAll(x),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null})(i,e,t,r):i instanceof bs?(function(l,c,d,p){if(!pc(l.precondition,c))return d;const v=yy(l.fieldTransforms,p,c),x=c.data;return x.setAll(k0(l)),x.setAll(v),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(i,e,t,r):(function(l,c,d){return pc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(i,e,t)}function pT(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=S0(r.transform,o||null);l!=null&&(t===null&&(t=cn.empty()),t.set(r.field,l))}return t||null}function my(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Vo(r,o,((l,c)=>hT(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Xo extends Jc{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends Jc{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function k0(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function gy(i,e,t){const r=new Map;_e(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,d=e.data.field(l.field);r.set(l.field,uT(c,d,t[o]))}return r}function yy(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,lT(l,c,e))}return r}class $f extends Jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R0 extends Jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&fT(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=dl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=dl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=T0();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=P0(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,r)=>my(t,r)))&&Vo(this.baseMutations,e.baseMutations,((t,r)=>my(t,r)))}}class Kf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return rT})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new Kf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,ze;function gT(i){switch(i){case G.OK:return me(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return me(15467,{code:i})}}function N0(i){if(i===void 0)return Zt("GRPC error has no .code"),G.UNKNOWN;switch(i){case vt.OK:return G.OK;case vt.CANCELLED:return G.CANCELLED;case vt.UNKNOWN:return G.UNKNOWN;case vt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case vt.INTERNAL:return G.INTERNAL;case vt.UNAVAILABLE:return G.UNAVAILABLE;case vt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case vt.NOT_FOUND:return G.NOT_FOUND;case vt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case vt.ABORTED:return G.ABORTED;case vt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case vt.DATA_LOSS:return G.DATA_LOSS;default:return me(39323,{code:i})}}(ze=vt||(vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new _s([4294967295,4294967295],0);function vy(i){const e=Fv().encode(i),t=new Rv;return t.update(e),new Uint8Array(t.digest())}function _y(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _s([t,r],0),new _s([o,l],0)]}class Hf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tl(`Invalid padding: ${t}`);if(r<0)throw new tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_s.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(_s.fromNumber(r)));return o.compare(yT)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=vy(e),[r,o]=_y(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Hf(l,o,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=vy(e),[r,o]=_y(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Vl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zc(xe.min(),o,new at(Se),_n(),Re())}}class Vl{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vl(r,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class D0{constructor(e,t){this.targetId=e,this.De=t}}class V0{constructor(e,t,r=wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class wy{constructor(){this.ve=0,this.Ce=xy(),this.Fe=wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),t=Re(),r=Re();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:me(38017,{changeType:l})}})),new Vl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=xy()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class vT{constructor(e){this.We=e,this.Ge=new Map,this.ze=_n(),this.je=nc(),this.Je=nc(),this.He=new at(Se)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const l=o.target;if(kc(l))if(r===0){const c=new ae(l.path);this.Xe(t,c,dt.newNoDocument(c,xe.min()))}else _e(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,v)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=Br(r).toUint8Array()}catch(p){if(p instanceof r0)return mr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Hf(c,o,l)}catch(p){return mr(p instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&kc(d.target)){const p=new ae(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,dt.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=Re();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const v=this.st(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new Zc(e,t,this.He,this.ze,r);return this.ze=_n(),this.je=nc(),this.Je=nc(),this.He=new at(Se),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new wy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qe(Se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qe(Se),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new wy),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function nc(){return new at(ae.comparator)}function xy(){return new at(ae.comparator)}const _T={asc:"ASCENDING",desc:"DESCENDING"},wT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xT={and:"AND",or:"OR"};class ET{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(i,e){return i.useProto3Json||$c(e)?e:{value:e}}function Ko(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function TT(i,e){return Ko(i,e.toTimestamp())}function en(i){return _e(!!i,49232),xe.fromTimestamp((function(t){const r=Fr(t);return new Ge(r.seconds,r.nanos)})(i))}function Gf(i,e){return ff(i,e).canonicalString()}function ff(i,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function O0(i){const e=Ye.fromString(i);return _e(K0(e),10190,{key:e.toString()}),e}function Nc(i,e){return Gf(i.databaseId,e.path)}function hi(i,e){const t=O0(e);if(t.get(1)!==i.databaseId.projectId)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ae(F0(t))}function M0(i,e){return Gf(i.databaseId,e)}function L0(i){const e=O0(i);return e.length===4?Ye.emptyPath():F0(e)}function pf(i){return new Ye(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function F0(i){return _e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Ey(i,e,t){return{name:Nc(i,e),fields:t.value.mapValue.fields}}function IT(i,e,t){const r=hi(i,e.name),o=en(e.updateTime),l=e.createTime?en(e.createTime):xe.min(),c=new cn({mapValue:{fields:e.fields}}),d=dt.newFoundDocument(r,o,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function ST(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:me(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,x){return v.useProto3Json?(_e(x===void 0||typeof x=="string",58123),wt.fromBase64String(x||"")):(_e(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),wt.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(v){const x=v.code===void 0?G.UNKNOWN:N0(v.code);return new he(x,v.message||"")})(c);t=new V0(r,o,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=hi(i,r.document.name),l=en(r.document.updateTime),c=r.document.createTime?en(r.document.createTime):xe.min(),d=new cn({mapValue:{fields:r.document.fields}}),p=dt.newFoundDocument(o,l,c,d),v=r.targetIds||[],x=r.removedTargetIds||[];t=new mc(v,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=hi(i,r.document),l=r.readTime?en(r.readTime):xe.min(),c=dt.newNoDocument(o,l),d=r.removedTargetIds||[];t=new mc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=hi(i,r.document),l=r.removedTargetIds||[];t=new mc([],l,o,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new mT(o,l),d=r.targetId;t=new D0(d,c)}}return t}function Dc(i,e){let t;if(e instanceof Xo)t={update:Ey(i,e.key,e.value)};else if(e instanceof $f)t={delete:Nc(i,e.key)};else if(e instanceof bs)t={update:Ey(i,e.key,e.data),updateMask:RT(e.fieldMask)};else{if(!(e instanceof R0))return me(16599,{Rt:e.type});t={verify:Nc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof Sl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $o)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof qo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bl)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw me(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:TT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:me(27497)})(i,e.precondition)),t}function mf(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?wn.updateTime(en(l.updateTime)):l.exists!==void 0?wn.exists(l.exists):wn.none()})(e.currentDocument):wn.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,d){let p=null;if("setToServerValue"in d)_e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Sl;else if("appendMissingElements"in d){const x=d.appendMissingElements.values||[];p=new $o(x)}else if("removeAllFromArray"in d){const x=d.removeAllFromArray.values||[];p=new qo(x)}else"increment"in d?p=new bl(c,d.increment):me(16584,{proto:d});const v=ct.fromServerFormat(d.fieldPath);return new cT(v,p)})(i,o))):[];if(e.update){e.update.name;const o=hi(i,e.update.name),l=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const v=p.fieldPaths||[];return new jn(v.map((x=>ct.fromServerFormat(x))))})(e.updateMask);return new bs(o,l,c,t,r)}return new Xo(o,l,t,r)}if(e.delete){const o=hi(i,e.delete);return new $f(o,t)}if(e.verify){const o=hi(i,e.verify);return new R0(o,t)}return me(1463,{proto:e})}function bT(i,e){return i&&i.length>0?(_e(e!==void 0,14353),i.map((t=>(function(o,l){let c=o.updateTime?en(o.updateTime):en(l);return c.isEqual(xe.min())&&(c=en(l)),new dT(c,o.transformResults||[])})(t,e)))):[]}function B0(i,e){return{documents:[M0(i,e.path)]}}function z0(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=M0(i,o);const l=(function(v){if(v.length!==0)return q0(Je.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(v){if(v.length!==0)return v.map((x=>(function(S){return{field:So(S.field),direction:CT(S.dir)}})(x)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=df(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{Vt:t,parent:o}}function U0(i){let e=L0(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){_e(r===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(T){const S=$0(T);return S instanceof Je&&zf(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(U){return new Pc(bo(U.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,$c(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,j=T.values||[];return new zo(j,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const S=!T.before,j=T.values||[];return new zo(j,S)})(t.endAt)),YE(e,o,c,l,d,"F",p,v)}function AT(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $0(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bo(t.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return Oe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return Oe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bo(t.unaryFilter.field);return Oe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Oe.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Je.create(t.compositeFilter.filters.map((r=>$0(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(i):me(30097,{filter:i})}function CT(i){return _T[i]}function PT(i){return wT[i]}function kT(i){return xT[i]}function So(i){return{fieldPath:i.canonicalString()}}function bo(i){return ct.fromServerFormat(i.fieldPath)}function q0(i){return i instanceof Oe?(function(t){if(t.op==="=="){if(oy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(iy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(iy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:PT(t.op),value:t.value}}})(i):i instanceof Je?(function(t){const r=t.getFilters().map((o=>q0(o)));return r.length===1?r[0]:{compositeFilter:{op:kT(t.op),filters:r}}})(i):me(54877,{filter:i})}function RT(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function K0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t,r,o,l=xe.min(),c=xe.min(),d=wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.gt=e}}function NT(i,e){let t;if(e.document)t=IT(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),o=yi(e.noDocument.readTime);t=dt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const r=ae.fromSegments(e.unknownDocument.path),o=yi(e.unknownDocument.version);t=dt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const l=new Ge(o[0],o[1]);return xe.fromTimestamp(l)})(e.readTime)),t}function Ty(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Nc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Ko(l,c.version.toTimestamp()),createTime:Ko(l,c.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gi(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:gi(e.version)}}return r}function Vc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function gi(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yi(i){const e=new Ge(i.seconds,i.nanoseconds);return xe.fromTimestamp(e)}function ii(i,e){const t=(e.baseMutations||[]).map((l=>mf(i.gt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>mf(i.gt,l))),o=Ge.fromMillis(e.localWriteTimeMs);return new qf(e.batchId,o,t,r)}function nl(i){const e=yi(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?yi(i.lastLimboFreeSnapshotVersion):xe.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const c=l.documents.length;return _e(c===1,1966,{count:c}),On(Nl(L0(l.documents[0])))})(i.query):(function(l){return On(U0(l))})(i.query),new jr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,wt.fromBase64String(i.resumeToken))}function H0(i,e){const t=gi(e.snapshotVersion),r=gi(e.lastLimboFreeSnapshotVersion);let o;o=kc(e.target)?B0(i.gt,e.target):z0(i.gt,e.target).Vt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mi(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function G0(i){const e=U0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hf(e,e.limit,"L"):e}function zd(i,e){return new Wf(e.largestBatchId,mf(i.gt,e.overlayMutation))}function Iy(i,e){const t=e.path.lastSegment();return[i,Ht(e.path.popLast()),t]}function Sy(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:gi(r.readTime),documentKey:Ht(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{getBundleMetadata(e,t){return by(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:yi(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return by(e).put((function(o){return{bundleId:o.id,createTime:gi(en(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return Ay(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:G0(l.bundledQuery),readTime:yi(l.readTime)}})(r)}))}saveNamedQuery(e,t){return Ay(e).put((function(o){return{name:o.name,readTime:gi(en(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function by(i){return At(i,qc)}function Ay(i){return At(i,Kc)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new eh(e,r)}getOverlay(e,t){return Ga(e).get(Iy(this.userId,t)).next((r=>r?zd(this.serializer,r):null))}getOverlays(e,t){const r=dr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((l,c)=>{const d=new Wf(t,c);o.push(this.wt(e,d))})),L.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(Ht(c.getCollectionPath()))));const l=[];return o.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Ga(e).Y(rf,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,r){const o=dr(),l=Ht(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ga(e).j(rf,c).next((d=>{for(const p of d){const v=zd(this.serializer,p);o.set(v.getKey(),v)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const l=dr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ga(e).X({index:Yv,range:d},((p,v,x)=>{const T=zd(this.serializer,v);l.size()<o||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):x.done()})).next((()=>l))}wt(e,t){return Ga(e).put((function(o,l,c){const[d,p,v]=Iy(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Dc(o.gt,c.mutation)}})(this.serializer,this.userId,t))}}function Ga(i){return At(i,Wc)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{St(e){return At(e,jf)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),vl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Fr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Br(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?u0(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Gc(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):me(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const o of Object.keys(r))this.xt(o,t),this.Dt(r[o],t)}Lt(e,t){var r,o;const l=e.fields||{};this.Ct(t,53);const c=Fo,d=((o=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Ct(t,15),t.Ft(ot(d)),this.xt(c,t),this.Dt(l[c],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const o of r)this.Dt(o,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}oi.Ut=new oi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=255;function jT(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Cy(i){const e=64-(function(r){let o=0;for(let l=0;l<8;++l){const c=jT(255&r[l]);if(o+=c,c!==8)break}return o})(i);return Math.ceil(e/8)}class OT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const o=t.codePointAt(0);this.Wt(240|o>>>18),this.Wt(128|63&o>>>12),this.Wt(128|63&o>>>6),this.Wt(128|63&o)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const o=t.codePointAt(0);this.jt(240|o>>>18),this.jt(128|63&o>>>12),this.jt(128|63&o>>>6),this.jt(128|63&o)}}this.Jt()}Zt(e){const t=this.Xt(e),r=Cy(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}tn(e){const t=this.Xt(e),r=Cy(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}nn(){this.rn(_o),this.rn(255)}sn(){this._n(_o),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===_o?(this.rn(_o),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===_o?(this._n(_o),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class MT{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class LT{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Qa{constructor(){this.un=new OT,this.cn=new MT(this.un),this.ln=new LT(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t,r,o){this.Pn=e,this.Tn=t,this.In=r,this.dn=o}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ai(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:gc(this.In),directionalValue:gc(this.dn),orderedDocumentKey:gc(t),documentKey:r.path.toArray()}}Rn(e,t,r){const o=this.An(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ds(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=Py(i.In,e.In),t!==0?t:(t=Py(i.dn,e.dn),t!==0?t:ae.comparator(i.Tn,e.Tn)))}function Py(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function gc(i){return Ev()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(i):i}function ky(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(i)}class Ry{constructor(e){this.Vn=new Qe(((t,r)=>ct.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=ef(e);if(t!==void 0&&!this.yn(t))return!1;const r=ni(e);let o=new Set,l=0,c=0;for(;l<r.length&&this.yn(r[l]);++l)o=o.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[l];if(!this.wn(d,p)||!this.Sn(this.mn[c++],p))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.mn.length||!this.Sn(this.mn[c++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new Qe(ct.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new lc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new lc(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new lc(r.field,r.dir==="asc"?0:1)));return new Ic(Ic.UNKNOWN_ID,this.collectionId,t,yl.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(i){var e,t;if(_e(i instanceof Oe||i instanceof Je,20012),i instanceof Oe){if(i instanceof v0){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>Oe.create(i.field,"==",l))))||[];return Je.create(o,"or")}return i}const r=i.filters.map((o=>Q0(o)));return Je.create(r,i.op)}function FT(i){if(i.getFilters().length===0)return[];const e=vf(Q0(i));return _e(X0(e),7391),gf(e)||yf(e)?[e]:e.getFilters()}function gf(i){return i instanceof Oe}function yf(i){return i instanceof Je&&zf(i)}function X0(i){return gf(i)||yf(i)||(function(t){if(t instanceof Je&&lf(t)){for(const r of t.getFilters())if(!gf(r)&&!yf(r))return!1;return!0}return!1})(i)}function vf(i){if(_e(i instanceof Oe||i instanceof Je,34018),i instanceof Oe)return i;if(i.filters.length===1)return vf(i.filters[0]);const e=i.filters.map((r=>vf(r)));let t=Je.create(e,i.op);return t=jc(t),X0(t)?t:(_e(t instanceof Je,64498),_e(Uo(t),40251),_e(t.filters.length>1,57927),t.filters.reduce(((r,o)=>Qf(r,o))))}function Qf(i,e){let t;return _e(i instanceof Oe||i instanceof Je,38388),_e(e instanceof Oe||e instanceof Je,25473),t=i instanceof Oe?e instanceof Oe?(function(o,l){return Je.create([o,l],"and")})(i,e):Ny(i,e):e instanceof Oe?Ny(e,i):(function(o,l){if(_e(o.filters.length>0&&l.filters.length>0,48005),Uo(o)&&Uo(l))return m0(o,l.getFilters());const c=lf(o)?o:l,d=lf(o)?l:o,p=c.filters.map((v=>Qf(v,d)));return Je.create(p,"or")})(i,e),jc(t)}function Ny(i,e){if(Uo(e))return m0(e,i.getFilters());{const t=e.filters.map((r=>Qf(i,r)));return Je.create(t,"or")}}function jc(i){if(_e(i instanceof Oe||i instanceof Je,11850),i instanceof Oe)return i;const e=i.getFilters();if(e.length===1)return jc(e[0]);if(f0(i))return i;const t=e.map((o=>jc(o))),r=[];return t.forEach((o=>{o instanceof Oe?r.push(o):o instanceof Je&&(o.op===i.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Je.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.Dn=new Xf}addToCollectionParentIndex(e,t){return this.Dn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(xn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(xn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Xf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Qe(Ye.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Qe(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="IndexedDbIndexManager",rc=new Uint8Array(0);class zT{constructor(e,t){this.databaseId=t,this.vn=new Xf,this.Cn=new zr((r=>mi(r)),((r,o)=>Rl(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Ht(o)};return Vy(e).put(l)}return L.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Bv(t),""],!1,!0);return Vy(e).j(o).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(hr(c.parent))}return r}))}addFieldIndex(e,t){const r=Xa(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const l=r.add(o);if(t.indexState){const c=xo(e);return l.next((d=>{c.put(Sy(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Xa(e),o=xo(e),l=wo(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Xa(e),r=wo(e),o=xo(e);return t.Y().next((()=>r.Y())).next((()=>o.Y()))}createTargetIndexes(e,t){return L.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const l=new Ry(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=wo(e);let o=!0;const l=new Map;return L.forEach(this.Fn(t),(c=>this.Mn(e,c).next((d=>{o&&(o=!!d),l.set(c,d)})))).next((()=>{if(o){let c=Re();const d=[];return L.forEach(l,((p,v)=>{ee(Dy,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((te=>`${te.fieldPath}:${te.kind}`)).join(",")}`})(p)} to execute ${mi(t)}`);const x=(function(Q,te){const de=ef(te);if(de===void 0)return null;for(const ue of Rc(Q,de.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(v,p),T=(function(Q,te){const de=new Map;for(const ue of ni(te))for(const k of Rc(Q,ue.fieldPath))switch(k.op){case"==":case"in":de.set(ue.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return de.set(ue.fieldPath.canonicalString(),k.value),Array.from(de.values())}return null})(v,p),S=(function(Q,te){const de=[];let ue=!0;for(const k of ni(te)){const E=k.kind===0?hy(Q,k.fieldPath,Q.startAt):dy(Q,k.fieldPath,Q.startAt);de.push(E.value),ue&&(ue=E.inclusive)}return new zo(de,ue)})(v,p),j=(function(Q,te){const de=[];let ue=!0;for(const k of ni(te)){const E=k.kind===0?dy(Q,k.fieldPath,Q.endAt):hy(Q,k.fieldPath,Q.endAt);de.push(E.value),ue&&(ue=E.inclusive)}return new zo(de,ue)})(v,p),U=this.xn(p,v,S),K=this.xn(p,v,j),$=this.On(p,v,T),re=this.Nn(p.indexId,x,U,S.inclusive,K,j.inclusive,$);return L.forEach(re,(H=>r.H(H,t.limit).next((Q=>{Q.forEach((te=>{const de=ae.fromSegments(te.documentKey);c.has(de)||(c=c.add(de),d.push(de))}))}))))})).next((()=>d))}return L.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=FT(Je.create(e.filters,"and")).map((r=>cf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,o,l,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,l.length),v=p/(t!=null?t.length:1),x=[];for(let T=0;T<p;++T){const S=t?this.Bn(t[T/v]):rc,j=this.Ln(e,S,r[T%v],o),U=this.kn(e,S,l[T%v],c),K=d.map(($=>this.Ln(e,S,$,!0)));x.push(...this.createRange(j,U,K))}return x}Ln(e,t,r,o){const l=new ai(e,ae.empty(),t,r);return o?l:l.En()}kn(e,t,r,o){const l=new ai(e,ae.empty(),t,r);return o?l.En():l}Mn(e,t){const r=new Ry(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((l=>{let c=null;for(const d of l)r.pn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const o=this.Fn(t);return L.forEach(o,(l=>this.Mn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(p){let v=new Qe(ct.comparator),x=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?x=!0:v=v.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(x?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}qn(e,t){const r=new Qa;for(const o of ni(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const c=r.hn(o.kind);oi.Ut.bt(l,c)}return r.an()}Bn(e){const t=new Qa;return oi.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Qa;return oi.Ut.bt(Bf(this.databaseId,t),r.hn((function(l){const c=ni(l);return c.length===0?0:c[c.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let o=[];o.push(new Qa);let l=0;for(const c of ni(e)){const d=r[l++];for(const p of o)if(this.$n(t,c.fieldPath)&&Il(d))o=this.Un(o,c,d);else{const v=p.hn(c.kind);oi.Ut.bt(d,v)}}return this.Kn(o)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new Qa;p.seed(d.an()),oi.Ut.bt(c,p.hn(t.kind)),l.push(p)}return l}$n(e,t){return!!e.filters.find((r=>r instanceof Oe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Xa(e),o=xo(e);return(t?r.j(nf,IDBKeyRange.bound(t,t)):r.j()).next((l=>{const c=[];return L.forEach(l,(d=>o.get([d.indexId,this.uid]).next((p=>{c.push((function(x,T){const S=T?new yl(T.sequenceNumber,new xn(yi(T.readTime),new ae(hr(T.documentKey)),T.largestBatchId)):yl.empty(),j=x.fields.map((([U,K])=>new lc(ct.fromServerFormat(U),K)));return new Ic(x.indexId,x.collectionGroup,j,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:Se(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Xa(e),l=xo(e);return this.Wn(e).next((c=>o.j(nf,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(Sy(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,((o,l)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(r.set(o.collectionGroup,d),L.forEach(d,(p=>this.Gn(e,o,p).next((v=>{const x=this.zn(l,p);return v.isEqual(x)?L.resolve():this.jn(e,l,p,v,x)})))))))}))}Jn(e,t,r,o){return wo(e).put(o.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,o){return wo(e).delete(o.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const o=wo(e);let l=new Qe(ds);return o.X({index:Xv,range:IDBKeyRange.only([r.indexId,this.uid,gc(this.Qn(r,t))])},((c,d)=>{l=l.add(new ai(r.indexId,t,ky(d.arrayValue),ky(d.directionalValue)))})).next((()=>l))}zn(e,t){let r=new Qe(ds);const o=this.qn(t,e);if(o==null)return r;const l=ef(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Il(c))for(const d of c.arrayValue.values||[])r=r.add(new ai(t.indexId,e.key,this.Bn(d),o))}else r=r.add(new ai(t.indexId,e.key,rc,o));return r}jn(e,t,r,o,l){ee(Dy,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,v,x,T,S){const j=p.getIterator(),U=v.getIterator();let K=vo(j),$=vo(U);for(;K||$;){let re=!1,H=!1;if(K&&$){const Q=x(K,$);Q<0?H=!0:Q>0&&(re=!0)}else K!=null?H=!0:re=!0;re?(T($),$=vo(U)):H?(S(K),K=vo(j)):(K=vo(j),$=vo(U))}})(o,l,ds,(d=>{c.push(this.Jn(e,t,r,d))}),(d=>{c.push(this.Hn(e,t,r,d))})),L.waitFor(c)}Wn(e){let t=1;return xo(e).X({index:Qv,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,l)=>{l.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>ds(c,d))).filter(((c,d,p)=>!d||ds(c,p[d-1])!==0));const o=[];o.push(e);for(const c of r){const d=ds(c,e),p=ds(c,t);if(d===0)o[0]=e.En();else if(d>0&&p<0)o.push(c),o.push(c.En());else if(p>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.Yn(o[c],o[c+1]))return[];const d=o[c].Rn(this.uid,rc,ae.empty()),p=o[c+1].Rn(this.uid,rc,ae.empty());l.push(IDBKeyRange.bound(d,p))}return l}Yn(e,t){return ds(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jy)}getMinOffset(e,t){return L.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((o=>o||me(44426))))).next(jy)}}function Vy(i){return At(i,xl)}function wo(i){return At(i,ll)}function Xa(i){return At(i,Vf)}function xo(i){return At(i,al)}function jy(i){_e(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;Rf(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new xn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y0=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(i,e,t){const r=i.store(Jn),o=i.store(jo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.X({range:c},((x,T,S)=>(d++,S.delete())));l.push(p.next((()=>{_e(d===1,47070,{batchId:t.batchId})})));const v=[];for(const x of t.mutations){const T=Wv(e,x.key.path,t.batchId);l.push(o.delete(T)),v.push(x.key)}return L.waitFor(l).next((()=>v))}function Oc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw me(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(Y0,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class th{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Zn={}}static yt(e,t,r,o){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new th(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).X({index:li,range:r},((o,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const l=Ao(e),c=fs(e);return c.add({}).next((d=>{_e(typeof d=="number",49019);const p=new qf(d,t,r,o),v=(function(j,U,K){const $=K.baseMutations.map((H=>Dc(j.gt,H))),re=K.mutations.map((H=>Dc(j.gt,H)));return{userId:U,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:$,mutations:re}})(this.serializer,this.userId,p),x=[];let T=new Qe(((S,j)=>Se(S.canonicalString(),j.canonicalString())));for(const S of o){const j=Wv(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),x.push(c.put(v)),x.push(l.put(j,mE))}return T.forEach((S=>{x.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),L.waitFor(x).next((()=>p))}))}lookupMutationBatch(e,t){return fs(e).get(t).next((r=>r?(_e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ii(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?L.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return fs(e).X({index:li,range:o},((c,d,p)=>{d.userId===this.userId&&(_e(d.batchId>=r,47524,{er:r}),l=ii(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ui;return fs(e).X({index:li,range:t,reverse:!0},((o,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ui],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).j(li,t).next((r=>r.map((o=>ii(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=uc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Ao(e).X({range:o},((c,d,p)=>{const[v,x,T]=c,S=hr(x);if(v===this.userId&&t.path.isEqual(S))return fs(e).get(T).next((j=>{if(!j)throw me(61480,{tr:c,batchId:T});_e(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:T}),l.push(ii(this.serializer,j))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(Se);const o=[];return t.forEach((l=>{const c=uc(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Ao(e).X({range:d},((v,x,T)=>{const[S,j,U]=v,K=hr(j);S===this.userId&&l.path.isEqual(K)?r=r.add(U):T.done()}));o.push(p)})),L.waitFor(o).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=uc(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Qe(Se);return Ao(e).X({range:c},((p,v,x)=>{const[T,S,j]=p,U=hr(S);T===this.userId&&r.isPrefixOf(U)?U.length===o&&(d=d.add(j)):x.done()})).next((()=>this.nr(e,d)))}nr(e,t){const r=[],o=[];return t.forEach((l=>{o.push(fs(e).get(l).next((c=>{if(c===null)throw me(35274,{batchId:l});_e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(ii(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return J0(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Ao(e).X({range:r},((l,c,d)=>{if(l[0]===this.userId){const p=hr(l[1]);o.push(p)}else d.done()})).next((()=>{_e(o.length===0,56720,{ir:o.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return Z0(e,this.userId,t)}sr(e){return e_(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ui,lastStreamToken:""}))}}function Z0(i,e,t){const r=uc(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Ao(i).X({range:l,Z:!0},((d,p,v)=>{const[x,T,S]=d;x===e&&T===o&&(c=!0),v.done()})).next((()=>c))}function fs(i){return At(i,Jn)}function Ao(i){return At(i,jo)}function e_(i){return At(i,_l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new vi(0)}static ur(){return new vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new vi(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>xe.fromTimestamp(new Ge(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.lr(e,o))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Eo(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(_e(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let o=0;const l=[];return Eo(e).X(((c,d)=>{const p=nl(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>o))}forEachTarget(e,t){return Eo(e).X(((r,o)=>{const l=nl(o);t(l)}))}cr(e){return My(e).get(Ac).next((t=>(_e(t!==null,2888),t)))}lr(e,t){return My(e).put(Ac,t)}hr(e,t){return Eo(e).put(H0(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=mi(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Eo(e).X({range:o,index:Gv},((c,d,p)=>{const v=nl(d);Rl(t,v.target)&&(l=v,p.done())})).next((()=>l))}addMatchingKeys(e,t,r){const o=[],l=ms(e);return t.forEach((c=>{const d=Ht(c.path);o.push(l.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))})),L.waitFor(o)}removeMatchingKeys(e,t,r){const o=ms(e);return L.forEach(t,(l=>{const c=Ht(l.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=ms(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ms(e);let l=Re();return o.X({range:r,Z:!0},((c,d,p)=>{const v=hr(c[1]),x=new ae(v);l=l.add(x)})).next((()=>l))}containsKey(e,t){const r=Ht(t.path),o=IDBKeyRange.bound([r],[Bv(r)],!1,!0);let l=0;return ms(e).X({index:Df,Z:!0,range:o},(([c,d],p,v)=>{c!==0&&(l++,v.done())})).next((()=>l>0))}Et(e,t){return Eo(e).get(t).next((r=>r?nl(r):null))}}function Eo(i){return At(i,Oo)}function My(i){return At(i,ci)}function ms(i){return At(i,Mo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="LruGarbageCollector",$T=1048576;function Fy([i,e],[t,r]){const o=Se(i,t);return o===0?Se(e,r):o}class qT{constructor(e){this.Tr=e,this.buffer=new Qe(Fy),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Fy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ee(Ly,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ss(t)?ee(Ly,"Ignoring IndexedDB error during garbage collection: ",t):await wi(t)}await this.Rr(3e5)}))}}class KT{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(Vn.ue);const r=new qT(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Oy)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Oy):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,l,c,d,p,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,d=Date.now(),this.removeTargets(e,r,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(v=Date.now(),To()<=Ue.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(v-p)+`ms
Total Duration: ${v-x}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function n_(i,e){return new KT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t){this.db=e,this.garbageCollector=n_(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,o)=>t(o)))}addReference(e,t,r){return sc(e,r)}removeReference(e,t,r){return sc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sc(e,t)}Sr(e,t){return(function(o,l){let c=!1;return e_(o).ee((d=>Z0(o,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.wr(e,((c,d)=>{if(d<=t){const p=this.Sr(e,c).next((v=>{if(!v)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,xe.min()),ms(e).delete((function(T){return[0,Ht(T.path)]})(c)))))}));o.push(p)}})).next((()=>L.waitFor(o))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sc(e,t)}wr(e,t){const r=ms(e);let o,l=Vn.ue;return r.X({index:Df},(([c,d],{path:p,sequenceNumber:v})=>{c===0?(l!==Vn.ue&&t(new ae(hr(o)),l),l=v,o=p):l=Vn.ue})).next((()=>{l!==Vn.ue&&t(new ae(hr(o)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sc(i,e){return ms(i).put((function(r,o){return{targetId:0,path:Ht(r.path),sequenceNumber:o}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.changes=new zr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ei(e).put(r)}removeEntry(e,t,r){return ei(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Vc(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=dt.newInvalidDocument(t);return ei(e).X({index:cc,range:IDBKeyRange.only(Ya(t))},((o,l)=>{r=this.Dr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:dt.newInvalidDocument(t)};return ei(e).X({index:cc,range:IDBKeyRange.only(Ya(t))},((o,l)=>{r={document:this.Dr(t,l),size:Oc(l)}})).next((()=>r))}getEntries(e,t){let r=_n();return this.Cr(e,t,((o,l)=>{const c=this.Dr(o,l);r=r.insert(o,c)})).next((()=>r))}Fr(e,t){let r=_n(),o=new at(ae.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Dr(l,c);r=r.insert(l,d),o=o.insert(l,Oc(c))})).next((()=>({documents:r,Mr:o})))}Cr(e,t,r){if(t.isEmpty())return L.resolve();let o=new Qe(Uy);t.forEach((p=>o=o.add(p)));const l=IDBKeyRange.bound(Ya(o.first()),Ya(o.last())),c=o.getIterator();let d=c.getNext();return ei(e).X({index:cc,range:l},((p,v,x)=>{const T=ae.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&Uy(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?x.G(Ya(d)):x.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Vc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ei(e).j(IDBKeyRange.bound(d,p,!0)).next((v=>{l==null||l.incrementDocumentReadCount(v.length);let x=_n();for(const T of v){const S=this.Dr(ae.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Dl(t,S)||o.has(S.key))&&(x=x.insert(S.key,S))}return x}))}getAllFromCollectionGroup(e,t,r,o){let l=_n();const c=zy(t,r),d=zy(t,xn.max());return ei(e).X({index:Hv,range:IDBKeyRange.bound(c,d,!0)},((p,v,x)=>{const T=this.Dr(ae.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);l=l.insert(T.key,T),l.size===o&&x.done()})).next((()=>l))}newChangeBuffer(e){return new GT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return By(e).get(tf).next((t=>(_e(!!t,20021),t)))}br(e,t){return By(e).put(tf,t)}Dr(e,t){if(t){const r=NT(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return dt.newInvalidDocument(e)}}function s_(i){return new HT(i)}class GT extends r_{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new zr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new Qe(((l,c)=>Se(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Nr.get(l);if(t.push(this.Or.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=Ty(this.Or.serializer,c);o=o.add(l.path.popLast());const v=Oc(p);r+=v-d.size,t.push(this.Or.addEntry(e,l,p))}else if(r-=d.size,this.trackRemovals){const p=Ty(this.Or.serializer,c.convertToNoDocument(xe.min()));t.push(this.Or.addEntry(e,l,p))}})),o.forEach((l=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Or.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:o})=>(o.forEach(((l,c)=>{this.Nr.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function By(i){return At(i,wl)}function ei(i){return At(i,bc)}function Ya(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zy(i,e){const t=e.documentKey.path.toArray();return[i,Vc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Uy(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Se(t[l],r[l]),o)return o;return o=Se(t.length,r.length),o||(o=Se(t[t.length-2],r[r.length-2]),o||Se(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&dl(r.mutation,o,jn.empty(),Ge.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Re()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Re()){const o=dr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let c=el();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=dr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Re())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,o){let l=_n();const c=hl(),d=(function(){return hl()})();return t.forEach(((p,v)=>{const x=r.get(v.key);o.has(v.key)&&(x===void 0||x.mutation instanceof bs)?l=l.insert(v.key,v):x!==void 0?(c.set(v.key,x.mutation.getFieldMask()),dl(x.mutation,v,x.mutation.getFieldMask(),Ge.now())):c.set(v.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,x)=>c.set(v,x))),t.forEach(((v,x)=>{var T;return d.set(v,new QT(x,(T=c.get(v))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=hl();let o=new at(((c,d)=>c-d)),l=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let x=r.get(p)||jn.empty();x=d.applyToLocalView(v,x),r.set(p,x);const T=(o.get(d.batchId)||Re()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,x=p.value,T=T0();x.forEach((S=>{if(!l.has(S)){const j=P0(t.get(S),r.get(S));j!==null&&T.set(S,j),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,T))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):L.resolve(dr());let d=gl,p=l;return c.next((v=>L.forEach(v,((x,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(x)?L.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{p=p.insert(x,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,Re()))).next((x=>({batchId:d,changes:E0(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((r=>{let o=el();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=el();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const v=(function(T,S){return new Qc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((x=>{x.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((c=>{l.forEach(((p,v)=>{const x=v.getKey();c.get(x)===null&&(c=c.insert(x,dt.newInvalidDocument(x)))}));let d=el();return c.forEach(((p,v)=>{const x=l.get(p);x!==void 0&&dl(x.mutation,v,jn.empty(),Ge.now()),Dl(t,v)&&(d=d.insert(p,v))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return L.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:en(o.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:G0(o.bundledQuery),readTime:en(o.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.overlays=new at(ae.comparator),this.kr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=dr();return L.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.wt(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const o=dr(),l=t.length+1,c=new ae(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return L.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new at(((v,x)=>v-x));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let x=l.get(v.largestBatchId);x===null&&(x=dr(),l=l.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const d=dr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,x)=>d.set(v,x))),!(d.size()>=o)););return L.resolve(d)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Wf(t,r));let l=this.kr.get(t);l===void 0&&(l=Re(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.qr=new Qe(Nt.Qr),this.$r=new Qe(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Nt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Nt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new ae(new Ye([])),r=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.$r.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ae(new Ye([])),r=new Nt(t,e),o=new Nt(t,e+1);let l=Re();return this.$r.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Nt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||Se(e.Hr,t.Hr)}static Ur(e,t){return Se(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Nt.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new qf(l,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new Nt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),l=o<0?0:o;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ui:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(Se);return t.forEach((o=>{const l=new Nt(o,0),c=new Nt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ae.isDocumentKey(l)||(l=l.child(""));const c=new Nt(new ae(l),0);let d=new Qe(Se);return this.Yr.forEachWhile((p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(d=d.add(p.Hr)),!0)}),c),L.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){_e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Nt(t,0),o=this.Yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.ni=e,this.docs=(function(){return new at(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let r=_n();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():dt.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=_n();const c=t.path,d=new ae(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:x}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Rf(Uv(x),r)<=0||(o.has(x.key)||Dl(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,r,o){me(9500)}ri(e,t){return L.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new tI(this)}getSize(e){return L.resolve(this.size)}}class tI extends r_{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),L.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.persistence=e,this.ii=new zr((t=>mi(t)),Rl),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.si=0,this.oi=new Yf,this.targetCount=0,this._i=vi.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),L.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new vi(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.hr(t),L.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),L.waitFor(l).next((()=>o))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.ai={},this.overlays={},this.ui=new Vn(0),this.ci=!1,this.ci=!0,this.li=new JT,this.referenceDelegate=e(this),this.hi=new nI(this),this.indexManager=new BT,this.remoteDocumentCache=(function(o){return new eI(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new W0(t),this.Ti=new XT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new ZT(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const o=new rI(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return L.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class rI extends qv{constructor(e){super(),this.currentSequenceNumber=e}}class nh{constructor(e){this.persistence=e,this.Ai=new Yf,this.Ri=null}static Vi(e){return new nh(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,(r=>{const o=ae.fromPath(r);return this.fi(e,o).next((l=>{l||t.removeEntry(o,xe.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return L.or([()=>L.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mc{constructor(e,t){this.persistence=e,this.gi=new zr((r=>Ht(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=n_(this,t)}static Vi(e,t){return new Mc(e,t)}Ii(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return L.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((l=>l?L.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,xe.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dc(e.data.value)),t}Sr(e,t,r){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.serializer=e}q(e,t,r,o){const l=new Uc("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(kl)})(e),(function(p){p.createObjectStore(_l,{keyPath:pE}),p.createObjectStore(Jn,{keyPath:Zg,autoIncrement:!0}).createIndex(li,ey,{unique:!0}),p.createObjectStore(jo)})(e),$y(e),(function(p){p.createObjectStore(ri)})(e));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(Mo),p.deleteObjectStore(Oo),p.deleteObjectStore(ci)})(e),$y(e)),c=c.next((()=>(function(p){const v=p.store(ci),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return v.put(Ac,x)})(l)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(p,v){return v.store(Jn).j().next((T=>{p.deleteObjectStore(Jn),p.createObjectStore(Jn,{keyPath:Zg,autoIncrement:!0}).createIndex(li,ey,{unique:!0});const S=v.store(Jn),j=T.map((U=>S.put(U)));return L.waitFor(j)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(Lo,{keyPath:TE})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.pi(l)))),r<6&&o>=6&&(c=c.next((()=>((function(p){p.createObjectStore(wl)})(e),this.yi(l))))),r<7&&o>=7&&(c=c.next((()=>this.wi(l)))),r<8&&o>=8&&(c=c.next((()=>this.Si(e,l)))),r<9&&o>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.bi(l)))),r<11&&o>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(qc,{keyPath:IE})})(e),(function(p){p.createObjectStore(Kc,{keyPath:SE})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(p){const v=p.createObjectStore(Wc,{keyPath:NE});v.createIndex(rf,DE,{unique:!1}),v.createIndex(Yv,VE,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(p){const v=p.createObjectStore(bc,{keyPath:gE});v.createIndex(cc,yE),v.createIndex(Hv,vE)})(e))).next((()=>this.Di(e,l))).next((()=>e.deleteObjectStore(ri)))),r<14&&o>=14&&(c=c.next((()=>this.Ci(e,l)))),r<15&&o>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Vf,{keyPath:bE,autoIncrement:!0}).createIndex(nf,AE,{unique:!1}),p.createObjectStore(al,{keyPath:CE}).createIndex(Qv,PE,{unique:!1}),p.createObjectStore(ll,{keyPath:kE}).createIndex(Xv,RE,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(al).clear()})).next((()=>{t.objectStore(ll).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(jf,{keyPath:jE})})(e)}))),r<18&&o>=18&&Ev()&&(c=c.next((()=>{t.objectStore(al).clear()})).next((()=>{t.objectStore(ll).clear()}))),c}yi(e){let t=0;return e.store(ri).X(((r,o)=>{t+=Oc(o)})).next((()=>{const r={byteSize:t};return e.store(wl).put(tf,r)}))}pi(e){const t=e.store(_l),r=e.store(Jn);return t.j().next((o=>L.forEach(o,(l=>{const c=IDBKeyRange.bound([l.userId,ui],[l.userId,l.lastAcknowledgedBatchId]);return r.j(li,c).next((d=>L.forEach(d,(p=>{_e(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=ii(this.serializer,p);return J0(e,l.userId,v).next((()=>{}))}))))}))))}wi(e){const t=e.store(Mo),r=e.store(ri);return e.store(ci).get(Ac).next((o=>{const l=[];return r.X(((c,d)=>{const p=new Ye(c),v=(function(T){return[0,Ht(T)]})(p);l.push(t.get(v).next((x=>x?L.resolve():(T=>t.put({targetId:0,path:Ht(T),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}Si(e,t){e.createObjectStore(xl,{keyPath:EE});const r=t.store(xl),o=new Xf,l=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:Ht(p)})}};return t.store(ri).X({Z:!0},((c,d)=>{const p=new Ye(c);return l(p.popLast())})).next((()=>t.store(jo).X({Z:!0},(([c,d,p],v)=>{const x=hr(d);return l(x.popLast())}))))}bi(e){const t=e.store(Oo);return t.X(((r,o)=>{const l=nl(o),c=H0(this.serializer,l);return t.put(c)}))}Di(e,t){const r=t.store(ri),o=[];return r.X(((l,c)=>{const d=t.store(bc),p=(function(T){return T.document?new ae(Ye.fromString(T.document.name).popFirst(5)):T.noDocument?ae.fromSegments(T.noDocument.path):T.unknownDocument?ae.fromSegments(T.unknownDocument.path):me(36783)})(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(v))})).next((()=>L.waitFor(o)))}Ci(e,t){const r=t.store(Jn),o=s_(this.serializer),l=new Jf(nh.Vi,this.serializer.gt);return r.j().next((c=>{const d=new Map;return c.forEach((p=>{var v;let x=(v=d.get(p.userId))!==null&&v!==void 0?v:Re();ii(this.serializer,p).keys().forEach((T=>x=x.add(T))),d.set(p.userId,x)})),L.forEach(d,((p,v)=>{const x=new Mt(v),T=eh.yt(this.serializer,x),S=l.getIndexManager(x),j=th.yt(x,this.serializer,S,l.referenceDelegate);return new i_(o,j,T,S).recalculateAndSaveOverlaysForDocumentKeys(new sf(t,Vn.ue),p).next()}))}))}}function $y(i){i.createObjectStore(Mo,{keyPath:wE}).createIndex(Df,xE,{unique:!0}),i.createObjectStore(Oo,{keyPath:"targetId"}).createIndex(Gv,_E,{unique:!0}),i.createObjectStore(ci)}const ps="IndexedDbPersistence",Ud=18e5,$d=5e3,qd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iI="main";class Zf{constructor(e,t,r,o,l,c,d,p,v,x,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=l,this.window=c,this.document=d,this.Mi=v,this.xi=x,this.Oi=T,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=S=>Promise.resolve(),!Zf.C())throw new he(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WT(this,o),this.Qi=t+iI,this.serializer=new W0(p),this.$i=new ws(this.Qi,this.Oi,new sI(this.serializer)),this.li=new VT,this.hi=new UT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=s_(this.serializer),this.Ti=new DT,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,x===!1&&Zt(ps,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,qd);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new Vn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ic(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ss(e))return ee(ps,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(ps,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return Ja(e).get(yo).next((t=>L.resolve(this.Xi(t))))}es(e){return ic(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,Ud)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=At(t,Lo);return r.j().next((o=>{const l=this.rs(o,Ud),c=o.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?L.resolve(!0):Ja(e).get(yo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,$d)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(G.FAILED_PRECONDITION,qd);return!1}}return!(!this.networkEnabled||!this.inForeground)||ic(e).j().next((r=>this.rs(r,$d).find((o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(ps,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[kl,Lo],(e=>{const t=new sf(e,Vn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>ic(e).j().next((t=>this.rs(t,Ud).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return th.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zT(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return eh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){ee(ps,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?LE:p===17?t0:p===16?ME:p===15?Of:p===14?e0:p===13?Zv:p===12?OE:p===11?Jv:void me(60245)})(this.Oi);let c;return this.$i.runTransaction(e,o,l,(d=>(c=new sf(d,this.ui?this.ui.next():Vn.ue),t==="readwrite-primary"?this.Ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new he(G.FAILED_PRECONDITION,$v);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ts(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ts(e){return Ja(e).get(yo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,$d)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(G.FAILED_PRECONDITION,qd)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ja(e).put(yo,t)}static C(){return ws.C()}Yi(e){const t=Ja(e);return t.get(yo).next((r=>this.Xi(r)?(ee(ps,"Releasing primary lease."),t.delete(yo)):L.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Zt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;xv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ee(ps,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zt(ps,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ja(i){return At(i,kl)}function ic(i){return At(i,Lo)}function oI(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=Re(),o=Re();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ep(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return xv()?8:Kv(wc())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new aI;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(To()<=Ue.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(To()<=Ue.DEBUG&&ee("QueryEngine","Query:",Io(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(To()<=Ue.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(t))):L.resolve())}ps(e,t){if(fy(t))return L.resolve(null);let r=On(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=hf(t,null,"F"),r=On(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Re(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const v=this.bs(t,d);return this.Ds(t,v,c,p.readTime)?this.ps(e,hf(t,null,"F")):this.vs(e,v,t,p)}))))})))))}ys(e,t,r,o){return fy(t)||o.isEqual(xe.min())?L.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,o)?L.resolve(null):(To()<=Ue.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(t)),this.vs(e,c,t,aE(o,gl)).next((d=>d)))}))}bs(e,t){let r=new Qe(w0(e));return t.forEach(((o,l)=>{Dl(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,r){return To()<=Ue.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Io(t)),this.gs.getDocumentsMatchingQuery(e,t,xn.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="LocalStore",lI=3e8;class uI{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new at(Se),this.Ms=new zr((l=>mi(l)),Rl),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function a_(i,e,t,r){return new uI(i,e,t,r)}async function l_(i,e){const t=Ce(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=Re();for(const v of o){c.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}for(const v of l){d.push(v.batchId);for(const x of v.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(r,p).next((v=>({Bs:v,removedBatchIds:c,addedBatchIds:d})))}))}))}function cI(i,e){const t=Ce(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,v,x){const T=v.batch,S=T.keys();let j=L.resolve();return S.forEach((U=>{j=j.next((()=>x.getEntry(p,U))).next((K=>{const $=v.docVersions.get(U);_e($!==null,48541),K.version.compareTo($)<0&&(T.applyToRemoteDocument(K,v),K.isValidDocument()&&(K.setReadTime(v.commitVersion),x.addEntry(K)))}))})),j.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Re();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function u_(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function hI(i,e){const t=Ce(i),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((x,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(l,x.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,x.addedDocuments,T))));let j=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?j=j.withResumeToken(wt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):x.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(x.resumeToken,r)),o=o.insert(T,j),(function(K,$,re){return K.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=lI?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,j,x)&&d.push(t.hi.updateTargetData(l,j))}));let p=_n(),v=Re();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),d.push(dI(l,c,e.documentUpdates).next((x=>{p=x.Ls,v=x.ks}))),!r.isEqual(xe.min())){const x=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(x)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function dI(i,e,t){let r=Re(),o=Re();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=_n();return t.forEach(((d,p)=>{const v=l.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ee(tp,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function fI(i,e){const t=Ce(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ui),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pI(i,e){const t=Ce(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((l=>l?(o=l,L.resolve(o)):t.hi.allocateTargetId(r).next((c=>(o=new jr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function _f(i,e,t){const r=Ce(i),o=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ss(c))throw c;ee(tp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function qy(i,e,t){const r=Ce(i);let o=xe.min(),l=Re();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,v,x){const T=Ce(p),S=T.Ms.get(x);return S!==void 0?L.resolve(T.Fs.get(S)):T.hi.getTargetData(v,x)})(r,c,On(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:xe.min(),t?l:Re()))).next((d=>(mI(r,eT(e),d),{documents:d,qs:l})))))}function mI(i,e,t){let r=i.xs.get(e)||xe.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}class Ky{constructor(){this.activeTargetIds=oT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c_{constructor(){this.Fo=new Ky,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ky,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="ConnectivityMonitor";class Hy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ee(Wy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ee(Wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function wf(){return oc===null?oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vI{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===Cc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,l){const c=wf(),d=this.Go(e,t.toUriEncodedString());ee(Kd,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:v}=new URL(d),x=bf(v);return this.jo(e,d,p,r,x).then((T=>(ee(Kd,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw mr(Kd,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",r),T}))}Jo(e,t,r,o,l,c){return this.Wo(e,t,r,o,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const r=yI[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class wI extends vI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,l){const c=wf();return new Promise(((d,p)=>{const v=new Nv;v.setWithCredentials(!0),v.listenOnce(Dv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ac.NO_ERROR:const T=v.getResponseJson();ee(Kt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case ac.TIMEOUT:ee(Kt,`RPC '${e}' ${c} timed out`),p(new he(G.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const S=v.getStatus();if(ee(Kt,`RPC '${e}' ${c} failed with status:`,S,"response text:",v.getResponseText()),S>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const U=j==null?void 0:j.error;if(U&&U.status&&U.message){const K=(function(re){const H=re.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(H)>=0?H:G.UNKNOWN})(U.status);p(new he(K,U.message))}else p(new he(G.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new he(G.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:c,l_:v.getLastErrorCode(),h_:v.getLastError()})}}finally{ee(Kt,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(o);ee(Kt,`RPC '${e}' ${c} sending request:`,o),v.send(t,"POST",x,r,15)}))}P_(e,t,r){const o=wf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ov(),d=jv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=l.join("");ee(Kt,`Creating RPC '${e}' stream ${o}: ${x}`,p);const T=c.createWebChannel(x,p);this.T_(T);let S=!1,j=!1;const U=new _I({Ho:$=>{j?ee(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(S||(ee(Kt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ee(Kt,`RPC '${e}' stream ${o} sending:`,$),T.send($))},Yo:()=>T.close()}),K=($,re,H)=>{$.listen(re,(Q=>{try{H(Q)}catch(te){setTimeout((()=>{throw te}),0)}}))};return K(T,Za.EventType.OPEN,(()=>{j||(ee(Kt,`RPC '${e}' stream ${o} transport opened.`),U.s_())})),K(T,Za.EventType.CLOSE,(()=>{j||(j=!0,ee(Kt,`RPC '${e}' stream ${o} transport closed`),U.__(),this.I_(T))})),K(T,Za.EventType.ERROR,($=>{j||(j=!0,mr(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),U.__(new he(G.UNAVAILABLE,"The operation could not be completed")))})),K(T,Za.EventType.MESSAGE,($=>{var re;if(!j){const H=$.data[0];_e(!!H,16349);const Q=H,te=(Q==null?void 0:Q.error)||((re=Q[0])===null||re===void 0?void 0:re.error);if(te){ee(Kt,`RPC '${e}' stream ${o} received error:`,te);const de=te.status;let ue=(function(b){const C=vt[b];if(C!==void 0)return N0(C)})(de),k=te.message;ue===void 0&&(ue=G.INTERNAL,k="Unknown error status: "+de+" with message "+te.message),j=!0,U.__(new he(ue,k)),T.close()}else ee(Kt,`RPC '${e}' stream ${o} received:`,H),U.a_(H)}})),K(d,Vv.STAT_EVENT,($=>{$.stat===Jd.PROXY?ee(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Jd.NOPROXY&&ee(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.o_()}),0),U}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof window<"u"?window:null}function yc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(i){return new ET(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="PersistentStream";class d_{constructor(e,t,r,o,l,c,d,p){this.Fi=e,this.w_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new h_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new he(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ee(Gy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ee(Gy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EI extends d_{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=ST(this.serializer,e),r=(function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?en(c.readTime):xe.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=pf(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=kc(p)?{documents:B0(l,p)}:{query:z0(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=j0(l,c.resumeToken);const v=df(l,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(xe.min())>0){d.readTime=Ko(l,c.snapshotVersion.toTimestamp());const v=df(l,c.expectedCount);v!==null&&(d.expectedCount=v)}return d})(this.serializer,e);const r=AT(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.k_(t)}}class TI extends d_{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=bT(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=pf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Dc(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class SI extends II{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,ff(t,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(G.UNKNOWN,l.toString())}))}Jo(e,t,r,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,ff(t,r),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(G.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class bI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zt(t),this._a=!1):ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="RemoteStore";class AI{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{Ei(this)&&(ee(_i,"Restarting streams for network reachability change."),await(async function(p){const v=Ce(p);v.Ia.add(4),await jl(v),v.Aa.set("Unknown"),v.Ia.delete(4),await sh(v)})(this))}))})),this.Aa=new bI(r,o)}}async function sh(i){if(Ei(i))for(const e of i.da)await e(!0)}async function jl(i){for(const e of i.da)await e(!1)}function f_(i,e){const t=Ce(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ip(t)?sp(t):Yo(t).x_()&&rp(t,e))}function np(i,e){const t=Ce(i),r=Yo(t);t.Ta.delete(e),r.x_()&&p_(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ei(t)&&t.Aa.set("Unknown"))}function rp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(i).H_(e)}function p_(i,e){i.Ra.$e(e),Yo(i).Y_(e)}function sp(i){i.Ra=new vT({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Yo(i).start(),i.Aa.aa()}function ip(i){return Ei(i)&&!Yo(i).M_()&&i.Ta.size>0}function Ei(i){return Ce(i).Ia.size===0}function m_(i){i.Ra=void 0}async function CI(i){i.Aa.set("Online")}async function PI(i){i.Ta.forEach(((e,t)=>{rp(i,e)}))}async function kI(i,e){m_(i),ip(i)?(i.Aa.la(e),sp(i)):i.Aa.set("Unknown")}async function RI(i,e,t){if(i.Aa.set("Online"),e instanceof V0&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})(i,e)}catch(r){ee(_i,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lc(i,r)}else if(e instanceof mc?i.Ra.Ye(e):e instanceof D0?i.Ra.it(e):i.Ra.et(e),!t.isEqual(xe.min()))try{const r=await u_(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const x=l.Ta.get(v);x&&l.Ta.set(v,x.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,v)=>{const x=l.Ta.get(p);if(!x)return;l.Ta.set(p,x.withResumeToken(wt.EMPTY_BYTE_STRING,x.snapshotVersion)),p_(l,p);const T=new jr(x.target,p,v,x.sequenceNumber);rp(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(r){ee(_i,"Failed to raise snapshot:",r),await Lc(i,r)}}async function Lc(i,e,t){if(!Ss(e))throw e;i.Ia.add(1),await jl(i),i.Aa.set("Offline"),t||(t=()=>u_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ee(_i,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await sh(i)}))}function g_(i,e){return e().catch((t=>Lc(i,t,e)))}async function Ol(i){const e=Ce(i),t=Ts(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ui;for(;NI(e);)try{const o=await fI(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,DI(e,o)}catch(o){await Lc(e,o)}y_(e)&&v_(e)}function NI(i){return Ei(i)&&i.Pa.length<10}function DI(i,e){i.Pa.push(e);const t=Ts(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function y_(i){return Ei(i)&&!Ts(i).M_()&&i.Pa.length>0}function v_(i){Ts(i).start()}async function VI(i){Ts(i).na()}async function jI(i){const e=Ts(i);for(const t of i.Pa)e.X_(t.mutations)}async function OI(i,e,t){const r=i.Pa.shift(),o=Kf.from(r,e,t);await g_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Ol(i)}async function MI(i,e){e&&Ts(i).Z_&&await(async function(r,o){if((function(c){return gT(c)&&c!==G.ABORTED})(o.code)){const l=r.Pa.shift();Ts(r).N_(),await g_(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ol(r)}})(i,e),y_(i)&&v_(i)}async function Qy(i,e){const t=Ce(i);t.asyncQueue.verifyOperationInProgress(),ee(_i,"RemoteStore received new credentials");const r=Ei(t);t.Ia.add(3),await jl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await sh(t)}async function LI(i,e){const t=Ce(i);e?(t.Ia.delete(2),await sh(t)):e||(t.Ia.add(2),await jl(t),t.Aa.set("Unknown"))}function Yo(i){return i.Va||(i.Va=(function(t,r,o){const l=Ce(t);return l.ia(),new EI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:CI.bind(null,i),e_:PI.bind(null,i),n_:kI.bind(null,i),J_:RI.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),ip(i)?sp(i):i.Aa.set("Unknown")):(await i.Va.stop(),m_(i))}))),i.Va}function Ts(i){return i.ma||(i.ma=(function(t,r,o){const l=Ce(t);return l.ia(),new TI(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:VI.bind(null,i),n_:MI.bind(null,i),ea:jI.bind(null,i),ta:OI.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await Ol(i)):(await i.ma.stop(),i.Pa.length>0&&(ee(_i,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,d=new op(e,t,c,o,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(i,e){if(Zt("AsyncQueue",`${e}: ${i}`),Ss(i))return new he(G.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(e){return new Ro(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=el(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ro;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.fa=new at(ae.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Wo{constructor(e,t,r,o,l,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Wo(e,t,Ro.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class BI{constructor(){this.queries=Yy(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=Ce(t),l=o.queries;o.queries=Yy(),l.forEach(((c,d)=>{for(const p of d.wa)p.onError(r)}))})(this,new he(G.ABORTED,"Firestore shutting down"))}}function Yy(){return new zr((i=>_0(i)),Xc)}async function __(i,e){const t=Ce(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(r=2):(l=new FI,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=ap(c,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&lp(t)}async function w_(i,e){const t=Ce(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function zI(i,e){const t=Ce(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(r=!0);c.ya=o}}r&&lp(t)}function UI(i,e,t){const r=Ce(i),o=r.queries.get(e);if(o)for(const l of o.wa)l.onError(t);r.queries.delete(e)}function lp(i){i.Da.forEach((e=>{e.next()}))}var xf,Jy;(Jy=xf||(xf={})).Fa="default",Jy.Cache="cache";class x_{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this.key=e}}class T_{constructor(e){this.key=e}}class $I{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=w0(e),this.eu=new Ro(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Xy,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,T)=>{const S=o.get(x),j=Dl(this.query,T)?T:null,U=!!S&&this.mutatedKeys.has(S.key),K=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let $=!1;S&&j?S.data.isEqual(j.data)?U!==K&&(r.track({type:3,doc:j}),$=!0):this.iu(S,j)||(r.track({type:2,doc:j}),$=!0,(p&&this.Xa(j,p)>0||v&&this.Xa(j,v)<0)&&(d=!0)):!S&&j?(r.track({type:0,doc:j}),$=!0):S&&!j&&(r.track({type:1,doc:S}),$=!0,(p||v)&&(d=!0)),$&&(j?(c=c.add(j),l=K?l.add(x):l.delete(x)):(c=c.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{eu:c,ru:r,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((x,T)=>(function(j,U){const K=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:$})}};return K(j)-K(U)})(x.type,T.type)||this.Xa(x.doc,T.doc))),this.su(r),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,v=p!==this.Ya;return this.Ya=p,c.length!==0||v?{snapshot:new Wo(this.query,e.eu,l,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Xy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new T_(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new E_(r))})),t}uu(e){this.Ha=e.qs,this.Za=Re();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const up="SyncEngine";class qI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KI{constructor(e){this.key=e,this.lu=!1}}class WI{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new zr((d=>_0(d)),Xc),this.Tu=new Map,this.Iu=new Set,this.du=new at(ae.comparator),this.Eu=new Map,this.Au=new Yf,this.Ru={},this.Vu=new Map,this.mu=vi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function HI(i,e,t=!0){const r=P_(i);let o;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await I_(r,e,t,!0),o}async function GI(i,e){const t=P_(i);await I_(t,e,!0,!1)}async function I_(i,e,t,r){const o=await pI(i.localStore,On(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await QI(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&f_(i.remoteStore,o),d}async function QI(i,e,t,r,o){i.gu=(T,S,j)=>(async function(K,$,re,H){let Q=$.view.nu(re);Q.Ds&&(Q=await qy(K.localStore,$.query,!1).then((({documents:k})=>$.view.nu(k,Q))));const te=H&&H.targetChanges.get($.targetId),de=H&&H.targetMismatches.get($.targetId)!=null,ue=$.view.applyChanges(Q,K.isPrimaryClient,te,de);return ev(K,$.targetId,ue._u),ue.snapshot})(i,T,S,j);const l=await qy(i.localStore,e,!0),c=new $I(e,l.qs),d=c.nu(l.documents),p=Vl.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),v=c.applyChanges(d,i.isPrimaryClient,p);ev(i,t,v._u);const x=new qI(e,t,c);return i.Pu.set(e,x),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),v.snapshot}async function XI(i,e,t){const r=Ce(i),o=r.Pu.get(e),l=r.Tu.get(o.targetId);if(l.length>1)return r.Tu.set(o.targetId,l.filter((c=>!Xc(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await _f(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&np(r.remoteStore,o.targetId),Ef(r,o.targetId)})).catch(wi)):(Ef(r,o.targetId),await _f(r.localStore,o.targetId,!0))}async function YI(i,e){const t=Ce(i),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),np(t.remoteStore,r.targetId))}async function JI(i,e,t){const r=k_(i);try{const o=await(function(c,d){const p=Ce(c),v=Ge.now(),x=d.reduce(((j,U)=>j.add(U.key)),Re());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let U=_n(),K=Re();return p.Os.getEntries(j,x).next(($=>{U=$,U.forEach(((re,H)=>{H.isValidDocument()||(K=K.add(re))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,U))).next(($=>{T=$;const re=[];for(const H of d){const Q=pT(H,T.get(H.key).overlayedDocument);Q!=null&&re.push(new bs(H.key,Q,h0(Q.value.mapValue),wn.exists(!0)))}return p.mutationQueue.addMutationBatch(j,v,re,d)})).next(($=>{S=$;const re=$.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(j,$.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:E0(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let v=c.Ru[c.currentUser.toKey()];v||(v=new at(Se)),v=v.insert(d,p),c.Ru[c.currentUser.toKey()]=v})(r,o.batchId,t),await Ml(r,o.changes),await Ol(r.remoteStore)}catch(o){const l=ap(o,"Failed to persist write");t.reject(l)}}async function S_(i,e){const t=Ce(i);try{const r=await hI(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(_e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?_e(c.lu,14607):o.removedDocuments.size>0&&(_e(c.lu,42227),c.lu=!1))})),await Ml(t,r,e)}catch(r){await wi(r)}}function Zy(i,e,t){const r=Ce(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Ce(c);p.onlineState=d;let v=!1;p.queries.forEach(((x,T)=>{for(const S of T.wa)S.va(d)&&(v=!0)})),v&&lp(p)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZI(i,e,t){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new at(ae.comparator);c=c.insert(l,dt.newNoDocument(l,xe.min()));const d=Re().add(l),p=new Zc(xe.min(),new Map,new at(Se),c,d);await S_(r,p),r.du=r.du.remove(l),r.Eu.delete(e),cp(r)}else await _f(r.localStore,e,!1).then((()=>Ef(r,e,t))).catch(wi)}async function e2(i,e){const t=Ce(i),r=e.batch.batchId;try{const o=await cI(t.localStore,e);A_(t,r,null),b_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ml(t,o)}catch(o){await wi(o)}}async function t2(i,e,t){const r=Ce(i);try{const o=await(function(c,d){const p=Ce(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return p.mutationQueue.lookupMutationBatch(v,d).next((T=>(_e(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(v,T)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,x,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>p.localDocuments.getDocuments(v,x)))}))})(r.localStore,e);A_(r,e,t),b_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ml(r,o)}catch(o){await wi(o)}}function b_(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function A_(i,e,t){const r=Ce(i);let o=r.Ru[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Ef(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||C_(i,r)}))}function C_(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(np(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),cp(i))}function ev(i,e,t){for(const r of t)r instanceof E_?(i.Au.addReference(r.key,e),n2(i,r)):r instanceof T_?(ee(up,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||C_(i,r.key)):me(19791,{yu:r})}function n2(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(ee(up,"New document in limbo: "+t),i.Iu.add(r),cp(i))}function cp(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new ae(Ye.fromString(e)),r=i.mu.next();i.Eu.set(r,new KI(t)),i.du=i.du.insert(t,r),f_(i.remoteStore,new jr(On(Nl(t.path)),r,"TargetPurposeLimboResolution",Vn.ue))}}async function Ml(i,e,t){const r=Ce(i),o=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,p)=>{c.push(r.gu(p,e,t).then((v=>{var x;if((v||t)&&r.isPrimaryClient){const T=v?!v.fromCache:(x=t==null?void 0:t.targetChanges.get(p.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(v){o.push(v);const T=ep.Es(p.targetId,v);l.push(T)}})))})),await Promise.all(c),r.hu.J_(o),await(async function(p,v){const x=Ce(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(v,(S=>L.forEach(S.Is,(j=>x.persistence.referenceDelegate.addReference(T,S.targetId,j))).next((()=>L.forEach(S.ds,(j=>x.persistence.referenceDelegate.removeReference(T,S.targetId,j)))))))))}catch(T){if(!Ss(T))throw T;ee(tp,"Failed to update sequence numbers: "+T)}for(const T of v){const S=T.targetId;if(!T.fromCache){const j=x.Fs.get(S),U=j.snapshotVersion,K=j.withLastLimboFreeSnapshotVersion(U);x.Fs=x.Fs.insert(S,K)}}})(r.localStore,l))}async function r2(i,e){const t=Ce(i);if(!t.currentUser.isEqual(e)){ee(up,"User change. New user:",e.toKey());const r=await l_(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new he(G.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ml(t,r.Bs)}}function s2(i,e){const t=Ce(i),r=t.Eu.get(e);if(r&&r.lu)return Re().add(r.key);{let o=Re();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function P_(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=S_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,e),e.hu.J_=zI.bind(null,e.eventManager),e.hu.pu=UI.bind(null,e.eventManager),e}function k_(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t2.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return a_(this.persistence,new o_,e.initialUser,this.serializer)}Du(e){return new Jf(nh.Vi,this.serializer)}bu(e){return new c_}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class i2 extends Al{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_e(this.persistence.referenceDelegate instanceof Mc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new t_(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Jf((r=>Mc.Vi(r,t)),this.serializer)}}class o2 extends Al{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await k_(this.Mu.syncEngine),await Ol(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return a_(this.persistence,new o_,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new t_(r,e.asyncQueue,t)}Fu(e,t){const r=new hE(t,this.persistence);return new cE(e.asyncQueue,r)}Du(e){const t=oI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Zf(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xI(),yc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new c_}}class Fc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r2.bind(null,this.syncEngine),await LI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BI})()}createDatastore(e){const t=rh(e.databaseInfo.databaseId),r=(function(l){return new wI(l)})(e.databaseInfo);return(function(l,c,d,p){return new SI(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,c,d){return new AI(r,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zy(this.syncEngine,t,0)),(function(){return Hy.C()?new Hy:new gI})())}createSyncEngine(e,t){return(function(o,l,c,d,p,v,x){const T=new WI(o,l,c,d,p,v);return x&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);ee(_i,"RemoteStore shutting down."),l.Ia.add(5),await jl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Fc.provider={build:()=>new Fc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class a2{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Mt.UNAUTHENTICATED,this.clientId=Pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ee(Is,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ee(Is,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ap(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Wd(i,e){i.asyncQueue.verifyOperationInProgress(),ee(Is,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await l_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{mr("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{mr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e}async function tv(i,e){i.asyncQueue.verifyOperationInProgress();const t=await l2(i);ee(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Qy(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Qy(e.remoteStore,o))),i._onlineComponents=e}async function l2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ee(Is,"Using user provided OfflineComponentProvider");try{await Wd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;mr("Error using user provided cache. Falling back to memory cache: "+t),await Wd(i,new Al)}}else ee(Is,"Using default OfflineComponentProvider"),await Wd(i,new i2(void 0));return i._offlineComponents}async function N_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ee(Is,"Using user provided OnlineComponentProvider"),await tv(i,i._uninitializedComponentsProvider._online)):(ee(Is,"Using default OnlineComponentProvider"),await tv(i,new Fc))),i._onlineComponents}function u2(i){return N_(i).then((e=>e.syncEngine))}async function Tf(i){const e=await N_(i),t=e.eventManager;return t.onListen=HI.bind(null,e.syncEngine),t.onUnlisten=XI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YI.bind(null,e.syncEngine),t}function c2(i,e,t={}){const r=new Or;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,v){const x=new R_({next:S=>{x.Ou(),c.enqueueAndForget((()=>w_(l,T)));const j=S.docs.has(d);!j&&S.fromCache?v.reject(new he(G.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&S.fromCache&&p&&p.source==="server"?v.reject(new he(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),T=new x_(Nl(d.path),x,{includeMetadataChanges:!0,ka:!0});return __(l,T)})(await Tf(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="firestore.googleapis.com",rv=!0;class sv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V_,this.ssl=rv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$T)throw new he(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new X1;switch(r.type){case"firstParty":return new eE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=nv.get(t);r&&(ee("ComponentProvider","Removing Datastore"),nv.delete(t),r.terminate())})(this),Promise.resolve()}}function h2(i,e,t,r={}){var o;i=Mr(i,hp);const l=bf(e),c=i._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Px(`https://${p}`),Dx("Firestore",!0)),c.host!==V_&&c.host!==p&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:r});if(!xc(v,d)&&(i._setSettings(v),r.mockUserToken)){let x,T;if(typeof r.mockUserToken=="string")x=r.mockUserToken,T=Mt.MOCK_USER;else{x=kx(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new he(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Mt(S)}i._authCredentials=new Y1(new Lv(x,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ih(this.firestore,e,this._query)}}class bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Pl(t,bt._jsonSchema))return new bt(e,r||null,new ae(Ye.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:_t("string",bt._jsonSchemaVersion),referencePath:_t("string")};class Cl extends ih{constructor(e,t,r){super(e,t,Nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ae(e))}withConverter(e){return new Cl(this.firestore,e,this._path)}}function Jo(i,e,...t){if(i=fl(i),arguments.length===1&&(e=Pf.newId()),iE("doc","path",e),i instanceof hp){const r=Ye.fromString(e,...t);return Gg(r),new bt(i,null,new ae(r))}{if(!(i instanceof bt||i instanceof Cl))throw new he(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ye.fromString(e,...t));return Gg(r),new bt(i.firestore,i instanceof Cl?i.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="AsyncQueue";class ov{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new h_(this,"async_queue_retry"),this.oc=()=>{const r=yc();r&&ee(iv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=yc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=yc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Or;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ss(e))throw e;ee(iv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Zt("INTERNAL UNHANDLED ERROR: ",av(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=op.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&me(47125,{hc:av(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function av(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class Ho extends hp{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new ov,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ov(e),this._firestoreClient=void 0,await e}}}function d2(i,e){const t=typeof i=="object"?i:F1(),r=typeof i=="string"?i:Cc,o=V1(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=Ax("firestore");l&&h2(o,...l)}return o}function dp(i){if(i._terminated)throw new he(G.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||j_(i),i._firestoreClient}function j_(i){var e,t,r;const o=i._freezeSettings(),l=(function(d,p,v,x){return new BE(d,p,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,D_(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new a2(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(i._componentsProvider))}function f2(i,e){mr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return p2(i,Fc.provider,{build:r=>new o2(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function p2(i,e,t){if((i=Mr(i,Ho))._firestoreClient||i._terminated)throw new he(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new he(G.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},j_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(wt.fromBase64String(e))}catch(t){throw new he(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pl(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:_t("string",Dn._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Pl(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:_t("string",fr._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pl(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pr(e.vectorValues);throw new he(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:_t("string",pr._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=/^__.*__$/;class g2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xo(e,this.data,t,this.fieldTransforms)}}function M_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:i})}}class pp{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Bc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(M_(this.Ec)&&m2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class y2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rh(e)}Dc(e,t,r,o=!1){return new pp({Ec:e,methodName:t,bc:r,path:ct.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v2(i){const e=i._freezeSettings(),t=rh(i._databaseId);return new y2(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _2(i,e,t,r,o,l={}){const c=i.Dc(l.merge||l.mergeFields?2:0,e,t,o);z_("Data must be an object, but it was:",c,r);const d=F_(r,c);let p,v;if(l.merge)p=new jn(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const x=[];for(const T of l.mergeFields){const S=w2(e,T,t);if(!c.contains(S))throw new he(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);E2(x,S)||x.push(S)}p=new jn(x),v=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,v=c.fieldTransforms;return new g2(new cn(d),p,v)}function L_(i,e){if(B_(i=fl(i)))return z_("Unsupported field value:",e,i),F_(i,e);if(i instanceof O_)return(function(r,o){if(!M_(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const d of r){let p=L_(d,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,o){if((r=fl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ge.fromDate(r);return{timestampValue:Ko(o.serializer,l)}}if(r instanceof Ge){const l=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ko(o.serializer,l)}}if(r instanceof fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:j0(o.serializer,r._byteString)};if(r instanceof bt){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gf(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof pr)return(function(c,d){return{mapValue:{fields:{[Lf]:{stringValue:Ff},[Fo]:{arrayValue:{values:c.toArray().map((v=>{if(typeof v!="number")throw d.wc("VectorValues must only contain numeric values.");return Uf(d.serializer,v)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${kf(r)}`)})(i,e)}function F_(i,e){const t={};return n0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(i,((r,o)=>{const l=L_(o,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function B_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ge||i instanceof fr||i instanceof Dn||i instanceof bt||i instanceof O_||i instanceof pr)}function z_(i,e,t){if(!B_(t)||!zv(t)){const r=kf(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function w2(i,e,t){if((e=fl(e))instanceof fp)return e._internalPath;if(typeof e=="string")return U_(i,e);throw Bc("Field path arguments must be of type string or ",i,!1,void 0,t)}const x2=new RegExp("[~\\*/\\[\\]]");function U_(i,e,t){if(e.search(x2)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new fp(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Bc(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new he(G.INVALID_ARGUMENT,d+i+p)}function E2(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(q_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T2 extends $_{data(){return super.data()}}function q_(i,e){return typeof e=="string"?U_(i,e):e instanceof fp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S2{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xi(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Fo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((c=>ot(c.doubleValue)));return new pr(l)}convertGeoPoint(e){return new fr(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Fr(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);_e(K0(r),9688,{name:e});const o=new pi(r.get(1),r.get(3)),l=new ae(r.popFirst(5));return o.isEqual(t)||Zt(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class di extends $_{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(q_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=di._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:_t("string",di._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class vc extends di{data(e={}){return super.data(e)}}class No{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new vc(this._firestore,this._userDataWriter,r.key,r,new rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new vc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new rl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,x=-1;return d.type!==0&&(v=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),x=c.indexOf(d.doc.key)),{type:A2(d.type),doc:p,oldIndex:v,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function A2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(i){i=Mr(i,bt);const e=Mr(i.firestore,Ho);return c2(dp(e),i._key).then((t=>G_(e,i,t)))}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:_t("string",No._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class W_ extends S2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function mp(i,e,t){i=Mr(i,bt);const r=Mr(i.firestore,Ho),o=b2(i.converter,e,t);return C2(r,[_2(v2(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,wn.none())])}function H_(i,...e){var t,r,o;i=fl(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||lv(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(lv(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,v,x;if(i instanceof bt)v=Mr(i.firestore,Ho),x=Nl(i._key.path),p={next:T=>{e[c]&&e[c](G_(v,i,T))},error:e[c+1],complete:e[c+2]};else{const T=Mr(i,ih);v=Mr(T.firestore,Ho),x=T._query;const S=new W_(v);p={next:j=>{e[c]&&e[c](new No(v,S,T,j))},error:e[c+1],complete:e[c+2]},I2(i._query)}return(function(S,j,U,K){const $=new R_(K),re=new x_(j,$,U);return S.asyncQueue.enqueueAndForget((async()=>__(await Tf(S),re))),()=>{$.Ou(),S.asyncQueue.enqueueAndForget((async()=>w_(await Tf(S),re)))}})(dp(v),x,d,p)}function C2(i,e){return(function(r,o){const l=new Or;return r.asyncQueue.enqueueAndForget((async()=>JI(await u2(r),o,l))),l.promise})(dp(i),e)}function G_(i,e,t){const r=t.docs.get(e._key),o=new W_(i);return new di(i,o,e._key,r,new rl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Qo=o})(L1),Tc(new pl("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ho(new J1(r.getProvider("auth-internal")),new tE(c,r.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pi(v.options.projectId,x)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ko($g,qg,e),ko($g,qg,"esm2017")})();var P2="firebase",k2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ko(P2,k2,"app");const R2={apiKey:"AIzaSyBWvyaFWIL0PV4VD33BJNQl3qP2k1IbQus",authDomain:"rutine-f2ac1.firebaseapp.com",projectId:"rutine-f2ac1",storageBucket:"rutine-f2ac1.firebasestorage.app",messagingSenderId:"161382347749",appId:"1:161382347749:web:a07ebafa5bdd35d480350c",measurementId:"G-BNC489N193"},N2=Cv(R2),Ti=d2(N2);f2(Ti).catch(i=>{console.warn("Offline persistence failed:",i.code)});const Zo=i=>i.toLowerCase().replace(/[.#$[\]]/g,"_"),Q_="users",D2=async(i,e)=>{try{const t=Zo(i),r=Jo(Ti,Q_,t),o=await K_(r);if(!o.exists())return{success:!1,error:"No account found with this email. Please create an account first."};const l=o.data();return l.password===e?{success:!0,user:{email:l.email,displayName:l.displayName||i.split("@")[0],createdAt:l.createdAt}}:{success:!1,error:"Incorrect password. Please try again."}}catch(t){return console.error("Sign in error:",t),{success:!1,error:"Sign in failed. Please try again."}}},V2=async(i,e)=>{try{const t=Zo(i),r=Jo(Ti,Q_,t);if((await K_(r)).exists())return{success:!1,error:"An account with this email already exists. Please sign in instead."};if(e.length<6)return{success:!1,error:"Password must be at least 6 characters long."};const l={email:i.toLowerCase(),password:e,displayName:i.split("@")[0],createdAt:Date.now()};return await mp(r,l),{success:!0,isNewUser:!0,user:{email:l.email,displayName:l.displayName,createdAt:l.createdAt}}}catch(t){return console.error("Create account error:",t),{success:!1,error:"Account creation failed. Please try again."}}},j2=()=>{const i=localStorage.getItem("lft_user");if(i)try{return JSON.parse(i)}catch{return null}return null},uv=i=>{localStorage.setItem("lft_user",JSON.stringify(i))},O2=()=>{localStorage.removeItem("lft_user")},X_=J.createContext(void 0),M2=({children:i})=>{const[e,t]=J.useState(null),[r,o]=J.useState(!0),[l,c]=J.useState(null);J.useEffect(()=>{const x=j2();x&&t(x),o(!1)},[]);const d=async(x,T)=>{o(!0),c(null);const S=await D2(x,T);return S.success&&S.user?(t(S.user),uv(S.user),o(!1),!0):(c(S.error||"Sign in failed"),o(!1),!1)},p=async(x,T)=>{o(!0),c(null);const S=await V2(x,T);return S.success&&S.user?(t(S.user),uv(S.user),o(!1),!0):(c(S.error||"Account creation failed"),o(!1),!1)},v=()=>{t(null),O2()};return y.jsx(X_.Provider,{value:{user:e,isLoading:r,error:l,signIn:d,createAccount:p,logout:v},children:i})},Ll=()=>{const i=J.useContext(X_);if(!i)throw new Error("useAuth must be used within AuthProvider");return i},L2=()=>{const{signIn:i,createAccount:e,isLoading:t,error:r}=Ll(),[o,l]=J.useState("signin"),[c,d]=J.useState(""),[p,v]=J.useState(""),[x,T]=J.useState(""),[S,j]=J.useState(""),U=async $=>{if($.preventDefault(),j(""),!c.trim()){j("Please enter your email");return}if(!c.includes("@")){j("Please enter a valid email");return}if(!p.trim()){j("Please enter your password");return}if(o==="create"){if(p.length<6){j("Password must be at least 6 characters");return}if(p!==x){j("Passwords do not match");return}await e(c.trim(),p)}else await i(c.trim(),p)},K=$=>{l($),j(""),T("")};return y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-md",children:y.jsxs("div",{className:"bg-bg-card border border-border rounded-2xl p-8 shadow-2xl",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Study",y.jsx("span",{className:"bg-gradient-to-r from-accent-green to-accent-blue bg-clip-text text-transparent",children:"Goals"})]}),y.jsx("p",{className:"text-gray-400",children:o==="signin"?"Welcome back!":"Create your account"})]}),y.jsxs("div",{className:"flex mb-6 bg-bg-hover rounded-lg p-1",children:[y.jsx("button",{type:"button",onClick:()=>K("signin"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="signin"?"bg-accent-blue text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Sign In"}),y.jsx("button",{type:"button",onClick:()=>K("create"),className:`flex-1 py-2.5 px-4 rounded-md text-sm font-medium transition-all ${o==="create"?"bg-accent-green text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Create Account"})]}),y.jsxs("form",{onSubmit:U,className:"space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),y.jsx("input",{type:"email",value:c,onChange:$=>d($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"your@email.com",autoComplete:"email"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),y.jsx("input",{type:"password",value:p,onChange:$=>v($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/20 transition-all",placeholder:"",autoComplete:o==="create"?"new-password":"current-password"})]}),o==="create"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),y.jsx("input",{type:"password",value:x,onChange:$=>T($.target.value),className:"w-full px-4 py-3 bg-bg-hover border border-border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all",placeholder:"",autoComplete:"new-password"})]}),(S||r)&&y.jsx("div",{className:"p-3 bg-accent-red/10 border border-accent-red/50 rounded-lg text-accent-red text-sm",children:S||r}),y.jsx(Ft,{type:"submit",className:"w-full",size:"lg",isLoading:t,children:o==="signin"?"Sign In":"Create Account"})]}),y.jsx("p",{className:"text-center text-gray-500 text-sm mt-6",children:o==="signin"?"Don't have an account? Click 'Create Account' above.":'Already have an account? Click "Sign In" above.'})]})})})};var F2=mv();const Do={table1:["Phy","Chem","Bio","GK","English"],table2:["Morning Session","Noon Session","Night Session","Exam"]},B2=[{key:"mqb",name:"MQB"},{key:"ret",name:"Retina QB"},{key:"med",name:"Meditrics"},{key:"camp",name:"Campus Exam"},{key:"week",name:"Weekly Exam"},{key:"rev",name:"Revision Class"},{key:"new",name:"Lecture"},{key:"secret",name:"Secret Files"}],Co={customStudyTypes:[...B2],countdownSettings:{title:"Countdown to Goal",targetDate:"2025-12-31",targetTime:"00:00"},subjects:Do.table1},zc={table1:{},table2:{},targetCards:[]},Y_=i=>`data/${i}/studyProgress/data_v4`,J_=i=>`data/${i}/studyProgress/settings_v1`,z2=(i,e,t)=>{const r=Zo(i),o=Jo(Ti,Y_(r));return H_(o,l=>{if(l.exists()){const c=l.data();e({completedTopics:c.completedTopics||{},tableData:c.tableData||{...zc}})}else e({completedTopics:{},tableData:{...zc}})},t)},U2=(i,e,t)=>{const r=Zo(i),o=Jo(Ti,J_(r));return H_(o,l=>{if(l.exists()){const c=l.data();e({customStudyTypes:c.customStudyTypes||Co.customStudyTypes,countdownSettings:c.countdownSettings||Co.countdownSettings,subjects:c.subjects||Co.subjects})}else e({...Co})},t)},$2=async(i,e,t)=>{const r=Zo(i),o=Jo(Ti,Y_(r));await mp(o,{tableData:e,completedTopics:t},{merge:!1})},q2=async(i,e)=>{const t=Zo(i),r=Jo(Ti,J_(t));await mp(r,e,{merge:!0})},Z_=J.createContext(void 0),K2=({children:i})=>{const[e,t]=J.useState([]),r=J.useCallback((l,c)=>{const d=Date.now().toString();t(v=>[...v,{id:d,type:l,message:c}]),setTimeout(()=>{t(v=>v.filter(x=>x.id!==d))},l==="syncing"?4e3:l==="error"?3500:2500)},[]),o=J.useCallback(l=>{t(c=>c.filter(d=>d.id!==l))},[]);return y.jsx(Z_.Provider,{value:{toasts:e,showToast:r,removeToast:o},children:i})},ew=()=>{const i=J.useContext(Z_);if(!i)throw new Error("useToastContext must be used within ToastProvider");return i},tw=J.createContext(void 0),W2=({children:i})=>{const{user:e}=Ll(),{showToast:t}=ew(),[r,o]=J.useState({...zc}),[l,c]=J.useState({}),[d,p]=J.useState({...Co}),[v,x]=J.useState(!0),T=J.useRef(null);J.useEffect(()=>{if(!e){o({...zc}),c({}),p({...Co}),x(!1);return}x(!0);const k=z2(e.email,b=>{o(b.tableData),c(b.completedTopics),x(!1)},b=>{console.error("Data subscription error:",b),t("error","Failed to load data"),x(!1)}),E=U2(e.email,b=>p(b),b=>console.error("Settings error:",b));return()=>{k(),E()}},[e,t]);const S=J.useCallback((k,E)=>{e&&(T.current&&clearTimeout(T.current),T.current=setTimeout(async()=>{try{t("syncing","Syncing..."),await $2(e.email,k,E),t("success","Synced")}catch{t("error","Sync failed")}},1e3))},[e,t]),j=J.useCallback((k,E)=>{c(b=>{const C={...b,[k]:{...b[k],...E}};return S(r,C),C})},[r,S]),U=J.useCallback((k,E,b,C,R)=>{const D=R||`topic_${Date.now().toString(36)}${Math.random().toString(36).substr(2,9)}`,A=k;return o(oe=>{const be=JSON.parse(JSON.stringify(oe));return be[A][E]||(be[A][E]={}),be[A][E][b]||(be[A][E][b]=[]),be[A][E][b].push(D),be}),c(oe=>{const be={...oe,[D]:C};return setTimeout(()=>{o(We=>(S(We,be),We))},0),be}),D},[S]),K=J.useCallback(k=>{o(E=>{const b=JSON.parse(JSON.stringify(E));return["table1","table2"].forEach(C=>{Object.keys(b[C]).forEach(R=>{Object.keys(b[C][R]).forEach(D=>{b[C][R][D]=b[C][R][D].filter(A=>A!==k)})})}),b}),c(E=>{const{[k]:b,...C}=E;return setTimeout(()=>{o(R=>(S(R,C),R))},0),C})},[S]),$=J.useCallback(k=>{o(k),S(k,l)},[l,S]),re=J.useCallback(async k=>{if(e){p(k);try{await q2(e.email,k),t("success","Settings saved")}catch{t("error","Failed to save settings")}}},[e,t]),H=J.useCallback((k,E)=>{o(b=>{if(b[k][E])return b;const C={...b,[k]:{...b[k],[E]:{}}};return S(C,l),C})},[l,S]),Q=J.useCallback((k,E,b)=>{const C=`target_${Date.now().toString(36)}${Math.random().toString(36).substr(2,5)}`,R={id:C,title:k,startDate:E,endDate:b,data:{}};return o(D=>{const A={...D,targetCards:[...D.targetCards||[],R]};return S(A,l),A}),C},[l,S]),te=J.useCallback((k,E)=>{o(b=>{const C=JSON.parse(JSON.stringify(b));return C.targetCards=(C.targetCards||[]).map(R=>R.id===k?{...R,...E}:R),S(C,l),C})},[l,S]),de=J.useCallback(k=>{o(E=>{const b=JSON.parse(JSON.stringify(E));return delete b.table1[k],b.targetCards=(b.targetCards||[]).filter(C=>C.id!==k),S(b,l),b})},[l,S]),ue=J.useCallback((k,E)=>{const b=k;o(C=>{const R=JSON.parse(JSON.stringify(C));return delete R[b][E],S(R,l),R})},[l,S]);return y.jsx(tw.Provider,{value:{tableData:r,completedTopics:l,settings:d,isLoading:v,updateTopic:j,addTopic:U,deleteTopic:K,updateTableData:$,updateSettings:re,addCard:H,deleteCard:ue,addTargetCard:Q,updateTargetCard:te,deleteTargetCard:de},children:i})},Ii=()=>{const i=J.useContext(tw);if(!i)throw new Error("useData must be used within DataProvider");return i},cv=({tableId:i,date:e,dateData:t,completedTopics:r,onAddTopic:o,onEditTopic:l,onDeleteCard:c,onDateChange:d})=>{const{tableData:p,updateTableData:v,updateTopic:x}=Ii(),[T,S]=J.useState(!1),[j,U]=J.useState(null),K=Do[i],{totalTopics:$,completedCount:re,percentage:H}=J.useMemo(()=>{let E=0,b=0;return K.forEach(C=>{(t[C]||[]).forEach(D=>{const A=r[D];A&&(E++,A.progress===100&&b++)})}),{totalTopics:E,completedCount:b,percentage:E>0?b/E*100:0}},[K,t,r]),Q=J.useMemo(()=>{if(i!=="table2")return[];const E=[],b=new Set;return Object.values(t).forEach(C=>{C.forEach(R=>b.add(R))}),p.targetCards&&p.targetCards.forEach(C=>{const R=(C.data,C.title),A=C.data&&Object.keys(C.data).length>0?C.data:p.table1[C.id]||{};Object.entries(A||{}).forEach(([oe,be])=>{Array.isArray(be)&&be.forEach(We=>{const De=r[We];De&&!b.has(We)&&E.push({topicId:We,topic:De,targetTitle:R,column:oe})})})}),E},[i,p,t,r]),te=(E,b)=>{const C=JSON.parse(JSON.stringify(p));C.table2[e]||(C.table2[e]={}),C.table2[e][b]||(C.table2[e][b]=[]),C.table2[e][b].push(E),v(C),S(!1),U(null)},de=()=>H===100?"from-green-500 to-emerald-400":H>=75?"from-blue-500 to-cyan-400":H>=50?"from-yellow-500 to-amber-400":H>=25?"from-orange-500 to-red-400":"from-gray-600 to-gray-500",ue=[0,20,40,60,80,100],k=(E,b,C)=>{E.stopPropagation();const D=(ue.indexOf(b.progress)+1)%ue.length;x(C,{progress:ue[D]})};return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden animate-slideUp",children:[y.jsxs("div",{className:"px-5 py-4 border-b border-white/10",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[y.jsx("h3",{contentEditable:!0,suppressContentEditableWarning:!0,className:"text-lg font-bold text-white flex-1 truncate",onBlur:E=>{var C;const b=(C=E.currentTarget.textContent)==null?void 0:C.trim();b&&b!==e&&d(e,b)},children:e}),y.jsx("button",{onClick:()=>c(i,e),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete card",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full bg-gradient-to-r ${de()} rounded-full transition-all duration-500 ease-out`,style:{width:`${H}%`}})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:`text-sm font-bold ${H===100?"text-green-400":"text-white"}`,children:[Math.round(H),"%"]}),y.jsxs("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-0.5 rounded-full",children:[re,"/",$]})]})]})})]}),y.jsx("div",{className:"p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:K.map(E=>(t[E]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-3 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:E}),y.jsxs("div",{className:"space-y-2 md:space-y-1",children:[(t[E]||[]).map(b=>{const C=r[b];return C?y.jsxs("div",{onClick:R=>k(R,C,b),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${C.progress===100?"bg-green-500":"bg-gray-600"} ${C.progress>0&&C.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${C.progress===100?"text-gray-500 line-through":"text-white"}`,children:C.name}),C.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:C.note}),C.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",C.timedNote]}),C.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",C.estimatedTime]})]}),y.jsxs("span",{className:`text-xs font-mono font-medium ${C.progress===100?"text-green-500":"text-gray-500"}`,children:[C.progress,"%"]}),y.jsx("button",{onClick:R=>{R.stopPropagation(),l(b)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},b):null}),(t[E]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},E))}),y.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[y.jsx("button",{onClick:()=>o(i,e),className:"flex-1 py-2.5 border-2 border-dashed border-white/20 rounded-xl text-gray-400 font-semibold hover:text-accent-blue hover:border-accent-blue hover:bg-accent-blue/5 transition-all",children:"+ Add New Topic"}),i==="table2"&&y.jsx("button",{onClick:()=>S(!0),className:"pull-button px-4 py-2.5 rounded-xl font-semibold bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all",children:" Pull"})]}),T&&F2.createPortal(y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:()=>{S(!1),U(null)},children:y.jsxs("div",{className:"w-full max-w-lg bg-bg-card border border-border rounded-xl shadow-2xl overflow-hidden",onClick:E=>E.stopPropagation(),children:[y.jsx("div",{className:"px-5 py-4 border-b border-border",children:y.jsx("h3",{className:"text-lg font-semibold text-white",children:" Pull from Targets"})}),y.jsxs("div",{className:"p-5 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Add to Session"}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:K.map(E=>y.jsx("button",{onClick:()=>U(E),className:`p-2.5 rounded-lg text-sm font-medium transition-all ${j===E?"bg-accent-blue text-white":"bg-bg-hover border border-border text-gray-300 hover:border-accent-blue"}`,children:E},E))})]}),j&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Available Topics (",Q.length,")"]}),y.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:[Q.map(({topicId:E,topic:b,targetTitle:C,column:R})=>y.jsxs("button",{onClick:()=>te(E,j),className:"w-full p-3 text-left bg-bg-hover border border-border rounded-lg hover:border-accent-purple transition-all group",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${b.progress===100?"bg-green-500":"bg-gray-500"}`}),y.jsx("span",{className:"text-white font-medium text-sm",children:b.name})]}),y.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-gray-400 group-hover:bg-accent-purple/20 group-hover:text-accent-purple",children:"+ Add"})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R,"  ",C]})]},E)),Q.length===0&&y.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"All topics already added"})]})]})]}),y.jsx("div",{className:"px-5 py-4 border-t border-border bg-black/30 flex justify-end",children:y.jsx("button",{onClick:()=>{S(!1),U(null)},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Close"})})]})}),document.body)]})},hv=({cardMeta:i,dateData:e,completedTopics:t,onAddTopic:r,onEditTopic:o,onEditCard:l,onDeleteCard:c})=>{const{updateTopic:d,settings:p}=Ii(),v=p.subjects&&p.subjects.length>0?p.subjects:Do.table1,{totalTopics:x,completedCount:T,percentage:S}=J.useMemo(()=>{let re=0,H=0;return v.forEach(Q=>{(e[Q]||[]).forEach(de=>{const ue=t[de];ue&&(re++,ue.progress===100&&H++)})}),{totalTopics:re,completedCount:H,percentage:re>0?H/re*100:0}},[v,e,t]),j=J.useMemo(()=>{const re=new Date;re.setHours(0,0,0,0);const H=new Date(i.startDate),Q=new Date(i.endDate),te=Math.ceil((Q.getTime()-H.getTime())/(1e3*60*60*24)),de=Math.ceil((Q.getTime()-re.getTime())/(1e3*60*60*24)),ue=te-de,k=te>0?Math.min(100,Math.max(0,ue/te*100)):0;return{totalDays:te,daysRemaining:Math.max(0,de),timeProgress:k}},[i.startDate,i.endDate]),U=[0,20,40,60,80,100],K=(re,H,Q)=>{re.stopPropagation();const de=(U.indexOf(H.progress)+1)%U.length;d(Q,{progress:U[de]})},$=re=>new Date(re).toLocaleDateString("en-US",{month:"short",day:"numeric"});return y.jsxs("div",{className:"bg-bg-card border border-border rounded-xl mb-4 overflow-hidden",children:[y.jsxs("div",{className:"px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3",children:[y.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:flex-1 gap-2",children:[y.jsxs("h3",{className:"text-base font-bold text-white flex-1 truncate flex items-center gap-2",children:[y.jsx("span",{className:"text-accent-purple",children:""}),i.title]}),y.jsx("button",{onClick:()=>l(i),className:"p-1.5 text-gray-400 hover:text-accent-purple hover:bg-accent-purple/10 rounded-lg transition-all",title:"Edit target",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),y.jsx("button",{onClick:()=>c(i.id),className:"sm:hidden p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),y.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3 w-full sm:w-auto text-xs",children:[y.jsxs("span",{className:"text-xs font-semibold px-3 py-1.5 rounded-lg bg-accent-purple/10 text-accent-purple border border-accent-purple/20 shadow-[0_0_10px_-3px_rgba(168,85,247,0.3)] flex items-center gap-1.5",children:[y.jsx("span",{className:"text-white/70",children:$(i.startDate)}),y.jsx("span",{className:"text-accent-purple",children:""}),y.jsx("span",{className:"text-white",children:$(i.endDate)})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"font-bold px-2 py-1 rounded-lg bg-gray-500/20 text-gray-300",title:"Total days",children:[j.totalDays,"d"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${j.daysRemaining<=3?"bg-red-500/20 text-red-400":j.daysRemaining<=7?"bg-yellow-500/20 text-yellow-400":"bg-accent-blue/20 text-accent-blue"}`,title:"Days remaining",children:[j.daysRemaining,"d left"]}),y.jsxs("span",{className:`font-bold px-2 py-1 rounded-lg ${S===100?"bg-green-500/20 text-green-400":"bg-white/10 text-gray-300"}`,children:[T,"/",x]}),y.jsx("button",{onClick:()=>c(i.id),className:"hidden sm:block p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),y.jsx("div",{className:"px-4 pb-3",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all ${S===100?"bg-green-500":"bg-gradient-to-r from-accent-blue to-accent-purple"}`,style:{width:`${S}%`}})}),y.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(S),"%"]})]})}),y.jsx("div",{className:"px-3 pb-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:v.map(re=>(e[re]||[]).length===0?null:y.jsxs("div",{className:"bg-gray-800/40 rounded-lg p-2 md:p-2 min-h-[60px] border border-white/5",children:[y.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide px-1 md:px-0",children:re}),y.jsxs("div",{className:"space-y-2 md:space-y-1",children:[(e[re]||[]).map(Q=>{const te=t[Q];return te?y.jsxs("div",{onClick:de=>K(de,te,Q),className:"w-full text-left p-2 bg-bg-card border border-border rounded-lg hover:border-accent-purple transition-all group flex items-center gap-2 cursor-pointer relative pr-8",children:[y.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 transition-colors mt-1 ${te.progress===100?"bg-green-500":"bg-gray-600"} ${te.progress>0&&te.progress<100?"border-2 border-accent-blue bg-transparent":""}`}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsx("span",{className:`text-sm truncate ${te.progress===100?"text-gray-500 line-through":"text-white"}`,children:te.name}),te.note&&y.jsx("span",{className:"text-[10px] text-gray-500 truncate italic",children:te.note}),te.timedNote&&y.jsxs("span",{className:"text-[10px] text-accent-orange truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",te.timedNote]}),te.estimatedTime&&y.jsxs("span",{className:"text-[10px] text-accent-purple truncate font-mono flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-xs",children:""})," ",te.estimatedTime]})]}),y.jsxs("span",{className:`text-xs font-mono ${te.progress===100?"text-green-500":"text-gray-500"}`,children:[te.progress,"%"]}),y.jsx("button",{onClick:de=>{de.stopPropagation(),o(Q)},className:"opacity-0 group-hover:opacity-100 absolute right-2 p-1 text-gray-400 hover:text-accent-blue bg-bg-card/80 rounded transition-all",title:"Edit details",children:y.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},Q):null}),(e[re]||[]).length===0&&y.jsx("p",{className:"text-xs text-gray-600 italic",children:"No topics"})]})]},re))}),y.jsx("div",{className:"px-3 pb-3",children:y.jsx("button",{onClick:()=>r("table1",i.id),className:"w-full py-2 text-sm border border-dashed border-white/20 rounded-lg text-gray-400 font-medium hover:text-accent-green hover:border-accent-green hover:bg-accent-green/5 transition-all",children:"+ Add Topic"})})]})},H2=({activeTab:i,onTabChange:e})=>{const t=[{id:"dashboard",label:"Home",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"targets",label:"Targets",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"daily",label:"Daily",icon:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"settings",label:"Settings",icon:y.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return y.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-bg-card border-t border-white/10 flex items-center justify-around shadow-[0_-5px_20px_-5px_rgba(0,0,0,0.3)] z-50 pt-3 pb-[env(safe-area-inset-bottom)] animate-slideUp",children:t.map(r=>y.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center gap-1 w-full h-auto p-2 rounded-xl transition-all duration-300 ${i===r.id?"text-accent-blue":"text-gray-500 hover:text-gray-300"}`,children:[y.jsx("div",{className:`p-1 rounded-xl transition-all ${i===r.id?"bg-accent-blue/10 scale-110":""}`,children:r.icon}),y.jsx("span",{className:"text-[10px] font-medium",children:r.label})]},r.id))})},nw=({onLogout:i})=>{var R,D;const{user:e,logout:t}=Ll(),{settings:r,updateSettings:o}=Ii(),[l,c]=J.useState("account"),[d,p]=J.useState([]),[v,x]=J.useState([]),[T,S]=J.useState(""),[j,U]=J.useState(""),[K,$]=J.useState("");J.useEffect(()=>{p(r.customStudyTypes||[]),x(r.subjects||[]),S(r.countdownSettings.title),U(r.countdownSettings.targetDate),$(r.countdownSettings.targetTime)},[r]);const re=()=>{const A=d.filter(oe=>oe.name.trim());o({...r,customStudyTypes:A})},H=()=>{const A=v.filter(oe=>oe.trim());o({...r,subjects:A})},Q=()=>{x([...v,""])},te=A=>{x(v.filter((oe,be)=>be!==A))},de=(A,oe)=>{const be=[...v];be[A]=oe,x(be)},ue=()=>{o({...r,countdownSettings:{title:T,targetDate:j,targetTime:K}})},k=()=>{p([...d,{key:`custom_${Date.now()}`,name:""}])},E=A=>{p(d.filter(oe=>oe.key!==A))},b=()=>{i&&i(),t()},C=[{id:"account",label:"Account",icon:""},{id:"custom",label:"Custom",icon:""},{id:"countdown",label:"Ref",icon:""},{id:"dev",label:"Dev",icon:""}];return y.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden rounded-2xl bg-bg-card border border-white/10",children:[y.jsxs("div",{className:"w-full md:w-60 bg-black/20 border-b md:border-b-0 md:border-r border-white/5 p-4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible shrink-0 no-scrollbar",children:[y.jsx("h3",{className:"hidden md:block text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 px-2",children:"Settings"}),C.map(A=>y.jsxs("button",{onClick:()=>c(A.id),className:`flex items-center gap-2 md:gap-3 px-3 py-2 md:px-3 md:py-2.5 rounded-xl text-sm font-semibold transition-all whitespace-nowrap ${l===A.id?"bg-accent-blue/10 text-accent-blue border border-accent-blue/20":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[y.jsx("span",{className:"text-lg",children:A.icon}),y.jsx("span",{className:"hidden md:inline",children:A.label==="Ref"?"Countdown":A.label}),y.jsx("span",{className:"md:hidden",children:A.label})]},A.id)),y.jsx("div",{className:"hidden md:block mt-auto pt-4 border-t border-white/5",children:y.jsx("div",{className:"px-2 mb-2 text-[10px] text-gray-600",children:"StudyGoals V1.0"})})]}),y.jsxs("div",{className:"flex-1 p-4 md:p-6 bg-gradient-to-br from-bg-card to-bg-card/50 overflow-y-auto custom-scrollbar",children:[l==="account"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"My Account"}),y.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10",children:[y.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-accent-purple/20",children:((D=(R=e==null?void 0:e.displayName)==null?void 0:R[0])==null?void 0:D.toUpperCase())||"U"}),y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-bold text-white",children:e==null?void 0:e.displayName}),y.jsx("div",{className:"text-xs text-gray-400",children:e==null?void 0:e.email}),y.jsxs("div",{className:"text-[10px] text-green-400 mt-1 flex items-center gap-1",children:[y.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"})," Active Session"]})]})]}),y.jsx(Ft,{variant:"danger",onClick:b,className:"w-full py-2.5 rounded-xl text-sm font-semibold border border-red-500/20 hover:bg-red-500/10",children:"Sign Out"})]}),l==="custom"&&y.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Target Subjects"}),y.jsx(Ft,{variant:"success",onClick:H,className:"px-4 py-1.5 text-sm",children:"Save Subjects"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Manage the subjects for your Target cards."}),y.jsxs("div",{className:"space-y-2.5",children:[v.map((A,oe)=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsx("div",{className:"flex-1 relative",children:y.jsx("input",{type:"text",value:A,onChange:be=>de(oe,be.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all",placeholder:"Subject Name (e.g. Physics)"})}),y.jsx("button",{onClick:()=>te(oe),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},oe)),v.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No subjects defined"})]}),y.jsx(Ft,{variant:"secondary",onClick:Q,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-purple/50 hover:text-accent-purple",children:"+ Add New Subject"}),y.jsx("div",{className:"h-px bg-white/5 my-6"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Study Types"}),y.jsx(Ft,{variant:"success",onClick:re,className:"px-4 py-1.5 text-sm",children:"Save Changes"})]}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Define your custom study categories (e.g., Theory, Practical)."}),y.jsxs("div",{className:"space-y-2.5",children:[d.map(A=>y.jsxs("div",{className:"flex gap-2 group",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx("input",{type:"text",value:A.name,onChange:oe=>p(d.map(be=>be.key===A.key?{...be,name:oe.target.value}:be)),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-blue focus:ring-1 focus:ring-accent-blue transition-all",placeholder:"Type Name (e.g. Lab Work)"}),y.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-accent-blue/50"})]}),y.jsx("button",{onClick:()=>E(A.key),className:"p-2.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all border border-transparent hover:border-red-500/20",title:"Remove",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},A.key)),d.length===0&&y.jsx("div",{className:"text-center py-6 text-xs text-gray-500 bg-white/5 rounded-xl border border-dashed border-white/10",children:"No custom types yet"})]}),y.jsx(Ft,{variant:"secondary",onClick:k,className:"w-full py-2.5 text-sm border-dashed border-2 border-white/10 hover:border-accent-blue/50 hover:text-accent-blue",children:"+ Add New Study Type"})]})]}),l==="countdown"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Countdown"}),y.jsx(Ft,{variant:"success",onClick:ue,className:"px-4 py-1.5 text-sm",children:"Update"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Event Title"}),y.jsx("input",{value:T,onChange:A=>S(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Target Date"}),y.jsx("input",{type:"date",value:j,onChange:A=>U(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Time (Optional)"}),y.jsx("input",{type:"time",value:K,onChange:A=>$(A.target.value),className:"w-full px-3 py-2.5 bg-black/20 border border-white/10 rounded-lg text-sm text-white focus:border-accent-purple transition-all"})]})]})]})]}),l==="dev"&&y.jsxs("div",{className:"space-y-5 animate-fadeIn",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Developer"}),y.jsxs("div",{className:"p-6 bg-gradient-to-br from-accent-purple/20 to-accent-blue/10 border border-accent-purple/20 rounded-2xl flex flex-col items-center text-center space-y-4",children:[y.jsx("div",{className:"w-20 h-20 bg-black/40 rounded-full flex items-center justify-center text-3xl border-2 border-accent-purple shadow-[0_0_20px_rgba(168,85,247,0.4)]",children:""}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:"Adnan Shahria"}),y.jsx("p",{className:"text-sm text-accent-cyan",children:"Full Stack Developer"})]}),y.jsxs("div",{className:"flex items-center justify-center gap-4 w-full pt-2",children:[y.jsx("a",{href:"https://t.me/adnanshahria",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-[#229ED9]/20 text-[#229ED9] hover:bg-[#229ED9] hover:text-white transition-all border border-[#229ED9]/30",title:"Telegram",children:y.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}),y.jsx("a",{href:"mailto:adnanshahria2019@gmail.com",className:"flex items-center justify-center w-12 h-12 rounded-xl bg-red-500/20 text-red-500 hover:bg-red-500 hover:text-white transition-all border border-red-500/30",title:"Email",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),y.jsx("div",{className:"pt-4 text-[10px] text-gray-500 font-mono",children:"v1.0.1  StudyGoals Inc"})]})]})]})]})},G2={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},ea=({isOpen:i,onClose:e,title:t,children:r,footer:o,size:l="md"})=>{const c=J.useRef(null);return J.useEffect(()=>{const d=p=>{p.key==="Escape"&&e()};return i&&document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i,e]),i?y.jsx("div",{ref:c,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:d=>d.target===c.current&&e(),children:y.jsxs("div",{className:`
        w-full ${G2[l]} bg-bg-card border border-border rounded-xl
        shadow-2xl transform transition-all duration-300 scale-100
        max-h-[90vh] flex flex-col
      `,children:[t&&y.jsx("div",{className:"px-6 py-4 border-b border-border",children:y.jsx("h3",{className:"text-xl font-semibold text-white",children:t})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:r}),o&&y.jsx("div",{className:"px-6 py-4 border-t border-border bg-black/30",children:o})]})}):null},Po=({options:i,value:e,onChange:t,placeholder:r="Select...",className:o=""})=>{const[l,c]=J.useState(!1),d=J.useRef(null),p=i.find(v=>v.value===e);return J.useEffect(()=>{const v=x=>{d.current&&!d.current.contains(x.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),y.jsxs("div",{ref:d,className:`relative ${o}`,children:[y.jsxs("button",{type:"button",onClick:()=>c(!l),className:`
          w-full flex items-center justify-between px-3 py-2
          bg-bg-hover border border-border rounded-lg
          text-white transition-all duration-200
          ${l?"border-accent-blue ring-2 ring-accent-blue/20":"hover:border-border-light"}
        `,children:[y.jsx("span",{className:p?"text-white":"text-gray-500",children:(p==null?void 0:p.label)||r}),y.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${l?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&y.jsx("div",{className:"absolute z-50 w-full mt-1 py-1 bg-bg-card border border-border-light rounded-lg shadow-xl max-h-48 overflow-y-auto",children:i.map(v=>y.jsx("button",{type:"button",onClick:()=>{t(v.value),c(!1)},className:`
                w-full px-3 py-2 text-left transition-colors
                ${v.value===e?"bg-accent-blue text-white font-semibold":"text-white hover:bg-bg-hover"}
              `,children:v.label},v.value))})]})},Q2=({isOpen:i,onClose:e,tableId:t,date:r})=>{var A;const{settings:o,addTopic:l,tableData:c}=Ii(),[d,p]=J.useState(""),[v,x]=J.useState(""),[T,S]=J.useState(""),[j,U]=J.useState(Do[t][0]),[K,$]=J.useState("medium"),[re,H]=J.useState(((A=o.customStudyTypes[0])==null?void 0:A.key)||""),[Q,te]=J.useState("low"),de=t==="table2"?(c.targetCards||[]).find(oe=>{const be=new Date(oe.startDate),We=new Date(oe.endDate),De=new Date(r);return De>=be&&De<=We}):void 0,[ue,k]=J.useState(""),E=()=>{if(!d.trim())return;const oe={name:d.trim(),note:"",timedNote:v.trim(),estimatedTime:T.trim(),progress:0,priority:Q,hardness:K,studyStatus:re},be=l(t,r,j,oe);de&&ue&&l("table1",de.id,ue,oe,be),p(""),x(""),S(""),te("low"),k(""),e()},C=Do[t].map(oe=>({value:oe,label:oe})),R=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],D=o.customStudyTypes.map(oe=>({value:oe.key,label:oe.name}));return y.jsx(ea,{isOpen:i,onClose:e,title:"Add New Topic",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(Ft,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(Ft,{onClick:E,disabled:!d.trim(),children:"Save Topic"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:d,onChange:oe=>p(oe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"Enter topic name",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:v,onChange:oe=>x(oe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 30 min or 10:00 AM"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time (Optional)"}),y.jsx("input",{type:"text",value:T,onChange:oe=>S(oe.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:t==="table1"?"Subject":"Session"}),y.jsx(Po,{options:C,value:j,onChange:U})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Po,{options:R,value:K,onChange:$})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Po,{options:D,value:re,onChange:H})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(oe=>y.jsxs("button",{type:"button",onClick:()=>te(oe),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${Q===oe?oe==="high"?"border-accent-red bg-accent-red/20 text-white":oe==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${oe==="high"?"bg-accent-red":oe==="medium"?"bg-accent-gold":"bg-gray-500"}`}),oe.charAt(0).toUpperCase()+oe.slice(1)]},oe))})]}),de&&y.jsxs("div",{className:"pt-4 border-t border-white/10",children:[y.jsxs("label",{className:"block text-sm font-medium text-accent-purple mb-1 flex items-center gap-2",children:[y.jsx("span",{className:"animate-pulse",children:""})," Link to Target: ",de.title]}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select a subject to automatically add this task to your long-term plan."}),y.jsx(Po,{options:[{value:"",label:"Do not link"},...Do.table1.map(oe=>({value:oe,label:oe}))],value:ue,onChange:k})]})]})})},X2=({isOpen:i,onClose:e,topicId:t,onDelete:r})=>{const{completedTopics:o,settings:l,updateTopic:c}=Ii(),[d,p]=J.useState(""),[v,x]=J.useState(""),[T,S]=J.useState(""),[j,U]=J.useState(""),[K,$]=J.useState("medium"),[re,H]=J.useState(""),[Q,te]=J.useState("low");J.useEffect(()=>{if(t&&o[t]){const E=o[t];p(E.name),x(E.timedNote||""),S(E.estimatedTime||""),U(E.note||""),$(E.hardness),H(E.studyStatus),te(E.priority)}},[t,o]);const de=()=>{!t||!d.trim()||(c(t,{name:d.trim(),timedNote:v.trim(),estimatedTime:T.trim(),note:j.trim(),hardness:K,studyStatus:re,priority:Q}),e())},ue=[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],k=l.customStudyTypes.map(E=>({value:E.key,label:E.name}));return y.jsx(ea,{isOpen:i,onClose:e,title:"Edit Topic",footer:y.jsxs("div",{className:"flex justify-between",children:[y.jsx(Ft,{variant:"danger",onClick:()=>t&&r(t),children:"Delete"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(Ft,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(Ft,{variant:"success",onClick:de,children:"Save"})]})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Topic Name"}),y.jsx("input",{type:"text",value:d,onChange:E=>p(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Timed Note"}),y.jsx("input",{type:"text",value:v,onChange:E=>x(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Time"}),y.jsx("input",{type:"text",value:T,onChange:E=>S(E.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue",placeholder:"e.g., 11 am - 9 pm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),y.jsx("textarea",{value:j,onChange:E=>U(E.target.value),rows:3,className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-blue resize-none",placeholder:"Add your notes here..."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Hardness"}),y.jsx(Po,{options:ue,value:K,onChange:$})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Study Type"}),y.jsx(Po,{options:k,value:re,onChange:H})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),y.jsx("div",{className:"flex gap-2",children:["high","medium","low"].map(E=>y.jsxs("button",{type:"button",onClick:()=>te(E),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all ${Q===E?E==="high"?"border-accent-red bg-accent-red/20 text-white":E==="medium"?"border-accent-gold bg-accent-gold/20 text-white":"border-border-light bg-bg-hover text-white":"border-border text-gray-400 hover:border-border-light"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${E==="high"?"bg-accent-red":E==="medium"?"bg-accent-gold":"bg-gray-500"}`}),E.charAt(0).toUpperCase()+E.slice(1)]},E))})]})]})})},Y2=({isOpen:i,onClose:e})=>y.jsx(ea,{isOpen:i,onClose:e,size:"xl",children:y.jsx("div",{className:"h-[550px] md:h-[480px]",children:y.jsx(nw,{onLogout:e})})}),J2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Z2=["Su","Mo","Tu","We","Th","Fr","Sa"],eS=({isOpen:i,onClose:e,onSelectDate:t,existingDates:r})=>{const o=new Date,[l,c]=J.useState(o.getMonth()),[d,p]=J.useState(o.getFullYear()),v=new Date(d,l,1).getDay(),x=new Date(d,l+1,0).getDate(),T=Array.from({length:x},(H,Q)=>Q+1),S=H=>{const Q=String(H).padStart(2,"0"),te=String(l+1).padStart(2,"0");return`${Q}/${te}/${d}`},j=H=>new Date(d,l,H)<new Date(o.getFullYear(),o.getMonth(),o.getDate()),U=H=>d===o.getFullYear()&&l===o.getMonth()&&H===o.getDate(),K=H=>r.includes(S(H)),$=()=>{l===0?(c(11),p(d-1)):c(l-1)},re=()=>{l===11?(c(0),p(d+1)):c(l+1)};return y.jsxs(ea,{isOpen:i,onClose:e,size:"sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("button",{onClick:$,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),y.jsxs("span",{className:"text-lg font-semibold text-white",children:[J2[l]," ",d]}),y.jsx("button",{onClick:re,className:"p-2 hover:bg-bg-hover rounded-full text-gray-400 hover:text-white",children:y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),y.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Z2.map(H=>y.jsx("div",{className:"text-center text-xs font-semibold text-gray-500",children:H},H))}),y.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:v}).map((H,Q)=>y.jsx("div",{},`empty-${Q}`)),T.map(H=>y.jsxs("button",{disabled:j(H),onClick:()=>{t(S(H)),e()},className:`
              p-2 text-center rounded-lg transition-all relative
              ${j(H)?"text-gray-600 cursor-not-allowed":"hover:bg-bg-hover cursor-pointer"}
              ${U(H)?"border border-accent-gold text-accent-gold font-bold":"text-white"}
              ${K(H)?"border border-accent-blue shadow-glow-blue":""}
            `,children:[H,K(H)&&y.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-accent-blue rounded-full"})]},H))]}),y.jsx(Ft,{variant:"secondary",onClick:e,className:"w-full mt-4",children:"Cancel"})]})},tS=({isOpen:i,onClose:e,onConfirm:t,message:r,confirmText:o="Yes, Delete",confirmVariant:l="danger"})=>y.jsxs(ea,{isOpen:i,onClose:e,title:"Are you sure?",size:"sm",children:[y.jsx("p",{className:"text-gray-300 mb-4",children:r}),y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(Ft,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(Ft,{variant:l,onClick:()=>{t(),e()},children:o})]})]}),nS=({isOpen:i,onClose:e,cardMeta:t})=>{const{updateTargetCard:r}=Ii(),[o,l]=J.useState(""),[c,d]=J.useState(""),[p,v]=J.useState("");J.useEffect(()=>{t&&(l(t.title),d(t.startDate),v(t.endDate))},[t]);const x=()=>{!t||!o.trim()||!c||!p||(r(t.id,{title:o.trim(),startDate:c,endDate:p}),e())};return y.jsx(ea,{isOpen:i,onClose:e,title:"Edit Target",footer:y.jsxs("div",{className:"flex justify-end gap-3",children:[y.jsx(Ft,{variant:"secondary",onClick:e,children:"Cancel"}),y.jsx(Ft,{variant:"success",onClick:x,disabled:!o.trim()||!c||!p,children:"Save Changes"})]}),children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-purple"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-green"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:p,onChange:T=>v(T.target.value),className:"w-full px-3 py-2 bg-bg-hover border border-border rounded-lg text-white focus:outline-none focus:border-accent-red"})]})]}),c&&p&&y.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:y.jsxs("div",{className:"flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Duration"}),y.jsxs("span",{className:"text-accent-blue font-mono",children:[Math.ceil((new Date(p).getTime()-new Date(c).getTime())/(1e3*60*60*24))," days"]})]})})]})})},rS=i=>{const[e,t]=J.useState({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!1}),r=J.useCallback(()=>{if(!i)return;const o=`${i.targetDate}T${i.targetTime||"00:00"}`,l=new Date(o).getTime(),c=Date.now(),d=l-c;if(d<0){t({days:"00",hours:"00",minutes:"00",seconds:"00",isExpired:!0});return}const p=Math.floor(d/(1e3*60*60*24)),v=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(d%(1e3*60*60)/(1e3*60)),T=Math.floor(d%(1e3*60)/1e3);t({days:String(p).padStart(2,"0"),hours:String(v).padStart(2,"0"),minutes:String(x).padStart(2,"0"),seconds:String(T).padStart(2,"0"),isExpired:!1})},[i]);return J.useEffect(()=>{r();const o=setInterval(r,1e3);return()=>clearInterval(o)},[r]),e},sS=()=>{var ft;const{user:i,logout:e}=Ll(),{tableData:t,completedTopics:r,addCard:o,deleteCard:l,deleteTopic:c,updateTableData:d,addTargetCard:p,deleteTargetCard:v,settings:x}=Ii(),{days:T}=rS(x.countdownSettings),[S,j]=J.useState("table1"),[U,K]=J.useState("dashboard"),[$,re]=J.useState(!1),[H,Q]=J.useState(!1),[te,de]=J.useState(!1),[ue,k]=J.useState(null),[E,b]=J.useState(null),[C,R]=J.useState(null),[D,A]=J.useState(null),[oe,be]=J.useState(""),[We,De]=J.useState(""),[se,we]=J.useState(""),{totalMarksAchieved:le,totalMarksPossible:O}=J.useMemo(()=>{let Ee=0,Le=0;const Fe=new Set;return(t.targetCards||[]).forEach(Gt=>{const Bt=t.table1[Gt.id]||{};Object.values(Bt||{}).forEach(En=>{Array.isArray(En)&&En.forEach(yr=>Fe.add(yr))})}),Object.values(t.table2).forEach(Gt=>{Object.values(Gt).forEach(Bt=>{Array.isArray(Bt)&&Bt.forEach(En=>Fe.add(En))})}),Fe.forEach(Gt=>{const Bt=r[Gt];Bt&&(Le+=1,Bt.progress===100&&(Ee+=1))}),{totalMarksAchieved:Ee,totalMarksPossible:Le}},[t,r]),W=J.useMemo(()=>Object.keys(t.table2).sort((Ee,Le)=>{const[Fe,Gt,Bt]=Ee.split("/").map(Number),[En,yr,Si]=Le.split("/").map(Number);return new Date(Bt,Gt-1,Fe).getTime()-new Date(Si,yr-1,En).getTime()}),[t.table2]),ve=J.useMemo(()=>W.filter(Ee=>{const Le=t.table2[Ee];return Le?Object.values(Le).some(Fe=>Array.isArray(Fe)&&Fe.length>0):!1}),[W,t.table2]),Pe=J.useMemo(()=>(t.targetCards||[]).filter(Ee=>Ee&&typeof Ee.id=="string"&&typeof Ee.title=="string").sort((Ee,Le)=>new Date(Ee.endDate).getTime()-new Date(Le.endDate).getTime()),[t.targetCards]),ke=J.useMemo(()=>Object.keys(t.table1).concat(Object.keys(t.table2)),[t]),Ve=Ee=>{o("table2",Ee)},Me=(Ee,Le)=>{const Fe=JSON.parse(JSON.stringify(t));Fe[S][Le]=Fe[S][Ee],delete Fe[S][Ee],d(Fe)},$e=Ee=>{c(Ee),b(null)},Xe=()=>{!oe.trim()||!We||!se||(p(oe.trim(),We,se),be(""),De(""),we(""),de(!1))};return y.jsxs("div",{className:"min-h-screen bg-bg-dark text-white font-sans selection:bg-accent-purple/30 pb-24 md:pb-0",children:[y.jsx("div",{className:`md:hidden p-4 flex justify-between items-center sticky top-0 z-40 bg-bg-dark/80 backdrop-blur-md border-b border-white/5 ${U!=="dashboard"?"hidden":""}`,children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-xl flex items-center justify-center shadow-lg shadow-accent-purple/20",children:y.jsx("span",{className:"text-xl",children:""})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:"StudyGoals"}),y.jsxs("p",{className:"text-xs text-gray-400",children:["Welcome back, ",(ft=i==null?void 0:i.displayName)==null?void 0:ft.split(" ")[0]]})]})]})}),y.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8 md:h-screen md:overflow-hidden flex flex-col",children:[y.jsxs("div",{className:"hidden md:flex flex-col h-full gap-6",children:[y.jsxs("div",{className:"flex items-center justify-between bg-bg-card border border-border rounded-2xl p-6 shadow-2xl relative overflow-hidden group",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-purple/5 to-accent-blue/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsxs("div",{className:"flex items-center gap-6 relative z-10 w-full",children:[y.jsxs("div",{className:"flex items-center gap-8 bg-bg-card/80 border border-accent-purple/30 shadow-[0_0_15px_-5px_rgba(168,85,247,0.25)] rounded-2xl p-3 pr-6 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-14 h-14 bg-gradient-to-tr from-accent-purple to-accent-blue rounded-2xl flex items-center justify-center text-3xl shadow-lg shadow-accent-purple/20 animate-float",children:""}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"StudyGoals"}),y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),y.jsx("span",{children:"Ready to focus"})]})]})]}),y.jsx("div",{className:"h-10 w-px bg-white/10"}),y.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 border border-accent-purple/30 shadow-[0_0_10px_-3px_rgba(168,85,247,0.2)]",children:[y.jsx("button",{onClick:()=>j("table1"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table1"?"bg-accent-purple text-white shadow-lg shadow-accent-purple/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Target Plan"}),y.jsx("button",{onClick:()=>j("table2"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ${S==="table2"?"bg-accent-cyan text-black shadow-lg shadow-accent-cyan/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Daily Plan"})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-green/30 shadow-[0_0_15px_-3px_rgba(16,185,129,0.2)] rounded-2xl p-3 hover:border-accent-green/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-green/10 rounded-xl text-accent-green",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})})}),y.jsxs("div",{className:"flex flex-col justify-center h-full",children:[y.jsx("span",{className:"text-xs text-gray-400",children:"Tasks Done"}),y.jsxs("span",{className:"font-mono font-bold text-accent-green text-lg leading-none",children:[le,"/",O]})]})]}),y.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-bg-card/50 border border-accent-blue/30 shadow-[0_0_20px_-5px_rgba(59,130,246,0.25)] rounded-2xl p-3 hover:border-accent-blue/50 transition-colors",children:[y.jsx("div",{className:"p-3 bg-accent-blue/10 rounded-xl text-accent-blue",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-baseline gap-1",children:[y.jsx("span",{className:"text-2xl font-bold text-white tabular-nums",children:T}),y.jsx("span",{className:"text-sm text-gray-500",children:"days left"})]})]})]}),y.jsx("button",{onClick:()=>re(!0),className:"p-4 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 transition-all hover:scale-105 active:scale-95 group/settings",children:y.jsxs("svg",{className:"w-6 h-6 text-gray-400 group-hover/settings:text-white group-hover/settings:rotate-90 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),y.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-6 min-h-0",children:[y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table1"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-purple/20 rounded-lg text-accent-purple",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Long Term Targets"})]}),y.jsx("button",{onClick:()=>de(!0),className:"px-4 py-2 bg-accent-purple hover:bg-accent-purple/80 text-white rounded-xl text-sm font-semibold shadow-lg shadow-accent-purple/25 transition-all hover:-translate-y-0.5",children:"+ Create Target"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:Pe.length>0?Pe.map(Ee=>y.jsx(hv,{cardMeta:Ee,dateData:t.table1[Ee.id]||{},completedTopics:r,onAddTopic:(Le,Fe)=>k({tableId:Le,cardId:Fe}),onEditTopic:b,onEditCard:R,onDeleteCard:Le=>A({tableId:"table1",cardId:"new",targetCardId:Le})},Ee.id)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[y.jsx("span",{className:"text-4xl mb-4 opacity-50",children:""}),y.jsx("p",{children:"No targets set yet"})]})})]}),y.jsxs("div",{className:`flex flex-col bg-bg-card/30 border border-white/5 rounded-3xl overflow-hidden transition-all duration-500 ${S==="table2"?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[y.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 backdrop-blur-sm flex justify-between items-center sticky top-0 z-10",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-accent-cyan/20 rounded-lg text-accent-cyan",children:""}),y.jsx("h2",{className:"text-lg font-bold",children:"Daily Plan"})]}),y.jsx("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-accent-cyan hover:bg-accent-cyan/80 text-black rounded-xl text-sm font-semibold shadow-lg shadow-accent-cyan/25 transition-all hover:-translate-y-0.5",children:"+ New Day"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:W.length>0?W.map(Ee=>y.jsx(cv,{tableId:"table2",date:Ee,dateData:t.table2[Ee],completedTopics:r,onAddTopic:(Le,Fe)=>k({tableId:Le,cardId:Fe}),onEditTopic:b,onDeleteCard:(Le,Fe)=>A({tableId:Le,cardId:Fe}),onDateChange:Me},Ee)):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-4",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center",children:""}),y.jsx("p",{children:"No daily plans yet"}),y.jsx("button",{onClick:()=>Q(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400 hover:text-accent-cyan hover:border-accent-cyan hover:bg-accent-cyan/5 transition-all",children:"+ Start Today"})]})})]})]})]}),y.jsxs("div",{className:"md:hidden space-y-4",children:[U==="dashboard"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[y.jsxs("div",{className:"bg-gradient-to-br from-gray-900/50 to-slate-900/50 border border-gray-800 rounded-2xl p-5 shadow-xl relative overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400 font-medium mb-1",children:"Total Progress"}),y.jsxs("h3",{className:"text-3xl font-bold text-white tracking-tight",children:[le,y.jsxs("span",{className:"text-lg text-gray-500 font-normal",children:["/",O]})]})]}),y.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl text-emerald-400 border border-emerald-500/20",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),y.jsxs("div",{className:"relative pt-2",children:[y.jsx("div",{className:"h-3 bg-gray-700/30 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.3)] transition-all duration-1000 ease-out",style:{width:`${le/O*100}%`}})}),y.jsxs("p",{className:"text-right text-xs text-emerald-400 mt-2 font-mono",children:[Math.round(le/O*100),"% Complete"]})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-slate-900/50 to-purple-900/30 border border-blue-500/20 rounded-2xl p-5 shadow-lg relative",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-blue-400",children:y.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),y.jsx("p",{className:"text-sm text-blue-300 font-medium mb-1 uppercase tracking-wider",children:x.countdownSettings.title}),y.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[y.jsx("span",{className:"text-5xl font-bold text-white tracking-tighter tabular-nums drop-shadow-glow",children:T}),y.jsx("span",{className:"text-lg text-blue-200/80 mb-2 font-medium",children:"days remaining"})]}),y.jsx("div",{className:"mt-4 flex gap-2",children:y.jsxs("div",{className:"flex-1 bg-black/20 rounded-lg p-2 text-center border border-white/5",children:[y.jsx("div",{className:"text-xs text-gray-400",children:"Target"}),y.jsx("div",{className:"text-sm font-mono text-blue-300",children:x.countdownSettings.targetDate})]})})]})]}),U==="targets"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Targets"}),y.jsx("button",{onClick:()=>de(!0),className:"p-2 bg-accent-purple/20 text-accent-purple rounded-lg border border-accent-purple/30",children:"+ New"})]}),Pe.length>0?Pe.map(Ee=>y.jsx(hv,{cardMeta:Ee,dateData:t.table1[Ee.id]||{},completedTopics:r,onAddTopic:(Le,Fe)=>k({tableId:Le,cardId:Fe}),onEditTopic:b,onEditCard:R,onDeleteCard:Le=>A({tableId:"table1",cardId:"new",targetCardId:Le})},Ee.id)):y.jsx("div",{className:"text-center py-10 text-gray-500",children:"No targets yet"})]}),U==="daily"&&y.jsxs("div",{className:"space-y-4 animate-fadeIn pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h2",{className:"text-xl font-bold text-white",children:"Daily Plan"}),y.jsx("button",{onClick:()=>Q(!0),className:"p-2 bg-accent-cyan/20 text-accent-cyan rounded-lg border border-accent-cyan/30",children:"+ Day"})]}),ve.length>0?ve.map(Ee=>y.jsx(cv,{tableId:"table2",date:Ee,dateData:t.table2[Ee],completedTopics:r,onAddTopic:(Le,Fe)=>k({tableId:Le,cardId:Fe}),onEditTopic:b,onDeleteCard:(Le,Fe)=>A({tableId:Le,cardId:Fe}),onDateChange:Me},Ee)):y.jsxs("div",{className:"text-center py-10",children:[y.jsx("p",{className:"text-gray-500 mb-4",children:"No days added"}),y.jsx("button",{onClick:()=>Q(!0),className:"px-6 py-3 border-2 border-dashed border-white/20 rounded-xl text-gray-400",children:"+ Start Today"})]})]}),U==="settings"&&y.jsx("div",{className:"animate-fadeIn pb-20",children:y.jsx(nw,{onLogout:e})})]})]}),y.jsx(H2,{activeTab:U,onTabChange:K}),y.jsx(Y2,{isOpen:$,onClose:()=>re(!1)}),y.jsx(eS,{isOpen:H,onClose:()=>Q(!1),onSelectDate:Ve,existingDates:ke}),ue&&y.jsx(Q2,{isOpen:!0,onClose:()=>k(null),tableId:ue.tableId,date:ue.cardId}),y.jsx(X2,{isOpen:!!E,onClose:()=>b(null),topicId:E,onDelete:$e}),y.jsx(nS,{isOpen:!!C,onClose:()=>R(null),cardMeta:C}),y.jsx(tS,{isOpen:!!D,onClose:()=>A(null),onConfirm:()=>{D&&(D.targetCardId?v(D.targetCardId):l(D.tableId,D.cardId)),A(null)},message:"This will delete the card and all its topics. Continue?"}),te&&y.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>de(!1),children:y.jsxs("div",{className:"glass-card rounded-2xl p-6 max-w-md w-full animate-slideUp",onClick:Ee=>Ee.stopPropagation(),children:[y.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[y.jsx("span",{className:"text-2xl",children:""})," Create New Target"]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Target Title"}),y.jsx("input",{type:"text",value:oe,onChange:Ee=>be(Ee.target.value),placeholder:"e.g., Complete Physics Syllabus",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-all"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Start Date"}),y.jsx("input",{type:"date",value:We,onChange:Ee=>De(Ee.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-green focus:ring-1 focus:ring-accent-green transition-all"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"End Date"}),y.jsx("input",{type:"date",value:se,onChange:Ee=>we(Ee.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-accent-red focus:ring-1 focus:ring-accent-red transition-all"})]})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx("button",{onClick:()=>de(!1),className:"flex-1 py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),y.jsx("button",{onClick:Xe,disabled:!oe.trim()||!We||!se,className:"flex-1 py-3 bg-gradient-to-r from-accent-blue to-accent-purple text-white rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-all",children:"Create Target"})]})]})})]})},iS={success:"bg-accent-green text-white border-green-600",error:"bg-accent-red text-white border-red-600",info:"bg-bg-card text-white border-border-light",syncing:"bg-white text-gray-900 border-gray-300"},dv=()=>{const{toasts:i,removeToast:e}=ew();return i.length===0?null:y.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:i.map(t=>y.jsxs("div",{className:`
            flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg
            animate-slideUp cursor-pointer transition-transform hover:scale-105
            ${iS[t.type]}
          `,onClick:()=>e(t.id),children:[t.type==="syncing"&&y.jsx("span",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}),t.type==="success"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.type==="error"&&y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),y.jsx("span",{className:"font-semibold",children:t.message})]},t.id))})},oS=()=>{const{user:i,isLoading:e}=Ll();return e?y.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx("div",{className:"w-10 h-10 border-4 border-accent-blue border-t-transparent rounded-full animate-spin"}),y.jsx("span",{className:"text-gray-400 font-semibold",children:"Loading..."})]})}):i?y.jsxs(W2,{children:[y.jsx(sS,{}),y.jsx(dv,{})]}):y.jsxs(y.Fragment,{children:[y.jsx(L2,{}),y.jsx(dv,{})]})},aS="modulepreload",lS=function(i){return"/studygoals/"+i},fv={},uS=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let c=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(v=>{if(v=lS(v),v in fv)return;fv[v]=!0;const x=v.endsWith(".css"),T=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":aS,x||(S.as="script"),S.crossOrigin="",S.href=v,p&&S.setAttribute("nonce",p),document.head.appendChild(S),x)return new Promise((j,U)=>{S.addEventListener("load",j),S.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};function cS(i={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i;let d,p,v;const x=async(S=!0)=>{await p,v==null||v()};async function T(){if("serviceWorker"in navigator){if(d=await uS(async()=>{const{Workbox:S}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:S}},[]).then(({Workbox:S})=>new S("/studygoals/sw.js",{scope:"/studygoals/",type:"classic"})).catch(S=>{c==null||c(S)}),!d)return;v=()=>{d==null||d.messageSkipWaiting()};{let S=!1;const j=()=>{S=!0,d==null||d.addEventListener("controlling",U=>{U.isUpdate&&window.location.reload()}),t==null||t()};d.addEventListener("installed",U=>{typeof U.isUpdate>"u"?typeof U.isExternal<"u"&&U.isExternal?j():!S&&(r==null||r()):U.isUpdate||r==null||r()}),d.addEventListener("waiting",j)}d.register({immediate:e}).then(S=>{l?l("/studygoals/sw.js",S):o==null||o(S)}).catch(S=>{c==null||c(S)})}}return p=T(),x}function hS(i={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:r,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=i,[d,p]=J.useState(!1),[v,x]=J.useState(!1),[T]=J.useState(()=>cS({immediate:e,onOfflineReady(){x(!0),r==null||r()},onNeedRefresh(){p(!0),t==null||t()},onRegistered:o,onRegisteredSW:l,onRegisterError:c}));return{needRefresh:[d,p],offlineReady:[v,x],updateServiceWorker:T}}const dS=()=>{const{offlineReady:[i,e],needRefresh:[t,r],updateServiceWorker:o}=hS({onRegistered(c){console.log("SW Registered: "+c)},onRegisterError(c){console.log("SW registration error",c)}}),l=()=>{e(!1),r(!1)};return!i&&!t?null:y.jsxs("div",{className:"fixed bottom-4 right-4 z-50 p-4 rounded-xl bg-gray-900/95 border border-white/10 shadow-2xl backdrop-blur-md max-w-[300px] animate-slide-in",children:[y.jsxs("div",{className:"mb-3",children:[y.jsx("h3",{className:"font-semibold text-white text-sm",children:i?"App ready to work offline":"New version available!"}),y.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i?"You can use this app without internet.":"Click reload to update to the latest version."})]}),y.jsxs("div",{className:"flex gap-2",children:[t&&y.jsx("button",{className:"flex-1 px-3 py-1.5 bg-accent-green text-black text-xs font-bold rounded-lg hover:bg-accent-green/90 transition-colors",onClick:()=>o(!0),children:"Reload"}),y.jsx("button",{className:"flex-1 px-3 py-1.5 border border-white/10 text-white text-xs font-medium rounded-lg hover:bg-white/5 transition-colors",onClick:l,children:"Dismiss"})]})]})};console.log(" Loaded StudyGoals Version: 1.2 (PWA Updates + Progress Bar Removed)");mx.createRoot(document.getElementById("root")).render(y.jsx(ux.StrictMode,{children:y.jsx(K2,{children:y.jsxs(M2,{children:[y.jsx(oS,{}),y.jsx(dS,{})]})})}));
